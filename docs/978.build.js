"use strict";(self.webpackChunkquetzal_network_editor=self.webpackChunkquetzal_network_editor||[]).push([[978],{88852:(t,e,n)=>{n.d(e,{Z:()=>i});var a=n(87537),r=n.n(a),s=n(23645),o=n.n(s)()(r());o.push([t.id,".layout[data-v-9938dbf2]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-9938dbf2]{height:100%;width:100%;background-color:rgba(0,0,0,.5);position:absolute}.subtitle[data-v-9938dbf2]{font-size:2em;color:var(--v-secondary-dark);font-weight:bold;margin:10px;margin-left:0px}.title[data-v-9938dbf2]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:3.5em;color:#b5e0d6 !important;font-weight:bold}.v-card__text[data-v-9938dbf2]{max-height:80%;overflow-y:auto}.v-form[data-v-9938dbf2]{max-height:80%}.categorie[data-v-9938dbf2]{font-size:1.5em;font-weight:bold;background:var(--v-background-lighten3)}","",{version:3,sources:["webpack://./src/components/run/ParamForm.vue"],names:[],mappings:"AAEA,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,+BAAA,CACA,iBAAA,CAEF,2BACE,aAAA,CACA,6BAAA,CACA,gBAAA,CACA,WAAA,CACA,eAAA,CAEF,wBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,wBAAA,CACA,gBAAA,CAEF,+BACE,cAAA,CACA,eAAA,CAEF,yBACE,cAAA,CAEF,4BACE,eAAA,CACA,gBAAA,CACA,uCAAA",sourcesContent:['@import "@scss/variables.scss";\n\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: absolute;\n}\n.subtitle {\n  font-size: 2em;\n  color:var(--v-secondary-dark);\n  font-weight: bold;\n  margin: 10px;\n  margin-left: 0px;\n}\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 3.5em;\n  color: $primary !important;\n  font-weight: bold;\n}\n.v-card__text {\n  max-height: 80%;\n  overflow-y: auto;\n}\n.v-form {\n  max-height: 80%;\n}\n.categorie {\n  font-size: 1.5em;\n  font-weight: bold;\n  background:var(--v-background-lighten3);\n}\n\n'],sourceRoot:""}]);const i=o},76588:(t,e,n)=>{n.d(e,{Z:()=>i});var a=n(87537),r=n.n(a),s=n(23645),o=n.n(s)()(r());o.push([t.id,".container[data-v-cf48fa5a]{width:100%;overflow:hidden;margin-left:0 auto;margin-right:0 auto;padding:0 0 0 0}.layout[data-v-cf48fa5a]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-cf48fa5a]{height:100%;width:100%;background-color:rgba(0,0,0,.5);position:absolute}.card[data-v-cf48fa5a]{height:100%;overflow-y:auto;padding:40px}.v-card__text[data-v-cf48fa5a]{max-height:80%;overflow-y:auto}.row[data-v-cf48fa5a]{height:calc(100% - 38px)}.col[data-v-cf48fa5a]{max-height:100%}.title[data-v-cf48fa5a]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:3.5em;color:#b5e0d6 !important;font-weight:bold}.subtitle[data-v-cf48fa5a]{font-size:2em;color:var(--v-secondary-dark);font-weight:bold;margin:10px;margin-left:0px}.card button[data-v-cf48fa5a]{margin-top:0px}.v-stepper__content[data-v-cf48fa5a]{border-left:4px solid rgba(0,0,0,.12)}.v-sheet.v-stepper[data-v-cf48fa5a]:not(.v-sheet--outlined){box-shadow:none}.background[data-v-cf48fa5a]{background-color:var(--v-background-base)}","",{version:3,sources:["webpack://./src/pages/Run.vue"],names:[],mappings:"AAEA,4BACE,UAAA,CACA,eAAA,CACA,kBAAA,CACA,mBAAA,CACA,eAAA,CAEF,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,+BAAA,CACA,iBAAA,CAEF,uBACE,WAAA,CACA,eAAA,CACA,YAAA,CAGF,+BACE,cAAA,CACA,eAAA,CAEF,sBACE,wBAAA,CAEF,sBACE,eAAA,CAEF,wBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,wBAAA,CACA,gBAAA,CAEF,2BACE,aAAA,CACA,6BAAA,CACA,gBAAA,CACA,WAAA,CACA,eAAA,CAEF,8BACE,cAAA,CAEF,qCACE,qCAAA,CAEF,4DACE,eAAA,CAEF,6BACE,yCAAA",sourcesContent:['@import "@scss/variables.scss";\n\n.container {\n  width: 100%;\n  overflow: hidden;\n  margin-left: 0 auto;\n  margin-right: 0 auto;\n  padding: 0 0 0 0;\n}\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: absolute;\n}\n.card {\n  height: 100%;\n  overflow-y: auto;\n  padding: 40px;\n}\n\n.v-card__text {\n  max-height: 80%;\n  overflow-y: auto;\n}\n.row {\n  height: calc(100% - 38px)\n}\n.col {\n  max-height: 100%;\n}\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 3.5em;\n  color: $primary !important;\n  font-weight: bold;\n}\n.subtitle {\n  font-size: 2em;\n  color:var(--v-secondary-dark);\n  font-weight: bold;\n  margin: 10px;\n  margin-left: 0px;\n}\n.card button {\n  margin-top: 0px;\n}\n.v-stepper__content {\n  border-left: 4px solid rgba(0,0,0,.12);\n}\n.v-sheet.v-stepper:not(.v-sheet--outlined) {\n  box-shadow: none;\n}\n.background {\n  background-color:var(--v-background-base);\n}\n'],sourceRoot:""}]);const i=o},9978:(t,e,n)=>{n.r(e),n.d(e,{default:()=>w});var a=function(){var t=this,e=t._self._c;return e("v-row",{staticClass:"ma-0 pa-2 background"},[e("v-col",{attrs:{order:"1"}},[e("ParamForm")],1),t._v(" "),e("v-col",{attrs:{order:"2"}},[e("v-card",{staticClass:"card"},[e("v-card-title",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.$gettext("Scenario Simulation"))+"\n      ")]),t._v(" "),e("v-stepper",{staticStyle:{"background-color":"var(--v-background-lighten4)"},attrs:{vertical:""},model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}},[t.avalaibleStepFunctions.length>1?e("v-tabs",{attrs:{"show-arrows":"","fixed-tabs":""},model:{value:t.stepFunction,callback:function(e){t.stepFunction=e},expression:"stepFunction"}},t._l(t.avalaibleStepFunctions,(function(n){return e("v-tab",{key:n,attrs:{disabled:t.running||!t.modelIsLoaded}},[t._v("\n            "+t._s(n)+"\n          ")])})),1):t._e(),t._v(" "),t.synchronized?t._e():e("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"warning"}},[t._v("\n          "+t._s(t.$gettext("Results are not synchronized with latest modifications.           Please relauch simulation to update results."))+"\n        ")]),t._v(" "),t.error?e("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"error"}},[t._v("\n          "+t._s(t.$gettext("Simulation ended with an execution error or have been aborted.           Please relauch simulation. If the problem persist, contact us."))+"\n          "),t._l(Object.keys(t.errorMessage),(function(n){return e("p",{key:n},[e("b",[t._v(t._s(n)+": ")]),t._v(t._s(t.errorMessage[n])+"\n          ")])}))],2):t._e(),t._v(" "),t.isProtected?e("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"error"}},[t._v("\n          "+t._s(t.$gettext("This scenario is protected. You can not run simulation."))+"\n        ")]):t._e(),t._v(" "),e("v-btn",{attrs:{loading:t.running,disabled:t.running||t.isProtected||!t.modelIsLoaded,color:"success"},on:{click:function(e){return t.run()}}},[e("v-icon",{staticStyle:{"margin-right":"10px"},attrs:{small:""}},[t._v("\n            fa-solid fa-play\n          ")]),t._v("\n          "+t._s(t.$gettext("Run Simulation"))+"\n        ")],1),t._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.running&&1!==t.currentStep,expression:"running && currentStep!==1"}],attrs:{color:"grey",text:""},on:{click:function(e){return t.stopRun()}}},[t._v("\n          "+t._s(t.$gettext("Abort Simulation"))+"\n        ")]),t._v(" "),t.modelIsLoaded?e("div",t._l(t.steps,(function(n,a){return e("v-container",{key:a+1},[e("v-stepper-content",{attrs:{step:a+1}}),t._v(" "),e("v-stepper-step",{attrs:{complete:t.currentStep>a+1,step:a+1,rules:[()=>!(a+1==t.currentStep&&t.error)]}},[t._v("\n              "+t._s(n.name)+"\n            ")])],1)})),1):t._e()],1)],1)],1)],1)};a._withStripped=!0;var r=function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"card"},[e("v-card-title",{staticClass:"subtitle"},[t._v("\n    "+t._s(t.$gettext("Scenario Settings"))+"\n  ")]),t._v(" "),t.info?e("v-card-text",[t._v("\n    "+t._s(t.info)+"\n  ")]):t._e(),t._v(" "),e("v-card-text",[e("v-form",{ref:"form",attrs:{"lazy-validation":""}},[e("v-expansion-panels",{attrs:{multiple:""},model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},t._l(t.parameters,(function(n,a){return e("v-expansion-panel",{key:a},[e("v-expansion-panel-header",{staticClass:"categorie"},[t._v("\n            "+t._s(n.category)+"\n          ")]),t._v(" "),e("v-expansion-panel-content",{staticStyle:{"background-color":"var(--v-background-lighten4) !important"}},t._l(n.params,(function(n,a){return e("li",{key:a},[void 0===n.items&&"boolean"!=typeof n.value?e("v-text-field",{attrs:{type:n.type,label:t.$gettext(n.text),suffix:n.units,hint:t.showHint?t.$gettext(n.hint):"","persistent-hint":t.showHint,rules:n.rules.map((e=>t.rules[e]))},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}}):void 0===n.items&&"boolean"==typeof n.value?e("v-switch",{attrs:{label:t.$gettext(n.text),hint:t.showHint?t.$gettext(n.hint):"","persistent-hint":t.showHint},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}}):"$scenarios"===n.items?e("v-select",{attrs:{type:n.type,items:t.$store.getters.scenariosList.map((t=>t.scenario)).filter((e=>e!==t.$store.getters.scenario)),multiple:"",label:t.$gettext(n.text),suffix:n.units,hint:t.showHint?t.$gettext(n.hint):"","persistent-hint":t.showHint,rules:n.rules.map((e=>t.rules[e]))},on:{change:function(e){return t.removeDeletedScenarios(n)}},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}}):e("v-select",{attrs:{type:n.type,items:n.items,label:t.$gettext(n.text),suffix:n.units,hint:t.showHint?t.$gettext(n.hint):"","persistent-hint":t.showHint,rules:n.rules.map((e=>t.rules[e]))},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}})],1)})),0)],1)})),1)],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"grey",text:""},on:{click:t.reset}},[t._v("\n      "+t._s(t.$gettext("back to default"))+"\n    ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.expandAll}},[t._v("\n      "+t._s(t.panel.length!=t.parameters.length?t.$gettext("Expand all"):t.$gettext("Collapse all"))+"\n    ")]),t._v(" "),e("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.showHint=!t.showHint}}},[e("v-icon",[t._v("far fa-question-circle small")])],1)],1)],1)};r._withStripped=!0;const s={name:"Settings",data:()=>({rules:{required:t=>null!=t||"Required",largerThanZero:t=>t>0||"should be larger than 0",nonNegative:t=>t>=0||"should be larger or equal to 0"},errorMessage:null,showHint:!1,panel:[]}),computed:{paramsBrute(){return this.$store.getters["run/parameters"]},parameters(){return this.paramsBrute.filter((t=>Object.keys(t).includes("category")&&t.model===this.selectedStepFunction))},info(){return this.paramsBrute.filter((t=>(t?.info&&t?.model)===this.selectedStepFunction))[0]?.info},selectedStepFunction(){return this.$store.getters["run/selectedStepFunction"]}},mounted(){this.panel=[...Array(this.parameters.length).keys()].map(((t,e)=>e))},methods:{expandAll(){this.panel.length<this.parameters.length?this.panel=[...Array(this.parameters.length).keys()].map(((t,e)=>e)):this.panel=[]},reset(){this.$store.dispatch("run/getParameters",{model:this.$store.getters.model,path:this.$store.getters.scenario+"/inputs/params.json"})},removeDeletedScenarios(t){const e=this.$store.getters.scenariosList.map((t=>t.scenario));t.value=t.value.filter((t=>e.includes(t)))}}};var o=n(93379),i=n.n(o),l=n(7795),A=n.n(l),c=n(90569),u=n.n(c),d=n(3565),p=n.n(d),h=n(19216),v=n.n(h),g=n(44589),m=n.n(g),f=n(88852),C={};C.styleTagTransform=m(),C.setAttributes=p(),C.insert=u().bind(null,"head"),C.domAPI=A(),C.insertStyleElement=v(),i()(f.Z,C),f.Z&&f.Z.locals&&f.Z.locals;var b=n(51900);const x={name:"Run",components:{ParamForm:(0,b.Z)(s,r,[],!1,null,"9938dbf2",null).exports},data:()=>({stepFunction:null}),computed:{steps(){return this.$store.getters["run/steps"]},avalaibleStepFunctions(){const t=this.$store.getters["run/availableModels"];return this.$store.getters["run/avalaibleStepFunctions"].filter((e=>t.has(e)))},selectedStepFunction(){return this.$store.getters["run/selectedStepFunction"]},running(){return this.$store.getters["run/running"]},currentStep(){return this.$store.getters["run/currentStep"]},error(){return this.$store.getters["run/error"]},errorMessage(){return this.$store.getters["run/errorMessage"]},synchronized(){return this.$store.getters["run/synchronized"]},isProtected(){return this.$store.getters.protected},modelIsLoaded(){return null!==this.$store.getters.model}},watch:{async stepFunction(t,e){t<0?(this.$store.commit("run/setSelectedStepFunction",this.avalaibleStepFunctions[0]),this.$store.dispatch("run/getSteps")):null!==e&&(this.$store.commit("run/setSelectedStepFunction",this.avalaibleStepFunctions[t]),this.$store.dispatch("run/getSteps"))}},async created(){this.modelIsLoaded&&(await this.$store.dispatch("run/getSteps"),this.stepFunction=this.avalaibleStepFunctions.indexOf(this.selectedStepFunction))},methods:{async run(){try{this.$store.commit("run/startExecution"),await this.$store.dispatch("exportToS3","inputs"),await this.$store.dispatch("deleteOutputsOnS3"),this.$store.dispatch("run/startExecution",{scenario:this.$store.getters.scenario})}catch(t){this.$store.commit("run/terminateExecution"),this.$store.commit("changeAlert",t)}},stopRun(){this.$store.dispatch("run/stopExecution")}}};var y=n(76588),_={};_.styleTagTransform=m(),_.setAttributes=p(),_.insert=u().bind(null,"head"),_.domAPI=A(),_.insertStyleElement=v(),i()(y.Z,_),y.Z&&y.Z.locals&&y.Z.locals;const w=(0,b.Z)(x,a,[],!1,null,"cf48fa5a",null).exports}}]);
//# sourceMappingURL=978.build.js.map