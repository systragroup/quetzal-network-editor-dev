import{bb as B,bc as A,bd as _e,be as de,bf as it,bg as ot,bh as at,bi as Ne,bj as W,bk as ct,bl as Oe,bm as Me,bn as dt,bo as ut,bp as lt,bq as pt,br as ht,bs as yt,bt as mt,bu as ft,bv as gt,bw as wt,bx as Et,by as St,bz as Rt,bA as bt,bB as Ct,bC as g,bD as $e,bE as xt,bF as z,bG as vt,bH as At,bI as Tt,bJ as Le,bK as Ue}from"./index-CGhytQ6I.js";const p=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(p);if(typeof e=="object"){const t={};for(const s of Object.keys(e))e[s]!=null&&(t[s]=p(e[s]));return t}return e},ue=e=>{var t,s;return B.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((s=e.headers)==null?void 0:s.Date):void 0},Fe=e=>new Date(Date.now()+e),It=(e,t)=>Math.abs(Fe(t).getTime()-e)>=3e5,le=(e,t)=>{const s=Date.parse(e);return It(s,t)?s-Date.now():t},O=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Pt=async e=>{var d,c,u;const t=O("context",e.context),s=O("config",e.config),n=(u=(c=(d=t.endpointV2)==null?void 0:d.properties)==null?void 0:c.authSchemes)==null?void 0:u[0],o=await O("signer",s.signer)(n),i=e==null?void 0:e.signingRegion,a=e==null?void 0:e.signingName;return{config:s,signer:o,signingRegion:i,signingName:a}};class kt{async sign(t,s,n){if(!A.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:r,signer:o,signingRegion:i,signingName:a}=await Pt(n);return await o.sign(t,{signingDate:Fe(r.systemClockOffset),signingRegion:i,signingService:a})}errorHandler(t){return s=>{const n=s.ServerTime??ue(s.$response);if(n){const r=O("config",t.config),o=r.systemClockOffset;r.systemClockOffset=le(n,r.systemClockOffset),r.systemClockOffset!==o&&s.$metadata&&(s.$metadata.clockSkewCorrected=!0)}throw s}}successHandler(t,s){const n=ue(t);if(n){const r=O("config",s.config);r.systemClockOffset=le(n,r.systemClockOffset)}}}const Dt=e=>t=>{throw t},_t=(e,t)=>{},Nt=e=>(t,s)=>async n=>{if(!A.isInstance(n.request))return t(n);const o=_e(s).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:i={}},identity:a,signer:d}=o,c=await t({...n,request:await d.sign(n.request,a,i)}).catch((d.errorHandler||Dt)(i));return(d.successHandler||_t)(c.response,i),c},Ot={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Mt={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:Ot.name},$t=e=>({applyToStack:t=>{t.addRelativeTo(Nt(),Mt)}});class Lt{constructor(t){this.authSchemes=new Map;for(const[s,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(s,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}class Ut{async sign(t,s,n){return t}}const Ft=e=>t=>He(t)&&t.expiration.getTime()-Date.now()<e,Ht=3e5,zt=Ft(Ht),He=e=>e.expiration!==void 0,Bt=(e,t,s)=>{if(e===void 0)return;const n=typeof e!="function"?async()=>Promise.resolve(e):e;let r,o,i,a=!1;const d=async c=>{o||(o=n(c));try{r=await o,i=!0,a=!1}finally{o=void 0}return r};return t===void 0?async c=>((!i||c!=null&&c.forceRefresh)&&(r=await d(c)),r):async c=>((!i||c!=null&&c.forceRefresh)&&(r=await d(c)),a?r:s(r)?(t(r)&&await d(c),r):(a=!0,r))},U=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},qt=e=>{let t;e.credentials&&(t=Bt(e.credentials,zt,He)),t||(e.credentialDefaultProvider?t=U(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):t=async()=>{throw new Error("`credentials` is missing")});const{signingEscapePath:s=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:r}=e;let o;return e.signer?o=U(e.signer):e.regionInfoProvider?o=()=>U(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{const{signingRegion:d,signingService:c}=i;e.signingRegion=e.signingRegion||d||a,e.signingName=e.signingName||c||e.serviceId;const u={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},h=e.signerConstructor||de;return new h(u)}):o=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await U(e.region)(),properties:{}},i);const a=i.signingRegion,d=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||d||e.serviceId;const c={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},u=e.signerConstructor||de;return new u(c)},{...e,systemClockOffset:n,signingEscapePath:s,credentials:t,signer:o}},Y=(e,t)=>it(e,t).then(s=>{if(s.length)try{return JSON.parse(s)}catch(n){throw(n==null?void 0:n.name)==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:s}),n}return{}}),jt=async(e,t)=>{const s=await Y(e,t);return s.message=s.message??s.Message,s},Gt=(e,t)=>{const s=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};const Vt=e=>t=>async s=>{if(!A.isInstance(s.request))return t(s);const{request:n}=s,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return t(s)},Wt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Kt=e=>({applyToStack:t=>{t.add(Vt(e),Wt)}}),Yt=()=>(e,t)=>async s=>{var n,r;try{const o=await e(s),{clientName:i,commandName:a,logger:d,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:h}=c,f=u??t.inputFilterSensitiveLog,w=h??t.outputFilterSensitiveLog,{$metadata:E,...l}=o.output;return(n=d==null?void 0:d.info)==null||n.call(d,{clientName:i,commandName:a,input:f(s.input),output:w(l),metadata:E}),o}catch(o){const{clientName:i,commandName:a,logger:d,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:u}=c,h=u??t.inputFilterSensitiveLog;throw(r=d==null?void 0:d.error)==null||r.call(d,{clientName:i,commandName:a,input:h(s.input),error:o,metadata:o.$metadata}),o}},Jt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Xt=e=>({applyToStack:t=>{t.add(Yt(),Jt)}});var pe={};const he="X-Amzn-Trace-Id",Zt="AWS_LAMBDA_FUNCTION_NAME",Qt="_X_AMZN_TRACE_ID",es=e=>t=>async s=>{const{request:n}=s;if(!A.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(he))return t(s);const r=pe[Zt],o=pe[Qt],i=a=>typeof a=="string"&&a.length>0;return i(r)&&i(o)&&(n.headers[he]=o),t({...s,request:n})},ts={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ss=e=>({applyToStack:t=>{t.add(es(e),ts)}});function ns(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const ze=(e,t=!1)=>{if(t){for(const s of e.split("."))if(!ze(s))return!1;return!0}return!(!ot(e)||e.length<3||e.length>63||e!==e.toLowerCase()||at(e))},rs=e=>{const t=e.split(":");if(t.length<6)return null;const[s,n,r,o,i,...a]=t;return s!=="arn"||n===""||r===""||a[0]===""?null:{partition:n,service:r,region:o,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}},is=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],os="1.1",as={partitions:is,version:os};let cs=as;const ds=e=>{const{partitions:t}=cs;for(const n of t){const{regions:r,outputs:o}=n;for(const[i,a]of Object.entries(r))if(i===e)return{...o,...a}}for(const n of t){const{regionRegex:r,outputs:o}=n;if(new RegExp(r).test(e))return{...o}}const s=t.find(n=>n.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},Be={isVirtualHostableS3Bucket:ze,parseArn:rs,partition:ds};Ne.aws=Be;const ye="user-agent",j="x-amz-user-agent",me=" ",G="/",us=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,ls=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,fe="-",ps=e=>(t,s)=>async n=>{var h,f;const{request:r}=n;if(!A.isInstance(r))return t(n);const{headers:o}=r,i=((h=s==null?void 0:s.userAgent)==null?void 0:h.map(V))||[],a=(await e.defaultUserAgentProvider()).map(V),d=((f=e==null?void 0:e.customUserAgent)==null?void 0:f.map(V))||[],c=[].concat([...a,...i,...d]).join(me),u=[...a.filter(w=>w.startsWith("aws-sdk-")),...d].join(me);return e.runtime!=="browser"?(u&&(o[j]=o[j]?`${o[ye]} ${u}`:u),o[ye]=c):o[j]=c,t({...n,request:r})},V=e=>{var i;const t=e[0].split(G).map(a=>a.replace(us,fe)).join(G),s=(i=e[1])==null?void 0:i.replace(ls,fe),n=t.indexOf(G),r=t.substring(0,n);let o=t.substring(n+1);return r==="api"&&(o=o.toLowerCase()),[r,o,s].filter(a=>a&&a.length>0).reduce((a,d,c)=>{switch(c){case 0:return d;case 1:return`${a}/${d}`;default:return`${a}#${d}`}},"")},hs={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},ys=e=>({applyToStack:t=>{t.add(ps(e),hs)}}),ms=!1,fs=!1,qe=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),ge=e=>qe(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,gs=e=>{const{region:t,useFipsEndpoint:s}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return ge(t);const n=await t();return ge(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return qe(n)?!0:typeof s!="function"?Promise.resolve(!!s):s()}}},we="content-length";function ws(e){return t=>async s=>{const n=s.request;if(A.isInstance(n)){const{body:r,headers:o}=n;if(r&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(we)===-1)try{const i=e(r);n.headers={...n.headers,[we]:String(i)}}catch{}}return t({...s,request:n})}}const Es={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ss=e=>({applyToStack:t=>{t.add(ws(e.bodyLengthChecker),Es)}});var k;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(k||(k={}));const q=3,Rs=k.STANDARD,bs=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Cs=["TimeoutError","RequestTimeout","RequestTimeoutException"],xs=[500,502,503,504],vs=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],As=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},je=e=>{var t,s;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||bs.includes(e.name)||((s=e.$retryable)==null?void 0:s.throttling)==!0},Ge=e=>{var t;return As(e)||Cs.includes(e.name)||vs.includes((e==null?void 0:e.code)||"")||xs.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Ts=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const s=e.$metadata.httpStatusCode;return 500<=s&&s<=599&&!Ge(e)}return!1};class Is{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const s=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,s))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const s=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+s),this.lastTimestamp=t}updateClientSendingRate(t){let s;if(this.updateMeasuredRate(),je(t)){const r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),s=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),s=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(s,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),s=Math.floor(t*2)/2;if(this.requestCount++,s>this.lastTxRateBucket){const n=this.requestCount/(s-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=s}}getPrecise(t){return parseFloat(t.toFixed(8))}}const K=100,Ve=20*1e3,Ps=500,Ee=500,ks=5,Ds=10,_s=1,Ns="amz-sdk-invocation-id",Os="amz-sdk-request",Ms=()=>{let e=K;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Ve,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},Se=({retryDelay:e,retryCount:t,retryCost:s})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Ve,e),getRetryCost:()=>s});class We{constructor(t){this.maxAttempts=t,this.mode=k.STANDARD,this.capacity=Ee,this.retryBackoffStrategy=Ms(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Se({retryDelay:K,retryCount:0})}async refreshRetryTokenForRetry(t,s){const n=await this.getMaxAttempts();if(this.shouldRetry(t,s,n)){const r=s.errorType;this.retryBackoffStrategy.setDelayBase(r==="THROTTLING"?Ps:K);const o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=s.retryAfterHint?Math.max(s.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(r);return this.capacity-=a,Se({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Ee,this.capacity+(t.getRetryCost()??_s))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${q}`),q}}shouldRetry(t,s,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(s.errorType)&&this.isRetryableError(s.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Ds:ks}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class $s{constructor(t,s){this.maxAttemptsProvider=t,this.mode=k.ADAPTIVE;const{rateLimiter:n}=s??{};this.rateLimiter=n??new Is,this.standardRetryStrategy=new We(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,s){return this.rateLimiter.updateClientSendingRate(s),this.standardRetryStrategy.refreshRetryTokenForRetry(t,s)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}const Ls=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Us=e=>{const{retryStrategy:t}=e,s=W(e.maxAttempts??q);return{...e,maxAttempts:s,retryStrategy:async()=>t||(await W(e.retryMode)()===k.ADAPTIVE?new $s(s):new We(s))}},Fs=e=>(e==null?void 0:e.body)instanceof ReadableStream,Hs=e=>(t,s)=>async n=>{var i;let r=await e.retryStrategy();const o=await e.maxAttempts();if(zs(r)){r=r;let a=await r.acquireInitialRetryToken(s.partition_id),d=new Error,c=0,u=0;const{request:h}=n,f=A.isInstance(h);for(f&&(h.headers[Ns]=ct());;)try{f&&(h.headers[Os]=`attempt=${c+1}; max=${o}`);const{response:w,output:E}=await t(n);return r.recordSuccess(a),E.$metadata.attempts=c+1,E.$metadata.totalRetryDelay=u,{response:w,output:E}}catch(w){const E=Bs(w);if(d=Ls(w),f&&Fs(h))throw(i=s.logger instanceof Oe?console:s.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),d;try{a=await r.refreshRetryTokenForRetry(a,E)}catch{throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=c+1,d.$metadata.totalRetryDelay=u,d}c=a.getRetryCount();const l=a.getRetryDelay();u+=l,await new Promise(x=>setTimeout(x,l))}}else return r=r,r!=null&&r.mode&&(s.userAgent=[...s.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,n)},zs=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Bs=e=>{const t={error:e,errorType:qs(e)},s=Vs(e.$response);return s&&(t.retryAfterHint=s),t},qs=e=>je(e)?"THROTTLING":Ge(e)?"TRANSIENT":Ts(e)?"SERVER_ERROR":"CLIENT_ERROR",js={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Gs=e=>({applyToStack:t=>{t.add(Hs(e),js)}}),Vs=e=>{if(!B.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const s=e.headers[t],n=Number(s);return Number.isNaN(n)?new Date(s):new Date(n*1e3)},Ws=async(e,t,s)=>({operation:_e(t).operation,region:await W(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Ks(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function F(e){return{schemeId:"smithy.api#noAuth"}}const Ys=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(F());break}case"GetId":{t.push(F());break}case"GetOpenIdToken":{t.push(F());break}case"UnlinkIdentity":{t.push(F());break}default:t.push(Ks(e))}return t},Js=e=>({...qt(e)}),Xs=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),Ke={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Zs="@aws-sdk/client-cognito-identity",Qs="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",en="3.540.0",tn={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js"},sn="./dist-cjs/index.js",nn="./dist-types/index.d.ts",rn="./dist-es/index.js",on=!1,an={"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.540.0","@aws-sdk/core":"3.535.0","@aws-sdk/credential-provider-node":"3.540.0","@aws-sdk/middleware-host-header":"3.535.0","@aws-sdk/middleware-logger":"3.535.0","@aws-sdk/middleware-recursion-detection":"3.535.0","@aws-sdk/middleware-user-agent":"3.540.0","@aws-sdk/region-config-resolver":"3.535.0","@aws-sdk/types":"3.535.0","@aws-sdk/util-endpoints":"3.540.0","@aws-sdk/util-user-agent-browser":"3.535.0","@aws-sdk/util-user-agent-node":"3.535.0","@smithy/config-resolver":"^2.2.0","@smithy/core":"^1.4.0","@smithy/fetch-http-handler":"^2.5.0","@smithy/hash-node":"^2.2.0","@smithy/invalid-dependency":"^2.2.0","@smithy/middleware-content-length":"^2.2.0","@smithy/middleware-endpoint":"^2.5.0","@smithy/middleware-retry":"^2.2.0","@smithy/middleware-serde":"^2.3.0","@smithy/middleware-stack":"^2.2.0","@smithy/node-config-provider":"^2.3.0","@smithy/node-http-handler":"^2.5.0","@smithy/protocol-http":"^3.3.0","@smithy/smithy-client":"^2.5.0","@smithy/types":"^2.12.0","@smithy/url-parser":"^2.2.0","@smithy/util-base64":"^2.3.0","@smithy/util-body-length-browser":"^2.2.0","@smithy/util-body-length-node":"^2.3.0","@smithy/util-defaults-mode-browser":"^2.2.0","@smithy/util-defaults-mode-node":"^2.3.0","@smithy/util-endpoints":"^1.2.0","@smithy/util-middleware":"^2.2.0","@smithy/util-retry":"^2.2.0","@smithy/util-utf8":"^2.3.0",tslib:"^2.6.2"},cn={"@aws-sdk/client-iam":"3.540.0","@smithy/service-client-documentation-generator":"^2.2.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},dn={node:">=14.0.0"},un={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},ln=["dist-*/**"],pn={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},hn="Apache-2.0",yn={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},mn="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",fn={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},gn={name:Zs,description:Qs,version:en,scripts:tn,main:sn,types:nn,module:rn,sideEffects:on,dependencies:an,devDependencies:cn,engines:dn,typesVersions:un,files:ln,author:pn,license:hn,browser:yn,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:mn,repository:fn},wn=({serviceId:e,clientVersion:t})=>async()=>{var r,o,i,a,d;const s=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?Me.parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",t],["ua","2.0"],[`os/${((o=s==null?void 0:s.os)==null?void 0:o.name)||"other"}`,(i=s==null?void 0:s.os)==null?void 0:i.version],["lang/js"],["md/browser",`${((a=s==null?void 0:s.browser)==null?void 0:a.name)??"unknown"}_${((d=s==null?void 0:s.browser)==null?void 0:d.version)??"unknown"}`]];return e&&n.push([`api/${e}`,t]),n};function En(e=0){return new Promise((t,s)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",s(n)},e)})}const Sn={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class J{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new J(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(s=>s||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(t,{abortSignal:s}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,r=this.config.keepAlive===!0;if(s!=null&&s.aborted){const l=new Error("Request aborted");return l.name="AbortError",Promise.reject(l)}let o=t.path;const i=dt(t.query||{});i&&(o+=`?${i}`),t.fragment&&(o+=`#${t.fragment}`);let a="";if(t.username!=null||t.password!=null){const l=t.username??"",x=t.password??"";a=`${l}:${x}@`}const{port:d,method:c}=t,u=`${t.protocol}//${a}${t.hostname}${d?`:${d}`:""}${o}`,f={body:c==="GET"||c==="HEAD"?void 0:t.body,headers:new Headers(t.headers),method:c};typeof AbortController<"u"&&(f.signal=s),Sn.supported&&(f.keepalive=r);const w=new Request(u,f),E=[fetch(w).then(l=>{const x=l.headers,T={};for(const L of x.entries())T[L[0]]=L[1];return l.body!=null?{response:new B({headers:T,reason:l.statusText,statusCode:l.status,body:l.body})}:l.blob().then(L=>({response:new B({headers:T,reason:l.statusText,statusCode:l.status,body:L})}))}),En(n)];return s&&E.push(new Promise((l,x)=>{s.onabort=()=>{const T=new Error("Request aborted");T.name="AbortError",x(T)}})),Promise.race(E)}updateHttpClientConfig(t,s){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=s,n))}httpHandlerConfigs(){return this.config??{}}}const v={},D=new Array(64);for(let e=0,t=65,s=90;e+t<=s;e++){const n=String.fromCharCode(e+t);v[n]=e,D[e]=n}for(let e=0,t=97,s=122;e+t<=s;e++){const n=String.fromCharCode(e+t),r=e+26;v[n]=r,D[r]=n}for(let e=0;e<10;e++){v[e.toString(10)]=e+52;const t=e.toString(10),s=e+52;v[t]=s,D[s]=t}v["+"]=62;D[62]="+";v["/"]=63;D[63]="/";const P=6,M=8,Rn=63,Ye=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const s=new ArrayBuffer(t),n=new DataView(s);for(let r=0;r<e.length;r+=4){let o=0,i=0;for(let c=r,u=r+3;c<=u;c++)if(e[c]!=="="){if(!(e[c]in v))throw new TypeError(`Invalid character ${e[c]} in base64 string.`);o|=v[e[c]]<<(u-c)*P,i+=P}else o>>=P;const a=r/4*3;o>>=i%M;const d=Math.floor(i/M);for(let c=0;c<d;c++){const u=(d-c-1)*M;n.setUint8(a+c,(o&255<<u)>>u)}}return new Uint8Array(s)},Je=e=>new TextEncoder().encode(e),bn=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function Cn(e){let t;typeof e=="string"?t=Je(e):t=e;const s=typeof t=="object"&&typeof t.length=="number",n=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!s&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let r="";for(let o=0;o<t.length;o+=3){let i=0,a=0;for(let c=o,u=Math.min(o+3,t.length);c<u;c++)i|=t[c]<<(u-c-1)*M,a+=M;const d=Math.ceil(a/P);i<<=d*P-a;for(let c=1;c<=d;c++){const u=(d-c)*P;r+=D[(i&Rn<<u)>>u]}r+="==".slice(0,4-d)}return r}const xn=e=>typeof Blob=="function"&&e instanceof Blob?vn(e):An(e);async function vn(e){const t=await Tn(e),s=Ye(t);return new Uint8Array(s)}async function An(e){let t=new Uint8Array(0);const s=e.getReader();let n=!1;for(;!n;){const{done:r,value:o}=await s.read();if(o){const i=t;t=new Uint8Array(i.length+o.length),t.set(i),t.set(o,i.length)}n=r}return t}function Tn(e){return new Promise((t,s)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return s(new Error("Reader aborted too early"));const r=n.result??"",o=r.indexOf(","),i=o>-1?o+1:r.length;t(r.substring(i))},n.onabort=()=>s(new Error("Read aborted")),n.onerror=()=>s(n.error),n.readAsDataURL(e)})}const In=e=>()=>Promise.reject(e),Re=typeof TextEncoder=="function"?new TextEncoder:null,Pn=e=>{if(typeof e=="string"){if(Re)return Re.encode(e).byteLength;let t=e.length;for(let s=t-1;s>=0;s--){const n=e.charCodeAt(s);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&s--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)};function kn(e){const t={};if(e=e.replace(/^\?/,""),e)for(const s of e.split("&")){let[n,r=null]=s.split("=");n=decodeURIComponent(n),r&&(r=decodeURIComponent(r)),n in t?Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r}return t}const Xe=e=>{if(typeof e=="string")return Xe(new URL(e));const{hostname:t,pathname:s,port:n,protocol:r,search:o}=e;let i;return o&&(i=kn(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:r,path:s,query:i}},Ze="required",R="fn",b="argv",_="ref",be=!0,Ce="isSet",$="booleanEquals",I="error",N="endpoint",C="tree",X="PartitionResult",xe={[Ze]:!1,type:"String"},ve={[Ze]:!0,default:!1,type:"Boolean"},Ae={[_]:"Endpoint"},Qe={[R]:$,[b]:[{[_]:"UseFIPS"},!0]},et={[R]:$,[b]:[{[_]:"UseDualStack"},!0]},S={},Te={[R]:"getAttr",[b]:[{[_]:X},"supportsFIPS"]},Ie={[R]:$,[b]:[!0,{[R]:"getAttr",[b]:[{[_]:X},"supportsDualStack"]}]},Pe=[Qe],ke=[et],De=[{[_]:"Region"}],Dn={version:"1.0",parameters:{Region:xe,UseDualStack:ve,UseFIPS:ve,Endpoint:xe},rules:[{conditions:[{[R]:Ce,[b]:[Ae]}],rules:[{conditions:Pe,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:I},{conditions:ke,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:I},{endpoint:{url:Ae,properties:S,headers:S},type:N}],type:C},{conditions:[{[R]:Ce,[b]:De}],rules:[{conditions:[{[R]:"aws.partition",[b]:De,assign:X}],rules:[{conditions:[Qe,et],rules:[{conditions:[{[R]:$,[b]:[be,Te]},Ie],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:S,headers:S},type:N}],type:C},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:I}],type:C},{conditions:Pe,rules:[{conditions:[{[R]:$,[b]:[Te,be]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:S,headers:S},type:N}],type:C},{error:"FIPS is enabled but this partition does not support FIPS",type:I}],type:C},{conditions:ke,rules:[{conditions:[Ie],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:S,headers:S},type:N}],type:C},{error:"DualStack is enabled but this partition does not support DualStack",type:I}],type:C},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:S,headers:S},type:N}],type:C}],type:C},{error:"Invalid Configuration: Missing Region",type:I}]},_n=Dn,Nn=(e,t={})=>ut(_n,{endpointParams:e,logger:t.logger});Ne.aws=Be;const On=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??Ye,base64Encoder:(e==null?void 0:e.base64Encoder)??Cn,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Nn,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Ys,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new kt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ut}],logger:(e==null?void 0:e.logger)??new Oe,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Xe,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Je,utf8Encoder:(e==null?void 0:e.utf8Encoder)??bn}),Mn=["in-region","cross-region","mobile","standard","legacy"],$n=({defaultsMode:e}={})=>lt(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(Ln()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Mn.join(", ")}, got ${t}`)}}),Ln=()=>{var s,n;const e=typeof window<"u"&&((s=window==null?void 0:window.navigator)!=null&&s.userAgent)?Me.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},Un=e=>{const t=$n(e),s=()=>t().then(ht),n=On(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Pn,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(r=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??wn({serviceId:n.serviceId,clientVersion:gn.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??q,region:(e==null?void 0:e.region)??In("Region is missing"),requestHandler:J.create((e==null?void 0:e.requestHandler)??s),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await s()).retryMode||Rs),sha256:(e==null?void 0:e.sha256)??pt.Sha256,streamCollector:(e==null?void 0:e.streamCollector)??xn,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(ms)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(fs))}},Fn=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(r){const o=t.findIndex(i=>i.schemeId===r.schemeId);o===-1?t.push(r):t.splice(o,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){s=r},httpAuthSchemeProvider(){return s},setCredentials(r){n=r},credentials(){return n}}},Hn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),H=e=>e,zn=(e,t)=>{const s={...H(Et(e)),...H(yt(e)),...H(mt(e)),...H(Fn(e))};return t.forEach(n=>n.configure(s)),{...e,...ft(s),...gt(s),...wt(s),...Hn(s)}};class pr extends St{constructor(...[t]){const s=Un(t||{}),n=Xs(s),r=gs(n),o=Rt(r),i=Us(o),a=i,d=ns(a),c=Js(d),u=zn(c,(t==null?void 0:t.extensions)||[]);super(u),this.config=u,this.middlewareStack.use(Gs(this.config)),this.middlewareStack.use(Ss(this.config)),this.middlewareStack.use(Kt(this.config)),this.middlewareStack.use(Xt(this.config)),this.middlewareStack.use(ss(this.config)),this.middlewareStack.use(ys(this.config)),this.middlewareStack.use(bt(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use($t(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return Ws}getIdentityProviderConfigProvider(){return async t=>new Lt({"aws.auth#sigv4":t.credentials})}}const Bn=(e,t)=>(s,n)=>async r=>{const{response:o}=await s(r);try{const i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},qn=(e,t)=>(s,n)=>async r=>{var a;const o=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(r.input,{...e,endpoint:o});return s({...r,request:i})},jn={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Gn={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function tt(e,t,s){return{applyToStack:n=>{n.add(Bn(e,s),jn),n.add(qn(e,t),Gn)}}}class y extends Ct{constructor(t){super(t),Object.setPrototypeOf(this,y.prototype)}}class Z extends y{constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,Z.prototype)}}class Q extends y{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,Q.prototype)}}class ee extends y{constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,ee.prototype)}}class te extends y{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,te.prototype)}}class se extends y{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,se.prototype)}}class ne extends y{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,ne.prototype)}}class re extends y{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,re.prototype)}}class ie extends y{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,ie.prototype)}}class oe extends y{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,oe.prototype)}}class ae extends y{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,ae.prototype)}}class ce extends y{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,ce.prototype)}}const Vn=async(e,t)=>{const s=rt("GetCredentialsForIdentity");let n;return n=JSON.stringify(p(e)),nt(t,s,"/",void 0,n)},Wn=async(e,t)=>{const s=rt("GetId");let n;return n=JSON.stringify(p(e)),nt(t,s,"/",void 0,n)},Kn=async(e,t)=>{if(e.statusCode>=300)return st(e,t);const s=await Y(e.body,t);let n={};return n=cr(s),{$metadata:m(e),...n}},Yn=async(e,t)=>{if(e.statusCode>=300)return st(e,t);const s=await Y(e.body,t);let n={};return n=p(s),{$metadata:m(e),...n}},st=async(e,t)=>{const s={...e,body:await jt(e.body,t)},n=Gt(e,s.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Qn(s);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await tr(s);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await sr(s);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await nr(s);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await rr(s);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await or(s);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await ir(s);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Zn(s);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await er(s);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Xn(s);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Jn(s);default:const r=s.body;return dr({output:e,parsedBody:r,errorCode:n})}},Jn=async(e,t)=>{const s=e.body,n=p(s),r=new ce({$metadata:m(e),...n});return g(r,s)},Xn=async(e,t)=>{const s=e.body,n=p(s),r=new ae({$metadata:m(e),...n});return g(r,s)},Zn=async(e,t)=>{const s=e.body,n=p(s),r=new ie({$metadata:m(e),...n});return g(r,s)},Qn=async(e,t)=>{const s=e.body,n=p(s),r=new Z({$metadata:m(e),...n});return g(r,s)},er=async(e,t)=>{const s=e.body,n=p(s),r=new oe({$metadata:m(e),...n});return g(r,s)},tr=async(e,t)=>{const s=e.body,n=p(s),r=new Q({$metadata:m(e),...n});return g(r,s)},sr=async(e,t)=>{const s=e.body,n=p(s),r=new ee({$metadata:m(e),...n});return g(r,s)},nr=async(e,t)=>{const s=e.body,n=p(s),r=new te({$metadata:m(e),...n});return g(r,s)},rr=async(e,t)=>{const s=e.body,n=p(s),r=new se({$metadata:m(e),...n});return g(r,s)},ir=async(e,t)=>{const s=e.body,n=p(s),r=new re({$metadata:m(e),...n});return g(r,s)},or=async(e,t)=>{const s=e.body,n=p(s),r=new ne({$metadata:m(e),...n});return g(r,s)},ar=(e,t)=>$e(e,{AccessKeyId:z,Expiration:s=>vt(At(Tt(s))),SecretKey:z,SessionToken:z}),cr=(e,t)=>$e(e,{Credentials:s=>ar(s),IdentityId:z}),m=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),dr=xt(y),nt=async(e,t,s,n,r)=>{const{hostname:o,protocol:i="https",port:a,path:d}=await e.endpoint(),c={protocol:i,hostname:o,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+s:d+s,headers:t};return n!==void 0&&(c.hostname=n),r!==void 0&&(c.body=r),new A(c)};function rt(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class hr extends Le.classBuilder().ep({...Ke}).m(function(t,s,n,r){return[tt(n,this.serialize,this.deserialize),Ue(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(void 0,void 0).ser(Vn).de(Kn).build(){}class yr extends Le.classBuilder().ep({...Ke}).m(function(t,s,n,r){return[tt(n,this.serialize,this.deserialize),Ue(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(void 0,void 0).ser(Wn).de(Yn).build(){}export{pr as CognitoIdentityClient,hr as GetCredentialsForIdentityCommand,yr as GetIdCommand};
