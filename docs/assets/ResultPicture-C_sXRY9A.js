import{_ as z,u as A,a as D,am as L,c as R,r as d,d as y,g as m,A as f,C as _,k as C,p as N,j as c,W as x,I as P,J as $,i as g,a6 as T,az as w,f as v,aA as j,V,B as F}from"./index-Ct1ErY8A.js";import{M as E}from"./Markdown-DGcZX8Fx.js";const G={class:"container"},J={class:"layout"},W={key:0},q={class:"toolbar elevation-2"},H={class:"slider"},K={__name:"ResultPicture",setup(O){const{$gettext:p}=A();function b(l){return new Promise((e,t)=>{const a=new FileReader;a.onload=n=>{e(n.target.result)},a.onerror=n=>{t(n)},a.readAsDataURL(l)})}const r=D(),u=L(),k=R(()=>r.isMobile),s=d(50);y(()=>{s.value=k.value?100:50});const o=d([]),h=d(""),i=d("");async function M(){const l=u.scenario+"/",t=r.otherFiles.filter(n=>n.extension==="png");for(const n of t){if(n.content instanceof Uint8Array){const U=new Blob([n.content],{type:"image/png"});var a=await b(U)}else var a=await w.getImagesURL(u.model,l+n.path);const I=n.path.split("/").slice(-1)[0];o.value.push({name:I,src:a})}}async function S(){const l=u.scenario+"/",t=r.otherFiles.filter(a=>a.extension==="md");if(t.length>0){let a=t[0].content;a instanceof Uint8Array||(a=await w.readBytes(u.model,l+t[0].path)),i.value=new TextDecoder().decode(a)}}function B(){if(i.value.length>0){const l=[];for(const e of o.value)i.value.includes(e.name)&&(i.value=i.value.replace(e.name,e.src),l.push(e));o.value=o.value.filter(e=>!l.includes(e))}}return y(async()=>{r.changeLoading(!0),await M(),await S(),B(),r.changeLoading(!1),o.value.length===0&&i.value.length===0&&(h.value=p("Nothing to display"))}),(l,e)=>(v(),m("section",G,[f("div",J,[o.value.length===0?(v(),m("p",W,_(C(p)(h.value)),1)):N("",!0),c(E,{source:i.value,style:x({width:`${s.value}%`})},null,8,["source","style"]),(v(!0),m(P,null,$(o.value,t=>(v(),m("div",{key:t.name,class:"gallery",style:x({width:`${s.value}%`})},[c(j,{src:t.src,alt:t.name},null,8,["src","alt"])],4))),128))]),f("div",q,[f("div",H,[c(T,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),class:"align-center",min:"0",max:"100",step:"1",density:"compact","track-size":"2","thumb-size":"10"},{prepend:g(()=>[c(V,{size:"x-small",onClick:e[0]||(e[0]=()=>{s.value=Math.max(0,s.value-10)})},{default:g(()=>e[3]||(e[3]=[F(" fa-solid fa-magnifying-glass-minus ")])),_:1})]),append:g(()=>[f("span",null,_(s.value),1),c(V,{class:"ml-2",size:"x-small",onClick:e[1]||(e[1]=()=>{s.value=Math.min(100,s.value+10)})},{default:g(()=>e[4]||(e[4]=[F(" fa-solid fa-magnifying-glass-plus ")])),_:1})]),_:1},8,["modelValue"])])])]))}},Y=z(K,[["__scopeId","data-v-2e1902b7"]]);export{Y as default};
