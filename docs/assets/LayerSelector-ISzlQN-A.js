import{_ as k,ag as w,ah as $,r as f,d as p,e as _,f as S,g as i,h as t,F as B,B as I,X as M,am as C,bE as F,bF as R,bG as T,a3 as z,a as N,o as O,w as L,z as P,m as D,V as j,Z as A,s as x,t as h,i as E,p as G,N as U,O as Y,j as q,q as J,J as X,v as Z}from"./index-Tpk785Lp.js";const H={id:"app"},K={class:"list"},Q=["onDragover","onDragend","onDragstart"],W={__name:"DragList",props:{items:{},itemsModifiers:{}},emits:w("move",["update:items"]),setup(d,{emit:b}){const u=$(d,"items"),V=b,r=f({}),m=f(0),l=f(!1),v=f({});function o(a,c,s){m.value=s.clientY,l.value=!0,v.value=a}function n(a,c){u.value.splice(c,1),u.value.splice(r.value.pos,0,a),r.value={},V("move",a.name),v.value={}}function e(a,c,s){const g=m.value<s.clientY?"down":"up";r.value={item:a,pos:c,dir:g}}return(a,c)=>(p(),_("div",H,[S("div",K,[i(T,{name:"flip-list",tag:"div"},{default:t(()=>[(p(!0),_(B,null,I(u.value,(s,g)=>(p(),_("li",{key:s,class:M(["item",{over:s===r.value.item||s===v.value,[r.value.dir]:s===r.value.item&&s!==v.value}]),draggable:"true",onDragover:y=>e(s,g,y),onDragend:y=>n(s,g,y),onDragstart:y=>o(s,g,y)},[C(a.$slots,"default",F(R(s)),void 0,!0)],42,Q))),128))]),_:3})])]))}},ee=k(W,[["__scopeId","data-v-9f6e86dd"]]),ae={class:"layer-button"},se={key:0},te={key:1},le={__name:"LayerSelector",props:{choices:{type:Array,default:()=>[]},availableLayers:{type:Array,default:()=>[]},map:{type:Object,default:()=>{}}},setup(d){const b=d,{choices:u,map:V}=z(b),r=N(),m=f(!1),l=f([]);O(()=>{l.value=r.visibleRasters}),L(l,o=>{const e=u.value.map(a=>a.name).filter(a=>o.includes(a));r.setVisibleRasters(e)}),L(u,o=>{const n=o.map(e=>e.name);l.value=l.value.filter(e=>n.includes(e))},{deep:!0});function v(o){if(l.value.includes(o)){const e=u.value.map(a=>a.name).filter(a=>l.value.includes(a));r.setVisibleRasters(e);for(let a=0;a<e.length-1;a++){const c=e[a],s=e[a+1];V.value.moveLayer(s+"-layer",c+"-layer")}}}return(o,n)=>(p(),P(Z,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e),"close-on-content-click":!1,persistent:!1,"no-click-animation":"",location:"bottom",offset:"5",transition:"scale-transition"},{activator:t(({props:e})=>[S("div",ae,[i(j,D(e,{color:l.value.length>0?"success":"regular",icon:"fas fa-layer-group"}),null,16,["color"])])]),default:t(()=>[i(X,{"max-width":500,"max-height":"calc(100vh - 200px)"},{default:t(()=>[i(A,{class:"subtitle"},{default:t(()=>[x(h(o.$gettext("Static Layers")),1)]),_:1}),i(ee,{items:E(u),onMove:v},{default:t(e=>[i(G,null,{prepend:t(()=>[i(U,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=a=>l.value=a),value:e.name,"false-icon":d.availableLayers.includes(e.layer)?"fa-eye-slash fa":"fas fa-exclamation-triangle","true-icon":"fa-eye fa",color:"primary",disabled:!d.availableLayers.includes(e.layer)},null,8,["modelValue","value","false-icon","disabled"])]),append:t(()=>[i(Y,{style:{cursor:"grab"},size:"small",icon:"fa-solid fa-arrows-up-down"})]),default:t(()=>[i(q,{location:"top","open-delay":"300"},{activator:t(({props:a})=>[i(J,D({style:{cursor:"default","padding-left":"1rem"}},a),{default:t(()=>[x(h(e.name),1)]),_:2},1040)]),default:t(()=>[d.availableLayers.includes(e.layer)?(p(),_("span",te,h(e.displaySettings.selectedFeature+" "+o.$gettext("from")+" "+e.layer),1)):(p(),_("span",se,h(o.$gettext("Data not found: ")+e.layer),1))]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1},8,["max-height"])]),_:1},8,["modelValue"]))}},re=k(le,[["__scopeId","data-v-19c876b6"]]);export{re as default};
