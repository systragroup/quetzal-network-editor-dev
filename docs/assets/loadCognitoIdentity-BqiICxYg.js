import{bl as ft,bm as N,bn as yt,bo as Z,bp as A,bq as Q,br as mt,bs as Fe,bt as ee,bu as gt,bv as wt,bw as ze,bx as Et,by as He,bz as Rt,bA as St,bB as bt,bC as At,bD as Ct,bE as Tt,bF as xt,bG as It,bH as vt,bI as Pt,bJ as kt,bK as _t,bL as Dt,bM as $t,bN as Ot,bO as Nt,bP as Mt,bQ as Lt,bR as se,bS as S,bT as Ut,bU as Be,bV as G,bW as Ft,bX as zt,bY as Ht,bZ as qe,b_ as Ge}from"./index-CfNGcgB7.js";const m=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(m);if(typeof e=="object"){const t={};for(const s of Object.keys(e))e[s]!=null&&(t[s]=m(e[s]));return t}return e};class Bt{async sign(t,s,n){return t}}const ne=(e,t)=>ft(e,t).then(s=>{if(s.length)try{return JSON.parse(s)}catch(n){throw(n==null?void 0:n.name)==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:s}),n}return{}}),qt=async(e,t)=>{const s=await ne(e,t);return s.message=s.message??s.Message,s},Gt=(e,t)=>{const s=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};const jt=e=>t=>async s=>{if(!N.isInstance(s.request))return t(s);const{request:n}=s,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(s)},Wt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Vt=e=>({applyToStack:t=>{t.add(jt(e),Wt)}}),Yt=()=>(e,t)=>async s=>{var n,r;try{const i=await e(s),{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:p}=d,h=l??t.inputFilterSensitiveLog,u=p??t.outputFilterSensitiveLog,{$metadata:f,...R}=i.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:o,commandName:a,input:h(s.input),output:u(R),metadata:f}),i}catch(i){const{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,p=l??t.inputFilterSensitiveLog;throw(r=c==null?void 0:c.error)==null||r.call(c,{clientName:o,commandName:a,input:p(s.input),error:i,metadata:i.$metadata}),i}},Jt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Kt=e=>({applyToStack:t=>{t.add(Yt(),Jt)}});var Ee={};const Re="X-Amzn-Trace-Id",Xt="AWS_LAMBDA_FUNCTION_NAME",Zt="_X_AMZN_TRACE_ID",Qt=e=>t=>async s=>{const{request:n}=s;if(!N.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Re))return t(s);const r=Ee[Xt],i=Ee[Zt],o=a=>typeof a=="string"&&a.length>0;return o(r)&&o(i)&&(n.headers[Re]=i),t({...s,request:n})},es={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ts=e=>({applyToStack:t=>{t.add(Qt(e),es)}}),ss=void 0;function ns(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function rs(e){const t=yt(e.userAgentAppId??ss);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{var n,r;const s=await t();if(!ns(s)){const i=((r=(n=e.logger)==null?void 0:n.constructor)==null?void 0:r.name)==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?i==null||i.warn("userAgentAppId must be a string or undefined."):s.length>50&&(i==null||i.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return s}}}class is{constructor({size:t,params:s}){this.data=new Map,this.parameters=[],this.capacity=t??50,s&&(this.parameters=s)}get(t,s){const n=this.hash(t);if(n===!1)return s();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const r=this.data.keys();let i=0;for(;;){const{value:o,done:a}=r.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,s())}return this.data.get(n)}size(){return this.data.size}hash(t){let s="";const{parameters:n}=this;if(n.length===0)return!1;for(const r of n){const i=String(t[r]??"");if(i.includes("|;"))return!1;s+=i+"|;"}return s}}const os=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),je=e=>os.test(e)||e.startsWith("[")&&e.endsWith("]"),as=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),re=(e,t=!1)=>{if(!t)return as.test(e);const s=e.split(".");for(const n of s)if(!re(n))return!1;return!0},j={},U="endpoints";function v(e){return typeof e!="object"||e==null?e:"ref"in e?`$${v(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(v).join(", ")})`:JSON.stringify(e,null,2)}class w extends Error{constructor(t){super(t),this.name="EndpointError"}}const cs=(e,t)=>e===t,ds=e=>{const t=e.split("."),s=[];for(const n of t){const r=n.indexOf("[");if(r!==-1){if(n.indexOf("]")!==n.length-1)throw new w(`Path: '${e}' does not end with ']'`);const i=n.slice(r+1,-1);if(Number.isNaN(parseInt(i)))throw new w(`Invalid array index: '${i}' in path: '${e}'`);r!==0&&s.push(n.slice(0,r)),s.push(i)}else s.push(n)}return s},We=(e,t)=>ds(t).reduce((s,n)=>{if(typeof s!="object")throw new w(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(s)?s[parseInt(n)]:s[n]},e),us=e=>e!=null,ls=e=>!e,Y={[Z.HTTP]:80,[Z.HTTPS]:443},ps=e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:h,port:u,protocol:f="",path:R="",query:b={}}=e,P=new URL(`${f}//${h}${u?`:${u}`:""}${R}`);return P.search=Object.entries(b).map(([y,k])=>`${y}=${k}`).join("&"),P}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const s=t.href,{host:n,hostname:r,pathname:i,protocol:o,search:a}=t;if(a)return null;const c=o.slice(0,-1);if(!Object.values(Z).includes(c))return null;const d=je(r),l=s.includes(`${n}:${Y[c]}`)||typeof e=="string"&&e.includes(`${n}:${Y[c]}`),p=`${n}${l?`:${Y[c]}`:""}`;return{scheme:c,authority:p,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:d}},hs=(e,t)=>e===t,fs=(e,t,s,n)=>t>=s||e.length<s?null:n?e.substring(e.length-s,e.length-t):e.substring(t,s),ys=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),ms={booleanEquals:cs,getAttr:We,isSet:us,isValidHostLabel:re,not:ls,parseURL:ps,stringEquals:hs,substring:fs,uriEncode:ys},Ve=(e,t)=>{const s=[],n={...t.endpointParams,...t.referenceRecord};let r=0;for(;r<e.length;){const i=e.indexOf("{",r);if(i===-1){s.push(e.slice(r));break}s.push(e.slice(r,i));const o=e.indexOf("}",i);if(o===-1){s.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(s.push(e.slice(i+1,o)),r=o+2);const a=e.substring(i+1,o);if(a.includes("#")){const[c,d]=a.split("#");s.push(We(n[c],d))}else s.push(n[a]);r=o+1}return s.join("")},gs=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],V=(e,t,s)=>{if(typeof e=="string")return Ve(e,s);if(e.fn)return Ye(e,s);if(e.ref)return gs(e,s);throw new w(`'${t}': ${String(e)} is not a string, function or reference.`)},Ye=({fn:e,argv:t},s)=>{const n=t.map(i=>["boolean","number"].includes(typeof i)?i:V(i,"arg",s)),r=e.split(".");return r[0]in j&&r[1]!=null?j[r[0]][r[1]](...n):ms[e](...n)},ws=({assign:e,...t},s)=>{var r,i;if(e&&e in s.referenceRecord)throw new w(`'${e}' is already defined in Reference Record.`);const n=Ye(t,s);return(i=(r=s.logger)==null?void 0:r.debug)==null||i.call(r,`${U} evaluateCondition: ${v(t)} = ${v(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},ie=(e=[],t)=>{var n,r;const s={};for(const i of e){const{result:o,toAssign:a}=ws(i,{...t,referenceRecord:{...t.referenceRecord,...s}});if(!o)return{result:o};a&&(s[a.name]=a.value,(r=(n=t.logger)==null?void 0:n.debug)==null||r.call(n,`${U} assign: ${a.name} := ${v(a.value)}`))}return{result:!0,referenceRecord:s}},Es=(e,t)=>Object.entries(e).reduce((s,[n,r])=>({...s,[n]:r.map(i=>{const o=V(i,"Header value entry",t);if(typeof o!="string")throw new w(`Header '${n}' value '${o}' is not a string`);return o})}),{}),Je=(e,t)=>{if(Array.isArray(e))return e.map(s=>Je(s,t));switch(typeof e){case"string":return Ve(e,t);case"object":if(e===null)throw new w(`Unexpected endpoint property: ${e}`);return Ke(e,t);case"boolean":return e;default:throw new w(`Unexpected endpoint property type: ${typeof e}`)}},Ke=(e,t)=>Object.entries(e).reduce((s,[n,r])=>({...s,[n]:Je(r,t)}),{}),Rs=(e,t)=>{const s=V(e,"Endpoint URL",t);if(typeof s=="string")try{return new URL(s)}catch(n){throw console.error(`Failed to construct URL with ${s}`,n),n}throw new w(`Endpoint URL must be a string, got ${typeof s}`)},Ss=(e,t)=>{var l,p;const{conditions:s,endpoint:n}=e,{result:r,referenceRecord:i}=ie(s,t);if(!r)return;const o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:d}=n;return(p=(l=t.logger)==null?void 0:l.debug)==null||p.call(l,`${U} Resolving endpoint from template: ${v(n)}`),{...d!=null&&{headers:Es(d,o)},...c!=null&&{properties:Ke(c,o)},url:Rs(a,o)}},bs=(e,t)=>{const{conditions:s,error:n}=e,{result:r,referenceRecord:i}=ie(s,t);if(r)throw new w(V(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},As=(e,t)=>{const{conditions:s,rules:n}=e,{result:r,referenceRecord:i}=ie(s,t);if(r)return Xe(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},Xe=(e,t)=>{for(const s of e)if(s.type==="endpoint"){const n=Ss(s,t);if(n)return n}else if(s.type==="error")bs(s,t);else if(s.type==="tree"){const n=As(s,t);if(n)return n}else throw new w(`Unknown endpoint rule: ${s}`);throw new w("Rules evaluation failed")},Cs=(e,t)=>{var d,l,p,h;const{endpointParams:s,logger:n}=t,{parameters:r,rules:i}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,`${U} Initial EndpointParams: ${v(s)}`);const o=Object.entries(r).filter(([,u])=>u.default!=null).map(([u,f])=>[u,f.default]);if(o.length>0)for(const[u,f]of o)s[u]=s[u]??f;const a=Object.entries(r).filter(([,u])=>u.required).map(([u])=>u);for(const u of a)if(s[u]==null)throw new w(`Missing required parameter: '${u}'`);const c=Xe(i,{endpointParams:s,logger:n,referenceRecord:{}});return(h=(p=t.logger)==null?void 0:p.debug)==null||h.call(p,`${U} Resolved endpoint: ${v(c)}`),c},Ze=(e,t=!1)=>{if(t){for(const s of e.split("."))if(!Ze(s))return!1;return!0}return!(!re(e)||e.length<3||e.length>63||e!==e.toLowerCase()||je(e))},Se=":",Ts="/",xs=e=>{const t=e.split(Se);if(t.length<6)return null;const[s,n,r,i,o,...a]=t;if(s!=="arn"||n===""||r===""||a.join(Se)==="")return null;const c=a.map(d=>d.split(Ts)).flat();return{partition:n,service:r,region:i,accountId:o,resourceId:c}},Is=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],vs="1.1",Ps={partitions:Is,version:vs};let ks=Ps;const _s=e=>{const{partitions:t}=ks;for(const n of t){const{regions:r,outputs:i}=n;for(const[o,a]of Object.entries(r))if(o===e)return{...i,...a}}for(const n of t){const{regionRegex:r,outputs:i}=n;if(new RegExp(r).test(e))return{...i}}const s=t.find(n=>n.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},Qe={isVirtualHostableS3Bucket:Ze,parseArn:xs,partition:_s};j.aws=Qe;const Ds=/\d{12}\.ddb/;async function $s(e,t,s){var i,o,a,c,d,l,p;const n=s.request;if(((i=n==null?void 0:n.headers)==null?void 0:i["smithy-protocol"])==="rpc-v2-cbor"&&A(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const h=await t.retryStrategy();typeof h.acquireInitialRetryToken=="function"?(a=(o=h.constructor)==null?void 0:o.name)!=null&&a.includes("Adaptive")?A(e,"RETRY_MODE_ADAPTIVE","F"):A(e,"RETRY_MODE_STANDARD","E"):A(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const h=e.endpointV2;switch(String((c=h==null?void 0:h.url)==null?void 0:c.hostname).match(Ds)&&A(e,"ACCOUNT_ID_ENDPOINT","O"),await((d=t.accountIdEndpointMode)==null?void 0:d.call(t))){case"disabled":A(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":A(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":A(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const r=(p=(l=e.__smithy_context)==null?void 0:l.selectedHttpAuthScheme)==null?void 0:p.identity;if(r!=null&&r.$source){const h=r;h.accountId&&A(e,"RESOLVED_ACCOUNT_ID","T");for(const[u,f]of Object.entries(h.$source??{}))A(e,u,f)}}const be="user-agent",J="x-amz-user-agent",Ae=" ",K="/",Os=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ns=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Ce="-",Ms=1024;function Ls(e){let t="";for(const s in e){const n=e[s];if(t.length+n.length+1<=Ms){t.length?t+=","+n:t+=n;continue}break}return t}const Us=e=>(t,s)=>async n=>{var u,f,R,b;const{request:r}=n;if(!N.isInstance(r))return t(n);const{headers:i}=r,o=((u=s==null?void 0:s.userAgent)==null?void 0:u.map(H))||[],a=(await e.defaultUserAgentProvider()).map(H);await $s(s,e,n);const c=s;a.push(`m/${Ls(Object.assign({},(f=s.__smithy_context)==null?void 0:f.features,(R=c.__aws_sdk_context)==null?void 0:R.features))}`);const d=((b=e==null?void 0:e.customUserAgent)==null?void 0:b.map(H))||[],l=await e.userAgentAppId();l&&a.push(H([`app/${l}`]));const p=[].concat([...a,...o,...d]).join(Ae),h=[...a.filter(P=>P.startsWith("aws-sdk-")),...d].join(Ae);return e.runtime!=="browser"?(h&&(i[J]=i[J]?`${i[be]} ${h}`:h),i[be]=p):i[J]=p,t({...n,request:r})},H=e=>{var o;const t=e[0].split(K).map(a=>a.replace(Os,Ce)).join(K),s=(o=e[1])==null?void 0:o.replace(Ns,Ce),n=t.indexOf(K),r=t.substring(0,n);let i=t.substring(n+1);return r==="api"&&(i=i.toLowerCase()),[r,i,s].filter(a=>a&&a.length>0).reduce((a,c,d)=>{switch(d){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},Fs={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},zs=e=>({applyToStack:t=>{t.add(Us(e),Fs)}}),Hs=!1,Bs=!1,et=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Te=e=>et(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,qs=e=>{const{region:t,useFipsEndpoint:s}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Te(t);const n=await t();return Te(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return et(n)?!0:typeof s!="function"?Promise.resolve(!!s):s()}}},xe="content-length";function Gs(e){return t=>async s=>{const n=s.request;if(N.isInstance(n)){const{body:r,headers:i}=n;if(r&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(xe)===-1)try{const o=e(r);n.headers={...n.headers,[xe]:String(o)}}catch{}}return t({...s,request:n})}}const js={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ws=e=>({applyToStack:t=>{t.add(Gs(e.bodyLengthChecker),js)}});var O;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(O||(O={}));const W=3,Vs=O.STANDARD,Ys=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Js=["TimeoutError","RequestTimeout","RequestTimeoutException"],Ks=[500,502,503,504],Xs=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Zs=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},tt=e=>{var t,s;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Ys.includes(e.name)||((s=e.$retryable)==null?void 0:s.throttling)==!0},st=e=>{var t;return Zs(e)||Js.includes(e.name)||Xs.includes((e==null?void 0:e.code)||"")||Ks.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Qs=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const s=e.$metadata.httpStatusCode;return 500<=s&&s<=599&&!st(e)}return!1};class en{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const s=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,s))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const s=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+s),this.lastTimestamp=t}updateClientSendingRate(t){let s;if(this.updateMeasuredRate(),tt(t)){const r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),s=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),s=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(s,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),s=Math.floor(t*2)/2;if(this.requestCount++,s>this.lastTxRateBucket){const n=this.requestCount/(s-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=s}}getPrecise(t){return parseFloat(t.toFixed(8))}}const te=100,nt=20*1e3,tn=500,Ie=500,sn=5,nn=10,rn=1,on="amz-sdk-invocation-id",an="amz-sdk-request",cn=()=>{let e=te;return{computeNextBackoffDelay:n=>Math.floor(Math.min(nt,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},ve=({retryDelay:e,retryCount:t,retryCost:s})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(nt,e),getRetryCost:()=>s});class rt{constructor(t){this.maxAttempts=t,this.mode=O.STANDARD,this.capacity=Ie,this.retryBackoffStrategy=cn(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return ve({retryDelay:te,retryCount:0})}async refreshRetryTokenForRetry(t,s){const n=await this.getMaxAttempts();if(this.shouldRetry(t,s,n)){const r=s.errorType;this.retryBackoffStrategy.setDelayBase(r==="THROTTLING"?tn:te);const i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=s.retryAfterHint?Math.max(s.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(r);return this.capacity-=a,ve({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Ie,this.capacity+(t.getRetryCost()??rn))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${W}`),W}}shouldRetry(t,s,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(s.errorType)&&this.isRetryableError(s.errorType)}getCapacityCost(t){return t==="TRANSIENT"?nn:sn}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class dn{constructor(t,s){this.maxAttemptsProvider=t,this.mode=O.ADAPTIVE;const{rateLimiter:n}=s??{};this.rateLimiter=n??new en,this.standardRetryStrategy=new rt(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,s){return this.rateLimiter.updateClientSendingRate(s),this.standardRetryStrategy.refreshRetryTokenForRetry(t,s)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}const un=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),ln=e=>{const{retryStrategy:t}=e,s=Q(e.maxAttempts??W);return{...e,maxAttempts:s,retryStrategy:async()=>t||(await Q(e.retryMode)()===O.ADAPTIVE?new dn(s):new rt(s))}},pn=e=>(e==null?void 0:e.body)instanceof ReadableStream,hn=e=>(t,s)=>async n=>{var o;let r=await e.retryStrategy();const i=await e.maxAttempts();if(fn(r)){r=r;let a=await r.acquireInitialRetryToken(s.partition_id),c=new Error,d=0,l=0;const{request:p}=n,h=N.isInstance(p);for(h&&(p.headers[on]=mt());;)try{h&&(p.headers[an]=`attempt=${d+1}; max=${i}`);const{response:u,output:f}=await t(n);return r.recordSuccess(a),f.$metadata.attempts=d+1,f.$metadata.totalRetryDelay=l,{response:u,output:f}}catch(u){const f=yn(u);if(c=un(u),h&&pn(p))throw(o=s.logger instanceof Fe?console:s.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),c;try{a=await r.refreshRetryTokenForRetry(a,f)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=d+1,c.$metadata.totalRetryDelay=l,c}d=a.getRetryCount();const R=a.getRetryDelay();l+=R,await new Promise(b=>setTimeout(b,R))}}else return r=r,r!=null&&r.mode&&(s.userAgent=[...s.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,n)},fn=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",yn=e=>{const t={error:e,errorType:mn(e)},s=En(e.$response);return s&&(t.retryAfterHint=s),t},mn=e=>tt(e)?"THROTTLING":st(e)?"TRANSIENT":Qs(e)?"SERVER_ERROR":"CLIENT_ERROR",gn={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},wn=e=>({applyToStack:t=>{t.add(hn(e),gn)}}),En=e=>{if(!ee.isInstance(e))return;const t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;const s=e.headers[t],n=Number(s);return Number.isNaN(n)?new Date(s):new Date(n*1e3)},Rn=async(e,t,s)=>({operation:gt(t).operation,region:await Q(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Sn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function B(e){return{schemeId:"smithy.api#noAuth"}}const bn=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(B());break}case"GetId":{t.push(B());break}case"GetOpenIdToken":{t.push(B());break}case"UnlinkIdentity":{t.push(B());break}default:t.push(Sn(e))}return t},An=e=>({...wt(e)}),Cn=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),it={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Tn="@aws-sdk/client-cognito-identity",xn="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",In="3.670.0",vn={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js"},Pn="./dist-cjs/index.js",kn="./dist-types/index.d.ts",_n="./dist-es/index.js",Dn=!1,$n={"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.670.0","@aws-sdk/client-sts":"3.670.0","@aws-sdk/core":"3.667.0","@aws-sdk/credential-provider-node":"3.670.0","@aws-sdk/middleware-host-header":"3.667.0","@aws-sdk/middleware-logger":"3.667.0","@aws-sdk/middleware-recursion-detection":"3.667.0","@aws-sdk/middleware-user-agent":"3.669.0","@aws-sdk/region-config-resolver":"3.667.0","@aws-sdk/types":"3.667.0","@aws-sdk/util-endpoints":"3.667.0","@aws-sdk/util-user-agent-browser":"3.670.0","@aws-sdk/util-user-agent-node":"3.669.0","@smithy/config-resolver":"^3.0.9","@smithy/core":"^2.4.8","@smithy/fetch-http-handler":"^3.2.9","@smithy/hash-node":"^3.0.7","@smithy/invalid-dependency":"^3.0.7","@smithy/middleware-content-length":"^3.0.9","@smithy/middleware-endpoint":"^3.1.4","@smithy/middleware-retry":"^3.0.23","@smithy/middleware-serde":"^3.0.7","@smithy/middleware-stack":"^3.0.7","@smithy/node-config-provider":"^3.1.8","@smithy/node-http-handler":"^3.2.4","@smithy/protocol-http":"^4.1.4","@smithy/smithy-client":"^3.4.0","@smithy/types":"^3.5.0","@smithy/url-parser":"^3.0.7","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.23","@smithy/util-defaults-mode-node":"^3.0.23","@smithy/util-endpoints":"^2.1.3","@smithy/util-middleware":"^3.0.7","@smithy/util-retry":"^3.0.7","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},On={"@aws-sdk/client-iam":"3.670.0","@tsconfig/node16":"16.1.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},Nn={node:">=16.0.0"},Mn={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},Ln=["dist-*/**"],Un={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Fn="Apache-2.0",zn={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},Hn="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",Bn={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},qn={name:Tn,description:xn,version:In,scripts:vn,main:Pn,types:kn,module:_n,sideEffects:Dn,dependencies:$n,devDependencies:On,engines:Nn,typesVersions:Mn,files:Ln,author:Un,license:Fn,browser:zn,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:Hn,repository:Bn},Gn=({serviceId:e,clientVersion:t})=>async s=>{var o,a,c,d,l,p;const n=typeof window<"u"&&((o=window==null?void 0:window.navigator)!=null&&o.userAgent)?ze.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",t],["ua","2.1"],[`os/${((a=n==null?void 0:n.os)==null?void 0:a.name)||"other"}`,(c=n==null?void 0:n.os)==null?void 0:c.version],["lang/js"],["md/browser",`${((d=n==null?void 0:n.browser)==null?void 0:d.name)??"unknown"}_${((l=n==null?void 0:n.browser)==null?void 0:l.version)??"unknown"}`]];e&&r.push([`api/${e}`,t]);const i=await((p=s==null?void 0:s.userAgentAppId)==null?void 0:p.call(s));return i&&r.push([`app/${i}`]),r};function jn(e=0){return new Promise((t,s)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",s(n)},e)})}const X={supported:void 0};class oe{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new oe(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(s=>s||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),X.supported===void 0&&(X.supported=typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))}destroy(){}async handle(t,{abortSignal:s}={}){var P;this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,r=this.config.keepAlive===!0,i=this.config.credentials;if(s!=null&&s.aborted){const y=new Error("Request aborted");return y.name="AbortError",Promise.reject(y)}let o=t.path;const a=Et(t.query||{});a&&(o+=`?${a}`),t.fragment&&(o+=`#${t.fragment}`);let c="";if(t.username!=null||t.password!=null){const y=t.username??"",k=t.password??"";c=`${y}:${k}@`}const{port:d,method:l}=t,p=`${t.protocol}//${c}${t.hostname}${d?`:${d}`:""}${o}`,h=l==="GET"||l==="HEAD"?void 0:t.body,u={body:h,headers:new Headers(t.headers),method:l,credentials:i};(P=this.config)!=null&&P.cache&&(u.cache=this.config.cache),h&&(u.duplex="half"),typeof AbortController<"u"&&(u.signal=s),X.supported&&(u.keepalive=r),typeof this.config.requestInit=="function"&&Object.assign(u,this.config.requestInit(t));let f=()=>{};const R=new Request(p,u),b=[fetch(R).then(y=>{const k=y.headers,_={};for(const z of k.entries())_[z[0]]=z[1];return y.body!=null?{response:new ee({headers:_,reason:y.statusText,statusCode:y.status,body:y.body})}:y.blob().then(z=>({response:new ee({headers:_,reason:y.statusText,statusCode:y.status,body:z})}))}),jn(n)];return s&&b.push(new Promise((y,k)=>{const _=()=>{const D=new Error("Request aborted");D.name="AbortError",k(D)};if(typeof s.addEventListener=="function"){const D=s;D.addEventListener("abort",_,{once:!0}),f=()=>D.removeEventListener("abort",_)}else s.onabort=_})),Promise.race(b).finally(f)}updateHttpClientConfig(t,s){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=s,n))}httpHandlerConfigs(){return this.config??{}}}const Wn=e=>typeof Blob=="function"&&e instanceof Blob?Vn(e):Yn(e);async function Vn(e){const t=await Jn(e),s=He(t);return new Uint8Array(s)}async function Yn(e){const t=[],s=e.getReader();let n=!1,r=0;for(;!n;){const{done:a,value:c}=await s.read();c&&(t.push(c),r+=c.length),n=a}const i=new Uint8Array(r);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}function Jn(e){return new Promise((t,s)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return s(new Error("Reader aborted too early"));const r=n.result??"",i=r.indexOf(","),o=i>-1?i+1:r.length;t(r.substring(o))},n.onabort=()=>s(new Error("Read aborted")),n.onerror=()=>s(n.error),n.readAsDataURL(e)})}const Kn=e=>()=>Promise.reject(e);function Xn(e){const t={};if(e=e.replace(/^\?/,""),e)for(const s of e.split("&")){let[n,r=null]=s.split("=");n=decodeURIComponent(n),r&&(r=decodeURIComponent(r)),n in t?Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r}return t}const ot=e=>{if(typeof e=="string")return ot(new URL(e));const{hostname:t,pathname:s,port:n,protocol:r,search:i}=e;let o;return i&&(o=Xn(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:r,path:s,query:o}},at="required",T="fn",x="argv",M="ref",Pe=!0,ke="isSet",F="booleanEquals",$="error",L="endpoint",I="tree",ae="PartitionResult",_e={[at]:!1,type:"String"},De={[at]:!0,default:!1,type:"Boolean"},$e={[M]:"Endpoint"},ct={[T]:F,[x]:[{[M]:"UseFIPS"},!0]},dt={[T]:F,[x]:[{[M]:"UseDualStack"},!0]},C={},Oe={[T]:"getAttr",[x]:[{[M]:ae},"supportsFIPS"]},Ne={[T]:F,[x]:[!0,{[T]:"getAttr",[x]:[{[M]:ae},"supportsDualStack"]}]},Me=[ct],Le=[dt],Ue=[{[M]:"Region"}],Zn={version:"1.0",parameters:{Region:_e,UseDualStack:De,UseFIPS:De,Endpoint:_e},rules:[{conditions:[{[T]:ke,[x]:[$e]}],rules:[{conditions:Me,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:$},{conditions:Le,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:$},{endpoint:{url:$e,properties:C,headers:C},type:L}],type:I},{conditions:[{[T]:ke,[x]:Ue}],rules:[{conditions:[{[T]:"aws.partition",[x]:Ue,assign:ae}],rules:[{conditions:[ct,dt],rules:[{conditions:[{[T]:F,[x]:[Pe,Oe]},Ne],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:C,headers:C},type:L}],type:I},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:$}],type:I},{conditions:Me,rules:[{conditions:[{[T]:F,[x]:[Oe,Pe]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:C,headers:C},type:L}],type:I},{error:"FIPS is enabled but this partition does not support FIPS",type:$}],type:I},{conditions:Le,rules:[{conditions:[Ne],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:C,headers:C},type:L}],type:I},{error:"DualStack is enabled but this partition does not support DualStack",type:$}],type:I},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:C,headers:C},type:L}],type:I}],type:I},{error:"Invalid Configuration: Missing Region",type:$}]},Qn=Zn,er=new is({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),tr=(e,t={})=>er.get(e,()=>Cs(Qn,{endpointParams:e,logger:t.logger}));j.aws=Qe;const sr=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??He,base64Encoder:(e==null?void 0:e.base64Encoder)??Rt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??tr,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??bn,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new St},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Bt}],logger:(e==null?void 0:e.logger)??new Fe,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??ot,utf8Decoder:(e==null?void 0:e.utf8Decoder)??bt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??At}),nr=["in-region","cross-region","mobile","standard","legacy"],rr=({defaultsMode:e}={})=>Ct(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(ir()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${nr.join(", ")}, got ${t}`)}}),ir=()=>{var s,n;const e=typeof window<"u"&&((s=window==null?void 0:window.navigator)!=null&&s.userAgent)?ze.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},or=e=>{const t=rr(e),s=()=>t().then(It),n=sr(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Tt,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(r=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Gn({serviceId:n.serviceId,clientVersion:qn.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??W,region:(e==null?void 0:e.region)??Kn("Region is missing"),requestHandler:oe.create((e==null?void 0:e.requestHandler)??s),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await s()).retryMode||Vs),sha256:(e==null?void 0:e.sha256)??xt,streamCollector:(e==null?void 0:e.streamCollector)??Wn,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Hs)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Bs))}},ar=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const s=e.region;return typeof s=="string"?s:s()};return{setRegion(s){t=s},region(){return t}}},cr=e=>({region:e.region()}),dr=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(r){const i=t.findIndex(o=>o.schemeId===r.schemeId);i===-1?t.push(r):t.splice(i,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){s=r},httpAuthSchemeProvider(){return s},setCredentials(r){n=r},credentials(){return n}}},ur=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),q=e=>e,lr=(e,t)=>{const s={...q(ar(e)),...q(vt(e)),...q(Pt(e)),...q(dr(e))};return t.forEach(n=>n.configure(s)),{...e,...cr(s),...kt(s),..._t(s),...ur(s)}};class Fr extends Dt{constructor(...[t]){const s=or(t||{}),n=Cn(s),r=rs(n),i=ln(r),o=qs(i),a=o,c=$t(a),d=An(c),l=lr(d,(t==null?void 0:t.extensions)||[]);super(l),this.config=l,this.middlewareStack.use(zs(this.config)),this.middlewareStack.use(wn(this.config)),this.middlewareStack.use(Ws(this.config)),this.middlewareStack.use(Vt(this.config)),this.middlewareStack.use(Kt(this.config)),this.middlewareStack.use(ts(this.config)),this.middlewareStack.use(Ot(this.config,{httpAuthSchemeParametersProvider:Rn,identityProviderConfigProvider:async p=>new Nt({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(Mt(this.config))}destroy(){super.destroy()}}const pr=(e,t)=>s=>async n=>{const{response:r}=await s(n);try{const i=await t(r,e);return{response:r,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:r}),!("$metadata"in i)){const o="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+o,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},hr=(e,t)=>(s,n)=>async r=>{var a;const i=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await t(r.input,{...e,endpoint:i});return s({...r,request:o})},fr={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},yr={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function ut(e,t,s){return{applyToStack:n=>{n.add(pr(e,s),fr),n.add(hr(e,t),yr)}}}class g extends Lt{constructor(t){super(t),Object.setPrototypeOf(this,g.prototype)}}class ce extends g{constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,ce.prototype)}}class de extends g{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class ue extends g{constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class le extends g{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class pe extends g{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,pe.prototype)}}class he extends g{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}class fe extends g{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}class ye extends g{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,ye.prototype)}}class me extends g{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ge extends g{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,ge.prototype)}}class we extends g{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,we.prototype)}}const mr=e=>({...e,...e.Logins&&{Logins:se}}),gr=e=>({...e,...e.SecretKey&&{SecretKey:se}}),wr=e=>({...e,...e.Credentials&&{Credentials:gr(e.Credentials)}}),Er=e=>({...e,...e.Logins&&{Logins:se}}),Rr=async(e,t)=>{const s=ht("GetCredentialsForIdentity");let n;return n=JSON.stringify(m(e)),pt(t,s,"/",void 0,n)},Sr=async(e,t)=>{const s=ht("GetId");let n;return n=JSON.stringify(m(e)),pt(t,s,"/",void 0,n)},br=async(e,t)=>{if(e.statusCode>=300)return lt(e,t);const s=await ne(e.body,t);let n={};return n=Mr(s),{$metadata:E(e),...n}},Ar=async(e,t)=>{if(e.statusCode>=300)return lt(e,t);const s=await ne(e.body,t);let n={};return n=m(s),{$metadata:E(e),...n}},lt=async(e,t)=>{const s={...e,body:await qt(e.body,t)},n=Gt(e,s.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ir(s);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Pr(s);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await kr(s);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await _r(s);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Dr(s);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Or(s);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await $r(s);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await xr(s);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await vr(s);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Tr(s);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Cr(s);default:const r=s.body;return Lr({output:e,parsedBody:r,errorCode:n})}},Cr=async(e,t)=>{const s=e.body,n=m(s),r=new we({$metadata:E(e),...n});return S(r,s)},Tr=async(e,t)=>{const s=e.body,n=m(s),r=new ge({$metadata:E(e),...n});return S(r,s)},xr=async(e,t)=>{const s=e.body,n=m(s),r=new ye({$metadata:E(e),...n});return S(r,s)},Ir=async(e,t)=>{const s=e.body,n=m(s),r=new ce({$metadata:E(e),...n});return S(r,s)},vr=async(e,t)=>{const s=e.body,n=m(s),r=new me({$metadata:E(e),...n});return S(r,s)},Pr=async(e,t)=>{const s=e.body,n=m(s),r=new de({$metadata:E(e),...n});return S(r,s)},kr=async(e,t)=>{const s=e.body,n=m(s),r=new ue({$metadata:E(e),...n});return S(r,s)},_r=async(e,t)=>{const s=e.body,n=m(s),r=new le({$metadata:E(e),...n});return S(r,s)},Dr=async(e,t)=>{const s=e.body,n=m(s),r=new pe({$metadata:E(e),...n});return S(r,s)},$r=async(e,t)=>{const s=e.body,n=m(s),r=new fe({$metadata:E(e),...n});return S(r,s)},Or=async(e,t)=>{const s=e.body,n=m(s),r=new he({$metadata:E(e),...n});return S(r,s)},Nr=(e,t)=>Be(e,{AccessKeyId:G,Expiration:s=>Ft(zt(Ht(s))),SecretKey:G,SessionToken:G}),Mr=(e,t)=>Be(e,{Credentials:s=>Nr(s),IdentityId:G}),E=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Lr=Ut(g),pt=async(e,t,s,n,r)=>{const{hostname:i,protocol:o="https",port:a,path:c}=await e.endpoint(),d={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return r!==void 0&&(d.body=r),new N(d)};function ht(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class zr extends qe.classBuilder().ep(it).m(function(t,s,n,r){return[ut(n,this.serialize,this.deserialize),Ge(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(mr,wr).ser(Rr).de(br).build(){}class Hr extends qe.classBuilder().ep(it).m(function(t,s,n,r){return[ut(n,this.serialize,this.deserialize),Ge(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Er,void 0).ser(Sr).de(Ar).build(){}export{Fr as CognitoIdentityClient,zr as GetCredentialsForIdentityCommand,Hr as GetIdCommand};
