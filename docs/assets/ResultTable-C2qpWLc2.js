import{an as T,a as C,ao as F,c as L,r as p,p as U,e as c,k as _,C as v,H as B,I as D,i as l,aE as E,aF as N,aG as R,f as i,h as f,aH as A,aI as H,B as K,a9 as O,aJ as $,aK as y,al as j,_ as G}from"./index-CVO2KWKY.js";const J={class:"layout"},M={key:0},W={key:1,class:"card elevation-3"},x=40,q=T({__name:"ResultTable",setup(z){const n=C(),m=F(),r=p([]),d=p(0),g=p(10),u=U(()=>n.otherFiles.filter(e=>e.extension==="csv"));async function V(){const e=m.scenario+"/";d.value=u.value.length;for(const a of u.value)a.content instanceof Uint8Array||(a.content=await N.readBytes(m.model,e+a.path,x))}async function b(e){const a=e.path.slice(0,-4);let t=[];e.content===null?t=[{too_large:`cannot display, more than ${x} mb`}]:t=await R(e.content.buffer);const s=Object.keys(t[0]).map(o=>({title:o,key:o,width:"1%"}));r.value.push({headers:s,items:t.slice(0,g.value),data:t,name:a,totalItems:t.length}),d.value-=1}L(async()=>{n.changeLoading(!0);try{await V(),n.changeLoading(!1)}catch(e){n.changeAlert(e),n.changeLoading(!1),d.value=0}for(const e of u.value)await b(e)});function k(e,a,t,s){if(s.length>0){const I=s[0].key,w=s[0].order;e=j.orderBy(e,I,w)}if(t===-1)return e;const o=(a-1)*t,h=o+t;return e.slice(o,h)}async function S({key:e,page:a,itemsPerPage:t,sortBy:s}){const o=y(r.value[e].data),h=k(o,a,t,y(s));r.value[e].items=h}return(e,a)=>(i(),c("section",J,[r.value.length===0?(i(),c("p",M,v(e.$gettext("nothing to display")),1)):_("",!0),(i(!0),c(B,null,D(r.value,(t,s)=>(i(),c("div",{key:s,class:"card elevation-3"},[l($,{"items-per-page":g.value,headers:t.headers,class:"fill-height","items-length":t.totalItems,"fixed-header":"","fixed-footer":"",items:t.items,"onUpdate:options":o=>S({key:s,...o})},{top:f(()=>[l(A,{class:"custom-title"},{default:f(()=>[l(H,null,{default:f(()=>[K(v(t.name),1)]),_:2},1024),l(O)]),_:2},1024)]),_:2},1032,["items-per-page","headers","items-length","items","onUpdate:options"])]))),128)),d.value>0?(i(),c("div",W,[l(E,{type:"heading,table-thead, table-tbody "})])):_("",!0)]))}}),X=G(q,[["__scopeId","data-v-319191fc"]]);export{X as default};
