import{bf as W,bg as I,bh as He,bi as ye,bj as pt,bk as ft,bl as yt,bm as Fe,bn as Z,bo as mt,bp as Be,bq as Q,br as $,bs as q,bt as gt,bu as wt,bv as Et,bw as ze,bx as bt,by as St,bz as xt,bA as Rt,bB as vt,bC as At,bD as Ct,bE as Tt,bF as It,bG as Pt,bH as kt,bI as Dt,bJ as _t,bK as Nt,bL as S,bM as Mt,bN as qe,bO as G,bP as Ot,bQ as Lt,bR as $t,bS as Ge,bT as je}from"./index-C1gN1_uD.js";const y=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(y);if(typeof e=="object"){const t={};for(const s of Object.keys(e))e[s]!=null&&(t[s]=y(e[s]));return t}return e},me=e=>{var t,s;return W.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((s=e.headers)==null?void 0:s.Date):void 0},We=e=>new Date(Date.now()+e),Ut=(e,t)=>Math.abs(We(t).getTime()-e)>=3e5,ge=(e,t)=>{const s=Date.parse(e);return Ut(s,t)?s-Date.now():t},O=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Ht=async e=>{var a,d,u;const t=O("context",e.context),s=O("config",e.config),n=(u=(d=(a=t.endpointV2)==null?void 0:a.properties)==null?void 0:d.authSchemes)==null?void 0:u[0],i=await O("signer",s.signer)(n),o=e==null?void 0:e.signingRegion,c=e==null?void 0:e.signingName;return{config:s,signer:i,signingRegion:o,signingName:c}};class Ft{async sign(t,s,n){if(!I.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:r,signer:i,signingRegion:o,signingName:c}=await Ht(n);return await i.sign(t,{signingDate:We(r.systemClockOffset),signingRegion:o,signingService:c})}errorHandler(t){return s=>{const n=s.ServerTime??me(s.$response);if(n){const r=O("config",t.config),i=r.systemClockOffset;r.systemClockOffset=ge(n,r.systemClockOffset),r.systemClockOffset!==i&&s.$metadata&&(s.$metadata.clockSkewCorrected=!0)}throw s}}successHandler(t,s){const n=me(t);if(n){const r=O("config",s.config);r.systemClockOffset=ge(n,r.systemClockOffset)}}}const Bt=e=>t=>{throw t},zt=(e,t)=>{},qt=e=>(t,s)=>async n=>{if(!I.isInstance(n.request))return t(n);const i=He(s).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:c,signer:a}=i,d=await t({...n,request:await a.sign(n.request,c,o)}).catch((a.errorHandler||Bt)(o));return(a.successHandler||zt)(d.response,o),d},Gt={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},jt={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:Gt.name},Wt=e=>({applyToStack:t=>{t.addRelativeTo(qt(),jt)}});class Vt{constructor(t){this.authSchemes=new Map;for(const[s,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(s,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}class Kt{async sign(t,s,n){return t}}const Yt=e=>t=>Ve(t)&&t.expiration.getTime()-Date.now()<e,Jt=3e5,Xt=Yt(Jt),Ve=e=>e.expiration!==void 0,Zt=(e,t,s)=>{if(e===void 0)return;const n=typeof e!="function"?async()=>Promise.resolve(e):e;let r,i,o,c=!1;const a=async d=>{i||(i=n(d));try{r=await i,o=!0,c=!1}finally{i=void 0}return r};return t===void 0?async d=>((!o||d!=null&&d.forceRefresh)&&(r=await a(d)),r):async d=>((!o||d!=null&&d.forceRefresh)&&(r=await a(d)),c?r:s(r)?(t(r)&&await a(d),r):(c=!0,r))},F=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},Qt=e=>{let t;e.credentials&&(t=Zt(e.credentials,Xt,Ve)),t||(e.credentialDefaultProvider?t=F(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):t=async()=>{throw new Error("`credentials` is missing")});const{signingEscapePath:s=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:r}=e;let i;return e.signer?i=F(e.signer):e.regionInfoProvider?i=()=>F(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,c])=>{const{signingRegion:a,signingService:d}=o;e.signingRegion=e.signingRegion||a||c,e.signingName=e.signingName||d||e.serviceId;const u={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},f=e.signerConstructor||ye;return new f(u)}):i=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await F(e.region)(),properties:{}},o);const c=o.signingRegion,a=o.signingName;e.signingRegion=e.signingRegion||c,e.signingName=e.signingName||a||e.serviceId;const d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},u=e.signerConstructor||ye;return new u(d)},{...e,systemClockOffset:n,signingEscapePath:s,credentials:t,signer:i}},te=(e,t)=>pt(e,t).then(s=>{if(s.length)try{return JSON.parse(s)}catch(n){throw(n==null?void 0:n.name)==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:s}),n}return{}}),es=async(e,t)=>{const s=await te(e,t);return s.message=s.message??s.Message,s},ts=(e,t)=>{const s=(i,o)=>Object.keys(i).find(c=>c.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};const ss=e=>t=>async s=>{if(!I.isInstance(s.request))return t(s);const{request:n}=s,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(s)},ns={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},rs=e=>({applyToStack:t=>{t.add(ss(e),ns)}}),is=()=>(e,t)=>async s=>{var n,r;try{const i=await e(s),{clientName:o,commandName:c,logger:a,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:f}=d,l=u??t.inputFilterSensitiveLog,h=f??t.outputFilterSensitiveLog,{$metadata:w,...p}=i.output;return(n=a==null?void 0:a.info)==null||n.call(a,{clientName:o,commandName:c,input:l(s.input),output:h(p),metadata:w}),i}catch(i){const{clientName:o,commandName:c,logger:a,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:u}=d,f=u??t.inputFilterSensitiveLog;throw(r=a==null?void 0:a.error)==null||r.call(a,{clientName:o,commandName:c,input:f(s.input),error:i,metadata:i.$metadata}),i}},os={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},as=e=>({applyToStack:t=>{t.add(is(),os)}});var we={};const Ee="X-Amzn-Trace-Id",cs="AWS_LAMBDA_FUNCTION_NAME",ds="_X_AMZN_TRACE_ID",us=e=>t=>async s=>{const{request:n}=s;if(!I.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Ee))return t(s);const r=we[cs],i=we[ds],o=c=>typeof c=="string"&&c.length>0;return o(r)&&o(i)&&(n.headers[Ee]=i),t({...s,request:n})},ls={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},hs=e=>({applyToStack:t=>{t.add(us(e),ls)}});function ps(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const Ke=(e,t=!1)=>{if(t){for(const s of e.split("."))if(!Ke(s))return!1;return!0}return!(!ft(e)||e.length<3||e.length>63||e!==e.toLowerCase()||yt(e))},fs=e=>{const t=e.split(":");if(t.length<6)return null;const[s,n,r,i,o,...c]=t;return s!=="arn"||n===""||r===""||c[0]===""?null:{partition:n,service:r,region:i,accountId:o,resourceId:c[0].includes("/")?c[0].split("/"):c}},ys=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],ms="1.1",gs={partitions:ys,version:ms};let ws=gs;const Es=e=>{const{partitions:t}=ws;for(const n of t){const{regions:r,outputs:i}=n;for(const[o,c]of Object.entries(r))if(o===e)return{...i,...c}}for(const n of t){const{regionRegex:r,outputs:i}=n;if(new RegExp(r).test(e))return{...i}}const s=t.find(n=>n.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},Ye={isVirtualHostableS3Bucket:Ke,parseArn:fs,partition:Es};Fe.aws=Ye;const be="user-agent",K="x-amz-user-agent",Se=" ",Y="/",bs=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ss=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,xe="-",xs=e=>(t,s)=>async n=>{var f,l;const{request:r}=n;if(!I.isInstance(r))return t(n);const{headers:i}=r,o=((f=s==null?void 0:s.userAgent)==null?void 0:f.map(J))||[],c=(await e.defaultUserAgentProvider()).map(J),a=((l=e==null?void 0:e.customUserAgent)==null?void 0:l.map(J))||[],d=[].concat([...c,...o,...a]).join(Se),u=[...c.filter(h=>h.startsWith("aws-sdk-")),...a].join(Se);return e.runtime!=="browser"?(u&&(i[K]=i[K]?`${i[be]} ${u}`:u),i[be]=d):i[K]=d,t({...n,request:r})},J=e=>{var o;const t=e[0].split(Y).map(c=>c.replace(bs,xe)).join(Y),s=(o=e[1])==null?void 0:o.replace(Ss,xe),n=t.indexOf(Y),r=t.substring(0,n);let i=t.substring(n+1);return r==="api"&&(i=i.toLowerCase()),[r,i,s].filter(c=>c&&c.length>0).reduce((c,a,d)=>{switch(d){case 0:return a;case 1:return`${c}/${a}`;default:return`${c}#${a}`}},"")},Rs={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},vs=e=>({applyToStack:t=>{t.add(xs(e),Rs)}}),As=!1,Cs=!1,Je=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Re=e=>Je(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,Ts=e=>{const{region:t,useFipsEndpoint:s}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Re(t);const n=await t();return Re(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return Je(n)?!0:typeof s!="function"?Promise.resolve(!!s):s()}}},ve="content-length";function Is(e){return t=>async s=>{const n=s.request;if(I.isInstance(n)){const{body:r,headers:i}=n;if(r&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(ve)===-1)try{const o=e(r);n.headers={...n.headers,[ve]:String(o)}}catch{}}return t({...s,request:n})}}const Ps={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},ks=e=>({applyToStack:t=>{t.add(Is(e.bodyLengthChecker),Ps)}});var D;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(D||(D={}));const V=3,Ds=D.STANDARD,_s=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Ns=["TimeoutError","RequestTimeout","RequestTimeoutException"],Ms=[500,502,503,504],Os=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Ls=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},Xe=e=>{var t,s;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||_s.includes(e.name)||((s=e.$retryable)==null?void 0:s.throttling)==!0},Ze=e=>{var t;return Ls(e)||Ns.includes(e.name)||Os.includes((e==null?void 0:e.code)||"")||Ms.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},$s=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const s=e.$metadata.httpStatusCode;return 500<=s&&s<=599&&!Ze(e)}return!1};class Us{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const s=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,s))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const s=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+s),this.lastTimestamp=t}updateClientSendingRate(t){let s;if(this.updateMeasuredRate(),Xe(t)){const r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),s=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),s=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(s,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),s=Math.floor(t*2)/2;if(this.requestCount++,s>this.lastTxRateBucket){const n=this.requestCount/(s-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=s}}getPrecise(t){return parseFloat(t.toFixed(8))}}const ee=100,Qe=20*1e3,Hs=500,Ae=500,Fs=5,Bs=10,zs=1,qs="amz-sdk-invocation-id",Gs="amz-sdk-request",js=()=>{let e=ee;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Qe,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},Ce=({retryDelay:e,retryCount:t,retryCost:s})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Qe,e),getRetryCost:()=>s});class et{constructor(t){this.maxAttempts=t,this.mode=D.STANDARD,this.capacity=Ae,this.retryBackoffStrategy=js(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Ce({retryDelay:ee,retryCount:0})}async refreshRetryTokenForRetry(t,s){const n=await this.getMaxAttempts();if(this.shouldRetry(t,s,n)){const r=s.errorType;this.retryBackoffStrategy.setDelayBase(r==="THROTTLING"?Hs:ee);const i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=s.retryAfterHint?Math.max(s.retryAfterHint.getTime()-Date.now()||0,i):i,c=this.getCapacityCost(r);return this.capacity-=c,Ce({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:c})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Ae,this.capacity+(t.getRetryCost()??zs))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${V}`),V}}shouldRetry(t,s,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(s.errorType)&&this.isRetryableError(s.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Bs:Fs}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class Ws{constructor(t,s){this.maxAttemptsProvider=t,this.mode=D.ADAPTIVE;const{rateLimiter:n}=s??{};this.rateLimiter=n??new Us,this.standardRetryStrategy=new et(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,s){return this.rateLimiter.updateClientSendingRate(s),this.standardRetryStrategy.refreshRetryTokenForRetry(t,s)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}const Vs=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Ks=e=>{const{retryStrategy:t}=e,s=Z(e.maxAttempts??V);return{...e,maxAttempts:s,retryStrategy:async()=>t||(await Z(e.retryMode)()===D.ADAPTIVE?new Ws(s):new et(s))}},Ys=e=>(e==null?void 0:e.body)instanceof ReadableStream,Js=e=>(t,s)=>async n=>{var o;let r=await e.retryStrategy();const i=await e.maxAttempts();if(Xs(r)){r=r;let c=await r.acquireInitialRetryToken(s.partition_id),a=new Error,d=0,u=0;const{request:f}=n,l=I.isInstance(f);for(l&&(f.headers[qs]=mt());;)try{l&&(f.headers[Gs]=`attempt=${d+1}; max=${i}`);const{response:h,output:w}=await t(n);return r.recordSuccess(c),w.$metadata.attempts=d+1,w.$metadata.totalRetryDelay=u,{response:h,output:w}}catch(h){const w=Zs(h);if(a=Vs(h),l&&Ys(f))throw(o=s.logger instanceof Be?console:s.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),a;try{c=await r.refreshRetryTokenForRetry(c,w)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=d+1,a.$metadata.totalRetryDelay=u,a}d=c.getRetryCount();const p=c.getRetryDelay();u+=p,await new Promise(b=>setTimeout(b,p))}}else return r=r,r!=null&&r.mode&&(s.userAgent=[...s.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,n)},Xs=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Zs=e=>{const t={error:e,errorType:Qs(e)},s=sn(e.$response);return s&&(t.retryAfterHint=s),t},Qs=e=>Xe(e)?"THROTTLING":Ze(e)?"TRANSIENT":$s(e)?"SERVER_ERROR":"CLIENT_ERROR",en={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},tn=e=>({applyToStack:t=>{t.add(Js(e),en)}}),sn=e=>{if(!W.isInstance(e))return;const t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;const s=e.headers[t],n=Number(s);return Number.isNaN(n)?new Date(s):new Date(n*1e3)},nn=async(e,t,s)=>({operation:He(t).operation,region:await Z(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function rn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function B(e){return{schemeId:"smithy.api#noAuth"}}const on=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(B());break}case"GetId":{t.push(B());break}case"GetOpenIdToken":{t.push(B());break}case"UnlinkIdentity":{t.push(B());break}default:t.push(rn(e))}return t},an=e=>({...Qt(e)}),cn=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),tt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},dn="@aws-sdk/client-cognito-identity",un="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",ln="3.598.0",hn={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js"},pn="./dist-cjs/index.js",fn="./dist-types/index.d.ts",yn="./dist-es/index.js",mn=!1,gn={"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.598.0","@aws-sdk/client-sts":"3.598.0","@aws-sdk/core":"3.598.0","@aws-sdk/credential-provider-node":"3.598.0","@aws-sdk/middleware-host-header":"3.598.0","@aws-sdk/middleware-logger":"3.598.0","@aws-sdk/middleware-recursion-detection":"3.598.0","@aws-sdk/middleware-user-agent":"3.598.0","@aws-sdk/region-config-resolver":"3.598.0","@aws-sdk/types":"3.598.0","@aws-sdk/util-endpoints":"3.598.0","@aws-sdk/util-user-agent-browser":"3.598.0","@aws-sdk/util-user-agent-node":"3.598.0","@smithy/config-resolver":"^3.0.2","@smithy/core":"^2.2.1","@smithy/fetch-http-handler":"^3.0.2","@smithy/hash-node":"^3.0.1","@smithy/invalid-dependency":"^3.0.1","@smithy/middleware-content-length":"^3.0.1","@smithy/middleware-endpoint":"^3.0.2","@smithy/middleware-retry":"^3.0.4","@smithy/middleware-serde":"^3.0.1","@smithy/middleware-stack":"^3.0.1","@smithy/node-config-provider":"^3.1.1","@smithy/node-http-handler":"^3.0.1","@smithy/protocol-http":"^4.0.1","@smithy/smithy-client":"^3.1.2","@smithy/types":"^3.1.0","@smithy/url-parser":"^3.0.1","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.4","@smithy/util-defaults-mode-node":"^3.0.4","@smithy/util-endpoints":"^2.0.2","@smithy/util-middleware":"^3.0.1","@smithy/util-retry":"^3.0.1","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},wn={"@aws-sdk/client-iam":"3.598.0","@tsconfig/node16":"16.1.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},En={node:">=16.0.0"},bn={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},Sn=["dist-*/**"],xn={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Rn="Apache-2.0",vn={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},An="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",Cn={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},Tn={name:dn,description:un,version:ln,scripts:hn,main:pn,types:fn,module:yn,sideEffects:mn,dependencies:gn,devDependencies:wn,engines:En,typesVersions:bn,files:Sn,author:xn,license:Rn,browser:vn,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:An,repository:Cn};var st={name:"SHA-256"},Te={name:"HMAC",hash:st},In=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),Pn=function(){function e(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return e.prototype.update=function(t){if(!Q(t)){var s=$(t),n=new Uint8Array(this.toHash.byteLength+s.byteLength);n.set(this.toHash,0),n.set(s,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(s){return q().crypto.subtle.sign(Te,s,t.toHash).then(function(n){return new Uint8Array(n)})}):Q(this.toHash)?Promise.resolve(In):Promise.resolve().then(function(){return q().crypto.subtle.digest(st,t.toHash)}).then(function(s){return Promise.resolve(new Uint8Array(s))})},e.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(s,n){q().crypto.subtle.importKey("raw",$(t.secret),Te,!1,["sign"]).then(s,n)}),this.key.catch(function(){}))},e}(),E=64,kn=32,Dn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Nn=Math.pow(2,53)-1,j=function(){function e(){this.state=Int32Array.from(_n),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,n=t.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Nn)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=t[s++],n--,this.bufferLength===E&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(s.setUint8(this.bufferLength++,128),n%E>=E-8){for(var r=this.bufferLength;r<E;r++)s.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(var r=this.bufferLength;r<E-8;r++)s.setUint8(r,0);s.setUint32(E-8,Math.floor(t/4294967296),!0),s.setUint32(E-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(kn),r=0;r<8;r++)i[r*4]=this.state[r]>>>24&255,i[r*4+1]=this.state[r]>>>16&255,i[r*4+2]=this.state[r]>>>8&255,i[r*4+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,s=t.buffer,n=t.state,r=n[0],i=n[1],o=n[2],c=n[3],a=n[4],d=n[5],u=n[6],f=n[7],l=0;l<E;l++){if(l<16)this.temp[l]=(s[l*4]&255)<<24|(s[l*4+1]&255)<<16|(s[l*4+2]&255)<<8|s[l*4+3]&255;else{var h=this.temp[l-2],w=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[l-15];var p=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[l]=(w+this.temp[l-7]|0)+(p+this.temp[l-16]|0)}var b=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&d^~a&u)|0)+(f+(Dn[l]+this.temp[l]|0)|0)|0,C=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&o^i&o)|0;f=u,u=d,d=a,a=c+b|0,c=o,o=i,i=r,r=b+C|0}n[0]+=r,n[1]+=i,n[2]+=o,n[3]+=c,n[4]+=a,n[5]+=d,n[6]+=u,n[7]+=f},e}(),Mn=function(){function e(t){this.secret=t,this.hash=new j,this.reset()}return e.prototype.update=function(t){if(!(Q(t)||this.error))try{this.hash.update($(t))}catch(s){this.error=s}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return gt(this,void 0,void 0,function(){return wt(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new j,this.secret){this.outer=new j;var t=On(this.secret),s=new Uint8Array(E);s.set(t);for(var n=0;n<E;n++)t[n]^=54,s[n]^=92;this.hash.update(t),this.outer.update(s);for(var n=0;n<t.byteLength;n++)t[n]=0}},e}();function On(e){var t=$(e);if(t.byteLength>E){var s=new j;s.update(t),t=s.digest()}var n=new Uint8Array(E);return n.set(t),n}var Ln=function(){function e(t){Et(q())?this.hash=new Pn(t):this.hash=new Mn(t)}return e.prototype.update=function(t,s){this.hash.update($(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();const $n=({serviceId:e,clientVersion:t})=>async()=>{var r,i,o,c,a;const s=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?ze.parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",t],["ua","2.0"],[`os/${((i=s==null?void 0:s.os)==null?void 0:i.name)||"other"}`,(o=s==null?void 0:s.os)==null?void 0:o.version],["lang/js"],["md/browser",`${((c=s==null?void 0:s.browser)==null?void 0:c.name)??"unknown"}_${((a=s==null?void 0:s.browser)==null?void 0:a.version)??"unknown"}`]];return e&&n.push([`api/${e}`,t]),n};function Un(e=0){return new Promise((t,s)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",s(n)},e)})}const X={supported:void 0};class se{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new se(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(s=>s||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),X.supported===void 0&&(X.supported=typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))}destroy(){}async handle(t,{abortSignal:s}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,r=this.config.keepAlive===!0;if(s!=null&&s.aborted){const p=new Error("Request aborted");return p.name="AbortError",Promise.reject(p)}let i=t.path;const o=bt(t.query||{});o&&(i+=`?${o}`),t.fragment&&(i+=`#${t.fragment}`);let c="";if(t.username!=null||t.password!=null){const p=t.username??"",b=t.password??"";c=`${p}:${b}@`}const{port:a,method:d}=t,u=`${t.protocol}//${c}${t.hostname}${a?`:${a}`:""}${i}`,f=d==="GET"||d==="HEAD"?void 0:t.body,l={body:f,headers:new Headers(t.headers),method:d};f&&(l.duplex="half"),typeof AbortController<"u"&&(l.signal=s),X.supported&&(l.keepalive=r);const h=new Request(u,l),w=[fetch(h).then(p=>{const b=p.headers,C={};for(const H of b.entries())C[H[0]]=H[1];return p.body!=null?{response:new W({headers:C,reason:p.statusText,statusCode:p.status,body:p.body})}:p.blob().then(H=>({response:new W({headers:C,reason:p.statusText,statusCode:p.status,body:H})}))}),Un(n)];return s&&w.push(new Promise((p,b)=>{s.onabort=()=>{const C=new Error("Request aborted");C.name="AbortError",b(C)}})),Promise.race(w)}updateHttpClientConfig(t,s){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=s,n))}httpHandlerConfigs(){return this.config??{}}}const T={},_=new Array(64);for(let e=0,t=65,s=90;e+t<=s;e++){const n=String.fromCharCode(e+t);T[n]=e,_[e]=n}for(let e=0,t=97,s=122;e+t<=s;e++){const n=String.fromCharCode(e+t),r=e+26;T[n]=r,_[r]=n}for(let e=0;e<10;e++){T[e.toString(10)]=e+52;const t=e.toString(10),s=e+52;T[t]=s,_[s]=t}T["+"]=62;_[62]="+";T["/"]=63;_[63]="/";const k=6,L=8,Hn=63,nt=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const s=new ArrayBuffer(t),n=new DataView(s);for(let r=0;r<e.length;r+=4){let i=0,o=0;for(let d=r,u=r+3;d<=u;d++)if(e[d]!=="="){if(!(e[d]in T))throw new TypeError(`Invalid character ${e[d]} in base64 string.`);i|=T[e[d]]<<(u-d)*k,o+=k}else i>>=k;const c=r/4*3;i>>=o%L;const a=Math.floor(o/L);for(let d=0;d<a;d++){const u=(a-d-1)*L;n.setUint8(c+d,(i&255<<u)>>u)}}return new Uint8Array(s)},rt=e=>new TextEncoder().encode(e),Fn=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function Bn(e){let t;typeof e=="string"?t=rt(e):t=e;const s=typeof t=="object"&&typeof t.length=="number",n=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!s&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let r="";for(let i=0;i<t.length;i+=3){let o=0,c=0;for(let d=i,u=Math.min(i+3,t.length);d<u;d++)o|=t[d]<<(u-d-1)*L,c+=L;const a=Math.ceil(c/k);o<<=a*k-c;for(let d=1;d<=a;d++){const u=(a-d)*k;r+=_[(o&Hn<<u)>>u]}r+="==".slice(0,4-a)}return r}const zn=e=>typeof Blob=="function"&&e instanceof Blob?qn(e):Gn(e);async function qn(e){const t=await jn(e),s=nt(t);return new Uint8Array(s)}async function Gn(e){const t=[],s=e.getReader();let n=!1,r=0;for(;!n;){const{done:c,value:a}=await s.read();a&&(t.push(a),r+=a.length),n=c}const i=new Uint8Array(r);let o=0;for(const c of t)i.set(c,o),o+=c.length;return i}function jn(e){return new Promise((t,s)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return s(new Error("Reader aborted too early"));const r=n.result??"",i=r.indexOf(","),o=i>-1?i+1:r.length;t(r.substring(o))},n.onabort=()=>s(new Error("Read aborted")),n.onerror=()=>s(n.error),n.readAsDataURL(e)})}const Wn=e=>()=>Promise.reject(e),Ie=typeof TextEncoder=="function"?new TextEncoder:null,Vn=e=>{if(typeof e=="string"){if(Ie)return Ie.encode(e).byteLength;let t=e.length;for(let s=t-1;s>=0;s--){const n=e.charCodeAt(s);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&s--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)};function Kn(e){const t={};if(e=e.replace(/^\?/,""),e)for(const s of e.split("&")){let[n,r=null]=s.split("=");n=decodeURIComponent(n),r&&(r=decodeURIComponent(r)),n in t?Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r}return t}const it=e=>{if(typeof e=="string")return it(new URL(e));const{hostname:t,pathname:s,port:n,protocol:r,search:i}=e;let o;return i&&(o=Kn(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:r,path:s,query:o}},ot="required",R="fn",v="argv",N="ref",Pe=!0,ke="isSet",U="booleanEquals",P="error",M="endpoint",A="tree",ne="PartitionResult",De={[ot]:!1,type:"String"},_e={[ot]:!0,default:!1,type:"Boolean"},Ne={[N]:"Endpoint"},at={[R]:U,[v]:[{[N]:"UseFIPS"},!0]},ct={[R]:U,[v]:[{[N]:"UseDualStack"},!0]},x={},Me={[R]:"getAttr",[v]:[{[N]:ne},"supportsFIPS"]},Oe={[R]:U,[v]:[!0,{[R]:"getAttr",[v]:[{[N]:ne},"supportsDualStack"]}]},Le=[at],$e=[ct],Ue=[{[N]:"Region"}],Yn={version:"1.0",parameters:{Region:De,UseDualStack:_e,UseFIPS:_e,Endpoint:De},rules:[{conditions:[{[R]:ke,[v]:[Ne]}],rules:[{conditions:Le,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:P},{conditions:$e,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:P},{endpoint:{url:Ne,properties:x,headers:x},type:M}],type:A},{conditions:[{[R]:ke,[v]:Ue}],rules:[{conditions:[{[R]:"aws.partition",[v]:Ue,assign:ne}],rules:[{conditions:[at,ct],rules:[{conditions:[{[R]:U,[v]:[Pe,Me]},Oe],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:x,headers:x},type:M}],type:A},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:P}],type:A},{conditions:Le,rules:[{conditions:[{[R]:U,[v]:[Me,Pe]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:x,headers:x},type:M}],type:A},{error:"FIPS is enabled but this partition does not support FIPS",type:P}],type:A},{conditions:$e,rules:[{conditions:[Oe],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:x,headers:x},type:M}],type:A},{error:"DualStack is enabled but this partition does not support DualStack",type:P}],type:A},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:x,headers:x},type:M}],type:A}],type:A},{error:"Invalid Configuration: Missing Region",type:P}]},Jn=Yn,Xn=(e,t={})=>St(Jn,{endpointParams:e,logger:t.logger});Fe.aws=Ye;const Zn=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??nt,base64Encoder:(e==null?void 0:e.base64Encoder)??Bn,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Xn,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??on,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Ft},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Kt}],logger:(e==null?void 0:e.logger)??new Be,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??it,utf8Decoder:(e==null?void 0:e.utf8Decoder)??rt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Fn}),Qn=["in-region","cross-region","mobile","standard","legacy"],er=({defaultsMode:e}={})=>xt(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(tr()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Qn.join(", ")}, got ${t}`)}}),tr=()=>{var s,n;const e=typeof window<"u"&&((s=window==null?void 0:window.navigator)!=null&&s.userAgent)?ze.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},sr=e=>{const t=er(e),s=()=>t().then(Rt),n=Zn(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Vn,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(r=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??$n({serviceId:n.serviceId,clientVersion:Tn.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??V,region:(e==null?void 0:e.region)??Wn("Region is missing"),requestHandler:se.create((e==null?void 0:e.requestHandler)??s),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await s()).retryMode||Ds),sha256:(e==null?void 0:e.sha256)??Ln,streamCollector:(e==null?void 0:e.streamCollector)??zn,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(As)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Cs))}},nr=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(r){const i=t.findIndex(o=>o.schemeId===r.schemeId);i===-1?t.push(r):t.splice(i,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){s=r},httpAuthSchemeProvider(){return s},setCredentials(r){n=r},credentials(){return n}}},rr=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),z=e=>e,ir=(e,t)=>{const s={...z(Pt(e)),...z(vt(e)),...z(At(e)),...z(nr(e))};return t.forEach(n=>n.configure(s)),{...e,...Ct(s),...Tt(s),...It(s),...rr(s)}};class kr extends kt{constructor(...[t]){const s=sr(t||{}),n=cn(s),r=Ts(n),i=Dt(r),o=Ks(i),c=o,a=ps(c),d=an(a),u=ir(d,(t==null?void 0:t.extensions)||[]);super(u),this.config=u,this.middlewareStack.use(tn(this.config)),this.middlewareStack.use(ks(this.config)),this.middlewareStack.use(rs(this.config)),this.middlewareStack.use(as(this.config)),this.middlewareStack.use(hs(this.config)),this.middlewareStack.use(vs(this.config)),this.middlewareStack.use(_t(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(Wt(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return nn}getIdentityProviderConfigProvider(){return async t=>new Vt({"aws.auth#sigv4":t.credentials})}}const or=(e,t)=>s=>async n=>{const{response:r}=await s(n);try{const i=await t(r,e);return{response:r,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:r}),!("$metadata"in i)){const o="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+o,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},ar=(e,t)=>(s,n)=>async r=>{var c;const i=(c=n.endpointV2)!=null&&c.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await t(r.input,{...e,endpoint:i});return s({...r,request:o})},cr={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},dr={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function dt(e,t,s){return{applyToStack:n=>{n.add(or(e,s),cr),n.add(ar(e,t),dr)}}}class m extends Nt{constructor(t){super(t),Object.setPrototypeOf(this,m.prototype)}}class re extends m{constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,re.prototype)}}class ie extends m{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,ie.prototype)}}class oe extends m{constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,oe.prototype)}}class ae extends m{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,ae.prototype)}}class ce extends m{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,ce.prototype)}}class de extends m{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class ue extends m{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class le extends m{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class he extends m{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}class pe extends m{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,pe.prototype)}}class fe extends m{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}const ur=async(e,t)=>{const s=ht("GetCredentialsForIdentity");let n;return n=JSON.stringify(y(e)),lt(t,s,"/",void 0,n)},lr=async(e,t)=>{const s=ht("GetId");let n;return n=JSON.stringify(y(e)),lt(t,s,"/",void 0,n)},hr=async(e,t)=>{if(e.statusCode>=300)return ut(e,t);const s=await te(e.body,t);let n={};return n=Cr(s),{$metadata:g(e),...n}},pr=async(e,t)=>{if(e.statusCode>=300)return ut(e,t);const s=await te(e.body,t);let n={};return n=y(s),{$metadata:g(e),...n}},ut=async(e,t)=>{const s={...e,body:await es(e.body,t)},n=ts(e,s.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await gr(s);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Er(s);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await br(s);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Sr(s);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await xr(s);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await vr(s);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Rr(s);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await mr(s);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await wr(s);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await yr(s);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await fr(s);default:const r=s.body;return Tr({output:e,parsedBody:r,errorCode:n})}},fr=async(e,t)=>{const s=e.body,n=y(s),r=new fe({$metadata:g(e),...n});return S(r,s)},yr=async(e,t)=>{const s=e.body,n=y(s),r=new pe({$metadata:g(e),...n});return S(r,s)},mr=async(e,t)=>{const s=e.body,n=y(s),r=new le({$metadata:g(e),...n});return S(r,s)},gr=async(e,t)=>{const s=e.body,n=y(s),r=new re({$metadata:g(e),...n});return S(r,s)},wr=async(e,t)=>{const s=e.body,n=y(s),r=new he({$metadata:g(e),...n});return S(r,s)},Er=async(e,t)=>{const s=e.body,n=y(s),r=new ie({$metadata:g(e),...n});return S(r,s)},br=async(e,t)=>{const s=e.body,n=y(s),r=new oe({$metadata:g(e),...n});return S(r,s)},Sr=async(e,t)=>{const s=e.body,n=y(s),r=new ae({$metadata:g(e),...n});return S(r,s)},xr=async(e,t)=>{const s=e.body,n=y(s),r=new ce({$metadata:g(e),...n});return S(r,s)},Rr=async(e,t)=>{const s=e.body,n=y(s),r=new ue({$metadata:g(e),...n});return S(r,s)},vr=async(e,t)=>{const s=e.body,n=y(s),r=new de({$metadata:g(e),...n});return S(r,s)},Ar=(e,t)=>qe(e,{AccessKeyId:G,Expiration:s=>Ot(Lt($t(s))),SecretKey:G,SessionToken:G}),Cr=(e,t)=>qe(e,{Credentials:s=>Ar(s),IdentityId:G}),g=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Tr=Mt(m),lt=async(e,t,s,n,r)=>{const{hostname:i,protocol:o="https",port:c,path:a}=await e.endpoint(),d={protocol:o,hostname:i,port:c,method:"POST",path:a.endsWith("/")?a.slice(0,-1)+s:a+s,headers:t};return n!==void 0&&(d.hostname=n),r!==void 0&&(d.body=r),new I(d)};function ht(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class Dr extends Ge.classBuilder().ep({...tt}).m(function(t,s,n,r){return[dt(n,this.serialize,this.deserialize),je(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(void 0,void 0).ser(ur).de(hr).build(){}class _r extends Ge.classBuilder().ep({...tt}).m(function(t,s,n,r){return[dt(n,this.serialize,this.deserialize),je(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(void 0,void 0).ser(lr).de(pr).build(){}export{kr as CognitoIdentityClient,Dr as GetCredentialsForIdentityCommand,_r as GetIdCommand};
