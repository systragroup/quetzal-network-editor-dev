import{al as I,u as U,a as L,am as R,c as z,r as d,d as y,f as m,A as f,l as A,j as c,C as _,m as N,E as x,H as P,I as $,i as g,a6 as E,aC as w,g as p,V,B as F,aD as T,_ as j}from"./index-CkVeTMkb.js";import{M as G}from"./Markdown-0f5kVtRK.js";const H={class:"container"},q={class:"layout"},J={key:0},K={class:"toolbar elevation-2"},O={class:"slider"},Q=I({__name:"ResultPicture",setup(W){const{$gettext:v}=U();function b(l){return new Promise((e,t)=>{const a=new FileReader;a.onload=s=>{s.target&&e(s.target.result)},a.onerror=s=>{t(s)},a.readAsDataURL(l)})}const r=L(),u=R(),k=z(()=>r.isMobile),n=d(50);y(()=>{n.value=k.value?100:50});const o=d([]),h=d(""),i=d("");async function M(){const l=u.scenario+"/",t=r.otherFiles.filter(s=>s.extension==="png");for(const s of t){if(s.content instanceof Uint8Array){const D=new Blob([s.content],{type:"image/png"});var a=await b(D)}else var a=await w.getImagesURL(u.model,l+s.path);const C=s.path.split("/").slice(-1)[0];o.value.push({name:C,src:a})}}async function S(){const l=u.scenario+"/",t=r.otherFiles.filter(a=>a.extension==="md");if(t.length>0){let a=t[0].content;a instanceof Uint8Array||(a=await w.readBytes(u.model,l+t[0].path)),i.value=new TextDecoder().decode(a)}}function B(){if(i.value.length>0){const l=[];for(const e of o.value)i.value.includes(e.name)&&(i.value=i.value.replace(e.name,e.src),l.push(e));o.value=o.value.filter(e=>!l.includes(e))}}return y(async()=>{r.changeLoading(!0),await M(),await S(),B(),r.changeLoading(!1),o.value.length===0&&i.value.length===0&&(h.value=v("Nothing to display"))}),(l,e)=>(p(),m("section",H,[f("div",q,[o.value.length===0?(p(),m("p",J,_(N(v)(h.value)),1)):A("",!0),c(G,{source:i.value,style:x({width:`${n.value}%`})},null,8,["source","style"]),(p(!0),m(P,null,$(o.value,t=>(p(),m("div",{key:t.name,class:"gallery",style:x({width:`${n.value}%`})},[c(T,{src:t.src,alt:t.name},null,8,["src","alt"])],4))),128))]),f("div",K,[f("div",O,[c(E,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value=t),class:"align-center",min:"0",max:"100",step:"1",density:"compact","track-size":"2","thumb-size":"10"},{prepend:g(()=>[c(V,{size:"x-small",onClick:e[0]||(e[0]=()=>{n.value=Math.max(0,n.value-10)})},{default:g(()=>e[3]||(e[3]=[F(" fa-solid fa-magnifying-glass-minus ",-1)])),_:1,__:[3]})]),append:g(()=>[f("span",null,_(n.value),1),c(V,{class:"ml-2",size:"x-small",onClick:e[1]||(e[1]=()=>{n.value=Math.min(100,n.value+10)})},{default:g(()=>e[4]||(e[4]=[F(" fa-solid fa-magnifying-glass-plus ",-1)])),_:1,__:[4]})]),_:1},8,["modelValue"])])])]))}}),Z=j(Q,[["__scopeId","data-v-26b29883"]]);export{Z as default};
