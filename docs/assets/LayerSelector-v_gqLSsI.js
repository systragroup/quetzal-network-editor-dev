import{_ as k,b9 as S,ba as $,r as v,d as p,e as _,z as w,h as i,g as s,H as B,I,X as M,k as T,F as L,bb as C,t as F,a as N,y as R,w as D,f as z,J as A,P as O,af as E,A as x,B as b,i as P,N as U,T as Y,V as j,O as G,L as H,E as J}from"./index-BLBFgIFO.js";const X={id:"app"},q={class:"list"},K=["onDragover","onDragend","onDragstart"],Q={__name:"DragList",props:{items:{},itemsModifiers:{}},emits:S("move",["update:items"]),setup(c,{emit:V}){const d=$(c,"items"),h=V,r=v({}),m=v(0),l=v(!1),f=v({});function o(a,u,t){m.value=t.clientY,l.value=!0,f.value=a}function n(a,u){d.value.splice(u,1),d.value.splice(r.value.pos,0,a),r.value={},h("move",a.name),f.value={}}function e(a,u,t){const y=m.value<t.clientY?"down":"up";r.value={item:a,pos:u,dir:y}}return(a,u)=>(p(),_("div",X,[w("div",q,[i(C,{name:"flip-list",tag:"div"},{default:s(()=>[(p(!0),_(B,null,I(d.value,(t,y)=>(p(),_("li",{key:t,class:M(["item",{over:t===r.value.item||t===f.value,[r.value.dir]:t===r.value.item&&t!==f.value}]),draggable:"true",onDragover:g=>e(t,y,g),onDragend:g=>n(t,y,g),onDragstart:g=>o(t,y,g)},[T(a.$slots,"default",L({ref_for:!0},t),void 0,!0)],42,K))),128))]),_:3})])]))}},W=k(Q,[["__scopeId","data-v-9f6e86dd"]]),Z={class:"layer-button"},ee={key:0},ae={key:1},te={__name:"LayerSelector",props:{choices:{type:Array,default:()=>[]},availableLayers:{type:Array,default:()=>[]},map:{type:Object,default:()=>{}}},setup(c){const V=c,{choices:d,map:h}=F(V),r=N(),m=v(!1),l=v([]);R(()=>{l.value=r.visibleRasters}),D(l,o=>{const e=d.value.map(a=>a.name).filter(a=>o.includes(a));r.setVisibleRasters(e)}),D(d,o=>{const n=o.map(e=>e.name);l.value=l.value.filter(e=>n.includes(e))},{deep:!0});function f(o){if(l.value.includes(o)){const e=d.value.map(a=>a.name).filter(a=>l.value.includes(a));r.setVisibleRasters(e);for(let a=0;a<e.length-1;a++){const u=e[a],t=e[a+1];h.value.moveLayer(t+"-layer",u+"-layer")}}}return(o,n)=>(p(),z(J,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e),"close-on-content-click":!1,persistent:!1,"no-click-animation":"",location:"bottom",offset:"5",transition:"scale-transition"},{activator:s(({props:e})=>[w("div",Z,[i(A,L(e,{color:l.value.length>0?"success":"white",icon:"fas fa-layer-group"}),null,16,["color"])])]),default:s(()=>[i(O,{"max-width":500,"max-height":"calc(100vh - 200px)"},{default:s(()=>[i(E,{class:"subtitle"},{default:s(()=>[x(b(o.$gettext("Static Layers")),1)]),_:1}),i(W,{items:P(d),onMove:f},{default:s(e=>[i(U,null,{prepend:s(()=>[i(Y,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=a=>l.value=a),value:e.name,"false-icon":c.availableLayers.includes(e.layer)?"fa-eye-slash fa":"fas fa-exclamation-triangle","true-icon":"fa-eye fa",color:"primary",disabled:!c.availableLayers.includes(e.layer)},null,8,["modelValue","value","false-icon","disabled"])]),append:s(()=>[i(j,{style:{cursor:"grab"},size:"small",icon:"fa-solid fa-arrows-up-down"})]),default:s(()=>[i(G,{location:"top","open-delay":"300"},{activator:s(({props:a})=>[i(H,L({style:{cursor:"default","padding-left":"1rem"}},a),{default:s(()=>[x(b(e.name),1)]),_:2},1040)]),default:s(()=>[c.availableLayers.includes(e.layer)?(p(),_("span",ae,b(e.displaySettings.selectedFeature+" "+o.$gettext("from")+" "+e.layer),1)):(p(),_("span",ee,b(o.$gettext("Data not found: ")+e.layer),1))]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1},8,["modelValue"]))}},le=k(te,[["__scopeId","data-v-d9e1b3db"]]);export{le as default};
