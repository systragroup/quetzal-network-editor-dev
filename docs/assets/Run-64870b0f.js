import{n as i}from"./index-63e2fb46.js";const l=s=>s,u={name:"Settings",data(){return{projectName:{name:"Project Name",text:l("project Name"),type:"String",value:this.$store.getters.projectId,hint:l("Change project Name"),rules:["required"]},rules:{required:s=>!!s||l("Required"),largerThanZero:s=>s>0||l("should be larger than 0"),nonNegative:s=>s>=0||l("should be larger or equal to 0")},errorMessage:null,showHint:!1,panel:[]}},computed:{parameters(){return this.$store.getters["run/parameters"]}},mounted(){this.panel=[...Array(this.parameters.length).keys()].map((s,e)=>e)},methods:{expandAll(){this.panel.length<this.parameters.length?this.panel=[...Array(this.parameters.length).keys()].map((s,e)=>e):this.panel=[]},change(s){},reset(){this.$store.dispatch("run/getParameters",{model:this.$store.getters.model,path:this.$store.getters.scenario+"/"+this.$store.getters.config.parameters_path})}}};var p=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"card"},[t("v-card-title",{staticClass:"subtitle"},[e._v(" "+e._s(e.$gettext("Scenario Settings"))+" ")]),t("v-card-text",[t("v-form",{ref:"form",attrs:{"lazy-validation":""}},[t("v-expansion-panels",{attrs:{multiple:""},model:{value:e.panel,callback:function(n){e.panel=n},expression:"panel"}},e._l(e.parameters,function(n,o){return t("v-expansion-panel",{key:o},[t("v-expansion-panel-header",{staticClass:"categorie"},[e._v(" "+e._s(n.category)+" ")]),t("v-expansion-panel-content",{staticStyle:{"background-color":"var(--v-background-lighten4) !important"}},e._l(n.params,function(r,c){return t("li",{key:c},[typeof r.items>"u"&&typeof r.value!="boolean"?t("v-text-field",{attrs:{type:r.type,label:e.$gettext(r.text),suffix:r.units,hint:e.showHint?e.$gettext(r.hint):"","persistent-hint":e.showHint,rules:r.rules.map(a=>e.rules[a]),required:""},on:{wheel:()=>{}},model:{value:r.value,callback:function(a){e.$set(r,"value",a)},expression:"item.value"}}):typeof r.items>"u"&&typeof r.value=="boolean"?t("v-switch",{attrs:{label:e.$gettext(r.text),hint:e.showHint?e.$gettext(r.hint):"","persistent-hint":e.showHint},on:{wheel:()=>{}},model:{value:r.value,callback:function(a){e.$set(r,"value",a)},expression:"item.value"}}):t("v-select",{attrs:{type:r.type,items:r.items,label:e.$gettext(r.text),suffix:r.units,hint:e.showHint?e.$gettext(r.hint):"","persistent-hint":e.showHint,rules:r.rules.map(a=>e.rules[a]),required:""},on:{wheel:()=>{}},model:{value:r.value,callback:function(a){e.$set(r,"value",a)},expression:"item.value"}})],1)}),0)],1)}),1)],1)],1),t("v-card-actions",[t("v-btn",{attrs:{color:"grey",text:""},on:{click:e.reset}},[e._v(" "+e._s(e.$gettext("back to default"))+" ")]),t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:e.expandAll}},[e._v(" "+e._s(e.panel.length!=e.parameters.length?e.$gettext("Expand all"):e.$gettext("Collapse all"))+" ")]),t("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){e.showHint=!e.showHint}}},[t("v-icon",[e._v("far fa-question-circle small")])],1)],1)],1)},h=[],d=i(u,p,h,!1,null,"bc5e9bdb",null,null);const v=d.exports;const _={name:"Run",components:{ParamForm:v},computed:{steps(){return this.$store.getters["run/steps"]},running(){return this.$store.getters["run/running"]},currentStep(){return this.$store.getters["run/currentStep"]},error(){return this.$store.getters["run/error"]},synchronized(){return this.$store.getters["run/synchronized"]},isProtected(){return this.$store.getters.protected.includes(this.$store.getters.scenario)}},created(){this.$store.dispatch("run/getSteps")},methods:{async run(){this.$store.commit("run/startExecution"),this.$store.dispatch("exportToS3").then(()=>{this.$store.dispatch("run/startExecution",{scenario:this.$store.getters.scenario})}).catch(s=>{this.$store.commit("run/terminateExecution"),this.$store.commit("changeAlert",s)})},stopRun(){this.$store.dispatch("run/stopExecution")}}};var g=function(){var e=this,t=e._self._c;return t("v-row",{staticClass:"ma-0 pa-2 background"},[t("v-col",{attrs:{order:"1"}},[t("ParamForm")],1),t("v-col",{attrs:{order:"2"}},[t("v-card",{staticClass:"card"},[t("v-card-title",{staticClass:"subtitle"},[e._v(" "+e._s(e.$gettext("Scenario Simulation"))+" ")]),t("v-stepper",{staticStyle:{"background-color":"var(--v-background-lighten4)"},attrs:{vertical:""},model:{value:e.currentStep,callback:function(n){e.currentStep=n},expression:"currentStep"}},[e.synchronized?e._e():t("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"warning"}},[e._v(" "+e._s(e.$gettext("Results are not synchronized with latest modifications.  Please relauch simulation to update results."))+" ")]),e.error?t("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"error"}},[e._v(" "+e._s(e.$gettext("Simulation ended with an execution error or have been aborted.  Please relauch simulation. If the problem persist, contact us."))+" ")]):e._e(),e.isProtected?t("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"error"}},[e._v(" "+e._s(e.$gettext("This scenario is protected. You can not run simulation."))+" ")]):e._e(),t("v-btn",{attrs:{loading:e.running,disabled:e.running||e.isProtected,color:"success"},on:{click:function(n){return e.run()}}},[t("v-icon",{staticStyle:{"margin-right":"10px"},attrs:{small:""}},[e._v(" fa-solid fa-play ")]),e._v(" "+e._s(e.$gettext("Run Simulation"))+" ")],1),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.running&&e.currentStep!==1,expression:"running && currentStep!==1"}],attrs:{color:"grey",text:""},on:{click:function(n){return e.stopRun()}}},[e._v(" "+e._s(e.$gettext("Abort Simulation"))+" ")]),e._l(e.steps,function(n,o){return t("v-container",{key:o+1},[t("v-stepper-content",{attrs:{step:o+1}}),t("v-stepper-step",{attrs:{complete:e.currentStep>o+1,step:o+1,rules:[()=>o+1!=e.currentStep||!e.error]}},[e._v(" "+e._s(n.name)+" ")])],1)})],2)],1)],1)],1)},m=[],x=i(_,g,m,!1,null,"07a1696b",null,null);const $=x.exports;export{$ as default};
