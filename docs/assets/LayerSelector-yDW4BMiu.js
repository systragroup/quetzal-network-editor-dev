import{_ as x,aO as $,aP as B,r as f,g as v,q as _,v as S,j as c,i as t,F as I,R,aQ as w,aR as C,k as M,E as T,aS as F,t as P,u as N,p as O,w as h,h as j,C as D,G as z,aa as A,x as k,y as V,aT as E,J as G,Q,V as U,K as Y,I as q,L as J,B as K}from"./index-mc8WTQKX.js";const H={id:"app"},W={class:"list"},X=["onDragover","onDragend","onDragstart"],Z={__name:"DragList",props:{items:{},itemsModifiers:{}},emits:$("move",["update:items"]),setup(d,{emit:b}){const i=B(d,"items"),L=b,r=f({}),p=f(0),o=f(!1),m=f({});function l(a,u,s){p.value=s.clientY,o.value=!0,m.value=a}function n(a,u){i.value.splice(u,1),i.value.splice(r.value.pos,0,a),r.value={},L("move",a.name)}function e(a,u,s){const y=p.value<s.clientY?"down":"up";r.value={item:a,pos:u,dir:y}}return(a,u)=>(v(),_("div",H,[S("div",W,[c(F,{name:"flip-list",tag:"div"},{default:t(()=>[(v(!0),_(I,null,T(i.value,(s,y)=>(v(),_("li",{key:s,class:R(["item",{over:s===r.value.item&&s!==m.value,[r.value.dir]:s===r.value.item&&s!==m.value}]),draggable:"true",onDragover:g=>e(s,y,g),onDragend:g=>n(s,y,g),onDragstart:g=>l(s,y,g)},[M(a.$slots,"default",C(w(s)),void 0,!0)],42,X))),128))]),_:3})])]))}},ee=x(Z,[["__scopeId","data-v-705be1cc"]]),ae={class:"layer-button"},se={key:0},te={key:1},oe={__name:"LayerSelector",props:{choices:{type:Array,default:()=>[]},availableLayers:{type:Array,default:()=>[]},map:{type:Object,default:()=>{}}},setup(d){const b=d,{choices:i,map:L}=P(b),r=N(),p=f(!1),o=f([]);O(()=>{o.value=r.visibleRasters}),h(o,l=>{const e=i.value.map(a=>a.name).filter(a=>l.includes(a));r.setVisibleRasters(e)}),h(i,l=>{const n=l.map(e=>e.name);o.value=o.value.filter(e=>n.includes(e))},{deep:!0});function m(l){if(o.value.includes(l)){const e=i.value.map(a=>a.name).filter(a=>o.value.includes(a));r.setVisibleRasters(e);for(let a=0;a<e.length-1;a++){const u=e[a],s=e[a+1];L.value.moveLayer(s+"-layer",u+"-layer")}}}return(l,n)=>(v(),j(K,{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),"close-on-content-click":!1,persistent:!1,"no-click-animation":"",location:"bottom",offset:"5",transition:"scale-transition"},{activator:t(({props:e})=>[S("div",ae,[c(z,D(e,{color:o.value.length>0?"success":"regular",icon:"fas fa-layer-group"}),null,16,["color"])])]),default:t(()=>[c(J,{"max-width":300},{default:t(()=>[c(A,{class:"subtitle"},{default:t(()=>[k(V(l.$gettext("Static Layers")),1)]),_:1}),c(ee,{items:E(i),onMove:m},{default:t(e=>[c(G,null,{prepend:t(()=>[c(Q,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=a=>o.value=a),value:e.name,"false-icon":d.availableLayers.includes(e.layer)?"fa-eye-slash fa":"fas fa-exclamation-triangle","true-icon":"fa-eye fa",color:"primary",disabled:!d.availableLayers.includes(e.layer)},null,8,["modelValue","value","false-icon","disabled"])]),append:t(()=>[c(U,{style:{cursor:"grab"},icon:"fas fa-bars"})]),default:t(()=>[c(Y,{location:"top","open-delay":"300","content-class":"custom-tooltip"},{activator:t(({props:a})=>[c(q,D({style:{cursor:"default","padding-left":"1rem"}},a),{default:t(()=>[k(V(e.name),1)]),_:2},1040)]),default:t(()=>[d.availableLayers.includes(e.layer)?(v(),_("span",te,V(e.displaySettings.selectedFeature+" "+l.$gettext("from")+" "+e.layer),1)):(v(),_("span",se,V(l.$gettext("Data not found: ")+e.layer),1))]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1},8,["modelValue"]))}},re=x(oe,[["__scopeId","data-v-abdf49a6"]]);export{re as default};
