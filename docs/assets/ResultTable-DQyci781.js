import{al as T,a as C,am as F,r as p,c as L,d as B,f as l,l as _,C as v,H as D,I as U,j as c,aD as j,aB as E,aE as N,g as i,i as m,aF as R,aG as A,B as H,a9 as O,aH as $,aI as y,aj as G,_ as K}from"./index-58SY0q0Y.js";const M={class:"layout"},W={key:0},q={key:1,class:"card elevation-3"},b=40,z=T({__name:"ResultTable",setup(J){const n=C(),f=F(),r=p([]),d=p(0),g=p(10),u=L(()=>n.otherFiles.filter(e=>e.extension==="csv"));async function x(){const e=f.scenario+"/";d.value=u.value.length;for(const a of u.value)a.content instanceof Uint8Array||(a.content=await E.readBytes(f.model,e+a.path,b))}async function V(e){const a=e.path.slice(0,-4);let t=[];e.content===null?t=[{too_large:`cannot display, more than ${b} mb`}]:t=await N(e.content.buffer);const s=Object.keys(t[0]).map(o=>({title:o,key:o,width:"1%"}));r.value.push({headers:s,items:t.slice(0,g.value),data:t,name:a,totalItems:t.length}),d.value-=1}B(async()=>{n.changeLoading(!0);try{await x(),n.changeLoading(!1)}catch(e){n.changeAlert(e),n.changeLoading(!1),d.value=0}for(const e of u.value)await V(e)});function S(e,a,t,s){const o=(a-1)*t,h=o+t;if(s.length>0){const I=s[0].key,w=s[0].order;e=G.orderBy(e,I,w)}return e.slice(o,h)}async function k({key:e,page:a,itemsPerPage:t,sortBy:s}){const o=y(r.value[e].data),h=S(o,a,t,y(s));r.value[e].items=h}return(e,a)=>(i(),l("section",M,[r.value.length===0?(i(),l("p",W,v(e.$gettext("nothing to display")),1)):_("",!0),(i(!0),l(D,null,U(r.value,(t,s)=>(i(),l("div",{key:s,class:"card elevation-3"},[c($,{"items-per-page":g.value,headers:t.headers,class:"fill-height","items-length":t.totalItems,"fixed-header":"","fixed-footer":"",items:t.items,"onUpdate:options":o=>k({key:s,...o})},{top:m(()=>[c(R,{class:"custom-title"},{default:m(()=>[c(A,null,{default:m(()=>[H(v(t.name),1)]),_:2},1024),c(O)]),_:2},1024)]),_:2},1032,["items-per-page","headers","items-length","items","onUpdate:options"])]))),128)),d.value>0?(i(),l("div",q,[c(j,{type:"heading,table-thead, table-tbody "})])):_("",!0)]))}}),X=K(z,[["__scopeId","data-v-9ebe2c58"]]);export{X as default};
