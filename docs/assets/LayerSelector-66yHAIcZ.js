import{_ as S,b7 as B,b8 as I,r as v,f as y,g as p,A as w,j as n,i as l,H as O,I as $,Y as C,k as M,O as h,ba as T,t as F,a as N,d as z,w as D,h as A,Q as U,ag as Y,B as x,C as _,m as k,J as j,P as E,K as P,V as G,U as H,E as J,L as K,F as Q}from"./index-DCVCAJlL.js";const R={id:"app"},q={class:"list"},W=["onDragover","onDragend","onDragstart"],X={__name:"DragList",props:{items:{},itemsModifiers:{}},emits:B("move",["update:items"]),setup(c,{emit:b}){const i=I(c,"items"),L=b,u=v({}),f=v(0),g=v(!1),s=v({});function V(e,a,t){f.value=t.clientY,g.value=!0,s.value=e}function r(e,a){i.value.splice(a,1),i.value.splice(u.value.pos,0,e),u.value={},L("move",e.name),s.value={}}function o(e,a,t){const d=f.value<t.clientY?"down":"up";u.value={item:e,pos:a,dir:d}}return(e,a)=>(p(),y("div",R,[w("div",q,[n(T,{name:"flip-list",tag:"div"},{default:l(()=>[(p(!0),y(O,null,$(i.value,(t,d)=>(p(),y("li",{key:t,class:C(["item",{over:t===u.value.item||t===s.value,[u.value.dir]:t===u.value.item&&t!==s.value}]),draggable:"true",onDragover:m=>o(t,d,m),onDragend:m=>r(t,d,m),onDragstart:m=>V(t,d,m)},[M(e.$slots,"default",h({ref_for:!0},t),void 0,!0)],42,W))),128))]),_:3})])]))}},Z=S(X,[["__scopeId","data-v-9f6e86dd"]]),ee={key:0},ae={key:1},te={__name:"LayerSelector",props:{choices:{type:Array,default:()=>[]},availableLayers:{type:Array,default:()=>[]},map:{type:Object,default:()=>{}},order:{type:Number,default:3}},setup(c){const b=c,{choices:i,map:L,order:u}=F(b),f=N(),g=v(!1),s=v([]);z(()=>{s.value=f.visibleLayers}),D(s,r=>{const e=i.value.map(a=>a.name).filter(a=>r.includes(a));f.setvisibleLayers(e)}),D(i,r=>{const o=r.map(e=>e.name);s.value=s.value.filter(e=>o.includes(e))},{deep:!0});function V(r){if(s.value.includes(r)){const e=i.value.map(a=>a.name).filter(a=>s.value.includes(a));f.setvisibleLayers(e);for(let a=0;a<e.length-1;a++){const t=e[a],d=e[a+1];L.value.moveLayer(d+"-layer",t+"-layer")}}}return(r,o)=>(p(),A(Q,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=e=>g.value=e),"close-on-content-click":!1,persistent:!1,"no-click-animation":"",location:"bottom",offset:"5",transition:"scale-transition"},{activator:l(({props:e})=>[w("div",{class:"layer-button",style:J({"--n":k(u)})},[n(K,h(e,{color:s.value.length>0?"success":"regular",icon:"fas fa-layer-group"}),null,16,["color"])],4)]),default:l(()=>[n(U,{"max-width":500,"max-height":"calc(100vh - 200px)"},{default:l(()=>[n(Y,{class:"subtitle"},{default:l(()=>[x(_(r.$gettext("Static Layers")),1)]),_:1}),n(Z,{items:k(i),onMove:V},{default:l(e=>[n(j,null,{prepend:l(()=>[n(H,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=a=>s.value=a),value:e.name,"false-icon":c.availableLayers.includes(e.layer)?"fa-eye-slash fa":"fas fa-exclamation-triangle","true-icon":"fa-eye fa",color:"primary",disabled:!c.availableLayers.includes(e.layer)},null,8,["modelValue","value","false-icon","disabled"])]),append:l(()=>[n(G,{style:{cursor:"grab"},size:"small",icon:"fa-solid fa-arrows-up-down"})]),default:l(()=>[n(E,{location:"top","open-delay":"300"},{activator:l(({props:a})=>[n(P,h({style:{cursor:"default","padding-left":"1rem"}},a),{default:l(()=>[x(_(e.name),1)]),_:2},1040)]),default:l(()=>[c.availableLayers.includes(e.layer)?(p(),y("span",ae,_(e.displaySettings.selectedFeature+" "+r.$gettext("from")+" "+e.layer),1)):(p(),y("span",ee,_(r.$gettext("Data not found: ")+e.layer),1))]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1},8,["modelValue"]))}},le=S(te,[["__scopeId","data-v-44e9b7d0"]]);export{le as default};
