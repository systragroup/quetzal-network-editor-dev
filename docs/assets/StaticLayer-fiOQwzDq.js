import{_ as zn,u as Je,e as he,y as Hl,z as Wl,g as ve,q as ge,s as Hr,F as Yl,E as Ul,R as En,x as ce,aI as Fr,aJ as Pn,aK as Zl,r as pr,a8 as Sr,ax as Br,a4 as Jl,a5 as Ql,a6 as Kl,t as Vl,p as rf,o as ef,f as af,j as nf}from"./index-jkbvNkj1.js";const tf={name:"MapLegend",components:{},props:{colorScale:{type:Array,default:()=>[]},displaySettings:{type:Object,default:()=>{}},baseOffset:{type:Number,default:()=>300},order:{type:Number,default:()=>0}},setup(L){const $=Je(),w=he(()=>$.windowHeight-70),E=he(()=>$.showLeftPanel?50+180*L.order+L.baseOffset:50+180*L.order);return{windowHeight:w,leftOffset:E}}},uf={class:"gradient"},of={class:"domain-title"},lf={class:"domain-min"},ff={class:"domain-med"},sf={class:"domain-max"};function cf(L,$,w,E,P,O){return Hl((ve(),ge("div",{class:"legend elevation-4",style:En({top:`${E.windowHeight}px`,left:`${E.leftOffset}px !important`})},[Hr("div",uf,[(ve(!0),ge(Yl,null,Ul(w.colorScale,(m,x)=>(ve(),ge("span",{key:x,class:"grad-step",style:En({backgroundColor:m})},null,4))),128)),Hr("span",of,ce(w.displaySettings.selectedFeature),1),Hr("span",lf,ce(Math.round(w.displaySettings.minVal)),1),Hr("span",ff,ce(Math.round((w.displaySettings.maxVal+w.displaySettings.minVal)/2)),1),Hr("span",sf,ce(Math.round(w.displaySettings.maxVal)),1)])],4)),[[Wl,!isNaN(w.displaySettings.minVal)&&!isNaN(w.displaySettings.minVal)]])}const vf=zn(tf,[["render",cf],["__scopeId","data-v-4c7c86cb"]]);var In={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(L,$){(function(w,E){L.exports=E()})(Fr,function(){for(var w=function(r,e,a){return e===void 0&&(e=0),a===void 0&&(a=1),r<e?e:r>a?a:r},E=w,P=function(r){r._clipped=!1,r._unclipped=r.slice(0);for(var e=0;e<=3;e++)e<3?((r[e]<0||r[e]>255)&&(r._clipped=!0),r[e]=E(r[e],0,255)):e===3&&(r[e]=E(r[e],0,1));return r},O={},m=0,x=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];m<x.length;m+=1){var i=x[m];O["[object "+i+"]"]=i.toLowerCase()}var v=function(r){return O[Object.prototype.toString.call(r)]||"object"},y=v,c=function(r,e){return e===void 0&&(e=null),r.length>=3?Array.prototype.slice.call(r):y(r[0])=="object"&&e?e.split("").filter(function(a){return r[0][a]!==void 0}).map(function(a){return r[0][a]}):r[0]},g=v,k=function(r){if(r.length<2)return null;var e=r.length-1;return g(r[e])=="string"?r[e].toLowerCase():null},F=Math.PI,b={clip_rgb:P,limit:w,type:v,unpack:c,last:k,PI:F,TWOPI:F*2,PITHIRD:F/3,DEG2RAD:F/180,RAD2DEG:180/F},W={format:{},autodetect:[]},cr=b.last,br=b.clip_rgb,dr=b.type,R=W,D=function(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];var n=this;if(dr(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var u=cr(e),o=!1;if(!u){o=!0,R.sorted||(R.autodetect=R.autodetect.sort(function(h,_){return _.p-h.p}),R.sorted=!0);for(var t=0,l=R.autodetect;t<l.length;t+=1){var f=l[t];if(u=f.test.apply(f,e),u)break}}if(R.format[u]){var s=R.format[u].apply(null,o?e:e.slice(0,-1));n._rgb=br(s)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)};D.prototype.toString=function(){return dr(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var M=D,K=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(K.Color,[null].concat(r)))};K.Color=M,K.version="2.4.2";var I=K,rr=b.unpack,ar=Math.max,tr=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=rr(r,"rgb"),n=a[0],u=a[1],o=a[2];n=n/255,u=u/255,o=o/255;var t=1-ar(n,ar(u,o)),l=t<1?1/(1-t):0,f=(1-n-t)*l,s=(1-u-t)*l,h=(1-o-t)*l;return[f,s,h,t]},z=tr,S=b.unpack,Y=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=S(r,"cmyk");var a=r[0],n=r[1],u=r[2],o=r[3],t=r.length>4?r[4]:1;return o===1?[0,0,0,t]:[a>=1?0:255*(1-a)*(1-o),n>=1?0:255*(1-n)*(1-o),u>=1?0:255*(1-u)*(1-o),t]},er=Y,ur=I,Zr=M,Jr=W,Qr=b.unpack,Kr=b.type,pe=z;Zr.prototype.cmyk=function(){return pe(this._rgb)},ur.cmyk=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(Zr,[null].concat(r,["cmyk"])))},Jr.format.cmyk=er,Jr.autodetect.push({p:2,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=Qr(r,"cmyk"),Kr(r)==="array"&&r.length===4)return"cmyk"}});var xr=b.unpack,de=b.last,Vr=function(r){return Math.round(r*100)/100},or=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=xr(r,"hsla"),n=de(r)||"lsa";return a[0]=Vr(a[0]||0),a[1]=Vr(a[1]*100)+"%",a[2]=Vr(a[2]*100)+"%",n==="hsla"||a.length>3&&a[3]<1?(a[3]=a.length>3?a[3]:1,n="hsla"):a.length=3,n+"("+a.join(",")+")"},vr=or,be=b.unpack,ye=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=be(r,"rgba");var a=r[0],n=r[1],u=r[2];a/=255,n/=255,u/=255;var o=Math.min(a,n,u),t=Math.max(a,n,u),l=(t+o)/2,f,s;return t===o?(f=0,s=Number.NaN):f=l<.5?(t-o)/(t+o):(t-o)/(2-t-o),a==t?s=(n-u)/(t-o):n==t?s=2+(u-a)/(t-o):u==t&&(s=4+(a-n)/(t-o)),s*=60,s<0&&(s+=360),r.length>3&&r[3]!==void 0?[s,f,l,r[3]]:[s,f,l]},re=ye,me=b.unpack,ee=b.last,Dn=vr,qn=re,we=Math.round,Gn=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=me(r,"rgba"),n=ee(r)||"rgb";return n.substr(0,3)=="hsl"?Dn(qn(a),n):(a[0]=we(a[0]),a[1]=we(a[1]),a[2]=we(a[2]),(n==="rgba"||a.length>3&&a[3]<1)&&(a[3]=a.length>3?a[3]:1,n="rgba"),n+"("+a.slice(0,n==="rgb"?3:4).join(",")+")")},Tn=Gn,jn=b.unpack,xe=Math.round,Xn=function(){for(var r,e=[],a=arguments.length;a--;)e[a]=arguments[a];e=jn(e,"hsl");var n=e[0],u=e[1],o=e[2],t,l,f;if(u===0)t=l=f=o*255;else{var s=[0,0,0],h=[0,0,0],_=o<.5?o*(1+u):o+u-o*u,p=2*o-_,N=n/360;s[0]=N+1/3,s[1]=N,s[2]=N-1/3;for(var C=0;C<3;C++)s[C]<0&&(s[C]+=1),s[C]>1&&(s[C]-=1),6*s[C]<1?h[C]=p+(_-p)*6*s[C]:2*s[C]<1?h[C]=_:3*s[C]<2?h[C]=p+(_-p)*(2/3-s[C])*6:h[C]=p;r=[xe(h[0]*255),xe(h[1]*255),xe(h[2]*255)],t=r[0],l=r[1],f=r[2]}return e.length>3?[t,l,f,e[3]]:[t,l,f,1]},na=Xn,ta=na,ua=W,oa=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,la=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,fa=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ia=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,sa=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ca=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,va=Math.round,ga=function(r){r=r.toLowerCase().trim();var e;if(ua.format.named)try{return ua.format.named(r)}catch{}if(e=r.match(oa)){for(var a=e.slice(1,4),n=0;n<3;n++)a[n]=+a[n];return a[3]=1,a}if(e=r.match(la)){for(var u=e.slice(1,5),o=0;o<4;o++)u[o]=+u[o];return u}if(e=r.match(fa)){for(var t=e.slice(1,4),l=0;l<3;l++)t[l]=va(t[l]*2.55);return t[3]=1,t}if(e=r.match(ia)){for(var f=e.slice(1,5),s=0;s<3;s++)f[s]=va(f[s]*2.55);return f[3]=+f[3],f}if(e=r.match(sa)){var h=e.slice(1,4);h[1]*=.01,h[2]*=.01;var _=ta(h);return _[3]=1,_}if(e=r.match(ca)){var p=e.slice(1,4);p[1]*=.01,p[2]*=.01;var N=ta(p);return N[3]=+e[4],N}};ga.test=function(r){return oa.test(r)||la.test(r)||fa.test(r)||ia.test(r)||sa.test(r)||ca.test(r)};var Bn=ga,Hn=I,ha=M,pa=W,Wn=b.type,Yn=Tn,da=Bn;ha.prototype.css=function(r){return Yn(this._rgb,r)},Hn.css=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(ha,[null].concat(r,["css"])))},pa.format.css=da,pa.autodetect.push({p:5,test:function(r){for(var e=[],a=arguments.length-1;a-- >0;)e[a]=arguments[a+1];if(!e.length&&Wn(r)==="string"&&da.test(r))return"css"}});var ba=M,Un=I,Zn=W,Jn=b.unpack;Zn.format.gl=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=Jn(r,"rgba");return a[0]*=255,a[1]*=255,a[2]*=255,a},Un.gl=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(ba,[null].concat(r,["gl"])))},ba.prototype.gl=function(){var r=this._rgb;return[r[0]/255,r[1]/255,r[2]/255,r[3]]};var Qn=b.unpack,Kn=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=Qn(r,"rgb"),n=a[0],u=a[1],o=a[2],t=Math.min(n,u,o),l=Math.max(n,u,o),f=l-t,s=f*100/255,h=t/(255-f)*100,_;return f===0?_=Number.NaN:(n===l&&(_=(u-o)/f),u===l&&(_=2+(o-n)/f),o===l&&(_=4+(n-u)/f),_*=60,_<0&&(_+=360)),[_,s,h]},Vn=Kn,rt=b.unpack,et=Math.floor,at=function(){for(var r,e,a,n,u,o,t=[],l=arguments.length;l--;)t[l]=arguments[l];t=rt(t,"hcg");var f=t[0],s=t[1],h=t[2],_,p,N;h=h*255;var C=s*255;if(s===0)_=p=N=h;else{f===360&&(f=0),f>360&&(f-=360),f<0&&(f+=360),f/=60;var q=et(f),j=f-q,B=h*(1-s),U=B+C*(1-j),ir=B+C*j,fr=B+C;switch(q){case 0:r=[fr,ir,B],_=r[0],p=r[1],N=r[2];break;case 1:e=[U,fr,B],_=e[0],p=e[1],N=e[2];break;case 2:a=[B,fr,ir],_=a[0],p=a[1],N=a[2];break;case 3:n=[B,U,fr],_=n[0],p=n[1],N=n[2];break;case 4:u=[ir,B,fr],_=u[0],p=u[1],N=u[2];break;case 5:o=[fr,B,U],_=o[0],p=o[1],N=o[2];break}}return[_,p,N,t.length>3?t[3]:1]},nt=at,tt=b.unpack,ut=b.type,ot=I,ya=M,ma=W,lt=Vn;ya.prototype.hcg=function(){return lt(this._rgb)},ot.hcg=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(ya,[null].concat(r,["hcg"])))},ma.format.hcg=nt,ma.autodetect.push({p:1,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=tt(r,"hcg"),ut(r)==="array"&&r.length===3)return"hcg"}});var ft=b.unpack,it=b.last,ae=Math.round,st=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=ft(r,"rgba"),n=a[0],u=a[1],o=a[2],t=a[3],l=it(r)||"auto";t===void 0&&(t=1),l==="auto"&&(l=t<1?"rgba":"rgb"),n=ae(n),u=ae(u),o=ae(o);var f=n<<16|u<<8|o,s="000000"+f.toString(16);s=s.substr(s.length-6);var h="0"+ae(t*255).toString(16);switch(h=h.substr(h.length-2),l.toLowerCase()){case"rgba":return"#"+s+h;case"argb":return"#"+h+s;default:return"#"+s}},wa=st,ct=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,vt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,gt=function(r){if(r.match(ct)){(r.length===4||r.length===7)&&(r=r.substr(1)),r.length===3&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var e=parseInt(r,16),a=e>>16,n=e>>8&255,u=e&255;return[a,n,u,1]}if(r.match(vt)){(r.length===5||r.length===9)&&(r=r.substr(1)),r.length===4&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]);var o=parseInt(r,16),t=o>>24&255,l=o>>16&255,f=o>>8&255,s=Math.round((o&255)/255*100)/100;return[t,l,f,s]}throw new Error("unknown hex color: "+r)},xa=gt,ht=I,ka=M,pt=b.type,_a=W,dt=wa;ka.prototype.hex=function(r){return dt(this._rgb,r)},ht.hex=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(ka,[null].concat(r,["hex"])))},_a.format.hex=xa,_a.autodetect.push({p:4,test:function(r){for(var e=[],a=arguments.length-1;a-- >0;)e[a]=arguments[a+1];if(!e.length&&pt(r)==="string"&&[3,4,5,6,7,8,9].indexOf(r.length)>=0)return"hex"}});var bt=b.unpack,$a=b.TWOPI,yt=Math.min,mt=Math.sqrt,wt=Math.acos,xt=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=bt(r,"rgb"),n=a[0],u=a[1],o=a[2];n/=255,u/=255,o/=255;var t,l=yt(n,u,o),f=(n+u+o)/3,s=f>0?1-l/f:0;return s===0?t=NaN:(t=(n-u+(n-o))/2,t/=mt((n-u)*(n-u)+(n-o)*(u-o)),t=wt(t),o>u&&(t=$a-t),t/=$a),[t*360,s,f]},kt=xt,_t=b.unpack,ke=b.limit,zr=b.TWOPI,_e=b.PITHIRD,Pr=Math.cos,$t=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=_t(r,"hsi");var a=r[0],n=r[1],u=r[2],o,t,l;return isNaN(a)&&(a=0),isNaN(n)&&(n=0),a>360&&(a-=360),a<0&&(a+=360),a/=360,a<1/3?(l=(1-n)/3,o=(1+n*Pr(zr*a)/Pr(_e-zr*a))/3,t=1-(l+o)):a<2/3?(a-=1/3,o=(1-n)/3,t=(1+n*Pr(zr*a)/Pr(_e-zr*a))/3,l=1-(o+t)):(a-=2/3,t=(1-n)/3,l=(1+n*Pr(zr*a)/Pr(_e-zr*a))/3,o=1-(t+l)),o=ke(u*o*3),t=ke(u*t*3),l=ke(u*l*3),[o*255,t*255,l*255,r.length>3?r[3]:1]},Mt=$t,Ct=b.unpack,Nt=b.type,St=I,Ma=M,Ca=W,Ft=kt;Ma.prototype.hsi=function(){return Ft(this._rgb)},St.hsi=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(Ma,[null].concat(r,["hsi"])))},Ca.format.hsi=Mt,Ca.autodetect.push({p:2,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=Ct(r,"hsi"),Nt(r)==="array"&&r.length===3)return"hsi"}});var Lt=b.unpack,Et=b.type,At=I,Na=M,Sa=W,Ot=re;Na.prototype.hsl=function(){return Ot(this._rgb)},At.hsl=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(Na,[null].concat(r,["hsl"])))},Sa.format.hsl=na,Sa.autodetect.push({p:2,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=Lt(r,"hsl"),Et(r)==="array"&&r.length===3)return"hsl"}});var zt=b.unpack,Pt=Math.min,It=Math.max,Rt=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=zt(r,"rgb");var a=r[0],n=r[1],u=r[2],o=Pt(a,n,u),t=It(a,n,u),l=t-o,f,s,h;return h=t/255,t===0?(f=Number.NaN,s=0):(s=l/t,a===t&&(f=(n-u)/l),n===t&&(f=2+(u-a)/l),u===t&&(f=4+(a-n)/l),f*=60,f<0&&(f+=360)),[f,s,h]},Dt=Rt,qt=b.unpack,Gt=Math.floor,Tt=function(){for(var r,e,a,n,u,o,t=[],l=arguments.length;l--;)t[l]=arguments[l];t=qt(t,"hsv");var f=t[0],s=t[1],h=t[2],_,p,N;if(h*=255,s===0)_=p=N=h;else{f===360&&(f=0),f>360&&(f-=360),f<0&&(f+=360),f/=60;var C=Gt(f),q=f-C,j=h*(1-s),B=h*(1-s*q),U=h*(1-s*(1-q));switch(C){case 0:r=[h,U,j],_=r[0],p=r[1],N=r[2];break;case 1:e=[B,h,j],_=e[0],p=e[1],N=e[2];break;case 2:a=[j,h,U],_=a[0],p=a[1],N=a[2];break;case 3:n=[j,B,h],_=n[0],p=n[1],N=n[2];break;case 4:u=[U,j,h],_=u[0],p=u[1],N=u[2];break;case 5:o=[h,j,B],_=o[0],p=o[1],N=o[2];break}}return[_,p,N,t.length>3?t[3]:1]},jt=Tt,Xt=b.unpack,Bt=b.type,Ht=I,Fa=M,La=W,Wt=Dt;Fa.prototype.hsv=function(){return Wt(this._rgb)},Ht.hsv=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(Fa,[null].concat(r,["hsv"])))},La.format.hsv=jt,La.autodetect.push({p:2,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=Xt(r,"hsv"),Bt(r)==="array"&&r.length===3)return"hsv"}});var ne={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Ir=ne,Yt=b.unpack,Ea=Math.pow,Ut=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=Yt(r,"rgb"),n=a[0],u=a[1],o=a[2],t=Zt(n,u,o),l=t[0],f=t[1],s=t[2],h=116*f-16;return[h<0?0:h,500*(l-f),200*(f-s)]},$e=function(r){return(r/=255)<=.04045?r/12.92:Ea((r+.055)/1.055,2.4)},Me=function(r){return r>Ir.t3?Ea(r,1/3):r/Ir.t2+Ir.t0},Zt=function(r,e,a){r=$e(r),e=$e(e),a=$e(a);var n=Me((.4124564*r+.3575761*e+.1804375*a)/Ir.Xn),u=Me((.2126729*r+.7151522*e+.072175*a)/Ir.Yn),o=Me((.0193339*r+.119192*e+.9503041*a)/Ir.Zn);return[n,u,o]},Aa=Ut,Rr=ne,Jt=b.unpack,Qt=Math.pow,Kt=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=Jt(r,"lab");var a=r[0],n=r[1],u=r[2],o,t,l,f,s,h;return t=(a+16)/116,o=isNaN(n)?t:t+n/500,l=isNaN(u)?t:t-u/200,t=Rr.Yn*Ne(t),o=Rr.Xn*Ne(o),l=Rr.Zn*Ne(l),f=Ce(3.2404542*o-1.5371385*t-.4985314*l),s=Ce(-.969266*o+1.8760108*t+.041556*l),h=Ce(.0556434*o-.2040259*t+1.0572252*l),[f,s,h,r.length>3?r[3]:1]},Ce=function(r){return 255*(r<=.00304?12.92*r:1.055*Qt(r,1/2.4)-.055)},Ne=function(r){return r>Rr.t1?r*r*r:Rr.t2*(r-Rr.t0)},Oa=Kt,Vt=b.unpack,ru=b.type,eu=I,za=M,Pa=W,au=Aa;za.prototype.lab=function(){return au(this._rgb)},eu.lab=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(za,[null].concat(r,["lab"])))},Pa.format.lab=Oa,Pa.autodetect.push({p:2,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=Vt(r,"lab"),ru(r)==="array"&&r.length===3)return"lab"}});var nu=b.unpack,tu=b.RAD2DEG,uu=Math.sqrt,ou=Math.atan2,lu=Math.round,fu=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=nu(r,"lab"),n=a[0],u=a[1],o=a[2],t=uu(u*u+o*o),l=(ou(o,u)*tu+360)%360;return lu(t*1e4)===0&&(l=Number.NaN),[n,t,l]},Ia=fu,iu=b.unpack,su=Aa,cu=Ia,vu=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=iu(r,"rgb"),n=a[0],u=a[1],o=a[2],t=su(n,u,o),l=t[0],f=t[1],s=t[2];return cu(l,f,s)},gu=vu,hu=b.unpack,pu=b.DEG2RAD,du=Math.sin,bu=Math.cos,yu=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=hu(r,"lch"),n=a[0],u=a[1],o=a[2];return isNaN(o)&&(o=0),o=o*pu,[n,bu(o)*u,du(o)*u]},Ra=yu,mu=b.unpack,wu=Ra,xu=Oa,ku=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=mu(r,"lch");var a=r[0],n=r[1],u=r[2],o=wu(a,n,u),t=o[0],l=o[1],f=o[2],s=xu(t,l,f),h=s[0],_=s[1],p=s[2];return[h,_,p,r.length>3?r[3]:1]},Da=ku,_u=b.unpack,$u=Da,Mu=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=_u(r,"hcl").reverse();return $u.apply(void 0,a)},Cu=Mu,Nu=b.unpack,Su=b.type,qa=I,te=M,Se=W,Ga=gu;te.prototype.lch=function(){return Ga(this._rgb)},te.prototype.hcl=function(){return Ga(this._rgb).reverse()},qa.lch=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(te,[null].concat(r,["lch"])))},qa.hcl=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(te,[null].concat(r,["hcl"])))},Se.format.lch=Da,Se.format.hcl=Cu,["lch","hcl"].forEach(function(r){return Se.autodetect.push({p:2,test:function(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];if(e=Nu(e,r),Su(e)==="array"&&e.length===3)return r}})});var Fu={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ta=Fu,Lu=M,ja=W,Eu=b.type,Wr=Ta,Au=xa,Ou=wa;Lu.prototype.name=function(){for(var r=Ou(this._rgb,"rgb"),e=0,a=Object.keys(Wr);e<a.length;e+=1){var n=a[e];if(Wr[n]===r)return n.toLowerCase()}return r},ja.format.named=function(r){if(r=r.toLowerCase(),Wr[r])return Au(Wr[r]);throw new Error("unknown color name: "+r)},ja.autodetect.push({p:5,test:function(r){for(var e=[],a=arguments.length-1;a-- >0;)e[a]=arguments[a+1];if(!e.length&&Eu(r)==="string"&&Wr[r.toLowerCase()])return"named"}});var zu=b.unpack,Pu=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=zu(r,"rgb"),n=a[0],u=a[1],o=a[2];return(n<<16)+(u<<8)+o},Iu=Pu,Ru=b.type,Du=function(r){if(Ru(r)=="number"&&r>=0&&r<=16777215){var e=r>>16,a=r>>8&255,n=r&255;return[e,a,n,1]}throw new Error("unknown num color: "+r)},qu=Du,Gu=I,Xa=M,Ba=W,Tu=b.type,ju=Iu;Xa.prototype.num=function(){return ju(this._rgb)},Gu.num=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(Xa,[null].concat(r,["num"])))},Ba.format.num=qu,Ba.autodetect.push({p:5,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r.length===1&&Tu(r[0])==="number"&&r[0]>=0&&r[0]<=16777215)return"num"}});var Xu=I,Fe=M,Ha=W,Wa=b.unpack,Ya=b.type,Ua=Math.round;Fe.prototype.rgb=function(r){return r===void 0&&(r=!0),r===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ua)},Fe.prototype.rgba=function(r){return r===void 0&&(r=!0),this._rgb.slice(0,4).map(function(e,a){return a<3?r===!1?e:Ua(e):e})},Xu.rgb=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(Fe,[null].concat(r,["rgb"])))},Ha.format.rgb=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=Wa(r,"rgba");return a[3]===void 0&&(a[3]=1),a},Ha.autodetect.push({p:3,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=Wa(r,"rgba"),Ya(r)==="array"&&(r.length===3||r.length===4&&Ya(r[3])=="number"&&r[3]>=0&&r[3]<=1))return"rgb"}});var ue=Math.log,Bu=function(r){var e=r/100,a,n,u;return e<66?(a=255,n=e<6?0:-155.25485562709179-.44596950469579133*(n=e-2)+104.49216199393888*ue(n),u=e<20?0:-254.76935184120902+.8274096064007395*(u=e-10)+115.67994401066147*ue(u)):(a=351.97690566805693+.114206453784165*(a=e-55)-40.25366309332127*ue(a),n=325.4494125711974+.07943456536662342*(n=e-50)-28.0852963507957*ue(n),u=255),[a,n,u,1]},Za=Bu,Hu=Za,Wu=b.unpack,Yu=Math.round,Uu=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];for(var a=Wu(r,"rgb"),n=a[0],u=a[2],o=1e3,t=4e4,l=.4,f;t-o>l;){f=(t+o)*.5;var s=Hu(f);s[2]/s[0]>=u/n?t=f:o=f}return Yu(f)},Zu=Uu,Le=I,oe=M,Ee=W,Ju=Zu;oe.prototype.temp=oe.prototype.kelvin=oe.prototype.temperature=function(){return Ju(this._rgb)},Le.temp=Le.kelvin=Le.temperature=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(oe,[null].concat(r,["temp"])))},Ee.format.temp=Ee.format.kelvin=Ee.format.temperature=Za;var Qu=b.unpack,Ae=Math.cbrt,Ku=Math.pow,Vu=Math.sign,ro=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=Qu(r,"rgb"),n=a[0],u=a[1],o=a[2],t=[Oe(n/255),Oe(u/255),Oe(o/255)],l=t[0],f=t[1],s=t[2],h=Ae(.4122214708*l+.5363325363*f+.0514459929*s),_=Ae(.2119034982*l+.6806995451*f+.1073969566*s),p=Ae(.0883024619*l+.2817188376*f+.6299787005*s);return[.2104542553*h+.793617785*_-.0040720468*p,1.9779984951*h-2.428592205*_+.4505937099*p,.0259040371*h+.7827717662*_-.808675766*p]},Ja=ro;function Oe(r){var e=Math.abs(r);return e<.04045?r/12.92:(Vu(r)||1)*Ku((e+.055)/1.055,2.4)}var eo=b.unpack,le=Math.pow,ao=Math.sign,no=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=eo(r,"lab");var a=r[0],n=r[1],u=r[2],o=le(a+.3963377774*n+.2158037573*u,3),t=le(a-.1055613458*n-.0638541728*u,3),l=le(a-.0894841775*n-1.291485548*u,3);return[255*ze(4.0767416621*o-3.3077115913*t+.2309699292*l),255*ze(-1.2684380046*o+2.6097574011*t-.3413193965*l),255*ze(-.0041960863*o-.7034186147*t+1.707614701*l),r.length>3?r[3]:1]},Qa=no;function ze(r){var e=Math.abs(r);return e>.0031308?(ao(r)||1)*(1.055*le(e,1/2.4)-.055):r*12.92}var to=b.unpack,uo=b.type,oo=I,Ka=M,Va=W,lo=Ja;Ka.prototype.oklab=function(){return lo(this._rgb)},oo.oklab=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(Ka,[null].concat(r,["oklab"])))},Va.format.oklab=Qa,Va.autodetect.push({p:3,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=to(r,"oklab"),uo(r)==="array"&&r.length===3)return"oklab"}});var fo=b.unpack,io=Ja,so=Ia,co=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var a=fo(r,"rgb"),n=a[0],u=a[1],o=a[2],t=io(n,u,o),l=t[0],f=t[1],s=t[2];return so(l,f,s)},vo=co,go=b.unpack,ho=Ra,po=Qa,bo=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];r=go(r,"lch");var a=r[0],n=r[1],u=r[2],o=ho(a,n,u),t=o[0],l=o[1],f=o[2],s=po(t,l,f),h=s[0],_=s[1],p=s[2];return[h,_,p,r.length>3?r[3]:1]},yo=bo,mo=b.unpack,wo=b.type,xo=I,rn=M,en=W,ko=vo;rn.prototype.oklch=function(){return ko(this._rgb)},xo.oklch=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];return new(Function.prototype.bind.apply(rn,[null].concat(r,["oklch"])))},en.format.oklch=yo,en.autodetect.push({p:3,test:function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];if(r=mo(r,"oklch"),wo(r)==="array"&&r.length===3)return"oklch"}});var an=M,_o=b.type;an.prototype.alpha=function(r,e){return e===void 0&&(e=!1),r!==void 0&&_o(r)==="number"?e?(this._rgb[3]=r,this):new an([this._rgb[0],this._rgb[1],this._rgb[2],r],"rgb"):this._rgb[3]};var $o=M;$o.prototype.clipped=function(){return this._rgb._clipped||!1};var Lr=M,Mo=ne;Lr.prototype.darken=function(r){r===void 0&&(r=1);var e=this,a=e.lab();return a[0]-=Mo.Kn*r,new Lr(a,"lab").alpha(e.alpha(),!0)},Lr.prototype.brighten=function(r){return r===void 0&&(r=1),this.darken(-r)},Lr.prototype.darker=Lr.prototype.darken,Lr.prototype.brighter=Lr.prototype.brighten;var Co=M;Co.prototype.get=function(r){var e=r.split("."),a=e[0],n=e[1],u=this[a]();if(n){var o=a.indexOf(n)-(a.substr(0,2)==="ok"?2:0);if(o>-1)return u[o];throw new Error("unknown channel "+n+" in mode "+a)}else return u};var Dr=M,No=b.type,So=Math.pow,Fo=1e-7,Lo=20;Dr.prototype.luminance=function(r){if(r!==void 0&&No(r)==="number"){if(r===0)return new Dr([0,0,0,this._rgb[3]],"rgb");if(r===1)return new Dr([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),a="rgb",n=Lo,u=function(t,l){var f=t.interpolate(l,.5,a),s=f.luminance();return Math.abs(r-s)<Fo||!n--?f:s>r?u(t,f):u(f,l)},o=(e>r?u(new Dr([0,0,0]),this):u(this,new Dr([255,255,255]))).rgb();return new Dr(o.concat([this._rgb[3]]))}return Eo.apply(void 0,this._rgb.slice(0,3))};var Eo=function(r,e,a){return r=Pe(r),e=Pe(e),a=Pe(a),.2126*r+.7152*e+.0722*a},Pe=function(r){return r/=255,r<=.03928?r/12.92:So((r+.055)/1.055,2.4)},hr={},nn=M,tn=b.type,fe=hr,un=function(r,e,a){a===void 0&&(a=.5);for(var n=[],u=arguments.length-3;u-- >0;)n[u]=arguments[u+3];var o=n[0]||"lrgb";if(!fe[o]&&!n.length&&(o=Object.keys(fe)[0]),!fe[o])throw new Error("interpolation mode "+o+" is not defined");return tn(r)!=="object"&&(r=new nn(r)),tn(e)!=="object"&&(e=new nn(e)),fe[o](r,e,a).alpha(r.alpha()+a*(e.alpha()-r.alpha()))},on=M,Ao=un;on.prototype.mix=on.prototype.interpolate=function(r,e){e===void 0&&(e=.5);for(var a=[],n=arguments.length-2;n-- >0;)a[n]=arguments[n+2];return Ao.apply(void 0,[this,r,e].concat(a))};var ln=M;ln.prototype.premultiply=function(r){r===void 0&&(r=!1);var e=this._rgb,a=e[3];return r?(this._rgb=[e[0]*a,e[1]*a,e[2]*a,a],this):new ln([e[0]*a,e[1]*a,e[2]*a,a],"rgb")};var Ie=M,Oo=ne;Ie.prototype.saturate=function(r){r===void 0&&(r=1);var e=this,a=e.lch();return a[1]+=Oo.Kn*r,a[1]<0&&(a[1]=0),new Ie(a,"lch").alpha(e.alpha(),!0)},Ie.prototype.desaturate=function(r){return r===void 0&&(r=1),this.saturate(-r)};var fn=M,sn=b.type;fn.prototype.set=function(r,e,a){a===void 0&&(a=!1);var n=r.split("."),u=n[0],o=n[1],t=this[u]();if(o){var l=u.indexOf(o)-(u.substr(0,2)==="ok"?2:0);if(l>-1){if(sn(e)=="string")switch(e.charAt(0)){case"+":t[l]+=+e;break;case"-":t[l]+=+e;break;case"*":t[l]*=+e.substr(1);break;case"/":t[l]/=+e.substr(1);break;default:t[l]=+e}else if(sn(e)==="number")t[l]=e;else throw new Error("unsupported value for Color.set");var f=new fn(t,u);return a?(this._rgb=f._rgb,this):f}throw new Error("unknown channel "+o+" in mode "+u)}else return t};var zo=M,Po=function(r,e,a){var n=r._rgb,u=e._rgb;return new zo(n[0]+a*(u[0]-n[0]),n[1]+a*(u[1]-n[1]),n[2]+a*(u[2]-n[2]),"rgb")};hr.rgb=Po;var Io=M,Re=Math.sqrt,qr=Math.pow,Ro=function(r,e,a){var n=r._rgb,u=n[0],o=n[1],t=n[2],l=e._rgb,f=l[0],s=l[1],h=l[2];return new Io(Re(qr(u,2)*(1-a)+qr(f,2)*a),Re(qr(o,2)*(1-a)+qr(s,2)*a),Re(qr(t,2)*(1-a)+qr(h,2)*a),"rgb")};hr.lrgb=Ro;var Do=M,qo=function(r,e,a){var n=r.lab(),u=e.lab();return new Do(n[0]+a*(u[0]-n[0]),n[1]+a*(u[1]-n[1]),n[2]+a*(u[2]-n[2]),"lab")};hr.lab=qo;var cn=M,Gr=function(r,e,a,n){var u,o,t,l;n==="hsl"?(t=r.hsl(),l=e.hsl()):n==="hsv"?(t=r.hsv(),l=e.hsv()):n==="hcg"?(t=r.hcg(),l=e.hcg()):n==="hsi"?(t=r.hsi(),l=e.hsi()):n==="lch"||n==="hcl"?(n="hcl",t=r.hcl(),l=e.hcl()):n==="oklch"&&(t=r.oklch().reverse(),l=e.oklch().reverse());var f,s,h,_,p,N;(n.substr(0,1)==="h"||n==="oklch")&&(u=t,f=u[0],h=u[1],p=u[2],o=l,s=o[0],_=o[1],N=o[2]);var C,q,j,B;return!isNaN(f)&&!isNaN(s)?(s>f&&s-f>180?B=s-(f+360):s<f&&f-s>180?B=s+360-f:B=s-f,q=f+a*B):isNaN(f)?isNaN(s)?q=Number.NaN:(q=s,(p==1||p==0)&&n!="hsv"&&(C=_)):(q=f,(N==1||N==0)&&n!="hsv"&&(C=h)),C===void 0&&(C=h+a*(_-h)),j=p+a*(N-p),n==="oklch"?new cn([j,C,q],n):new cn([q,C,j],n)},Go=Gr,vn=function(r,e,a){return Go(r,e,a,"lch")};hr.lch=vn,hr.hcl=vn;var To=M,jo=function(r,e,a){var n=r.num(),u=e.num();return new To(n+a*(u-n),"num")};hr.num=jo;var Xo=Gr,Bo=function(r,e,a){return Xo(r,e,a,"hcg")};hr.hcg=Bo;var Ho=Gr,Wo=function(r,e,a){return Ho(r,e,a,"hsi")};hr.hsi=Wo;var Yo=Gr,Uo=function(r,e,a){return Yo(r,e,a,"hsl")};hr.hsl=Uo;var Zo=Gr,Jo=function(r,e,a){return Zo(r,e,a,"hsv")};hr.hsv=Jo;var Qo=M,Ko=function(r,e,a){var n=r.oklab(),u=e.oklab();return new Qo(n[0]+a*(u[0]-n[0]),n[1]+a*(u[1]-n[1]),n[2]+a*(u[2]-n[2]),"oklab")};hr.oklab=Ko;var Vo=Gr,rl=function(r,e,a){return Vo(r,e,a,"oklch")};hr.oklch=rl;var De=M,el=b.clip_rgb,qe=Math.pow,Ge=Math.sqrt,Te=Math.PI,gn=Math.cos,hn=Math.sin,al=Math.atan2,nl=function(r,e,a){e===void 0&&(e="lrgb"),a===void 0&&(a=null);var n=r.length;a||(a=Array.from(new Array(n)).map(function(){return 1}));var u=n/a.reduce(function(q,j){return q+j});if(a.forEach(function(q,j){a[j]*=u}),r=r.map(function(q){return new De(q)}),e==="lrgb")return tl(r,a);for(var o=r.shift(),t=o.get(e),l=[],f=0,s=0,h=0;h<t.length;h++)if(t[h]=(t[h]||0)*a[0],l.push(isNaN(t[h])?0:a[0]),e.charAt(h)==="h"&&!isNaN(t[h])){var _=t[h]/180*Te;f+=gn(_)*a[0],s+=hn(_)*a[0]}var p=o.alpha()*a[0];r.forEach(function(q,j){var B=q.get(e);p+=q.alpha()*a[j+1];for(var U=0;U<t.length;U++)if(!isNaN(B[U]))if(l[U]+=a[j+1],e.charAt(U)==="h"){var ir=B[U]/180*Te;f+=gn(ir)*a[j+1],s+=hn(ir)*a[j+1]}else t[U]+=B[U]*a[j+1]});for(var N=0;N<t.length;N++)if(e.charAt(N)==="h"){for(var C=al(s/l[N],f/l[N])/Te*180;C<0;)C+=360;for(;C>=360;)C-=360;t[N]=C}else t[N]=t[N]/l[N];return p/=n,new De(t,e).alpha(p>.99999?1:p,!0)},tl=function(r,e){for(var a=r.length,n=[0,0,0,0],u=0;u<r.length;u++){var o=r[u],t=e[u]/a,l=o._rgb;n[0]+=qe(l[0],2)*t,n[1]+=qe(l[1],2)*t,n[2]+=qe(l[2],2)*t,n[3]+=l[3]*t}return n[0]=Ge(n[0]),n[1]=Ge(n[1]),n[2]=Ge(n[2]),n[3]>.9999999&&(n[3]=1),new De(el(n))},yr=I,Tr=b.type,ul=Math.pow,je=function(r){var e="rgb",a=yr("#ccc"),n=0,u=[0,1],o=[],t=[0,0],l=!1,f=[],s=!1,h=0,_=1,p=!1,N={},C=!0,q=1,j=function(d){if(d=d||["#fff","#000"],d&&Tr(d)==="string"&&yr.brewer&&yr.brewer[d.toLowerCase()]&&(d=yr.brewer[d.toLowerCase()]),Tr(d)==="array"){d.length===1&&(d=[d[0],d[0]]),d=d.slice(0);for(var A=0;A<d.length;A++)d[A]=yr(d[A]);o.length=0;for(var T=0;T<d.length;T++)o.push(T/(d.length-1))}return gr(),f=d},B=function(d){if(l!=null){for(var A=l.length-1,T=0;T<A&&d>=l[T];)T++;return T-1}return 0},U=function(d){return d},ir=function(d){return d},fr=function(d,A){var T,G;if(A==null&&(A=!1),isNaN(d)||d===null)return a;if(A)G=d;else if(l&&l.length>2){var sr=B(d);G=sr/(l.length-2)}else _!==h?G=(d-h)/(_-h):G=1;G=ir(G),A||(G=U(G)),q!==1&&(G=ul(G,q)),G=t[0]+G*(1-t[0]-t[1]),G=Math.min(1,Math.max(0,G));var V=Math.floor(G*1e4);if(C&&N[V])T=N[V];else{if(Tr(f)==="array")for(var H=0;H<o.length;H++){var Z=o[H];if(G<=Z){T=f[H];break}if(G>=Z&&H===o.length-1){T=f[H];break}if(G>Z&&G<o[H+1]){G=(G-Z)/(o[H+1]-Z),T=yr.interpolate(f[H],f[H+1],G,e);break}}else Tr(f)==="function"&&(T=f(G));C&&(N[V]=T)}return T},gr=function(){return N={}};j(r);var X=function(d){var A=yr(fr(d));return s&&A[s]?A[s]():A};return X.classes=function(d){if(d!=null){if(Tr(d)==="array")l=d,u=[d[0],d[d.length-1]];else{var A=yr.analyze(u);d===0?l=[A.min,A.max]:l=yr.limits(A,"e",d)}return X}return l},X.domain=function(d){if(!arguments.length)return u;h=d[0],_=d[d.length-1],o=[];var A=f.length;if(d.length===A&&h!==_)for(var T=0,G=Array.from(d);T<G.length;T+=1){var sr=G[T];o.push((sr-h)/(_-h))}else{for(var V=0;V<A;V++)o.push(V/(A-1));if(d.length>2){var H=d.map(function(J,Q){return Q/(d.length-1)}),Z=d.map(function(J){return(J-h)/(_-h)});Z.every(function(J,Q){return H[Q]===J})||(ir=function(J){if(J<=0||J>=1)return J;for(var Q=0;J>=Z[Q+1];)Q++;var wr=(J-Z[Q])/(Z[Q+1]-Z[Q]),Cr=H[Q]+wr*(H[Q+1]-H[Q]);return Cr})}}return u=[h,_],X},X.mode=function(d){return arguments.length?(e=d,gr(),X):e},X.range=function(d,A){return j(d),X},X.out=function(d){return s=d,X},X.spread=function(d){return arguments.length?(n=d,X):n},X.correctLightness=function(d){return d==null&&(d=!0),p=d,gr(),p?U=function(A){for(var T=fr(0,!0).lab()[0],G=fr(1,!0).lab()[0],sr=T>G,V=fr(A,!0).lab()[0],H=T+(G-T)*A,Z=V-H,J=0,Q=1,wr=20;Math.abs(Z)>.01&&wr-- >0;)(function(){return sr&&(Z*=-1),Z<0?(J=A,A+=(Q-A)*.5):(Q=A,A+=(J-A)*.5),V=fr(A,!0).lab()[0],Z=V-H})();return A}:U=function(A){return A},X},X.padding=function(d){return d!=null?(Tr(d)==="number"&&(d=[d,d]),t=d,X):t},X.colors=function(d,A){arguments.length<2&&(A="hex");var T=[];if(arguments.length===0)T=f.slice(0);else if(d===1)T=[X(.5)];else if(d>1){var G=u[0],sr=u[1]-G;T=ol(0,d,!1).map(function(Q){return X(G+Q/(d-1)*sr)})}else{r=[];var V=[];if(l&&l.length>2)for(var H=1,Z=l.length,J=1<=Z;J?H<Z:H>Z;J?H++:H--)V.push((l[H-1]+l[H])*.5);else V=u;T=V.map(function(Q){return X(Q)})}return yr[A]&&(T=T.map(function(Q){return Q[A]()})),T},X.cache=function(d){return d!=null?(C=d,X):C},X.gamma=function(d){return d!=null?(q=d,X):q},X.nodata=function(d){return d!=null?(a=yr(d),X):a},X};function ol(r,e,a){for(var n=[],u=r<e,o=a?u?e+1:e-1:e,t=r;u?t<o:t>o;u?t++:t--)n.push(t);return n}var Yr=M,ll=je,fl=function(r){for(var e=[1,1],a=1;a<r;a++){for(var n=[1],u=1;u<=e.length;u++)n[u]=(e[u]||0)+e[u-1];e=n}return e},il=function(r){var e,a,n,u,o,t,l;if(r=r.map(function(p){return new Yr(p)}),r.length===2)e=r.map(function(p){return p.lab()}),o=e[0],t=e[1],u=function(p){var N=[0,1,2].map(function(C){return o[C]+p*(t[C]-o[C])});return new Yr(N,"lab")};else if(r.length===3)a=r.map(function(p){return p.lab()}),o=a[0],t=a[1],l=a[2],u=function(p){var N=[0,1,2].map(function(C){return(1-p)*(1-p)*o[C]+2*(1-p)*p*t[C]+p*p*l[C]});return new Yr(N,"lab")};else if(r.length===4){var f;n=r.map(function(p){return p.lab()}),o=n[0],t=n[1],l=n[2],f=n[3],u=function(p){var N=[0,1,2].map(function(C){return(1-p)*(1-p)*(1-p)*o[C]+3*(1-p)*(1-p)*p*t[C]+3*(1-p)*p*p*l[C]+p*p*p*f[C]});return new Yr(N,"lab")}}else if(r.length>=5){var s,h,_;s=r.map(function(p){return p.lab()}),_=r.length-1,h=fl(_),u=function(p){var N=1-p,C=[0,1,2].map(function(q){return s.reduce(function(j,B,U){return j+h[U]*Math.pow(N,_-U)*Math.pow(p,U)*B[q]},0)});return new Yr(C,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return u},sl=function(r){var e=il(r);return e.scale=function(){return ll(e)},e},Xe=I,mr=function(r,e,a){if(!mr[a])throw new Error("unknown blend mode "+a);return mr[a](r,e)},$r=function(r){return function(e,a){var n=Xe(a).rgb(),u=Xe(e).rgb();return Xe.rgb(r(n,u))}},Mr=function(r){return function(e,a){var n=[];return n[0]=r(e[0],a[0]),n[1]=r(e[1],a[1]),n[2]=r(e[2],a[2]),n}},cl=function(r){return r},vl=function(r,e){return r*e/255},gl=function(r,e){return r>e?e:r},hl=function(r,e){return r>e?r:e},pl=function(r,e){return 255*(1-(1-r/255)*(1-e/255))},dl=function(r,e){return e<128?2*r*e/255:255*(1-2*(1-r/255)*(1-e/255))},bl=function(r,e){return 255*(1-(1-e/255)/(r/255))},yl=function(r,e){return r===255?255:(r=255*(e/255)/(1-r/255),r>255?255:r)};mr.normal=$r(Mr(cl)),mr.multiply=$r(Mr(vl)),mr.screen=$r(Mr(pl)),mr.overlay=$r(Mr(dl)),mr.darken=$r(Mr(gl)),mr.lighten=$r(Mr(hl)),mr.dodge=$r(Mr(yl)),mr.burn=$r(Mr(bl));for(var ml=mr,Be=b.type,wl=b.clip_rgb,xl=b.TWOPI,kl=Math.pow,_l=Math.sin,$l=Math.cos,pn=I,Ml=function(r,e,a,n,u){r===void 0&&(r=300),e===void 0&&(e=-1.5),a===void 0&&(a=1),n===void 0&&(n=1),u===void 0&&(u=[0,1]);var o=0,t;Be(u)==="array"?t=u[1]-u[0]:(t=0,u=[u,u]);var l=function(f){var s=xl*((r+120)/360+e*f),h=kl(u[0]+t*f,n),_=o!==0?a[0]+f*o:a,p=_*h*(1-h)/2,N=$l(s),C=_l(s),q=h+p*(-.14861*N+1.78277*C),j=h+p*(-.29227*N-.90649*C),B=h+p*(1.97294*N);return pn(wl([q*255,j*255,B*255,1]))};return l.start=function(f){return f==null?r:(r=f,l)},l.rotations=function(f){return f==null?e:(e=f,l)},l.gamma=function(f){return f==null?n:(n=f,l)},l.hue=function(f){return f==null?a:(a=f,Be(a)==="array"?(o=a[1]-a[0],o===0&&(a=a[1])):o=0,l)},l.lightness=function(f){return f==null?u:(Be(f)==="array"?(u=f,t=f[1]-f[0]):(u=[f,f],t=0),l)},l.scale=function(){return pn.scale(l)},l.hue(a),l},Cl=M,Nl="0123456789abcdef",Sl=Math.floor,Fl=Math.random,Ll=function(){for(var r="#",e=0;e<6;e++)r+=Nl.charAt(Sl(Fl()*16));return new Cl(r,"hex")},He=v,dn=Math.log,El=Math.pow,Al=Math.floor,Ol=Math.abs,bn=function(r,e){e===void 0&&(e=null);var a={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return He(r)==="object"&&(r=Object.values(r)),r.forEach(function(n){e&&He(n)==="object"&&(n=n[e]),n!=null&&!isNaN(n)&&(a.values.push(n),a.sum+=n,n<a.min&&(a.min=n),n>a.max&&(a.max=n),a.count+=1)}),a.domain=[a.min,a.max],a.limits=function(n,u){return yn(a,n,u)},a},yn=function(r,e,a){e===void 0&&(e="equal"),a===void 0&&(a=7),He(r)=="array"&&(r=bn(r));var n=r.min,u=r.max,o=r.values.sort(function(Ye,Ue){return Ye-Ue});if(a===1)return[n,u];var t=[];if(e.substr(0,1)==="c"&&(t.push(n),t.push(u)),e.substr(0,1)==="e"){t.push(n);for(var l=1;l<a;l++)t.push(n+l/a*(u-n));t.push(u)}else if(e.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");var f=Math.LOG10E*dn(n),s=Math.LOG10E*dn(u);t.push(n);for(var h=1;h<a;h++)t.push(El(10,f+h/a*(s-f)));t.push(u)}else if(e.substr(0,1)==="q"){t.push(n);for(var _=1;_<a;_++){var p=(o.length-1)*_/a,N=Al(p);if(N===p)t.push(o[N]);else{var C=p-N;t.push(o[N]*(1-C)+o[N+1]*C)}}t.push(u)}else if(e.substr(0,1)==="k"){var q,j=o.length,B=new Array(j),U=new Array(a),ir=!0,fr=0,gr=null;gr=[],gr.push(n);for(var X=1;X<a;X++)gr.push(n+X/a*(u-n));for(gr.push(u);ir;){for(var d=0;d<a;d++)U[d]=0;for(var A=0;A<j;A++)for(var T=o[A],G=Number.MAX_VALUE,sr=void 0,V=0;V<a;V++){var H=Ol(gr[V]-T);H<G&&(G=H,sr=V),U[sr]++,B[A]=sr}for(var Z=new Array(a),J=0;J<a;J++)Z[J]=null;for(var Q=0;Q<j;Q++)q=B[Q],Z[q]===null?Z[q]=o[Q]:Z[q]+=o[Q];for(var wr=0;wr<a;wr++)Z[wr]*=1/U[wr];ir=!1;for(var Cr=0;Cr<a;Cr++)if(Z[Cr]!==gr[Cr]){ir=!0;break}gr=Z,fr++,fr>200&&(ir=!1)}for(var Nr={},jr=0;jr<a;jr++)Nr[jr]=[];for(var Xr=0;Xr<j;Xr++)q=B[Xr],Nr[q].push(o[Xr]);for(var _r=[],Er=0;Er<a;Er++)_r.push(Nr[Er][0]),_r.push(Nr[Er][Nr[Er].length-1]);_r=_r.sort(function(Ye,Ue){return Ye-Ue}),t.push(_r[0]);for(var Ur=1;Ur<_r.length;Ur+=2){var Ar=_r[Ur];!isNaN(Ar)&&t.indexOf(Ar)===-1&&t.push(Ar)}}return t},mn={analyze:bn,limits:yn},wn=M,zl=function(r,e){r=new wn(r),e=new wn(e);var a=r.luminance(),n=e.luminance();return a>n?(a+.05)/(n+.05):(n+.05)/(a+.05)},xn=M,kr=Math.sqrt,nr=Math.pow,Pl=Math.min,Il=Math.max,kn=Math.atan2,_n=Math.abs,ie=Math.cos,$n=Math.sin,Rl=Math.exp,Mn=Math.PI,Dl=function(r,e,a,n,u){a===void 0&&(a=1),n===void 0&&(n=1),u===void 0&&(u=1);var o=function(Ar){return 360*Ar/(2*Mn)},t=function(Ar){return 2*Mn*Ar/360};r=new xn(r),e=new xn(e);var l=Array.from(r.lab()),f=l[0],s=l[1],h=l[2],_=Array.from(e.lab()),p=_[0],N=_[1],C=_[2],q=(f+p)/2,j=kr(nr(s,2)+nr(h,2)),B=kr(nr(N,2)+nr(C,2)),U=(j+B)/2,ir=.5*(1-kr(nr(U,7)/(nr(U,7)+nr(25,7)))),fr=s*(1+ir),gr=N*(1+ir),X=kr(nr(fr,2)+nr(h,2)),d=kr(nr(gr,2)+nr(C,2)),A=(X+d)/2,T=o(kn(h,fr)),G=o(kn(C,gr)),sr=T>=0?T:T+360,V=G>=0?G:G+360,H=_n(sr-V)>180?(sr+V+360)/2:(sr+V)/2,Z=1-.17*ie(t(H-30))+.24*ie(t(2*H))+.32*ie(t(3*H+6))-.2*ie(t(4*H-63)),J=V-sr;J=_n(J)<=180?J:V<=sr?J+360:J-360,J=2*kr(X*d)*$n(t(J)/2);var Q=p-f,wr=d-X,Cr=1+.015*nr(q-50,2)/kr(20+nr(q-50,2)),Nr=1+.045*A,jr=1+.015*A*Z,Xr=30*Rl(-nr((H-275)/25,2)),_r=2*kr(nr(A,7)/(nr(A,7)+nr(25,7))),Er=-_r*$n(2*t(Xr)),Ur=kr(nr(Q/(a*Cr),2)+nr(wr/(n*Nr),2)+nr(J/(u*jr),2)+Er*(wr/(n*Nr))*(J/(u*jr)));return Il(0,Pl(100,Ur))},Cn=M,ql=function(r,e,a){a===void 0&&(a="lab"),r=new Cn(r),e=new Cn(e);var n=r.get(a),u=e.get(a),o=0;for(var t in n){var l=(n[t]||0)-(u[t]||0);o+=l*l}return Math.sqrt(o)},Gl=M,Tl=function(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];try{return new(Function.prototype.bind.apply(Gl,[null].concat(r))),!0}catch{return!1}},Nn=I,Sn=je,jl={cool:function(){return Sn([Nn.hsl(180,1,.9),Nn.hsl(250,.7,.4)])},hot:function(){return Sn(["#000","#f00","#ff0","#fff"]).mode("rgb")}},se={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},We=0,Fn=Object.keys(se);We<Fn.length;We+=1){var Ln=Fn[We];se[Ln.toLowerCase()]=se[Ln]}var Xl=se,lr=I;lr.average=nl,lr.bezier=sl,lr.blend=ml,lr.cubehelix=Ml,lr.mix=lr.interpolate=un,lr.random=Ll,lr.scale=je,lr.analyze=mn.analyze,lr.contrast=zl,lr.deltaE=Dl,lr.distance=ql,lr.limits=mn.limits,lr.valid=Tl,lr.scales=jl,lr.colors=Ta,lr.brewer=Xl;var Bl=lr;return Bl})})(In);var gf=In.exports;const An=Pn(gf);var Qe={exports:{}};Qe.exports;(function(L){(function($,w,E){function P(i){var v=this,y=x();v.next=function(){var c=2091639*v.s0+v.c*23283064365386963e-26;return v.s0=v.s1,v.s1=v.s2,v.s2=c-(v.c=c|0)},v.c=1,v.s0=y(" "),v.s1=y(" "),v.s2=y(" "),v.s0-=y(i),v.s0<0&&(v.s0+=1),v.s1-=y(i),v.s1<0&&(v.s1+=1),v.s2-=y(i),v.s2<0&&(v.s2+=1),y=null}function O(i,v){return v.c=i.c,v.s0=i.s0,v.s1=i.s1,v.s2=i.s2,v}function m(i,v){var y=new P(i),c=v&&v.state,g=y.next;return g.int32=function(){return y.next()*4294967296|0},g.double=function(){return g()+(g()*2097152|0)*11102230246251565e-32},g.quick=g,c&&(typeof c=="object"&&O(c,y),g.state=function(){return O(y,{})}),g}function x(){var i=4022871197,v=function(y){y=String(y);for(var c=0;c<y.length;c++){i+=y.charCodeAt(c);var g=.02519603282416938*i;i=g>>>0,g-=i,g*=i,i=g>>>0,g-=i,i+=g*4294967296}return(i>>>0)*23283064365386963e-26};return v}w&&w.exports?w.exports=m:E&&E.amd?E(function(){return m}):this.alea=m})(Fr,L,!1)})(Qe);var hf=Qe.exports,Ke={exports:{}};Ke.exports;(function(L){(function($,w,E){function P(x){var i=this,v="";i.x=0,i.y=0,i.z=0,i.w=0,i.next=function(){var c=i.x^i.x<<11;return i.x=i.y,i.y=i.z,i.z=i.w,i.w^=i.w>>>19^c^c>>>8},x===(x|0)?i.x=x:v+=x;for(var y=0;y<v.length+64;y++)i.x^=v.charCodeAt(y)|0,i.next()}function O(x,i){return i.x=x.x,i.y=x.y,i.z=x.z,i.w=x.w,i}function m(x,i){var v=new P(x),y=i&&i.state,c=function(){return(v.next()>>>0)/4294967296};return c.double=function(){do var g=v.next()>>>11,k=(v.next()>>>0)/4294967296,F=(g+k)/(1<<21);while(F===0);return F},c.int32=v.next,c.quick=c,y&&(typeof y=="object"&&O(y,v),c.state=function(){return O(v,{})}),c}w&&w.exports?w.exports=m:E&&E.amd?E(function(){return m}):this.xor128=m})(Fr,L,!1)})(Ke);var pf=Ke.exports,Ve={exports:{}};Ve.exports;(function(L){(function($,w,E){function P(x){var i=this,v="";i.next=function(){var c=i.x^i.x>>>2;return i.x=i.y,i.y=i.z,i.z=i.w,i.w=i.v,(i.d=i.d+362437|0)+(i.v=i.v^i.v<<4^(c^c<<1))|0},i.x=0,i.y=0,i.z=0,i.w=0,i.v=0,x===(x|0)?i.x=x:v+=x;for(var y=0;y<v.length+64;y++)i.x^=v.charCodeAt(y)|0,y==v.length&&(i.d=i.x<<10^i.x>>>4),i.next()}function O(x,i){return i.x=x.x,i.y=x.y,i.z=x.z,i.w=x.w,i.v=x.v,i.d=x.d,i}function m(x,i){var v=new P(x),y=i&&i.state,c=function(){return(v.next()>>>0)/4294967296};return c.double=function(){do var g=v.next()>>>11,k=(v.next()>>>0)/4294967296,F=(g+k)/(1<<21);while(F===0);return F},c.int32=v.next,c.quick=c,y&&(typeof y=="object"&&O(y,v),c.state=function(){return O(v,{})}),c}w&&w.exports?w.exports=m:E&&E.amd?E(function(){return m}):this.xorwow=m})(Fr,L,!1)})(Ve);var df=Ve.exports,ra={exports:{}};ra.exports;(function(L){(function($,w,E){function P(x){var i=this;i.next=function(){var y=i.x,c=i.i,g,k;return g=y[c],g^=g>>>7,k=g^g<<24,g=y[c+1&7],k^=g^g>>>10,g=y[c+3&7],k^=g^g>>>3,g=y[c+4&7],k^=g^g<<7,g=y[c+7&7],g=g^g<<13,k^=g^g<<9,y[c]=k,i.i=c+1&7,k};function v(y,c){var g,k=[];if(c===(c|0))k[0]=c;else for(c=""+c,g=0;g<c.length;++g)k[g&7]=k[g&7]<<15^c.charCodeAt(g)+k[g+1&7]<<13;for(;k.length<8;)k.push(0);for(g=0;g<8&&k[g]===0;++g);for(g==8?k[7]=-1:k[g],y.x=k,y.i=0,g=256;g>0;--g)y.next()}v(i,x)}function O(x,i){return i.x=x.x.slice(),i.i=x.i,i}function m(x,i){x==null&&(x=+new Date);var v=new P(x),y=i&&i.state,c=function(){return(v.next()>>>0)/4294967296};return c.double=function(){do var g=v.next()>>>11,k=(v.next()>>>0)/4294967296,F=(g+k)/(1<<21);while(F===0);return F},c.int32=v.next,c.quick=c,y&&(y.x&&O(y,v),c.state=function(){return O(v,{})}),c}w&&w.exports?w.exports=m:E&&E.amd?E(function(){return m}):this.xorshift7=m})(Fr,L,!1)})(ra);var bf=ra.exports,ea={exports:{}};ea.exports;(function(L){(function($,w,E){function P(x){var i=this;i.next=function(){var y=i.w,c=i.X,g=i.i,k,F;return i.w=y=y+1640531527|0,F=c[g+34&127],k=c[g=g+1&127],F^=F<<13,k^=k<<17,F^=F>>>15,k^=k>>>12,F=c[g]=F^k,i.i=g,F+(y^y>>>16)|0};function v(y,c){var g,k,F,b,W,cr=[],br=128;for(c===(c|0)?(k=c,c=null):(c=c+"\0",k=0,br=Math.max(br,c.length)),F=0,b=-32;b<br;++b)c&&(k^=c.charCodeAt((b+32)%c.length)),b===0&&(W=k),k^=k<<10,k^=k>>>15,k^=k<<4,k^=k>>>13,b>=0&&(W=W+1640531527|0,g=cr[b&127]^=k+W,F=g==0?F+1:0);for(F>=128&&(cr[(c&&c.length||0)&127]=-1),F=127,b=4*128;b>0;--b)k=cr[F+34&127],g=cr[F=F+1&127],k^=k<<13,g^=g<<17,k^=k>>>15,g^=g>>>12,cr[F]=k^g;y.w=W,y.X=cr,y.i=F}v(i,x)}function O(x,i){return i.i=x.i,i.w=x.w,i.X=x.X.slice(),i}function m(x,i){x==null&&(x=+new Date);var v=new P(x),y=i&&i.state,c=function(){return(v.next()>>>0)/4294967296};return c.double=function(){do var g=v.next()>>>11,k=(v.next()>>>0)/4294967296,F=(g+k)/(1<<21);while(F===0);return F},c.int32=v.next,c.quick=c,y&&(y.X&&O(y,v),c.state=function(){return O(v,{})}),c}w&&w.exports?w.exports=m:E&&E.amd?E(function(){return m}):this.xor4096=m})(Fr,L,!1)})(ea);var yf=ea.exports,aa={exports:{}};aa.exports;(function(L){(function($,w,E){function P(x){var i=this,v="";i.next=function(){var c=i.b,g=i.c,k=i.d,F=i.a;return c=c<<25^c>>>7^g,g=g-k|0,k=k<<24^k>>>8^F,F=F-c|0,i.b=c=c<<20^c>>>12^g,i.c=g=g-k|0,i.d=k<<16^g>>>16^F,i.a=F-c|0},i.a=0,i.b=0,i.c=-1640531527,i.d=1367130551,x===Math.floor(x)?(i.a=x/4294967296|0,i.b=x|0):v+=x;for(var y=0;y<v.length+20;y++)i.b^=v.charCodeAt(y)|0,i.next()}function O(x,i){return i.a=x.a,i.b=x.b,i.c=x.c,i.d=x.d,i}function m(x,i){var v=new P(x),y=i&&i.state,c=function(){return(v.next()>>>0)/4294967296};return c.double=function(){do var g=v.next()>>>11,k=(v.next()>>>0)/4294967296,F=(g+k)/(1<<21);while(F===0);return F},c.int32=v.next,c.quick=c,y&&(typeof y=="object"&&O(y,v),c.state=function(){return O(v,{})}),c}w&&w.exports?w.exports=m:E&&E.amd?E(function(){return m}):this.tychei=m})(Fr,L,!1)})(aa);var mf=aa.exports,Rn={exports:{}};(function(L){(function($,w,E){var P=256,O=6,m=52,x="random",i=E.pow(P,O),v=E.pow(2,m),y=v*2,c=P-1,g;function k(R,D,M){var K=[];D=D==!0?{entropy:!0}:D||{};var I=cr(W(D.entropy?[R,dr(w)]:R??br(),3),K),rr=new F(K),ar=function(){for(var tr=rr.g(O),z=i,S=0;tr<v;)tr=(tr+S)*P,z*=P,S=rr.g(1);for(;tr>=y;)tr/=2,z/=2,S>>>=1;return(tr+S)/z};return ar.int32=function(){return rr.g(4)|0},ar.quick=function(){return rr.g(4)/4294967296},ar.double=ar,cr(dr(rr.S),w),(D.pass||M||function(tr,z,S,Y){return Y&&(Y.S&&b(Y,rr),tr.state=function(){return b(rr,{})}),S?(E[x]=tr,z):tr})(ar,I,"global"in D?D.global:this==E,D.state)}function F(R){var D,M=R.length,K=this,I=0,rr=K.i=K.j=0,ar=K.S=[];for(M||(R=[M++]);I<P;)ar[I]=I++;for(I=0;I<P;I++)ar[I]=ar[rr=c&rr+R[I%M]+(D=ar[I])],ar[rr]=D;(K.g=function(tr){for(var z,S=0,Y=K.i,er=K.j,ur=K.S;tr--;)z=ur[Y=c&Y+1],S=S*P+ur[c&(ur[Y]=ur[er=c&er+z])+(ur[er]=z)];return K.i=Y,K.j=er,S})(P)}function b(R,D){return D.i=R.i,D.j=R.j,D.S=R.S.slice(),D}function W(R,D){var M=[],K=typeof R,I;if(D&&K=="object")for(I in R)try{M.push(W(R[I],D-1))}catch{}return M.length?M:K=="string"?R:R+"\0"}function cr(R,D){for(var M=R+"",K,I=0;I<M.length;)D[c&I]=c&(K^=D[c&I]*19)+M.charCodeAt(I++);return dr(D)}function br(){try{var R;return g&&(R=g.randomBytes)?R=R(P):(R=new Uint8Array(P),($.crypto||$.msCrypto).getRandomValues(R)),dr(R)}catch{var D=$.navigator,M=D&&D.plugins;return[+new Date,$,M,$.screen,dr(w)]}}function dr(R){return String.fromCharCode.apply(0,R)}if(cr(E.random(),w),L.exports){L.exports=k;try{g=Zl}catch{}}else E["seed"+x]=k})(typeof self<"u"?self:Fr,[],Math)})(Rn);var wf=Rn.exports,xf=hf,kf=pf,_f=df,$f=bf,Mf=yf,Cf=mf,Or=wf;Or.alea=xf;Or.xor128=kf;Or.xorwow=_f;Or.xorshift7=$f;Or.xor4096=Mf;Or.tychei=Cf;var Nf=Or;const Sf=Pn(Nf),Ff=L=>L,On={selectedFeature:null,maxWidth:10,minWidth:1,numStep:100,scale:"linear",fixScale:!1,minVal:0,maxVal:1,cmap:"OrRd",opacity:100,offset:!1,showNaN:!0,reverseColor:!1,extrusion:!1,padding:[0,100]};function Lf(L){return/^#([0-9A-Fa-f]{3}){1,2}$/i.test(L)}function Ze(L,$,w,E,P,O){if(typeof L=="string")return O?0:Sf(L)();if(O){if(L<$?L=$:L>w&&(L=w),L=Math.abs(L),$<0&&w>0)w=Math.max(Math.abs($),Math.abs(w)),$=0;else if($<0&&w<=0){const x=Math.abs(w);w=Math.max(Math.abs($),x),$=Math.min(Math.abs($),x)}}else{if(L<$)return E?1:0;if(L>w)return E?0:1;$<0&&(L=L-$,w=w-$,$=0)}let m=L;return P==="log"?($<1&&(w+=1,L+=1,$+=1),$=$>0?Math.log10($):0,w=w>0?Math.log10(w):0,m=L>0?Math.log10(L):0):P==="sqrt"?($=Math.sqrt($),w=Math.sqrt(w),m=Math.sqrt(L)):P==="exp"?($=$/w,L=L/w,w=1,$=10**$,w=10**w,m=10**L):P==="quad"&&($=$**2,w=w**2,m=L**2),E?m=(-m+w)/(w-$):m=(m-$)/(w-$),m}function Ef(){const L=Je(),$=pr(Br),w=pr(Br),E=pr(Br),P=pr(void 0),O=pr([]),m=pr(Sr.cloneDeep(On)),x=pr(""),i=pr([]),v=pr(!1),y=pr({}),c=pr([]),g=pr({}),k=pr({});function F(){$.value=Sr.cloneDeep(Br),w.value=Sr.cloneDeep(Br),E.value=Sr.cloneDeep(Br),P.value=void 0,O.value=[],m.value=Sr.cloneDeep(On),x.value="",i.value=[],v.value=!1,y.value={},c.value=[],g.value={},k.value=null}function b(z,S,Y,er){var ur;F(),$.value=Sr.cloneDeep(z),P.value=(ur=$.value.features[0])==null?void 0:ur.geometry.type,P.value=P.value==="MultiPolygon"?"Polygon":P.value,P.value!=="Polygon"&&(m.value.extrusion=!1),v.value=typeof S=="object"&&S!==null,v.value&&W(S),["urn:ogc:def:crs:OGC:1.3:CRS84","EPSG:4326"].includes($.value.crs.properties.name)?(R(),O.value.includes(er)?m.value.selectedFeature=er:m.value.selectedFeature=null,D(),M()):alert("invalid CRS. use CRS84 / EPSG:4326")}function W(z){Object.keys(z).forEach(S=>{y.value[S+" (OD)"]=z[S]}),c.value=Object.keys(y.value),$.value.features.forEach(S=>S.properties.index=String(S.properties.index)),$.value.features.length>0&&c.value.forEach(S=>{g.value[S]=Object.keys(y.value[S]),$.value.features.forEach(Y=>Y.properties[S]=null)})}function cr(z){const S=m.value.selectedFeature;return c.value.includes(S)?g.value[S].includes(z):!1}function br(z){const S=m.value.selectedFeature;if(c.value.includes(S)&&v.value){k.value=z;const Y=y.value[S][k.value];$.value.features.forEach(er=>er.properties[S]=Y?Y[er.properties.index]:null)}D(),M()}function dr(z){$.value=Sr.cloneDeep(z),D(),M()}function R(){const z=new Set([]);$.value.features.forEach(S=>{Object.keys(S.properties).forEach(Y=>z.add(Y))}),O.value=Array.from(z),O.value=O.value.filter(S=>!["display_width","display_color"].includes(S)),x.value=z.has("route_type")?"route_type":z.has("highway")?"highway":O.value[0],i.value=Array.from(new Set($.value.features.map(S=>S.properties[x.value])))}function D(){const z=new Set(i.value),S=x.value,Y=m.value.selectedFeature;w.value.features=$.value.features.filter(er=>z.has(er.properties[S])),m.value.showNaN||(E.value.features=w.value.features.filter(ur=>!ur.properties[Y]),$.value.features.filter(ur=>ur.properties[Y]).length===0&&v.value&&Object.keys(g.value).includes(Y)||(w.value.features=w.value.features.filter(ur=>ur.properties[Y])))}function M(){const z=m.value.selectedFeature,S=m.value.maxWidth,Y=m.value.minWidth,er=m.value.scale,ur=m.value.numStep,Zr=m.value.cmap,Jr=w.value.features.filter(or=>or.properties[z]).map(or=>or.properties[z]);if(!m.value.fixScale){const or=ye=>ye.reduce(([re,me],ee)=>[Math.min(re,ee),Math.max(me,ee)],[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]),[vr,be]=or(Jr);m.value.minVal=Math.round(vr*100)/100,m.value.maxVal=Math.round(be*100)/100}const Qr=m.value.minVal,Kr=m.value.maxVal,pe=m.value.reverseColor;w.value.features.forEach(or=>{let vr=or.properties[z];vr=Ze(vr,Qr,Kr,!1,er,!0),or.properties.display_width=(S-Y)*vr+Y});let xr=Sr.cloneDeep(m.value.padding);xr=[xr[0]/100,1-xr[1]/100],xr=m.value.reverseColor?xr.reverse():xr;const de=An.scale(Zr).padding(xr).domain([0,1],er).classes(ur);if(w.value.features.forEach(or=>{const vr=or.properties[z];Lf(vr)?or.properties.display_color=vr:or.properties.display_color=de(Ze(vr,Qr,Kr,pe,er,!1)).hex()}),$.value.features.filter(or=>or.properties[z]).length===0&&v.value&&Object.keys(g.value).includes(z)){const or=new Set(g.value[z]);w.value.features.forEach(vr=>{or.has(vr.properties.index)&&(vr.properties.display_width=10,vr.properties.display_color="#4CAF50")}),L.changeNotification({text:Ff("Clickable element in green"),autoClose:!0,color:"success"})}}function K(z){x.value=z,i.value=Array.from(new Set($.value.features.map(S=>S.properties[x.value]))),D()}function I(z){i.value=z,D()}function rr(z){const S=Object.keys(z);for(const Y of S)m.value[Y]=z[Y];D(),M()}const ar=he(()=>Array.from(new Set($.value.features.map(S=>S.properties[x.value])))),tr=he(()=>{const z=[];let S=m.value.padding;S=[S[0]/100,1-S[1]/100],S=m.value.reverseColor?S.reverse():S;const Y=An.scale(m.value.cmap).padding(S).domain([0,1]).classes(m.value.numStep);for(let er=0;er<100;er++)z.push(Y(Ze(er,0,100,m.value.reverseColor,m.value.scale,!1)));return z});return{layer:$,type:P,attributes:O,visibleLayer:w,NaNLayer:E,displaySettings:m,selectedFilter:x,selectedCategory:i,hasOD:v,ODfeatures:c,matAvailableIndex:g,matSelectedIndex:k,changeOD:br,isIndexAvailable:cr,loadLayer:b,updateLayer:dr,getLinksProperties:R,refreshVisibleLinks:D,updateSelectedFeature:M,changeSelectedFilter:K,changeSelectedCategory:I,applySettings:rr,filteredCategory:ar,colorScale:tr}}const Af=L=>L,Of={name:"StaticLayer",components:{MapLegend:vf},props:["preset","map","order"],setup(L){const $=Jl(),w=Ql(),E=Kl(),P=Je(),{preset:O,map:m,order:x}=Vl(L),i=O.value.name,v=i+"-source",y=i+"-layer",{visibleLayer:c,type:g,loadLayer:k,displaySettings:F,attributes:b,applySettings:W,changeSelectedFilter:cr,changeSelectedCategory:br,colorScale:dr,isIndexAvailable:R,changeOD:D}=Ef(),M=F.value.opacity,K=F.value.offset?-1:1;async function I(rr){switch(rr){case"links":k($.links,null,null,"headway");break;case"rlinks":k(w.rlinks,null,null,"speed");break;case"nodes":k($.nodes,null,null,"boardings");break;case"rnodes":k(w.rnodes,null,null,"boardings");break;case"od":k(E.layer,null,null,"name");break;default:const ar=await P.getOtherFile(rr,"geojson"),tr=await P.getOtherFile(rr,"json");k(ar,tr,null,"");break}}return rf(async()=>{var rr;await I(O.value.layer),b.value.includes((rr=O.value)==null?void 0:rr.selectedFilter)?(cr(O.value.selectedFilter),Object.keys(O.value).includes("selectedCategory")&&br(O.value.selectedCategory)):Object.keys(O.value).includes("selectedFilter")&&P.changeNotification({text:O.value.selectedFilter+" "+Af("filter does not exist. use default one"),autoClose:!0,color:"error"}),W(O.value.displaySettings),Object.keys(O.value).includes("selectedIndex")&&R(O.value.selectedIndex)&&(D(O.value.selectedIndex),P.changeNotification({})),c.value.features=c.value.features.map(ar=>({geometry:ar.geometry,properties:{display_color:ar.properties.display_color,display_width:ar.properties.display_width}})),m.value.addSource(v,{type:"geojson",data:c.value}),g.value==="LineString"?m.value.addLayer({id:y,type:"line",minzoom:5,source:v,layout:{"line-sort-key":["to-number",["get","display_width"]],"line-cap":"round"},paint:{"line-color":["get","display_color"],"line-opacity":M/100,"line-offset":["*",K*.5,["to-number",["get","display_width"]]],"line-width":["get","display_width"]}}):g.value==="Point"?m.value.addLayer({id:y,type:"circle",minzoom:5,source:v,layout:{"circle-sort-key":["to-number",["get","display_width"]]},paint:{"circle-color":["get","display_color"],"circle-radius":["get","display_width"],"circle-opacity":M/100}}):["MultiPolygon","Polygon"].includes(g.value)&&!F.value.extrusion?m.value.addLayer({id:y,type:"fill",minzoom:5,source:v,paint:{"fill-color":["get","display_color"],"fill-opacity":M/100}}):["MultiPolygon","Polygon"].includes(g.value)&&F.value.extrusion&&m.value.addLayer({id:y,type:"fill-extrusion",minzoom:5,source:v,paint:{"fill-extrusion-color":["get","display_color"],"fill-extrusion-opacity":M/100,"fill-extrusion-height":["*",1e3,["to-number",["get","display_width"]]]}}),m.value.getLayer("results")&&m.value.moveLayer(y,"results"),m.value.getLayer("rlinks")&&m.value.moveLayer(y,"rlinks")}),ef(()=>{m.value.getLayer(y)&&(m.value.removeLayer(y),m.value.removeSource(v))}),{displaySettings:F,zorder:x,colorScale:dr}}},zf={class:"map-legend"};function Pf(L,$,w,E,P,O){const m=af("MapLegend");return ve(),ge("section",null,[Hr("div",zf,[nf(m,{"color-scale":E.colorScale,"display-settings":E.displaySettings,"base-offset":350,order:E.zorder},null,8,["color-scale","display-settings","order"])])])}const If=zn(Of,[["render",Pf],["__scopeId","data-v-6efe4c2b"]]),Df=Object.freeze(Object.defineProperty({__proto__:null,default:If},Symbol.toStringTag,{value:"Module"}));export{vf as M,If as S,Df as a,An as c,Ef as u};
