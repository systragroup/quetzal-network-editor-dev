import{an as z,u as A,t as F,a as N,c as x,r as u,p as R,e as c,A as d,k as P,i as r,C as _,l as $,E as V,H as E,I as T,h as m,a6 as G,aF as k,f,b6 as H,V as M,B as b,_ as j}from"./index-Be1jW7-T.js";import{M as q}from"./Markdown-D9waxkhR.js";const J={class:"container"},K={class:"layout"},O={key:0},Q={class:"toolbar elevation-2"},W={class:"slider"},X=z({__name:"MarkDownViewer",props:{model:{},scenario:{},filePaths:{}},setup(D){const{$gettext:p}=A(),B=D,{model:g,scenario:y,filePaths:h}=F(B);function I(t){return new Promise((e,a)=>{const i=new FileReader;i.onload=o=>{o.target&&e(o.target.result)},i.onerror=o=>{a(o)},i.readAsDataURL(t)})}const v=N(),C=R(()=>v.isMobile),s=u(100);x(()=>{s.value=C.value?100:75});const n=u([]),w=u(""),l=u("");async function L(){const t=h.value.filter(a=>["png","gif"].includes(a.extension));for(const a of t){if(a.content instanceof Uint8Array){const o=new Blob([a.content],{type:"image/png"});var e=await I(o)}else var e=await k.getImagesURL(g.value,y.value+a.path);const i=a.path.split("/").slice(-1)[0];n.value.push({name:i,src:e})}}async function S(){const t=h.value.filter(e=>e.extension==="md");if(t.length>0){let e=t[0].content;e instanceof Uint8Array||(e=await k.readBytes(g.value,y.value+t[0].path)),l.value=new TextDecoder().decode(e)}}function U(){if(l.value.length>0){const t=[];for(const e of n.value)l.value.includes(e.name)&&(l.value=l.value.replace(e.name,e.src),t.push(e));n.value=n.value.filter(e=>!t.includes(e))}}return x(async()=>{v.changeLoading(!0),await L(),await S(),U(),v.changeLoading(!1),n.value.length===0&&l.value.length===0&&(w.value=p("Nothing to display"))}),(t,e)=>(f(),c("section",J,[d("div",K,[n.value.length===0?(f(),c("p",O,_($(p)(w.value)),1)):P("",!0),r(q,{source:l.value,style:V({width:`${s.value}%`})},null,8,["source","style"]),(f(!0),c(E,null,T(n.value,a=>(f(),c("div",{key:a.name,class:"gallery",style:V({width:`${s.value}%`})},[r(H,{src:a.src,alt:a.name},null,8,["src","alt"])],4))),128))]),d("div",Q,[d("div",W,[r(G,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value=a),class:"align-center",min:"0",max:"100",step:"1",density:"compact","track-size":"2","thumb-size":"10"},{prepend:m(()=>[r(M,{size:"x-small",onClick:e[0]||(e[0]=()=>{s.value=Math.max(0,s.value-10)})},{default:m(()=>[...e[3]||(e[3]=[b(" fa-solid fa-magnifying-glass-minus ",-1)])]),_:1})]),append:m(()=>[d("span",null,_(s.value),1),r(M,{class:"ml-2",size:"x-small",onClick:e[1]||(e[1]=()=>{s.value=Math.min(100,s.value+10)})},{default:m(()=>[...e[4]||(e[4]=[b(" fa-solid fa-magnifying-glass-plus ",-1)])]),_:1})]),_:1},8,["modelValue"])])])]))}}),ee=j(X,[["__scopeId","data-v-078692dd"]]);export{ee as M};
