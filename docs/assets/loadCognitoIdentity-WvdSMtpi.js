import{ba as x,bb as Ae,bc as Xe,bd as Ze,be as Qe,bf as q,bg as et,bh as Ie,bi as U,bj as ie,bk as Pe,bl as tt,bm as ke,bn as st,bo as nt,bp as rt,bq as it,br as ot,bs as at,bt as ct,bu as dt,bv as ut,bw as lt,bx as pt,by as ht,bz as mt,bA as yt,bB as ft,bC as gt,bD as wt,bE as Et,bF as g,bG as De,bH as St,bI as F,bJ as Rt,bK as bt,bL as Ct,bM as vt,bN as _e,bO as Ne}from"./index-Cly6pklG.js";const p=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(p);if(typeof e=="object"){const t={};for(const s of Object.keys(e))e[s]!=null&&(t[s]=p(e[s]));return t}return e},xt=e=>t=>{throw t},Tt=(e,t)=>{},At=e=>(t,s)=>async n=>{if(!x.isInstance(n.request))return t(n);const o=Ae(s).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,d=await t({...n,request:await c.sign(n.request,a,i)}).catch((c.errorHandler||xt)(i));return(c.successHandler||Tt)(d.response,i),d},It={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Pt={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:It.name},kt=e=>({applyToStack:t=>{t.addRelativeTo(At(),Pt)}});class Dt{constructor(t){this.authSchemes=new Map;for(const[s,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(s,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}class _t{async sign(t,s,n){return t}}const Nt=e=>t=>Me(t)&&t.expiration.getTime()-Date.now()<e,Mt=3e5,Ot=Nt(Mt),Me=e=>e.expiration!==void 0,$t=(e,t,s)=>{if(e===void 0)return;const n=typeof e!="function"?async()=>Promise.resolve(e):e;let r,o,i,a=!1;const c=async d=>{o||(o=n(d));try{r=await o,i=!0,a=!1}finally{o=void 0}return r};return t===void 0?async d=>((!i||d!=null&&d.forceRefresh)&&(r=await c(d)),r):async d=>((!i||d!=null&&d.forceRefresh)&&(r=await c(d)),a?r:s(r)?(t(r)&&await c(d),r):(a=!0,r))},M=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};const Ft=e=>t=>async s=>{if(!x.isInstance(s.request))return t(s);const{request:n}=s,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return t(s)},Ut={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ht=e=>({applyToStack:t=>{t.add(Ft(e),Ut)}}),Lt=()=>(e,t)=>async s=>{var n,r;try{const o=await e(s),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:h}=d,f=u??t.inputFilterSensitiveLog,w=h??t.outputFilterSensitiveLog,{$metadata:E,...l}=o.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:i,commandName:a,input:f(s.input),output:w(l),metadata:E}),o}catch(o){const{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:u}=d,h=u??t.inputFilterSensitiveLog;throw(r=c==null?void 0:c.error)==null||r.call(c,{clientName:i,commandName:a,input:h(s.input),error:o,metadata:o.$metadata}),o}},zt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Bt=e=>({applyToStack:t=>{t.add(Lt(),zt)}});var oe={};const ae="X-Amzn-Trace-Id",qt="AWS_LAMBDA_FUNCTION_NAME",Gt="_X_AMZN_TRACE_ID",jt=e=>t=>async s=>{const{request:n}=s;if(!x.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(ae))return t(s);const r=oe[qt],o=oe[Gt],i=a=>typeof a=="string"&&a.length>0;return i(r)&&i(o)&&(n.headers[ae]=o),t({...s,request:n})},Wt={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Vt=e=>({applyToStack:t=>{t.add(jt(e),Wt)}});function Kt(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const Oe=(e,t=!1)=>{if(t){for(const s of e.split("."))if(!Oe(s))return!1;return!0}return!(!Xe(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Ze(e))},Yt=e=>{const t=e.split(":");if(t.length<6)return null;const[s,n,r,o,i,...a]=t;return s!=="arn"||n===""||r===""||a[0]===""?null:{partition:n,service:r,region:o,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}},Jt=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],Xt="1.1",Zt={partitions:Jt,version:Xt};let Qt=Zt;const es=e=>{const{partitions:t}=Qt;for(const n of t){const{regions:r,outputs:o}=n;for(const[i,a]of Object.entries(r))if(i===e)return{...o,...a}}for(const n of t){const{regionRegex:r,outputs:o}=n;if(new RegExp(r).test(e))return{...o}}const s=t.find(n=>n.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},ts={isVirtualHostableS3Bucket:Oe,parseArn:Yt,partition:es};Qe.aws=ts;const ce="user-agent",L="x-amz-user-agent",de=" ",z="/",ss=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,ns=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,ue="-",rs=e=>(t,s)=>async n=>{var h,f;const{request:r}=n;if(!x.isInstance(r))return t(n);const{headers:o}=r,i=((h=s==null?void 0:s.userAgent)==null?void 0:h.map(B))||[],a=(await e.defaultUserAgentProvider()).map(B),c=((f=e==null?void 0:e.customUserAgent)==null?void 0:f.map(B))||[],d=[].concat([...a,...i,...c]).join(de),u=[...a.filter(w=>w.startsWith("aws-sdk-")),...c].join(de);return e.runtime!=="browser"?(u&&(o[L]=o[L]?`${o[ce]} ${u}`:u),o[ce]=d):o[L]=d,t({...n,request:r})},B=e=>{var i;const t=e[0].split(z).map(a=>a.replace(ss,ue)).join(z),s=(i=e[1])==null?void 0:i.replace(ns,ue),n=t.indexOf(z),r=t.substring(0,n);let o=t.substring(n+1);return r==="api"&&(o=o.toLowerCase()),[r,o,s].filter(a=>a&&a.length>0).reduce((a,c,d)=>{switch(d){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},is={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},os=e=>({applyToStack:t=>{t.add(rs(e),is)}}),as=!1,cs=!1,$e=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),le=e=>$e(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,ds=e=>{const{region:t,useFipsEndpoint:s}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return le(t);const n=await t();return le(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return $e(n)?!0:typeof s!="function"?Promise.resolve(!!s):s()}}},pe="content-length";function us(e){return t=>async s=>{const n=s.request;if(x.isInstance(n)){const{body:r,headers:o}=n;if(r&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(pe)===-1)try{const i=e(r);n.headers={...n.headers,[pe]:String(i)}}catch{}}return t({...s,request:n})}}const ls={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},ps=e=>({applyToStack:t=>{t.add(us(e.bodyLengthChecker),ls)}});var I;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(I||(I={}));const H=3,hs=I.STANDARD,ms=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ys=["TimeoutError","RequestTimeout","RequestTimeoutException"],fs=[500,502,503,504],gs=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],ws=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},Fe=e=>{var t,s;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||ms.includes(e.name)||((s=e.$retryable)==null?void 0:s.throttling)==!0},Ue=e=>{var t;return ws(e)||ys.includes(e.name)||gs.includes((e==null?void 0:e.code)||"")||fs.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Es=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const s=e.$metadata.httpStatusCode;return 500<=s&&s<=599&&!Ue(e)}return!1};class Ss{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const s=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,s))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const s=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+s),this.lastTimestamp=t}updateClientSendingRate(t){let s;if(this.updateMeasuredRate(),Fe(t)){const r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),s=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),s=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(s,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),s=Math.floor(t*2)/2;if(this.requestCount++,s>this.lastTxRateBucket){const n=this.requestCount/(s-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=s}}getPrecise(t){return parseFloat(t.toFixed(8))}}const G=100,He=20*1e3,Rs=500,he=500,bs=5,Cs=10,vs=1,xs="amz-sdk-invocation-id",Ts="amz-sdk-request",As=()=>{let e=G;return{computeNextBackoffDelay:n=>Math.floor(Math.min(He,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},me=({retryDelay:e,retryCount:t,retryCost:s})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(He,e),getRetryCost:()=>s});class Le{constructor(t){this.maxAttempts=t,this.mode=I.STANDARD,this.capacity=he,this.retryBackoffStrategy=As(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return me({retryDelay:G,retryCount:0})}async refreshRetryTokenForRetry(t,s){const n=await this.getMaxAttempts();if(this.shouldRetry(t,s,n)){const r=s.errorType;this.retryBackoffStrategy.setDelayBase(r==="THROTTLING"?Rs:G);const o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=s.retryAfterHint?Math.max(s.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(r);return this.capacity-=a,me({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(he,this.capacity+(t.getRetryCost()??vs))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${H}`),H}}shouldRetry(t,s,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(s.errorType)&&this.isRetryableError(s.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Cs:bs}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class Is{constructor(t,s){this.maxAttemptsProvider=t,this.mode=I.ADAPTIVE;const{rateLimiter:n}=s??{};this.rateLimiter=n??new Ss,this.standardRetryStrategy=new Le(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,s){return this.rateLimiter.updateClientSendingRate(s),this.standardRetryStrategy.refreshRetryTokenForRetry(t,s)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}const Ps=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),ks=e=>{const{retryStrategy:t}=e,s=q(e.maxAttempts??H);return{...e,maxAttempts:s,retryStrategy:async()=>t||(await q(e.retryMode)()===I.ADAPTIVE?new Is(s):new Le(s))}},Ds=e=>(e==null?void 0:e.body)instanceof ReadableStream,_s=e=>(t,s)=>async n=>{var i;let r=await e.retryStrategy();const o=await e.maxAttempts();if(Ns(r)){r=r;let a=await r.acquireInitialRetryToken(s.partition_id),c=new Error,d=0,u=0;const{request:h}=n,f=x.isInstance(h);for(f&&(h.headers[xs]=et());;)try{f&&(h.headers[Ts]=`attempt=${d+1}; max=${o}`);const{response:w,output:E}=await t(n);return r.recordSuccess(a),E.$metadata.attempts=d+1,E.$metadata.totalRetryDelay=u,{response:w,output:E}}catch(w){const E=Ms(w);if(c=Ps(w),f&&Ds(h))throw(i=s.logger instanceof Ie?console:s.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),c;try{a=await r.refreshRetryTokenForRetry(a,E)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=d+1,c.$metadata.totalRetryDelay=u,c}d=a.getRetryCount();const l=a.getRetryDelay();u+=l,await new Promise(v=>setTimeout(v,l))}}else return r=r,r!=null&&r.mode&&(s.userAgent=[...s.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,n)},Ns=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Ms=e=>{const t={error:e,errorType:Os(e)},s=Us(e.$response);return s&&(t.retryAfterHint=s),t},Os=e=>Fe(e)?"THROTTLING":Ue(e)?"TRANSIENT":Es(e)?"SERVER_ERROR":"CLIENT_ERROR",$s={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Fs=e=>({applyToStack:t=>{t.add(_s(e),$s)}}),Us=e=>{if(!U.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const s=e.headers[t],n=Number(s);return Number.isNaN(n)?new Date(s):new Date(n*1e3)},ye=e=>{var t,s;return U.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((s=e.headers)==null?void 0:s.Date):void 0},ze=e=>new Date(Date.now()+e),Hs=(e,t)=>Math.abs(ze(t).getTime()-e)>=3e5,fe=(e,t)=>{const s=Date.parse(e);return Hs(s,t)?s-Date.now():t},D=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Ls=async e=>{var c,d,u;const t=D("context",e.context),s=D("config",e.config),n=(u=(d=(c=t.endpointV2)==null?void 0:c.properties)==null?void 0:d.authSchemes)==null?void 0:u[0],o=await D("signer",s.signer)(n),i=e==null?void 0:e.signingRegion,a=e==null?void 0:e.signingName;return{config:s,signer:o,signingRegion:i,signingName:a}};class zs{async sign(t,s,n){if(!x.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:r,signer:o,signingRegion:i,signingName:a}=await Ls(n);return await o.sign(t,{signingDate:ze(r.systemClockOffset),signingRegion:i,signingService:a})}errorHandler(t){return s=>{const n=s.ServerTime??ye(s.$response);if(n){const r=D("config",t.config),o=r.systemClockOffset;r.systemClockOffset=fe(n,r.systemClockOffset),r.systemClockOffset!==o&&s.$metadata&&(s.$metadata.clockSkewCorrected=!0)}throw s}}successHandler(t,s){const n=ye(t);if(n){const r=D("config",s.config);r.systemClockOffset=fe(n,r.systemClockOffset)}}}const Bs=e=>{let t;e.credentials&&(t=$t(e.credentials,Ot,Me)),t||(e.credentialDefaultProvider?t=M(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):t=async()=>{throw new Error("`credentials` is missing")});const{signingEscapePath:s=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:r}=e;let o;return e.signer?o=M(e.signer):e.regionInfoProvider?o=()=>M(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{const{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;const u={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},h=e.signerConstructor||ie;return new h(u)}):o=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await M(e.region)(),properties:{}},i);const a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;const d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},u=e.signerConstructor||ie;return new u(d)},{...e,systemClockOffset:n,signingEscapePath:s,credentials:t,signer:o}},qs=async(e,t,s)=>({operation:Ae(t).operation,region:await q(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Gs(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function O(e){return{schemeId:"smithy.api#noAuth"}}const js=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(O());break}case"GetId":{t.push(O());break}case"GetOpenIdToken":{t.push(O());break}case"UnlinkIdentity":{t.push(O());break}default:t.push(Gs(e))}return t},Ws=e=>({...Bs(e)}),Vs=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),Be={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Ks="@aws-sdk/client-cognito-identity",Ys="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",Js="3.525.0",Xs={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js"},Zs="./dist-cjs/index.js",Qs="./dist-types/index.d.ts",en="./dist-es/index.js",tn=!1,sn={"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.525.0","@aws-sdk/core":"3.525.0","@aws-sdk/credential-provider-node":"3.525.0","@aws-sdk/middleware-host-header":"3.523.0","@aws-sdk/middleware-logger":"3.523.0","@aws-sdk/middleware-recursion-detection":"3.523.0","@aws-sdk/middleware-user-agent":"3.525.0","@aws-sdk/region-config-resolver":"3.525.0","@aws-sdk/types":"3.523.0","@aws-sdk/util-endpoints":"3.525.0","@aws-sdk/util-user-agent-browser":"3.523.0","@aws-sdk/util-user-agent-node":"3.525.0","@smithy/config-resolver":"^2.1.4","@smithy/core":"^1.3.5","@smithy/fetch-http-handler":"^2.4.3","@smithy/hash-node":"^2.1.3","@smithy/invalid-dependency":"^2.1.3","@smithy/middleware-content-length":"^2.1.3","@smithy/middleware-endpoint":"^2.4.4","@smithy/middleware-retry":"^2.1.4","@smithy/middleware-serde":"^2.1.3","@smithy/middleware-stack":"^2.1.3","@smithy/node-config-provider":"^2.2.4","@smithy/node-http-handler":"^2.4.1","@smithy/protocol-http":"^3.2.1","@smithy/smithy-client":"^2.4.2","@smithy/types":"^2.10.1","@smithy/url-parser":"^2.1.3","@smithy/util-base64":"^2.1.1","@smithy/util-body-length-browser":"^2.1.1","@smithy/util-body-length-node":"^2.2.1","@smithy/util-defaults-mode-browser":"^2.1.4","@smithy/util-defaults-mode-node":"^2.2.3","@smithy/util-endpoints":"^1.1.4","@smithy/util-middleware":"^2.1.3","@smithy/util-retry":"^2.1.3","@smithy/util-utf8":"^2.1.1",tslib:"^2.5.0"},nn={"@aws-sdk/client-iam":"3.525.0","@smithy/service-client-documentation-generator":"^2.1.1","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},rn={node:">=14.0.0"},on={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},an=["dist-*/**"],cn={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},dn="Apache-2.0",un={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},ln="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",pn={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},hn={name:Ks,description:Ys,version:Js,scripts:Xs,main:Zs,types:Qs,module:en,sideEffects:tn,dependencies:sn,devDependencies:nn,engines:rn,typesVersions:on,files:an,author:cn,license:dn,browser:un,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:ln,repository:pn},mn=({serviceId:e,clientVersion:t})=>async()=>{var r,o,i,a,c;const s=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?Pe.parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",t],["ua","2.0"],[`os/${((o=s==null?void 0:s.os)==null?void 0:o.name)||"other"}`,(i=s==null?void 0:s.os)==null?void 0:i.version],["lang/js"],["md/browser",`${((a=s==null?void 0:s.browser)==null?void 0:a.name)??"unknown"}_${((c=s==null?void 0:s.browser)==null?void 0:c.version)??"unknown"}`]];return e&&n.push([`api/${e}`,t]),n};function yn(e=0){return new Promise((t,s)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",s(n)},e)})}const fn={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class j{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new j(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(s=>s||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(t,{abortSignal:s}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,r=this.config.keepAlive===!0;if(s!=null&&s.aborted){const l=new Error("Request aborted");return l.name="AbortError",Promise.reject(l)}let o=t.path;const i=tt(t.query||{});i&&(o+=`?${i}`),t.fragment&&(o+=`#${t.fragment}`);let a="";if(t.username!=null||t.password!=null){const l=t.username??"",v=t.password??"";a=`${l}:${v}@`}const{port:c,method:d}=t,u=`${t.protocol}//${a}${t.hostname}${c?`:${c}`:""}${o}`,f={body:d==="GET"||d==="HEAD"?void 0:t.body,headers:new Headers(t.headers),method:d};typeof AbortController<"u"&&(f.signal=s),fn.supported&&(f.keepalive=r);const w=new Request(u,f),E=[fetch(w).then(l=>{const v=l.headers,T={};for(const N of v.entries())T[N[0]]=N[1];return l.body!=null?{response:new U({headers:T,reason:l.statusText,statusCode:l.status,body:l.body})}:l.blob().then(N=>({response:new U({headers:T,reason:l.statusText,statusCode:l.status,body:N})}))}),yn(n)];return s&&E.push(new Promise((l,v)=>{s.onabort=()=>{const T=new Error("Request aborted");T.name="AbortError",v(T)}})),Promise.race(E)}updateHttpClientConfig(t,s){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=s,n))}httpHandlerConfigs(){return this.config??{}}}const gn=e=>typeof Blob=="function"&&e instanceof Blob?wn(e):En(e);async function wn(e){const t=await Sn(e),s=ke(t);return new Uint8Array(s)}async function En(e){let t=new Uint8Array(0);const s=e.getReader();let n=!1;for(;!n;){const{done:r,value:o}=await s.read();if(o){const i=t;t=new Uint8Array(i.length+o.length),t.set(i),t.set(o,i.length)}n=r}return t}function Sn(e){return new Promise((t,s)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return s(new Error("Reader aborted too early"));const r=n.result??"",o=r.indexOf(","),i=o>-1?o+1:r.length;t(r.substring(i))},n.onabort=()=>s(new Error("Read aborted")),n.onerror=()=>s(n.error),n.readAsDataURL(e)})}const Rn=e=>()=>Promise.reject(e);function bn(e){const t={};if(e=e.replace(/^\?/,""),e)for(const s of e.split("&")){let[n,r=null]=s.split("=");n=decodeURIComponent(n),r&&(r=decodeURIComponent(r)),n in t?Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r}return t}const qe=e=>{if(typeof e=="string")return qe(new URL(e));const{hostname:t,pathname:s,port:n,protocol:r,search:o}=e;let i;return o&&(i=bn(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:r,path:s,query:i}},Ge="required",R="fn",b="argv",P="ref",ge=!0,we="isSet",_="booleanEquals",A="error",k="endpoint",C="tree",W="PartitionResult",Ee={[Ge]:!1,type:"String"},Se={[Ge]:!0,default:!1,type:"Boolean"},Re={[P]:"Endpoint"},je={[R]:_,[b]:[{[P]:"UseFIPS"},!0]},We={[R]:_,[b]:[{[P]:"UseDualStack"},!0]},S={},be={[R]:"getAttr",[b]:[{[P]:W},"supportsFIPS"]},Ce={[R]:_,[b]:[!0,{[R]:"getAttr",[b]:[{[P]:W},"supportsDualStack"]}]},ve=[je],xe=[We],Te=[{[P]:"Region"}],Cn={version:"1.0",parameters:{Region:Ee,UseDualStack:Se,UseFIPS:Se,Endpoint:Ee},rules:[{conditions:[{[R]:we,[b]:[Re]}],rules:[{conditions:ve,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:A},{conditions:xe,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:A},{endpoint:{url:Re,properties:S,headers:S},type:k}],type:C},{conditions:[{[R]:we,[b]:Te}],rules:[{conditions:[{[R]:"aws.partition",[b]:Te,assign:W}],rules:[{conditions:[je,We],rules:[{conditions:[{[R]:_,[b]:[ge,be]},Ce],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:S,headers:S},type:k}],type:C},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:A}],type:C},{conditions:ve,rules:[{conditions:[{[R]:_,[b]:[be,ge]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:S,headers:S},type:k}],type:C},{error:"FIPS is enabled but this partition does not support FIPS",type:A}],type:C},{conditions:xe,rules:[{conditions:[Ce],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:S,headers:S},type:k}],type:C},{error:"DualStack is enabled but this partition does not support DualStack",type:A}],type:C},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:S,headers:S},type:k}],type:C}],type:C},{error:"Invalid Configuration: Missing Region",type:A}]},vn=Cn,xn=(e,t={})=>st(vn,{endpointParams:e,logger:t.logger}),Tn=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??ke,base64Encoder:(e==null?void 0:e.base64Encoder)??nt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??xn,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??js,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new zs},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new _t}],logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??qe,utf8Decoder:(e==null?void 0:e.utf8Decoder)??rt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??it}),An=["in-region","cross-region","mobile","standard","legacy"],In=({defaultsMode:e}={})=>ot(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(Pn()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${An.join(", ")}, got ${t}`)}}),Pn=()=>{var s,n;const e=typeof window<"u"&&((s=window==null?void 0:window.navigator)!=null&&s.userAgent)?Pe.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},kn=e=>{const t=In(e),s=()=>t().then(dt),n=Tn(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??at,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(r=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??mn({serviceId:n.serviceId,clientVersion:hn.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??H,region:(e==null?void 0:e.region)??Rn("Region is missing"),requestHandler:j.create((e==null?void 0:e.requestHandler)??s),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await s()).retryMode||hs),sha256:(e==null?void 0:e.sha256)??ct.Sha256,streamCollector:(e==null?void 0:e.streamCollector)??gn,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(as)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(cs))}},Dn=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(r){const o=t.findIndex(i=>i.schemeId===r.schemeId);o===-1?t.push(r):t.splice(o,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){s=r},httpAuthSchemeProvider(){return s},setCredentials(r){n=r},credentials(){return n}}},_n=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),$=e=>e,Nn=(e,t)=>{const s={...$(yt(e)),...$(ut(e)),...$(lt(e)),...$(Dn(e))};return t.forEach(n=>n.configure(s)),{...e,...pt(s),...ht(s),...mt(s),..._n(s)}};class ar extends ft{constructor(...[t]){const s=kn(t||{}),n=Vs(s),r=ds(n),o=gt(r),i=ks(o),a=i,c=Kt(a),d=Ws(c),u=Nn(d,(t==null?void 0:t.extensions)||[]);super(u),this.config=u,this.middlewareStack.use(Fs(this.config)),this.middlewareStack.use(ps(this.config)),this.middlewareStack.use(Ht(this.config)),this.middlewareStack.use(Bt(this.config)),this.middlewareStack.use(Vt(this.config)),this.middlewareStack.use(os(this.config)),this.middlewareStack.use(wt(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(kt(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return qs}getIdentityProviderConfigProvider(){return async t=>new Dt({"aws.auth#sigv4":t.credentials})}}const Mn=(e,t)=>(s,n)=>async r=>{const{response:o}=await s(r);try{const i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}},On=(e,t)=>(s,n)=>async r=>{var a;const o=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(r.input,{...e,endpoint:o});return s({...r,request:i})},$n={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Fn={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ve(e,t,s){return{applyToStack:n=>{n.add(Mn(e,s),$n),n.add(On(e,t),Fn)}}}class m extends Et{constructor(t){super(t),Object.setPrototypeOf(this,m.prototype)}}class V extends m{constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,V.prototype)}}class K extends m{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,K.prototype)}}class Y extends m{constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,Y.prototype)}}class J extends m{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,J.prototype)}}class X extends m{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,X.prototype)}}class Z extends m{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Z.prototype)}}class Q extends m{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Q.prototype)}}class ee extends m{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,ee.prototype)}}class te extends m{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,te.prototype)}}class se extends m{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,se.prototype)}}class ne extends m{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,ne.prototype)}}const Un=async(e,t)=>{const s=Je("GetCredentialsForIdentity");let n;return n=JSON.stringify(p(e)),Ye(t,s,"/",void 0,n)},Hn=async(e,t)=>{const s=Je("GetId");let n;return n=JSON.stringify(p(e)),Ye(t,s,"/",void 0,n)},Ln=async(e,t)=>{if(e.statusCode>=300)return Ke(e,t);const s=await re(e.body,t);let n={};return n=er(s),{$metadata:y(e),...n}},zn=async(e,t)=>{if(e.statusCode>=300)return Ke(e,t);const s=await re(e.body,t);let n={};return n=p(s),{$metadata:y(e),...n}},Ke=async(e,t)=>{const s={...e,body:await nr(e.body,t)},n=rr(e,s.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await jn(s);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Vn(s);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Kn(s);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Yn(s);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Jn(s);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Zn(s);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Xn(s);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Gn(s);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Wn(s);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await qn(s);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Bn(s);default:const r=s.body;return sr({output:e,parsedBody:r,errorCode:n})}},Bn=async(e,t)=>{const s=e.body,n=p(s),r=new ne({$metadata:y(e),...n});return g(r,s)},qn=async(e,t)=>{const s=e.body,n=p(s),r=new se({$metadata:y(e),...n});return g(r,s)},Gn=async(e,t)=>{const s=e.body,n=p(s),r=new ee({$metadata:y(e),...n});return g(r,s)},jn=async(e,t)=>{const s=e.body,n=p(s),r=new V({$metadata:y(e),...n});return g(r,s)},Wn=async(e,t)=>{const s=e.body,n=p(s),r=new te({$metadata:y(e),...n});return g(r,s)},Vn=async(e,t)=>{const s=e.body,n=p(s),r=new K({$metadata:y(e),...n});return g(r,s)},Kn=async(e,t)=>{const s=e.body,n=p(s),r=new Y({$metadata:y(e),...n});return g(r,s)},Yn=async(e,t)=>{const s=e.body,n=p(s),r=new J({$metadata:y(e),...n});return g(r,s)},Jn=async(e,t)=>{const s=e.body,n=p(s),r=new X({$metadata:y(e),...n});return g(r,s)},Xn=async(e,t)=>{const s=e.body,n=p(s),r=new Q({$metadata:y(e),...n});return g(r,s)},Zn=async(e,t)=>{const s=e.body,n=p(s),r=new Z({$metadata:y(e),...n});return g(r,s)},Qn=(e,t)=>De(e,{AccessKeyId:F,Expiration:s=>bt(Ct(vt(s))),SecretKey:F,SessionToken:F}),er=(e,t)=>De(e,{Credentials:s=>Qn(s),IdentityId:F}),y=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),tr=(e,t)=>Rt(e,t).then(s=>t.utf8Encoder(s)),sr=St(m),Ye=async(e,t,s,n,r)=>{const{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return n!==void 0&&(d.hostname=n),r!==void 0&&(d.body=r),new x(d)};function Je(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}const re=(e,t)=>tr(e,t).then(s=>s.length?JSON.parse(s):{}),nr=async(e,t)=>{const s=await re(e,t);return s.message=s.message??s.Message,s},rr=(e,t)=>{const s=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};class cr extends _e.classBuilder().ep({...Be}).m(function(t,s,n,r){return[Ve(n,this.serialize,this.deserialize),Ne(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(void 0,void 0).ser(Un).de(Ln).build(){}class dr extends _e.classBuilder().ep({...Be}).m(function(t,s,n,r){return[Ve(n,this.serialize,this.deserialize),Ne(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(void 0,void 0).ser(Hn).de(zn).build(){}export{ar as CognitoIdentityClient,cr as GetCredentialsForIdentityCommand,dr as GetIdCommand};
