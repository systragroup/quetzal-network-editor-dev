import{an as T,a as C,ao as L,r as f,c as F,d as U,f as l,g as c,l as _,C as v,H as B,I as D,j as i,aG as E,aE as N,aH as R,i as p,aI as j,aJ as A,B as H,aa as K,aK as O,aL as y,al as $,_ as G}from"./index-ReP_Szgl.js";const J={class:"layout"},M={key:0},W={key:1,class:"card elevation-3"},x=40,q=T({__name:"ResultTable",setup(z){const n=C(),m=L(),r=f([]),d=f(0),g=f(10),u=F(()=>n.otherFiles.filter(e=>e.extension==="csv"));async function V(){const e=m.scenario+"/";d.value=u.value.length;for(const a of u.value)a.content instanceof Uint8Array||(a.content=await N.readBytes(m.model,e+a.path,x))}async function b(e){const a=e.path.slice(0,-4);let t=[];e.content===null?t=[{too_large:`cannot display, more than ${x} mb`}]:t=await R(e.content.buffer);const s=Object.keys(t[0]).map(o=>({title:o,key:o,width:"1%"}));r.value.push({headers:s,items:t.slice(0,g.value),data:t,name:a,totalItems:t.length}),d.value-=1}U(async()=>{n.changeLoading(!0);try{await V(),n.changeLoading(!1)}catch(e){n.changeAlert(e),n.changeLoading(!1),d.value=0}for(const e of u.value)await b(e)});function S(e,a,t,s){if(s.length>0){const I=s[0].key,w=s[0].order;e=$.orderBy(e,I,w)}if(t===-1)return e;const o=(a-1)*t,h=o+t;return e.slice(o,h)}async function k({key:e,page:a,itemsPerPage:t,sortBy:s}){const o=y(r.value[e].data),h=S(o,a,t,y(s));r.value[e].items=h}return(e,a)=>(c(),l("section",J,[r.value.length===0?(c(),l("p",M,v(e.$gettext("nothing to display")),1)):_("",!0),(c(!0),l(B,null,D(r.value,(t,s)=>(c(),l("div",{key:s,class:"card elevation-3"},[i(O,{"items-per-page":g.value,headers:t.headers,class:"fill-height","items-length":t.totalItems,"fixed-header":"","fixed-footer":"",items:t.items,"onUpdate:options":o=>k({key:s,...o})},{top:p(()=>[i(j,{class:"custom-title"},{default:p(()=>[i(A,null,{default:p(()=>[H(v(t.name),1)]),_:2},1024),i(K)]),_:2},1024)]),_:2},1032,["items-per-page","headers","items-length","items","onUpdate:options"])]))),128)),d.value>0?(c(),l("div",W,[i(E,{type:"heading,table-thead, table-tbody "})])):_("",!0)]))}}),X=G(q,[["__scopeId","data-v-319191fc"]]);export{X as default};
