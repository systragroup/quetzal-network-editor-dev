{"version":3,"file":"build.js","mappings":"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","sources":["webpack://quetzal-network-editor/webpack/runtime/chunk loaded","webpack://quetzal-network-editor/webpack/runtime/create fake namespace object","webpack://quetzal-network-editor/webpack/runtime/load script","webpack://quetzal-network-editor/./src/scss/app.scss","webpack://quetzal-network-editor/./src/App.vue?eddb","webpack://quetzal-network-editor/./src/components/import/FileLoader.vue?b87c","webpack://quetzal-network-editor/./src/components/import/FilesList.vue?fa4c","webpack://quetzal-network-editor/./src/components/layout/NavigationDrawer.vue?e4bb","webpack://quetzal-network-editor/./src/components/layout/ScenariosExplorer.vue?9ffe","webpack://quetzal-network-editor/./src/components/layout/Toolbar.vue?5f7d","webpack://quetzal-network-editor/./src/components/map/LinksSidePanel.vue?73b8","webpack://quetzal-network-editor/./src/components/map/Map.vue?0a28","webpack://quetzal-network-editor/./src/components/map/RoadSidePanel.vue?d28a","webpack://quetzal-network-editor/./src/components/map/Settings.vue?d98f","webpack://quetzal-network-editor/./src/components/map/SidePanel.vue?0068","webpack://quetzal-network-editor/./src/components/utils/LayerSelector.vue?c0e6","webpack://quetzal-network-editor/./src/pages/Home.vue?989a","webpack://quetzal-network-editor/./src/pages/Import.vue?5cae","webpack://quetzal-network-editor/./src/AWSClient.js","webpack://quetzal-network-editor/./src/auth.js","webpack://quetzal-network-editor/./src/axiosClient.js","webpack://quetzal-network-editor/./src/components/utils/serializer.js","webpack://quetzal-network-editor/./src/components/utils/utils.js","webpack://quetzal-network-editor/./src/scss/app.scss?d10e","webpack://quetzal-network-editor/./src/App.vue?2b98","webpack://quetzal-network-editor/./src/components/layout/Toolbar.vue?9b26","webpack://quetzal-network-editor/./src/components/utils/Profile.vue?7f8e","webpack://quetzal-network-editor/src/components/utils/Profile.vue","webpack://quetzal-network-editor/./src/components/utils/Profile.vue?8f3a","webpack://quetzal-network-editor/./src/components/utils/Profile.vue","webpack://quetzal-network-editor/./src/components/layout/ScenariosExplorer.vue?7893","webpack://quetzal-network-editor/src/components/layout/ScenariosExplorer.vue","webpack://quetzal-network-editor/./src/components/layout/ScenariosExplorer.vue?9699","webpack://quetzal-network-editor/./src/components/layout/ScenariosExplorer.vue?4617","webpack://quetzal-network-editor/./src/components/layout/ScenariosExplorer.vue","webpack://quetzal-network-editor/./src/components/layout/Toolbar.vue?41be","webpack://quetzal-network-editor/src/components/layout/Toolbar.vue","webpack://quetzal-network-editor/./src/components/layout/Toolbar.vue?5cfd","webpack://quetzal-network-editor/./src/components/layout/Toolbar.vue","webpack://quetzal-network-editor/./src/components/layout/NavigationDrawer.vue?7885","webpack://quetzal-network-editor/src/components/layout/NavigationDrawer.vue","webpack://quetzal-network-editor/./src/components/layout/NavigationDrawer.vue?1673","webpack://quetzal-network-editor/./src/components/layout/NavigationDrawer.vue?7535","webpack://quetzal-network-editor/./src/components/layout/NavigationDrawer.vue","webpack://quetzal-network-editor/./src/components/utils/Alert.vue?de2b","webpack://quetzal-network-editor/src/components/utils/Alert.vue","webpack://quetzal-network-editor/./src/components/utils/Alert.vue?6bcc","webpack://quetzal-network-editor/./src/components/utils/Alert.vue","webpack://quetzal-network-editor/src/App.vue","webpack://quetzal-network-editor/./src/App.vue?32cf","webpack://quetzal-network-editor/./src/App.vue?76cf","webpack://quetzal-network-editor/./src/App.vue","webpack://quetzal-network-editor/./src/main.js","webpack://quetzal-network-editor/./src/pages/Import.vue?2543","webpack://quetzal-network-editor/./src/components/import/FileLoader.vue?9ac9","webpack://quetzal-network-editor/./src/components/import/FilesList.vue?b6f8","webpack://quetzal-network-editor/src/components/import/FilesList.vue","webpack://quetzal-network-editor/./src/components/import/FilesList.vue?2aa5","webpack://quetzal-network-editor/./src/components/import/FilesList.vue?b917","webpack://quetzal-network-editor/./src/components/import/FilesList.vue","webpack://quetzal-network-editor/./src/components/import/FileLoader.vue?103a","webpack://quetzal-network-editor/src/components/import/FileLoader.vue","webpack://quetzal-network-editor/./src/components/import/FileLoader.vue?6dc2","webpack://quetzal-network-editor/./src/components/import/FileLoader.vue","webpack://quetzal-network-editor/./src/pages/Import.vue?c377","webpack://quetzal-network-editor/src/pages/Import.vue","webpack://quetzal-network-editor/./src/pages/Import.vue?f58d","webpack://quetzal-network-editor/./src/pages/Import.vue","webpack://quetzal-network-editor/./src/pages/Home.vue?13da","webpack://quetzal-network-editor/./src/components/map/SidePanel.vue?be20","webpack://quetzal-network-editor/./src/components/map/LinksSidePanel.vue?ed4c","webpack://quetzal-network-editor/src/components/map/LinksSidePanel.vue","webpack://quetzal-network-editor/./src/components/map/LinksSidePanel.vue?9d7d","webpack://quetzal-network-editor/./src/components/map/LinksSidePanel.vue?059b","webpack://quetzal-network-editor/./src/components/map/LinksSidePanel.vue","webpack://quetzal-network-editor/./src/components/map/RoadSidePanel.vue?432f","webpack://quetzal-network-editor/src/components/map/RoadSidePanel.vue","webpack://quetzal-network-editor/./src/components/map/RoadSidePanel.vue?8c74","webpack://quetzal-network-editor/./src/components/map/RoadSidePanel.vue?7038","webpack://quetzal-network-editor/./src/components/map/RoadSidePanel.vue","webpack://quetzal-network-editor/./src/components/map/SidePanel.vue?f7aa","webpack://quetzal-network-editor/src/components/map/SidePanel.vue","webpack://quetzal-network-editor/./src/components/map/SidePanel.vue?9891","webpack://quetzal-network-editor/./src/components/map/SidePanel.vue","webpack://quetzal-network-editor/./src/components/map/Map.vue?6890","webpack://quetzal-network-editor/./src/components/map/Settings.vue?925b","webpack://quetzal-network-editor/src/components/map/Settings.vue","webpack://quetzal-network-editor/./src/components/map/Settings.vue?8d45","webpack://quetzal-network-editor/./src/components/map/Settings.vue?4856","webpack://quetzal-network-editor/./src/components/map/Settings.vue","webpack://quetzal-network-editor/./src/components/map/StaticLinks.vue?9d3a","webpack://quetzal-network-editor/src/components/map/StaticLinks.vue","webpack://quetzal-network-editor/./src/components/map/StaticLinks.vue?c179","webpack://quetzal-network-editor/./src/components/map/StaticLinks.vue","webpack://quetzal-network-editor/./src/components/map/EditorLinks.vue?1bdd","webpack://quetzal-network-editor/src/components/map/EditorLinks.vue","webpack://quetzal-network-editor/./src/components/map/EditorLinks.vue?1669","webpack://quetzal-network-editor/./src/components/map/EditorLinks.vue","webpack://quetzal-network-editor/./src/components/map/RoadLinks.vue?3939","webpack://quetzal-network-editor/src/components/map/RoadLinks.vue","webpack://quetzal-network-editor/./src/components/map/RoadLinks.vue?e27e","webpack://quetzal-network-editor/./src/components/map/RoadLinks.vue","webpack://quetzal-network-editor/./src/components/utils/StaticLayer.vue?66d8","webpack://quetzal-network-editor/src/components/utils/StaticLayer.vue","webpack://quetzal-network-editor/./src/components/utils/StaticLayer.vue?2a6b","webpack://quetzal-network-editor/./src/components/utils/StaticLayer.vue","webpack://quetzal-network-editor/./src/components/utils/LayerSelector.vue?aa27","webpack://quetzal-network-editor/src/components/utils/LayerSelector.vue","webpack://quetzal-network-editor/./src/components/utils/LayerSelector.vue?2c38","webpack://quetzal-network-editor/./src/components/utils/LayerSelector.vue?e814","webpack://quetzal-network-editor/./src/components/utils/LayerSelector.vue","webpack://quetzal-network-editor/./src/components/map/Map.vue?91d5","webpack://quetzal-network-editor/src/components/map/Map.vue","webpack://quetzal-network-editor/./src/components/map/Map.vue?f878","webpack://quetzal-network-editor/./src/components/map/Map.vue","webpack://quetzal-network-editor/./src/components/utils/ColorPicker.vue?120e","webpack://quetzal-network-editor/src/components/utils/ColorPicker.vue","webpack://quetzal-network-editor/./src/components/utils/ColorPicker.vue?6c63","webpack://quetzal-network-editor/./src/pages/Home.vue?e983","webpack://quetzal-network-editor/src/pages/Home.vue","webpack://quetzal-network-editor/./src/components/utils/ColorPicker.vue","webpack://quetzal-network-editor/./src/pages/Home.vue?05b5","webpack://quetzal-network-editor/./src/pages/Home.vue","webpack://quetzal-network-editor/./src/router/index.js","webpack://quetzal-network-editor/./src/store/links.js","webpack://quetzal-network-editor/./src/store/rlinks.js","webpack://quetzal-network-editor/./src/store/results.js","webpack://quetzal-network-editor/./src/store/layer.js","webpack://quetzal-network-editor/./src/store/api/run.js","webpack://quetzal-network-editor/./src/store/api/MatrixRoadCaster.js","webpack://quetzal-network-editor/./src/store/api/OSMImporter.js","webpack://quetzal-network-editor/./src/store/user.js","webpack://quetzal-network-editor/./static/links_base.geojson","webpack://quetzal-network-editor/./static/nodes_base.geojson","webpack://quetzal-network-editor/./src/store/index.js","webpack://quetzal-network-editor/webpack/bootstrap","webpack://quetzal-network-editor/webpack/runtime/compat get default export","webpack://quetzal-network-editor/webpack/runtime/define property getters","webpack://quetzal-network-editor/webpack/runtime/ensure chunk","webpack://quetzal-network-editor/webpack/runtime/get javascript chunk filename","webpack://quetzal-network-editor/webpack/runtime/get mini-css chunk filename","webpack://quetzal-network-editor/webpack/runtime/global","webpack://quetzal-network-editor/webpack/runtime/hasOwnProperty shorthand","webpack://quetzal-network-editor/webpack/runtime/make namespace object","webpack://quetzal-network-editor/webpack/runtime/node module decorator","webpack://quetzal-network-editor/webpack/runtime/publicPath","webpack://quetzal-network-editor/webpack/runtime/jsonp chunk loading","webpack://quetzal-network-editor/webpack/runtime/nonce","webpack://quetzal-network-editor/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"quetzal-network-editor:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `body{font-family:\"Roboto\",sans-serif;height:100vh}body::-webkit-scrollbar{display:none}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background-clip:padding-box;background-color:#9e9e9e;border-radius:8px}::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:#2c3e4e;border-radius:8px}.v-application--wrap{flex-direction:row}.theme--light.v-application{color:#2c3e4e}.theme--light.v-icon{color:inherit !important}.theme--dark.v-label{color:#fff}.v-toolbar__content{display:flex;align-items:center;justify-content:space-between;height:100% !important;width:100%}.v-input__icon>i{font-size:14px !important;margin-right:10px}.v-navigation-drawer--fixed{z-index:200}.v-btn.primary>span{color:#2c3e4e !important}.v-snack__wrapper{margin:20px}.v-snack__content{color:#2c3e4e !important}.snackbar-error>.v-snack__wrapper{border-bottom:5px solid #e42626 !important}.snackbar-warning>.v-snack__wrapper{border-bottom:5px solid #ff7b30 !important}.snackbar-positive>.v-snack__wrapper{border-bottom:5px solid #4caf50 !important}.v-card__subtitle,.v-card__text,.v-card__title{padding:0}.v-card__title{line-height:normal}.mapboxgl-ctrl-bottom-right{right:10px;bottom:10px}.mapboxgl-popup-content{padding:10px;color:#fff;background-color:#2c3e4e}.mapboxgl-popup-tip{border-bottom-color:#2c3e4e !important;border-top-color:#2c3e4e !important}.mapboxgl-popup-close-button{right:20px;top:20px;font-size:1.5em}.mapboxgl-ctrl-attrib-inner>a{color:#2c3e4e !important}.view{padding:20px;height:calc(100% - 50px);width:100%;display:flex}.card{background-color:#fff;border-radius:5px;box-shadow:0px 5px 10px rgba(0,0,0,.05);padding:20px}.card-hover:hover{box-shadow:0px 5px 10px rgba(0,0,0,.1)}.list-enter-active,.list-leave-active{transition:all 1s}.list-enter,.list-leave-to{opacity:0;transform:translateX(300px)}.fade-leave-active{display:none !important}.fade-enter-active,.fade-leave-active{transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0 !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/scss/generic.scss\",\"webpack://./src/scss/variables.scss\",\"webpack://./src/scss/vuetify.scss\",\"webpack://./src/scss/mapboxgl.scss\",\"webpack://./src/scss/util.scss\",\"webpack://./src/scss/animations.scss\"],\"names\":[],\"mappings\":\"AAAA,KACE,+BAAA,CACA,YAAA,CAEF,wBACE,YAAA,CAEF,oBACE,SAAA,CAEF,0BACE,2BAAA,CACA,wBCJkB,CDKlB,iBAAA,CAEF,0BACE,2BAAA,CACA,wBCfkB,CDgBlB,iBAAA,CElBF,qBACE,kBAAA,CAEF,4BACE,aDFkB,CCIpB,qBACE,wBAAA,CAEF,qBACE,UAAA,CAEF,oBACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,sBAAA,CACA,UAAA,CAEF,iBACE,yBAAA,CACA,iBAAA,CAEF,4BACE,WAAA,CAEF,oBACE,wBAAA,CAEF,kBACE,WAAA,CAEF,kBACE,wBAAA,CAEF,kCACE,0CAAA,CAEF,oCACE,0CAAA,CAEF,qCACE,0CAAA,CAEF,+CACE,SAAA,CAEF,eACE,kBAAA,CChDF,4BACE,UAAA,CACA,WAAA,CAEF,wBACE,YAAA,CACA,UAAA,CACA,wBFLkB,CEOpB,oBACE,sCAAA,CACA,mCAAA,CAEF,6BACE,UAAA,CACA,QAAA,CACA,eAAA,CAEF,8BACE,wBAAA,CCnBF,MACE,YAAA,CACA,wBAAA,CACA,UAAA,CACA,YAAA,CAEF,MACE,qBAAA,CACA,iBAAA,CACA,uCAAA,CACA,YAAA,CAEF,kBACE,sCAAA,CCbF,sCACE,iBAAA,CAEF,2BACE,SAAA,CACA,2BAAA,CAEF,mBACE,uBAAA,CAEF,sCACE,sBAAA,CAEF,2BACE,oBAAA\",\"sourcesContent\":[\"body {\\n  font-family: 'Roboto', sans-serif;\\n  height: 100vh;\\n}\\nbody::-webkit-scrollbar {\\n  display: none;\\n}\\n::-webkit-scrollbar {\\n  width: 8px;\\n}\\n::-webkit-scrollbar-track {\\n  background-clip: padding-box;\\n  background-color: $grey-medium;\\n  border-radius: 8px;\\n}\\n::-webkit-scrollbar-thumb {\\n  background-clip: padding-box;\\n  background-color: $secondary;\\n  border-radius: 8px;\\n}\\n\",\"$primary          : #B5E0D6;\\n$primary-dark     : #7EBAAC;\\n$secondary        : #2C3E4E;\\n$secondary-dark   : #0F1C27;\\n$secondary-light  : #334453;\\n\\n$grey-ultralight  : #F5F5F5;\\n$grey-light       : #E3E3E3;\\n$grey-medium      : #9E9E9E;\\n$grey-dark        : #5B5B5B;\\n\\n$negative         : #E42626;\\n$warning          : #FF7B30;\\n$positive         : #4CAF50;\\n\\n$chart-lightgreen : #CDDC39;\\n$chart-darkgreen  : #4CAF50;\\n$chart-lightblue  : #00BCD4;\\n$chart-darkblue   : #2196F3;\\n$chart-purple     : #673AB7;\\n$chart-pink       : #E91E63;\\n$chart-orange     : #FF7B30;\\n$chart-yellow     : #FFC107;\\n\\n$list-item-padding : 0px;\",\".v-application--wrap {\\n  flex-direction: row;\\n}\\n.theme--light.v-application {\\n  color: $secondary;\\n}\\n.theme--light.v-icon {\\n  color: inherit !important;\\n}\\n.theme--dark.v-label {\\n  color: white;\\n}\\n.v-toolbar__content {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  height: 100% !important;\\n  width: 100%;\\n}\\n.v-input__icon > i {\\n  font-size: 14px !important;\\n  margin-right: 10px;\\n}\\n.v-navigation-drawer--fixed {\\n  z-index: 200;\\n}\\n.v-btn.primary > span {\\n  color: $secondary !important;\\n}\\n.v-snack__wrapper {\\n  margin: 20px;\\n}\\n.v-snack__content {\\n  color: $secondary !important;\\n}\\n.snackbar-error > .v-snack__wrapper {\\n  border-bottom: 5px solid $negative !important;\\n}\\n.snackbar-warning > .v-snack__wrapper {\\n  border-bottom: 5px solid $warning !important;\\n}\\n.snackbar-positive > .v-snack__wrapper {\\n  border-bottom: 5px solid $positive !important;\\n}\\n.v-card__subtitle, .v-card__text, .v-card__title {\\n  padding: 0;\\n}\\n.v-card__title {\\n  line-height: normal;\\n}\\n\",\".mapboxgl-ctrl-bottom-right {\\n  right: 10px;\\n  bottom: 10px;\\n}\\n.mapboxgl-popup-content {\\n  padding: 10px;\\n  color: white;\\n  background-color: $secondary;\\n}\\n.mapboxgl-popup-tip {\\n  border-bottom-color: $secondary !important;\\n  border-top-color: $secondary !important;\\n}\\n.mapboxgl-popup-close-button {\\n  right: 20px;\\n  top: 20px;\\n  font-size: 1.5em;\\n}\\n.mapboxgl-ctrl-attrib-inner > a {\\n  color: $secondary !important;\\n}\\n\",\".view {\\n  padding: 20px;\\n  height: calc(100% - 50px);\\n  width: 100%;\\n  display: flex;\\n}\\n.card {\\n  background-color: white;\\n  border-radius: 5px;\\n  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.05);\\n  padding: 20px;\\n}\\n.card-hover:hover {\\n  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.10);\\n}\\n\",\".list-enter-active, .list-leave-active {\\n  transition: all 1s;\\n}\\n.list-enter, .list-leave-to {\\n  opacity: 0;\\n  transform: translateX(300px);\\n}\\n.fade-leave-active {\\n  display: none !important;\\n}\\n.fade-enter-active, .fade-leave-active {\\n  transition: opacity 0.5s;\\n}\\n.fade-enter, .fade-leave-to {\\n  opacity: 0 !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.app[data-v-65f09c9a]{background-color:#f5f5f5 !important;width:100%;height:100%;overflow:hidden}.snackbar-text[data-v-65f09c9a]{color:var(--v-secondarydark-base)}.container[data-v-65f09c9a]{height:100%;margin-left:50px;width:calc(100% - 50px);max-width:calc(100% - 50px);padding:0}.container.login[data-v-65f09c9a]{margin-left:0;width:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/App.vue\"],\"names\":[],\"mappings\":\"AAEA,sBACE,mCAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CAEF,gCACE,iCAAA,CAEF,4BACE,WAAA,CACA,gBAAA,CACA,uBAAA,CACA,2BAAA,CACA,SAAA,CAEF,kCACE,aAAA,CACA,UAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.app {\\n  background-color: $grey-ultralight !important;\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden;\\n}\\n.snackbar-text{\\n  color:var(--v-secondarydark-base);\\n}\\n.container {\\n  height: 100%;\\n  margin-left: 50px;\\n  width: calc(100% - 50px);\\n  max-width: calc(100% - 50px);\\n  padding: 0;\\n}\\n.container.login {\\n  margin-left: 0;\\n  width: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.row[data-v-b25de7ce]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-bottom:30px}.container[data-v-b25de7ce]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;padding-left:2em;padding-right:2em}.type-icon[data-v-b25de7ce]{padding-right:.2em}.element[data-v-b25de7ce]{margin-left:auto}.check-icon[data-v-b25de7ce]{padding-left:1em}.subtitle[data-v-b25de7ce]{flex:2;font-size:1.5em;font-weight:bold}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/import/FileLoader.vue\"],\"names\":[],\"mappings\":\"AAGA,sBACE,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,mBAAA,CAGF,4BACE,YAAA,CACA,kBAAA,CACA,4BAAA,CACA,kBAAA,CACA,gBAAA,CACA,iBAAA,CAGF,4BACE,kBAAA,CAEF,0BACE,gBAAA,CAEF,6BACE,gBAAA,CAEF,2BACE,MAAA,CACA,eAAA,CACA,gBAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n\\n.row{\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  padding-bottom: 30px;\\n\\n}\\n.container{\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-evenly;\\n  align-items: center;\\n  padding-left: 2em;\\n  padding-right: 2em;\\n\\n}\\n.type-icon{\\n  padding-right: 0.2em;\\n}\\n.element{\\n  margin-left: auto;\\n}\\n.check-icon{\\n  padding-left: 1em;\\n}\\n.subtitle {\\n  flex:2;\\n  font-size: 1.5em;\\n  font-weight: bold;\\n\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.files-container[data-v-72099582]{height:13rem;border-radius:5px;background:var(--v-background-lighten4);display:flex;margin:10px 0px 0px 0px;flex-direction:column}.title-box[data-v-72099582]{display:flex;flex-direction:row;background:var(--v-background-lighten3);border-radius:5px 5px 0px 0px;padding:.5rem .5rem .5rem 1rem}.title[data-v-72099582]{font-size:2em !important;font-weight:bold}.upload-button[data-v-72099582]{margin-left:auto}.list[data-v-72099582]{font-size:1em;font-weight:bold;overflow-y:auto;padding:1rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/import/FilesList.vue\"],\"names\":[],\"mappings\":\"AAEA,kCACE,YAAA,CACA,iBAAA,CACA,uCAAA,CACA,YAAA,CACA,uBAAA,CACA,qBAAA,CAGF,4BACE,YAAA,CACA,kBAAA,CACA,uCAAA,CAEA,6BAAA,CACA,8BAAA,CAGF,wBACE,wBAAA,CACA,gBAAA,CAEF,gCACE,gBAAA,CAEF,uBACE,aAAA,CACA,gBAAA,CAEA,eAAA,CACA,YAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.files-container{\\n  height: 13rem;\\n  border-radius: 5px;\\n  background:var(--v-background-lighten4);\\n  display: flex;\\n  margin: 10px 0px 0px 00px;\\n  flex-direction: column;\\n\\n}\\n.title-box {\\n  display: flex;\\n  flex-direction: row;\\n  background:var(--v-background-lighten3);\\n\\n  border-radius: 5px 5px 0px 0px;\\n  padding: 0.5rem 0.5rem 0.5rem 1rem;\\n\\n}\\n.title{\\n  font-size: 2em !important;\\n  font-weight: bold;\\n}\\n.upload-button {\\n  margin-left: auto;\\n}\\n.list {\\n  font-size: 1em;\\n  font-weight: bold;\\n  //border: 1px solid red;\\n  overflow-y: auto;\\n  padding: 1rem;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.drawer[data-v-4d6e03d4]{background-color:var(--v-secondary-base) !important}.drawer-header[data-v-4d6e03d4]{width:100%;height:50px;border-bottom:1px solid #fff;background-color:var(--v-secondary-base);color:#fff;display:flex;align-items:center;padding-left:18px;cursor:pointer}.drawer-list[data-v-4d6e03d4]{height:calc(100% - 50px);display:flex;flex-direction:column;padding:20px 0}.drawer-list-item[data-v-4d6e03d4]{padding:0 13px !important;justify-content:flex-start !important;color:#fff;flex:0;transition:.3s}.version-number[data-v-4d6e03d4]{justify-content:flex-start;color:#fff !important;margin-bottom:-1rem;flex:0}.drawer-list-item-icon[data-v-4d6e03d4]{display:flex !important;flex-flow:row !important;justify-content:center !important;margin:0 !important;color:#fff}.drawer-list-item-icon-disabled[data-v-4d6e03d4]{display:flex !important;flex-flow:row !important;justify-content:center !important;margin:0 !important;opacity:.4}.drawer-list-item-selected[data-v-4d6e03d4]{background-color:var(--v-secondarydarkfix-base)}.drawer-list-item[data-v-4d6e03d4]:hover{background-color:var(--v-secondary-base)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/layout/NavigationDrawer.vue\"],\"names\":[],\"mappings\":\"AAEA,yBACE,mDAAA,CAEF,gCACE,UAAA,CACA,WAAA,CACA,4BAAA,CACA,wCAAA,CACA,UAAA,CACA,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,cAAA,CAEF,8BACE,wBAAA,CACA,YAAA,CAEA,qBAAA,CACA,cAAA,CAEF,mCACE,yBAAA,CACA,qCAAA,CACA,UAAA,CACA,MAAA,CACA,cAAA,CAEF,iCACE,0BAAA,CACA,qBAAA,CACA,mBAAA,CACA,MAAA,CAEF,wCACE,uBAAA,CACA,wBAAA,CACA,iCAAA,CACA,mBAAA,CACA,UAAA,CAEF,iDACE,uBAAA,CACA,wBAAA,CACA,iCAAA,CACA,mBAAA,CACA,UAAA,CAEF,4CACE,+CAAA,CAEF,yCACE,wCAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.drawer {\\n  background-color: var(--v-secondary-base) !important;\\n}\\n.drawer-header {\\n  width: 100%;\\n  height: 50px;\\n  border-bottom: 1px solid white;\\n  background-color: var(--v-secondary-base);\\n  color: white;\\n  display: flex;\\n  align-items: center;\\n  padding-left: 18px;\\n  cursor: pointer;\\n}\\n.drawer-list {\\n  height: calc(100% - 50px);\\n  display: flex;\\n\\n  flex-direction: column;\\n  padding: 20px 0;\\n}\\n.drawer-list-item {\\n  padding: 0 13px !important;\\n  justify-content: flex-start !important;\\n  color:white ;\\n  flex: 0;\\n  transition: 0.3s;\\n}\\n.version-number {\\n  justify-content: flex-start ;\\n  color:white !important;\\n  margin-bottom:-1rem;\\n  flex: 0;\\n}\\n.drawer-list-item-icon {\\n  display: flex !important;\\n  flex-flow: row !important;\\n  justify-content: center !important;\\n  margin: 0 !important;\\n  color: white;\\n}\\n.drawer-list-item-icon-disabled {\\n  display: flex !important;\\n  flex-flow: row !important;\\n  justify-content: center !important;\\n  margin: 0 !important;\\n  opacity: 0.4;\\n}\\n.drawer-list-item-selected {\\n  background-color: var(--v-secondarydarkfix-base);\\n}\\n.drawer-list-item:hover {\\n  background-color: var(--v-secondary-base);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.title[data-v-15c50a5a]{font-size:1.2em;padding-left:1.2rem;color:var(--v-secondarydark-base)}.is-active[data-v-15c50a5a]{opacity:1;background-color:var(--v-primary-base)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/layout/ScenariosExplorer.vue\"],\"names\":[],\"mappings\":\"AAEA,wBACE,eAAA,CACA,mBAAA,CACA,iCAAA,CAEF,4BACE,SAAA,CACA,sCAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.title {\\n  font-size: 1.2em;\\n  padding-left: 1.2rem;\\n  color:var(--v-secondarydark-base);\\n}\\n.is-active{\\n  opacity:1;\\n  background-color:var(--v-primary-base);\\n\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.app-toolbar[data-v-4d444598]{z-index:100;height:50px !important;display:flex;color:#2c3e4e !important;position:relative}.login[data-v-4d444598]{padding-left:50px}.project-name[data-v-4d444598]{font-size:1.3em}.app-name[data-v-4d444598]{font-size:1.2em;padding-left:1.2rem;color:var(--v-secondarydark-base)}.copyright[data-v-4d444598]{font-size:.9rem;padding-left:5px;padding-top:1rem;color:var(--v-secondarydark-base)}.languages-container[data-v-4d444598]{display:flex}.switch[data-v-4d444598]{display:flex;padding-top:1rem;padding-left:1rem;align-items:center;justify-content:center;color:#e3e3e3;cursor:pointer}.language[data-v-4d444598]{width:50px;display:flex;align-items:center;justify-content:center;color:#e3e3e3;cursor:pointer;transition:.3s}.language.active[data-v-4d444598],.language[data-v-4d444598]:hover{color:var(--v-secondarydark-base)}.language[data-v-4d444598]:last-child{border-right:0}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/layout/Toolbar.vue\",\"webpack://./src/scss/variables.scss\"],\"names\":[],\"mappings\":\"AAEA,8BACE,WAAA,CACA,sBAAA,CACA,YAAA,CACA,wBAAA,CACA,iBAAA,CAEF,wBACE,iBAAA,CAEF,+BACE,eAAA,CAEF,2BACE,eAAA,CACA,mBAAA,CACA,iCAAA,CAEF,4BACE,eAAA,CACA,gBAAA,CACA,gBAAA,CACA,iCAAA,CAEF,sCACE,YAAA,CAEF,yBACE,YAAA,CACA,gBAAA,CACA,iBAAA,CACA,kBAAA,CACA,sBAAA,CACA,aC5BkB,CD6BlB,cAAA,CAEF,2BACE,UAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,aCpCkB,CDqClB,cAAA,CACA,cAAA,CAEF,mEACE,iCAAA,CAEF,sCACE,cAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.app-toolbar {\\n  z-index: 100;\\n  height: 50px !important;\\n  display: flex;\\n  color: $secondary !important;\\n  position: relative;\\n}\\n.login {\\n  padding-left: 50px;\\n}\\n.project-name {\\n  font-size: 1.3em;\\n}\\n.app-name {\\n  font-size: 1.2em;\\n  padding-left: 1.2rem;\\n  color:var(--v-secondarydark-base);\\n}\\n.copyright {\\n  font-size: 0.9rem;\\n  padding-left: 5px;\\n  padding-top: 1rem;\\n  color:var(--v-secondarydark-base);\\n}\\n.languages-container {\\n  display: flex;\\n}\\n.switch {\\n  display: flex;\\n  padding-top: 1rem;\\n  padding-left:1rem;\\n  align-items: center;\\n  justify-content: center;\\n  color: $grey-light;\\n  cursor: pointer;\\n}\\n.language {\\n  width: 50px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: $grey-light;\\n  cursor: pointer;\\n  transition: 0.3s;\\n}\\n.language.active, .language:hover {\\n  color:var(--v-secondarydark-base);\\n}\\n.language:last-child {\\n  border-right: 0;\\n}\\n\",\"$primary          : #B5E0D6;\\n$primary-dark     : #7EBAAC;\\n$secondary        : #2C3E4E;\\n$secondary-dark   : #0F1C27;\\n$secondary-light  : #334453;\\n\\n$grey-ultralight  : #F5F5F5;\\n$grey-light       : #E3E3E3;\\n$grey-medium      : #9E9E9E;\\n$grey-dark        : #5B5B5B;\\n\\n$negative         : #E42626;\\n$warning          : #FF7B30;\\n$positive         : #4CAF50;\\n\\n$chart-lightgreen : #CDDC39;\\n$chart-darkgreen  : #4CAF50;\\n$chart-lightblue  : #00BCD4;\\n$chart-darkblue   : #2196F3;\\n$chart-purple     : #673AB7;\\n$chart-pink       : #E91E63;\\n$chart-orange     : #FF7B30;\\n$chart-yellow     : #FFC107;\\n\\n$list-item-padding : 0px;\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.left-panel[data-v-acad4354]{height:100%;background-color:#7ebaac;transition:.3s;position:absolute;display:flex;z-index:20}.left-panel-close[data-v-acad4354]{transition:.3s}.left-panel-content[data-v-acad4354]{display:inline-block;width:100%;flex-direction:column;justify-content:space-between;height:100%;overflow:auto}.v-list__tile[data-v-acad4354]{padding:0}.left-panel-toggle-btn[data-v-acad4354]{left:100%;width:25px;z-index:1;background-color:#7ebaac;display:flex;position:relative;align-items:center;justify-content:center;height:50px;transition:.3s;cursor:pointer}.left-panel-title[data-v-acad4354]{height:50px;line-height:55px;padding-left:20px;font-size:1.1em;margin-bottom:10px}.trip-list[data-v-acad4354]{height:height;padding-left:20px}.scrollable[data-v-acad4354]{overflow-y:scroll}.drawer-list-item[data-v-acad4354]{padding:0 13px !important;justify-content:flex-start !important;flex:0;transition:.3s}.list-item-icon[data-v-acad4354]{display:flex !important;flex-flow:row !important;justify-content:center !important;margin:0 !important;color:#fff}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/map/LinksSidePanel.vue\",\"webpack://./src/scss/variables.scss\"],\"names\":[],\"mappings\":\"AAGA,6BACE,WAAA,CACA,wBCJkB,CDKlB,cAAA,CACA,iBAAA,CACA,YAAA,CACA,UAAA,CAGF,mCACA,cAAA,CAEA,qCACE,oBAAA,CACA,UAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CAEA,aAAA,CAGF,+BACE,SAAA,CAEF,wCACE,SAAA,CACA,UAAA,CACA,SAAA,CACA,wBC/BkB,CDgClB,YAAA,CACA,iBAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA,CACA,cAAA,CAEF,mCACE,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,eAAA,CACA,kBAAA,CAEF,4BACE,aAAA,CACA,iBAAA,CAGF,6BACG,iBAAA,CAIH,mCACE,yBAAA,CACA,qCAAA,CACA,MAAA,CACA,cAAA,CAGF,iCACE,uBAAA,CACA,wBAAA,CACA,iCAAA,CACA,mBAAA,CACA,UAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n@import \\\"src/scss/variables.scss\\\";\\n.left-panel {\\n  height: 100%;\\n  background-color: $primary-dark;\\n  transition: 0.3s;\\n  position: absolute;\\n  display:flex;\\n  z-index: 20;\\n\\n}\\n.left-panel-close {\\ntransition:0.3s\\n}\\n.left-panel-content {\\n  display:inline-block;\\n  width : 100%;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 100%;\\n  //resize: horizontal;\\n  overflow: auto;\\n\\n}\\n.v-list__tile {\\n  padding: 0\\n}\\n.left-panel-toggle-btn {\\n  left: 100%;\\n  width: 25px;\\n  z-index: 1;\\n  background-color: $primary-dark;\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n  justify-content: center;\\n  height: 50px;\\n  transition: 0.3s;\\n  cursor: pointer;\\n}\\n.left-panel-title {\\n  height: 50px;\\n  line-height: 55px;\\n  padding-left: 20px;\\n  font-size: 1.1em;\\n  margin-bottom: 10px;\\n}\\n.trip-list {\\n  height: height;\\n  padding-left:20px\\n}\\n\\n.scrollable {\\n   overflow-y:scroll;\\n\\n}\\n\\n.drawer-list-item {\\n  padding: 0 13px !important;\\n  justify-content: flex-start !important;\\n  flex: 0;\\n  transition: 0.3s;\\n}\\n\\n.list-item-icon {\\n  display: flex !important;\\n  flex-flow: row !important;\\n  justify-content: center !important;\\n  margin: 0 !important;\\n  color: white;\\n}\\n\\n\",\"$primary          : #B5E0D6;\\n$primary-dark     : #7EBAAC;\\n$secondary        : #2C3E4E;\\n$secondary-dark   : #0F1C27;\\n$secondary-light  : #334453;\\n\\n$grey-ultralight  : #F5F5F5;\\n$grey-light       : #E3E3E3;\\n$grey-medium      : #9E9E9E;\\n$grey-dark        : #5B5B5B;\\n\\n$negative         : #E42626;\\n$warning          : #FF7B30;\\n$positive         : #4CAF50;\\n\\n$chart-lightgreen : #CDDC39;\\n$chart-darkgreen  : #4CAF50;\\n$chart-lightblue  : #00BCD4;\\n$chart-darkblue   : #2196F3;\\n$chart-purple     : #673AB7;\\n$chart-pink       : #E91E63;\\n$chart-orange     : #FF7B30;\\n$chart-yellow     : #FFC107;\\n\\n$list-item-padding : 0px;\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.map-view[data-v-86ac8544]{width:100%}.my-custom-dialog[data-v-86ac8544]{position:absolute !important;top:10px !important;right:20px !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/map/Map.vue\"],\"names\":[],\"mappings\":\"AAEA,2BACE,UAAA,CAGF,mCACE,4BAAA,CACA,mBAAA,CACA,qBAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.map-view {\\n  width: 100%;\\n\\n}\\n.my-custom-dialog {\\n  position: absolute !important;\\n  top: 10px !important;\\n  right: 20px !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.left-panel[data-v-06e9c070]{height:100%;background-color:#7ebaac;transition:.3s;position:absolute;display:flex;z-index:20}.left-panel-close[data-v-06e9c070]{transition:.3s}.left-panel-content[data-v-06e9c070]{display:inline-block;width:100%;flex-direction:column;justify-content:space-between;height:100%;overflow:auto}.v-list__tile[data-v-06e9c070]{padding:0}.left-panel-toggle-btn[data-v-06e9c070]{left:100%;width:25px;z-index:1;background-color:#7ebaac;display:flex;position:relative;align-items:center;justify-content:center;height:50px;transition:.3s;cursor:pointer}.left-panel-title[data-v-06e9c070]{height:50px;line-height:55px;padding-left:20px;font-size:1.1em;margin-bottom:10px}.trip-list[data-v-06e9c070]{height:height;padding-left:20px}.scrollable[data-v-06e9c070]{overflow-y:scroll}.drawer-list-item[data-v-06e9c070]{padding:0 13px !important;justify-content:flex-start !important;flex:0;transition:.3s}.list-item-icon[data-v-06e9c070]{display:flex !important;flex-flow:row !important;justify-content:center !important;margin:0 !important;color:#fff}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/map/RoadSidePanel.vue\",\"webpack://./src/scss/variables.scss\"],\"names\":[],\"mappings\":\"AAGA,6BACE,WAAA,CACA,wBCJkB,CDKlB,cAAA,CACA,iBAAA,CACA,YAAA,CACA,UAAA,CAGF,mCACA,cAAA,CAEA,qCACE,oBAAA,CACA,UAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CAEA,aAAA,CAGF,+BACE,SAAA,CAEF,wCACE,SAAA,CACA,UAAA,CACA,SAAA,CACA,wBC/BkB,CDgClB,YAAA,CACA,iBAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA,CACA,cAAA,CAEF,mCACE,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,eAAA,CACA,kBAAA,CAEF,4BACE,aAAA,CACA,iBAAA,CAGF,6BACG,iBAAA,CAIH,mCACE,yBAAA,CACA,qCAAA,CACA,MAAA,CACA,cAAA,CAGF,iCACE,uBAAA,CACA,wBAAA,CACA,iCAAA,CACA,mBAAA,CACA,UAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n@import \\\"src/scss/variables.scss\\\";\\n.left-panel {\\n  height: 100%;\\n  background-color: $primary-dark;\\n  transition: 0.3s;\\n  position: absolute;\\n  display:flex;\\n  z-index: 20;\\n\\n}\\n.left-panel-close {\\ntransition:0.3s\\n}\\n.left-panel-content {\\n  display:inline-block;\\n  width : 100%;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 100%;\\n  //resize: horizontal;\\n  overflow: auto;\\n\\n}\\n.v-list__tile {\\n  padding: 0\\n}\\n.left-panel-toggle-btn {\\n  left: 100%;\\n  width: 25px;\\n  z-index: 1;\\n  background-color: $primary-dark;\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n  justify-content: center;\\n  height: 50px;\\n  transition: 0.3s;\\n  cursor: pointer;\\n}\\n.left-panel-title {\\n  height: 50px;\\n  line-height: 55px;\\n  padding-left: 20px;\\n  font-size: 1.1em;\\n  margin-bottom: 10px;\\n}\\n.trip-list {\\n  height: height;\\n  padding-left:20px\\n}\\n\\n.scrollable {\\n   overflow-y:scroll;\\n\\n}\\n\\n.drawer-list-item {\\n  padding: 0 13px !important;\\n  justify-content: flex-start !important;\\n  flex: 0;\\n  transition: 0.3s;\\n}\\n\\n.list-item-icon {\\n  display: flex !important;\\n  flex-flow: row !important;\\n  justify-content: center !important;\\n  margin: 0 !important;\\n  color: white;\\n}\\n\\n\",\"$primary          : #B5E0D6;\\n$primary-dark     : #7EBAAC;\\n$secondary        : #2C3E4E;\\n$secondary-dark   : #0F1C27;\\n$secondary-light  : #334453;\\n\\n$grey-ultralight  : #F5F5F5;\\n$grey-light       : #E3E3E3;\\n$grey-medium      : #9E9E9E;\\n$grey-dark        : #5B5B5B;\\n\\n$negative         : #E42626;\\n$warning          : #FF7B30;\\n$positive         : #4CAF50;\\n\\n$chart-lightgreen : #CDDC39;\\n$chart-darkgreen  : #4CAF50;\\n$chart-lightblue  : #00BCD4;\\n$chart-darkblue   : #2196F3;\\n$chart-purple     : #673AB7;\\n$chart-pink       : #E91E63;\\n$chart-orange     : #FF7B30;\\n$chart-yellow     : #FFC107;\\n\\n$list-item-padding : 0px;\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.setting[data-v-6c428464]{position:absolute;top:10px;right:20px}.layout[data-v-6c428464]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-6c428464]{height:100%;width:100%;background-color:rgba(0,0,0,.5);position:absolute}.card[data-v-6c428464]{width:500px;overflow-y:auto;padding:40px}.title[data-v-6c428464]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:3.5em;color:#b5e0d6 !important;font-weight:bold}.subtitle[data-v-6c428464]{font-size:2em;color:var(--v-secondarydark-base) !important;font-weight:bold;padding:1rem}.card button[data-v-6c428464]{margin-top:40px}.shake[data-v-6c428464]{animation:shake-6c428464 .5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;transform:translate3d(0, 0, 0)}@keyframes shake-6c428464{10%,90%{transform:translate3d(-1px, 0, 0)}20%,80%{transform:translate3d(2px, 0, 0)}30%,50%,70%{transform:translate3d(-4px, 0, 0)}40%,60%{transform:translate3d(4px, 0, 0)}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/map/Settings.vue\"],\"names\":[],\"mappings\":\"AAEA,0BACE,iBAAA,CACA,QAAA,CACA,UAAA,CAGF,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,+BAAA,CACA,iBAAA,CAEF,uBACE,WAAA,CACA,eAAA,CACA,YAAA,CAEF,wBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,wBAAA,CACA,gBAAA,CAEF,2BACE,aAAA,CACA,4CAAA,CACA,gBAAA,CACA,YAAA,CAGF,8BACE,eAAA,CAEF,wBACE,sEAAA,CACA,8BAAA,CAEF,0BACE,QACE,iCAAA,CAEF,QACE,gCAAA,CAEF,YACE,iCAAA,CAEF,QACE,gCAAA,CAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.setting {\\n  position: absolute;\\n  top: 10px;\\n  right: 20px;\\n}\\n\\n.layout {\\n  position: absolute;\\n  width: calc(100%);\\n  height: calc(100% - 50px);\\n  display: flex;\\n  flex-flow: row;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.layout-overlay {\\n  height: 100%;\\n  width: 100%;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  position: absolute;\\n}\\n.card {\\n  width: 500px;\\n  overflow-y: auto;\\n  padding: 40px;\\n}\\n.title {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 3.5em;\\n  color: $primary !important;\\n  font-weight: bold;\\n}\\n.subtitle {\\n  font-size: 2em;\\n  color:  var(--v-secondarydark-base) !important;\\n  font-weight: bold;\\n  padding:1rem\\n\\n}\\n.card button {\\n  margin-top: 40px;\\n}\\n.shake {\\n  animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;\\n  transform: translate3d(0, 0, 0);\\n}\\n@keyframes shake {\\n  10%, 90% {\\n    transform: translate3d(-1px, 0, 0);\\n  }\\n  20%, 80% {\\n    transform: translate3d(2px, 0, 0);\\n  }\\n  30%, 50%, 70% {\\n    transform: translate3d(-4px, 0, 0);\\n  }\\n  40%, 60% {\\n    transform: translate3d(4px, 0, 0);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.left-panel[data-v-7105305e]{height:100%;background-color:var(--v-primarydark-base);transition:.3s;position:absolute;display:flex;z-index:20}.left-panel-close[data-v-7105305e]{transition:.3s}.left-panel-content[data-v-7105305e]{display:inline-block;width:100%;flex-direction:column;justify-content:space-between;height:100%;overflow:auto}.v-list__tile[data-v-7105305e]{padding:0}.left-panel-toggle-btn[data-v-7105305e]{left:100%;width:25px;z-index:1;background-color:var(--v-primarydark-base);display:flex;position:relative;align-items:center;justify-content:center;height:50px;transition:.3s;cursor:pointer}.left-panel-title[data-v-7105305e]{height:50px;line-height:55px;padding-left:20px;font-size:1.1em;margin-bottom:10px}.trip-list[data-v-7105305e]{height:height;padding-left:20px}.scrollable[data-v-7105305e]{overflow-y:scroll}.drawer-list-item[data-v-7105305e]{padding:0 13px !important;justify-content:flex-start !important;flex:0;transition:.3s}.list-item-icon[data-v-7105305e]{display:flex !important;flex-flow:row !important;justify-content:center !important;margin:0 !important;color:#fff}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/map/SidePanel.vue\"],\"names\":[],\"mappings\":\"AAEA,6BACE,WAAA,CACA,0CAAA,CACA,cAAA,CACA,iBAAA,CACA,YAAA,CACA,UAAA,CAGF,mCACA,cAAA,CAEA,qCACE,oBAAA,CACA,UAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CAEA,aAAA,CAGF,+BACE,SAAA,CAEF,wCACE,SAAA,CACA,UAAA,CACA,SAAA,CACA,0CAAA,CACA,YAAA,CACA,iBAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA,CACA,cAAA,CAEF,mCACE,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,eAAA,CACA,kBAAA,CAEF,4BACE,aAAA,CACA,iBAAA,CAGF,6BACG,iBAAA,CAIH,mCACE,yBAAA,CACA,qCAAA,CACA,MAAA,CACA,cAAA,CAGF,iCACE,uBAAA,CACA,wBAAA,CACA,iCAAA,CACA,mBAAA,CACA,UAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.left-panel {\\n  height: 100%;\\n  background-color:var(--v-primarydark-base);\\n  transition: 0.3s;\\n  position: absolute;\\n  display:flex;\\n  z-index: 20;\\n\\n}\\n.left-panel-close {\\ntransition:0.3s\\n}\\n.left-panel-content {\\n  display:inline-block;\\n  width : 100%;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 100%;\\n  //resize: horizontal;\\n  overflow: auto;\\n\\n}\\n.v-list__tile {\\n  padding: 0\\n}\\n.left-panel-toggle-btn {\\n  left: 100%;\\n  width: 25px;\\n  z-index: 1;\\n  background-color: var(--v-primarydark-base);\\n  display: flex;\\n  position: relative;\\n  align-items: center;\\n  justify-content: center;\\n  height: 50px;\\n  transition: 0.3s;\\n  cursor: pointer;\\n}\\n.left-panel-title {\\n  height: 50px;\\n  line-height: 55px;\\n  padding-left: 20px;\\n  font-size: 1.1em;\\n  margin-bottom: 10px;\\n}\\n.trip-list {\\n  height: height;\\n  padding-left:20px\\n}\\n\\n.scrollable {\\n   overflow-y:scroll;\\n\\n}\\n\\n.drawer-list-item {\\n  padding: 0 13px !important;\\n  justify-content: flex-start !important;\\n  flex: 0;\\n  transition: 0.3s;\\n}\\n\\n.list-item-icon {\\n  display: flex !important;\\n  flex-flow: row !important;\\n  justify-content: center !important;\\n  margin: 0 !important;\\n  color: white;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.layer-button[data-v-1a6c8be4]{position:absolute;top:60px;right:20px}.card[data-v-1a6c8be4]{width:500px;overflow-y:auto;padding:40px}.subtitle[data-v-1a6c8be4]{font-size:1.5em;color:var(--v-secondarydark-base) !important;font-weight:bold;padding:1rem}.title[data-v-1a6c8be4]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:3.5em;color:#b5e0d6 !important;font-weight:bold}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/utils/LayerSelector.vue\"],\"names\":[],\"mappings\":\"AAEA,+BACE,iBAAA,CACA,QAAA,CACA,UAAA,CAEF,uBACE,WAAA,CACA,eAAA,CACA,YAAA,CAEF,2BACE,eAAA,CACA,4CAAA,CACA,gBAAA,CACA,YAAA,CAGF,wBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,wBAAA,CACA,gBAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.layer-button {\\n  position: absolute;\\n  top: 60px;\\n  right: 20px;\\n}\\n.card {\\n  width: 500px;\\n  overflow-y: auto;\\n  padding: 40px;\\n}\\n.subtitle {\\n  font-size: 1.5em;\\n  color:  var(--v-secondarydark-base) !important;\\n  font-weight: bold;\\n  padding:1rem\\n\\n}\\n.title {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 3.5em;\\n  color: $primary !important;\\n  font-weight: bold;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.map-view[data-v-11cc9f12]{height:calc(100% - 50px);width:100%;display:flex}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/Home.vue\"],\"names\":[],\"mappings\":\"AAEA,2BACE,wBAAA,CACA,UAAA,CACA,YAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.map-view {\\n  height: calc(100% - 50px);\\n  width: 100%;\\n  display: flex;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.layout[data-v-15d0878a]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-15d0878a]{height:100%;width:100%;background-color:var(--v-background-base);position:absolute}.card[data-v-15d0878a]{height:42em;width:60rem;overflow-y:hidden;padding:20px}.col[data-v-15d0878a]{margin:1em}.title[data-v-15d0878a]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:2em !important;color:var(--v-primary-base);font-weight:bold;margin-top:30px}.subtitle[data-v-15d0878a]{font-size:1.5em;font-weight:bold;margin:20px}.card button[data-v-15d0878a]{margin-top:.5rem}.animate-login[data-v-15d0878a]{transform:translateY(-185%);transition:1s}.animate-layer[data-v-15d0878a]{opacity:0;transition:1s}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/Import.vue\"],\"names\":[],\"mappings\":\"AAEA,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAGF,iCACE,WAAA,CACA,UAAA,CACA,yCAAA,CAEA,iBAAA,CAEF,uBACE,WAAA,CACA,WAAA,CACA,iBAAA,CACA,YAAA,CAEF,sBACE,UAAA,CAEF,wBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,wBAAA,CACA,2BAAA,CACA,gBAAA,CACA,eAAA,CAEF,2BACE,eAAA,CACA,gBAAA,CACA,WAAA,CAEF,8BACE,gBAAA,CAEF,gCACE,2BAAA,CACA,aAAA,CAEF,gCACE,SAAA,CACA,aAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.layout {\\n  position: absolute;\\n  width: calc(100%);\\n  height: calc(100% - 50px);\\n  display: flex;\\n  flex-flow: row;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.layout-overlay {\\n  height: 100%;\\n  width: 100%;\\n  background-color:var(--v-background-base);\\n\\n  position: absolute;\\n}\\n.card {\\n  height: 42em;\\n  width:60rem;\\n  overflow-y:hidden;\\n  padding: 20px;\\n}\\n.col{\\n  margin:1em;\\n}\\n.title {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 2em !important;\\n  color: var(--v-primary-base);\\n  font-weight: bold;\\n  margin-top:30px;\\n}\\n.subtitle {\\n  font-size: 1.5em;\\n  font-weight: bold;\\n  margin: 20px;\\n}\\n.card button {\\n  margin-top: 0.5rem;\\n}\\n.animate-login {\\n  transform: translateY(-185%);\\n  transition: 1s;\\n}\\n.animate-layer {\\n  opacity: 0;\\n  transition: 1s;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { store } from '@src/store/index.js'\nimport AWS from 'aws-sdk'\nimport JSZip from 'jszip'\nimport saveAs from 'file-saver'\n\nconst USERPOOL_ID = process.env.VUE_APP_COGNITO_USERPOOL_ID\nconst IDENTITY_POOL_ID = process.env.VUE_APP_COGNITO_IDENTITY_POOL_ID\nconst REGION = process.env.VUE_APP_COGNITO_REGION\n\nAWS.config.region = REGION\nconst s3Client = new AWS.S3({\n  apiVersion: '2006-03-01',\n  signatureVersion: 'v4',\n  params: { region: REGION },\n})\n\nasync function readJson (bucket, key) {\n  const params = { Bucket: bucket, Key: key, ResponseCacheControl: 'no-cache' }\n  // const params = { Bucket: bucket, Key: key }\n\n  const response = await s3Client.getObject(params).promise() // await the promise\n  const fileContent = JSON.parse(response.Body.toString('utf-8').trim()) // can also do 'base64' here if desired\n  return fileContent\n}\n\nasync function readBytes (bucket, key) {\n  const params = { Bucket: bucket, Key: key, ResponseCacheControl: 'no-cache' }\n  // const params = { Bucket: bucket, Key: key }\n  const response = await s3Client.getObject(params).promise() // await the promise\n  const fileContent = response.Body // can also do 'base64' here if desired\n  return fileContent\n}\nasync function downloadFolder (bucket, prefix) {\n  // zip everything in a folder. keep filename. Folder structure will not work.\n  const zip = new JSZip()\n  const params = { Bucket: bucket, Prefix: prefix }\n  const response = await s3Client.listObjectsV2(params).promise()\n  if (response.Contents.length === 0) throw new Error('no params.json in base scenario')\n  for (const file of response.Contents) {\n    const fileName = file.Key.split('/').slice(-1)[0]\n    const params = { Bucket: bucket, Key: file.Key, ResponseCacheControl: 'no-cache' }\n    const response = await s3Client.getObject(params).promise()\n    zip.file(fileName, response.Body)\n  }\n\n  zip.generateAsync({ type: 'blob' }).then(function (content) {\n    saveAs(content, 'example.zip')\n  })\n}\n\nasync function getBucketList () {\n  // from the cognito group name. get the list of available buckets on quetzal-config.\n  const bucketList = await this.readJson('quetzal-config', 'cognito_group_access.json')\n  store.commit('setBucketList', bucketList[store.getters.cognitoGroup])\n}\nasync function listFiles (bucket, prefix) {\n  if (Array.isArray(prefix)) {\n    const paths = []\n    prefix.forEach(async pref => {\n      const params = { Bucket: bucket, Prefix: prefix }\n      const Content = await s3Client.listObjectsV2(params).promise()\n      paths.push(...Content.Contents.map(item => item.Key))\n    })\n    return paths\n  } else {\n    const params = { Bucket: bucket, Prefix: prefix }\n    const Content = await s3Client.listObjectsV2(params).promise()\n    return Content.Contents.map(item => item.Key)\n  }\n}\nasync function getImagesURL (bucket, key) {\n  const presignedGETURL = s3Client.getSignedUrl('getObject', {\n    Bucket: bucket,\n    Key: key, // filename\n    Expires: 100, // time to expire in seconds\n  })\n  return presignedGETURL\n}\n\nasync function copyFolder (bucket, prefix, newName) {\n  const params = { Bucket: bucket, Prefix: prefix }\n  const response = await s3Client.listObjectsV2(params).promise()\n  if (response.Contents.length === 0) throw new Error('no params.json in base scenario')\n  for (const file of response.Contents) {\n    let newFile = file.Key.split('/')\n    newFile[0] = newName\n    newFile = newFile.join('/')\n    const copyParams = {\n      Bucket: bucket,\n      CopySource: bucket + '/' + file.Key,\n      Key: newFile,\n    }\n    s3Client.copyObject(copyParams, function (err, data) {\n      if (err) return err // an error occurred\n    })\n  }\n}\nasync function deleteFolder (bucket, prefix) {\n  const params = { Bucket: bucket, Prefix: prefix }\n  const response = await s3Client.listObjectsV2(params).promise()\n  const arr = []\n  response.Contents.forEach(file => arr.push({ Key: file.Key }))\n  const deleteParams = { Bucket: bucket, Delete: { Objects: arr } }\n  return s3Client.deleteObjects(deleteParams).promise()\n}\n\nasync function createFolder (bucket, key) {\n  // create an empty folder\n  if (key.slice(-1) !== '/') key = key + '/'\n  const params = { Bucket: bucket, Key: key, Body: '' }\n\n  s3Client.upload(params, function (err, data) {\n    if (err) {\n      store.commit('changeAlert', err)\n    } else {\n      console.log('Successfully created a folder on S3')\n    }\n  })\n}\nasync function putObject (bucket, key, body = '') {\n  const params = {\n    Bucket: bucket,\n    Key: key,\n    Body: body,\n    Metadata: { user_email: store.getters.cognitoInfo.email },\n    ContentType: ' application/json',\n  }\n  const resp = await s3Client.putObject(params).promise()\n  return resp\n}\nasync function putBytes (bucket, key, body = '') {\n  const params = {\n    Bucket: bucket,\n    Key: key,\n    Body: body,\n    Metadata: { user_email: store.getters.cognitoInfo.email },\n  }\n  const resp = await s3Client.putObject(params).promise()\n  return resp\n}\n\nasync function getScenario (bucket) {\n  // list all files in bucket\n  const params = { Bucket: bucket }\n  let moreToLoad = true\n  const list = []\n  try {\n    while (moreToLoad) {\n      const { Contents, IsTruncated, NextContinuationToken } = await s3Client.listObjectsV2(params).promise()\n      list.push(...Contents)\n      moreToLoad = IsTruncated\n      params.ContinuationToken = NextContinuationToken\n    }\n  } catch (err) { return [] }\n\n  // get list of scenarios (unique prefix)\n  let scenarios = Array.from(new Set(list.map(name => name.Key.split('/')[0])))\n  scenarios = scenarios.filter(scen => scen !== 'quenedi.config.json')\n  const scenList = []\n  for (const scen of scenarios) {\n    const dates = list.filter(item => item.Key.startsWith(scen))\n    // let maxDate = new Date(Math.max.apply(null, dates))\n    const maxDateObj = dates.reduce((prev, current) => (prev.LastModified > current.LastModified) ? prev : current, [])\n    const maxDate = maxDateObj.LastModified.toLocaleDateString() + ' ' + maxDateObj.LastModified.toLocaleTimeString()\n    // get user email metadata on newest object. undefined if empty or error.\n    let userEmail // this = undefined\n    try {\n      const resp = await s3Client.headObject({ Bucket: bucket, Key: maxDateObj.Key }).promise()\n      userEmail = resp.Metadata.user_email\n    } catch (err) { store.commit('changeAlert', err) }\n    scenList.push({ model: bucket, scenario: scen, lastModified: maxDate, userEmail: userEmail })\n  }\n  return scenList\n}\n\nexport default {\n  s3: s3Client,\n  async login () {\n    AWS.config.region = REGION\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n      IdentityPoolId: IDENTITY_POOL_ID,\n      Logins: {\n        [`cognito-idp.${REGION}.amazonaws.com/${USERPOOL_ID}`]: store.getters.idToken,\n      },\n    })\n    s3Client.config.credentials = AWS.config.credentials\n    await this.getBucketList()\n  },\n\n  getScenario,\n  readJson,\n  readBytes,\n  getBucketList,\n  listFiles,\n  copyFolder,\n  deleteFolder,\n  createFolder,\n  putObject,\n  putBytes,\n  getImagesURL,\n  downloadFolder,\n\n}\n","import { CognitoAuth, StorageHelper } from 'amazon-cognito-auth-js'\nimport router from './router'\nimport { store } from '@src/store/index.js'\nimport jwtDecode from 'jwt-decode'\n\nconst CLIENT_ID = process.env.VUE_APP_COGNITO_CLIENT_ID\nconst APP_DOMAIN = process.env.VUE_APP_COGNITO_APP_DOMAIN\nconst REDIRECT_URI = process.env.VUE_APP_COGNITO_REDIRECT_URI\nconst USERPOOL_ID = process.env.VUE_APP_COGNITO_USERPOOL_ID\nconst IDENTITY_POOL_ID = process.env.VUE_APP_COGNITO_IDENTITY_POOL_ID\nconst REDIRECT_URI_SIGNOUT = process.env.VUE_APP_COGNITO_REDIRECT_URI_SIGNOUT\n\nconst authData = {\n  ClientId: CLIENT_ID, // Your client id here\n  AppWebDomain: APP_DOMAIN,\n  TokenScopesArray: ['openid'],\n  RedirectUriSignIn: REDIRECT_URI,\n  RedirectUriSignOut: REDIRECT_URI_SIGNOUT,\n  UserPoolId: USERPOOL_ID,\n}\nconst auth = new CognitoAuth(authData)\n\nauth.userhandler = {\n  onSuccess: function (result) {\n    // console.log('On Success result', result)\n    const idToken = result.getIdToken().jwtToken\n    const sessionIdInfo = jwtDecode(idToken)\n    // TODO : trouver comment avoir une liste des bucket!!\n    store.commit('setIdToken', idToken)\n    store.commit('setAccessToken', result.accessToken.jwtToken)\n    store.commit('setCognitoInfo', sessionIdInfo)\n    store.commit('setCognitoGroup', sessionIdInfo['cognito:groups'][0])\n    store.commit('setLoggedIn', true)\n  },\n  onFailure: function (err) {\n    store.commit('setLoggedOut')\n    alert('Login failed due to ' + err)\n    router.go({ path: '/error', query: { message: 'Login failed due to ' + err } })\n  },\n}\n\nfunction getCognitoStorageKey () {\n  const keyPrefix = 'CognitoIdentityServiceProvider.' + auth.getClientId()\n  const tokenUserName = auth.signInUserSession.getAccessToken().getUsername()\n  const suffix = ['.userInfo', '.tokenScopesString', '.accessToken', '.idToken', '.refreshToken']\n  const keys = suffix.map(s => keyPrefix + '.' + tokenUserName + s)\n  keys.push(keyPrefix + '.LastAuthUser')\n  keys.push(`aws.cognito.identity-id.${IDENTITY_POOL_ID}`)\n  keys.push(`aws.cognito.identity-providers.${IDENTITY_POOL_ID}`)\n  return keys\n}\n\nconst storageHelper = new StorageHelper()\nconst storage = storageHelper.getStorage()\nexport default {\n  auth: auth,\n  login () {\n    auth.getSession()\n  },\n  logout () {\n    if (auth.isUserSignedIn()) {\n      const cognitoKeys = this.getCognitoStorageKey()\n      cognitoKeys.forEach(key => storage.removeItem(key))\n      auth.signOut()\n    }\n  },\n  getCognitoStorageKey,\n\n}\n","import axios from 'axios'\n\nconst quetzalClient = {\n  client: null,\n  login (idToken) {\n    this.client = axios.create({\n      baseURL: 'https://z0i1paj50k.execute-api.ca-central-1.amazonaws.com/dev',\n      withCredentials: false,\n      headers: {\n        'Accept': '*/*',\n        'Content-Type': 'text/plain',\n        'Authorization': idToken,\n      },\n    })\n  },\n}\n\nconst axiosClient = {\n  loginAll (idToken) {\n    quetzalClient.login(idToken)\n  },\n}\n\nexport { quetzalClient, axiosClient }\n","// import JSZip from 'jszip'\nconst $gettext = s => s\n\nfunction serializer (geojson, name, type = null, ignoreIndex = false) {\n  // check that file is not empty\n  if (geojson.features.length === 0) {\n    const err = new Error(name + $gettext(' is empty'))\n    err.name = 'ImportError'\n    throw err\n  }\n  // check CRS. no CRS or invalid\n  if (!['urn:ogc:def:crs:OGC:1.3:CRS84', 'EPSG:4326'].includes(geojson.crs?.properties.name)) {\n    const err = new Error($gettext(' invalid CRS. Import aborted. use CRS84 / EPSG:4326 in ') + name)\n    err.name = 'ImportError'\n    throw err\n  }\n  // check Type (is links a linestring)\n  const currentType = geojson.features[0].geometry.type\n  if (currentType !== type && type !== null) {\n    const err = new Error(currentType + $gettext(' imported, Expected ') +\n    type + $gettext('. Import aborted in ') + name)\n    err.name = 'ImportError'\n    throw err\n  }\n  // check if there is indexes in the properties\n  if (!Object.keys(geojson.features[0].properties).includes('index') && !ignoreIndex) {\n    const err = new Error($gettext('there is no index in the File. you need unique index. Import aborted in ') + name)\n    err.name = 'ImportError'\n    throw err\n  }\n  // all good. return geojson.\n  return geojson\n}\n\nexport { serializer }\n","import JSZip from 'jszip'\nimport { store } from '../../store/index.js'\n\nfunction readFileAsText (file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = function (event) {\n      resolve(event.target.result)\n    }\n    reader.onerror = function (event) {\n      reject(event.target.error)\n    }\n    reader.readAsText(file)\n  })\n}\n\nfunction readFileAsBytes (file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = function (event) {\n      const fileBytes = new Uint8Array(event.target.result)\n      resolve(fileBytes)\n    }\n    reader.onerror = function (event) {\n      reject(event.target.error)\n    }\n    reader.readAsArrayBuffer(file)\n  })\n}\n\nfunction classFile (name, content, ptFolder = 'inputs/pt/', roadFolder = 'inputs/road/', outputFolder = 'outputs/') {\n  // class Files with inputs outputs quenedi fileStructure.\n  // inputs are split as pt and road folder. everythin in output is read as a static layer.\n  // return {data, type, fileName}.\n  // type can be links, nodes, road_links, road_nodes,\n  // result,  params, matrix or others.\n\n  // inputs/\n  //    pt/\n  //        links.geojson\n  //        nodes.geojson\n  //    road/\n  //        links.geojson\n  //        nodes.geojson\n  // outputs/\n  //    loaded_links.geojson\n  //    zones.geojson\n  //    zones.json\n  //\n  //  parameters.json anywhere\n  if (name.endsWith('.geojson')) {\n    const currentType = content.features[0].geometry.type\n    if (name.toLowerCase().includes(ptFolder.toLowerCase())) {\n      switch (currentType) {\n        case 'LineString':\n          return { data: content, type: 'links', fileName: name }\n        case 'Point':\n          return { data: content, type: 'nodes', fileName: name }\n      }\n    } else if (name.toLowerCase().includes(roadFolder.toLowerCase())) {\n      switch (currentType) {\n        case 'LineString':\n          return { data: content, type: 'road_links', fileName: name }\n        case 'Point':\n          return { data: content, type: 'road_nodes', fileName: name }\n      }\n    } else if (name.toLowerCase().includes(outputFolder.toLowerCase())) {\n      switch (currentType) {\n        case 'LineString':\n          return { data: content, type: 'result', fileName: name }\n        case 'Point':\n          return { data: content, type: 'result', fileName: name }\n        case 'MultiPolygon':\n          return { data: content, type: 'result', fileName: name }\n        case 'Polygon':\n          return { data: content, type: 'result', fileName: name }\n      }\n    } else {\n      return { data: content, type: 'other', fileName: name }\n    }\n  } else if (name.endsWith('.json')) {\n    if (name.toLowerCase().includes('inputs/')) {\n      if (name.slice(-11).toLowerCase() === 'params.json') {\n        return { data: content, type: 'params', fileName: name } // params.json\n      }\n    } else if (name.toLowerCase().includes('outputs/')) {\n      return { data: content, type: 'matrix', fileName: name } // json mat\n    } else {\n      return { data: content, type: 'other', fileName: name }\n    }\n  } else {\n    return { data: content, type: 'other', fileName: name }\n  }\n}\n\nasync function extractZip (file) {\n  const ZIP = new JSZip()\n  const zip = await ZIP.loadAsync(file)\n  let filesNames = Object.keys(zip.files)\n  filesNames = filesNames.filter(name => !name.match(/^__MACOSX\\//))\n  filesNames = filesNames.filter(name => !name.endsWith('/'))\n  // process ZIP file content here\n  const result = { zipName: file.name, files: [] }\n  for (let i = 0; i < filesNames.length; i++) {\n    const str = await zip.file(filesNames[i]).async('string')\n    let content = {}\n    try {\n      content = JSON.parse(str)\n    } catch (err) {\n      content = await zip.file(filesNames[i]).async('uint8array')\n    }\n    // import with new fileStructure (inputs, outputs folder in zip)\n    result.files.push(classFile(filesNames[i], content))\n  }\n  return result\n}\n\nfunction getGroupForm (features, lineAttributes, uneditable) {\n  const form = {}\n  lineAttributes.forEach(key => {\n    const val = new Set(features.map(link => link.properties[key]))\n    form[key] = {\n      value: val.size > 1 ? '' : [...val][0],\n      disabled: uneditable.includes(key),\n      placeholder: val.size > 1,\n    }\n  })\n  return form\n}\n\nfunction indexAreUnique (geojson) {\n  // check if all index are unique in a geojson (links or nodes)\n  // return true if they are unique\n  let indexArr = []\n  if (geojson?.features.length > 0) {\n    indexArr = geojson.features.map(item => item.properties.index)\n    return (new Set(indexArr).size === indexArr.length)\n  } else { return true } // if its empty, return true\n}\n\nfunction IndexAreDifferent (geojsonA, geojsonB) {\n  // check if index are duplicated between geojsons (to append new links or nodes) (links or nodes)\n  // return true if they are all unique\n  const linksIndex = new Set(geojsonA.features.map(item => item.properties.index))\n  const newLinksIndex = new Set(geojsonB.features.map(item => item.properties.index))\n  return (new Set([...linksIndex, ...newLinksIndex]).size === (linksIndex.size + newLinksIndex.size))\n}\n\nfunction createIndex (geojson, type, prefix) {\n  // not done. we should check links and node as there is nodes index in links (a,b)\n  switch (type) {\n    case 'PT':\n      // eslint-disable-next-line no-case-declarations\n      const len = store.getters.links.features.length\n      // eslint-disable-next-line no-return-assign\n      geojson.features.forEach((feat, index) => feat.properties.index = prefix + (index + len))\n      break\n    case 'road':\n      break\n  }\n}\n\nfunction geojsonVerification (geojson, type) {}\n\nasync function unzip (file) {\n  // unzip a file and return a json (solo json zipped)\n  const ZIP = new JSZip()\n  const zip = await ZIP.loadAsync(file)\n  const filesNames = Object.keys(zip.files)\n  const str = await zip.file(filesNames[0]).async('string')\n  const content = JSON.parse(str)\n  return content\n}\n\nexport { readFileAsText, readFileAsBytes, extractZip, getGroupForm, indexAreUnique, createIndex, IndexAreDifferent, geojsonVerification, unzip, classFile }\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!./app.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!./app.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"v-app\",\n    { staticClass: \"app\" },\n    [\n      _c(\"NavigationDrawer\"),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        {\n          directives: [\n            {\n              name: \"resize\",\n              rawName: \"v-resize\",\n              value: _vm.onResize,\n              expression: \"onResize\",\n            },\n          ],\n          ref: \"container\",\n          staticClass: \"container\",\n        },\n        [\n          _c(\"Toolbar\"),\n          _vm._v(\" \"),\n          _c(\"transition\", { attrs: { name: \"fade\" } }, [_c(\"router-view\")], 1),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-overlay\",\n        { attrs: { value: _vm.loading } },\n        [\n          _c(\"v-progress-circular\", {\n            attrs: { indeterminate: \"\", size: \"64\" },\n          }),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-snackbar\",\n        {\n          class: `snackbar-${_vm.notification.type}`,\n          attrs: {\n            timeout: _vm.notification.autoClose ? 3000 : -1,\n            transition: \"slide-y-reverse-transition\",\n            color: _vm.notification.color ? _vm.notification.color : \"white\",\n          },\n          scopedSlots: _vm._u([\n            {\n              key: \"action\",\n              fn: function ({ attrs }) {\n                return [\n                  _c(\n                    \"v-btn\",\n                    _vm._b(\n                      {\n                        attrs: { small: \"\", color: \"secondarydark\", text: \"\" },\n                        on: { click: _vm.closeSnackbar },\n                      },\n                      \"v-btn\",\n                      attrs,\n                      false\n                    ),\n                    [\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(_vm.$gettext(\"Close\")) +\n                          \"\\n      \"\n                      ),\n                    ]\n                  ),\n                ]\n              },\n            },\n          ]),\n          model: {\n            value: _vm.snackbar,\n            callback: function ($$v) {\n              _vm.snackbar = $$v\n            },\n            expression: \"snackbar\",\n          },\n        },\n        [\n          _c(\"span\", { staticClass: \"snackbar-text\" }, [\n            _vm._v(\n              \"\\n      \" +\n                _vm._s(_vm.$gettext(_vm.notification.text)) +\n                \"\\n    \"\n            ),\n          ]),\n        ]\n      ),\n      _vm._v(\" \"),\n      _c(\"Alert\"),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"v-toolbar\",\n    { class: \"app-toolbar elevation-4\", attrs: { dense: \"\" } },\n    [\n      _c(\"v-img\", {\n        attrs: {\n          src: require(\"@static/systra_logo.png\"),\n          contain: \"\",\n          \"max-width\": \"6rem\",\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\"span\", { staticClass: \"copyright\" }, [_vm._v(\"©\")]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"app-name\" }, [\n        _vm._v(\"\\n    Quetzal Network Editor\\n  \"),\n      ]),\n      _vm._v(\" \"),\n      _c(\"v-spacer\"),\n      _vm._v(\" \"),\n      _c(\"div\", [_c(\"ScenariosExplorer\")], 1),\n      _vm._v(\" \"),\n      _c(\"v-spacer\"),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        [\n          _c(\n            \"v-tooltip\",\n            {\n              attrs: { bottom: \"\" },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on, attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              attrs: {\n                                icon: \"\",\n                                href: \"https://github.com/systragroup/quetzal-network-editor\",\n                                target: \"_blank\",\n                              },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [\n                          _c(\"v-icon\", [\n                            _vm._v(\"\\n            fab fa-github\\n          \"),\n                          ]),\n                        ],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [_vm._v(\" \"), _c(\"span\", [_vm._v(\"GitHub\")])]\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"switch\" },\n        [\n          _c(\"v-switch\", {\n            attrs: { \"append-icon\": \"fas fa-moon\" },\n            model: {\n              value: _vm.$vuetify.theme.dark,\n              callback: function ($$v) {\n                _vm.$set(_vm.$vuetify.theme, \"dark\", $$v)\n              },\n              expression: \"$vuetify.theme.dark\",\n            },\n          }),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        [\n          _c(\n            \"v-menu\",\n            {\n              attrs: {\n                \"offset-y\": \"\",\n                \"close-delay\": \"100\",\n                transition: \"slide-y-transition\",\n              },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on: on, attrs: attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              staticClass: \"language active\",\n                              attrs: { text: \"\" },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$language.current) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\n                \"v-list\",\n                _vm._l(_vm.$language.available, function (language, lang) {\n                  return _c(\n                    \"v-list-item\",\n                    {\n                      key: lang,\n                      class: language,\n                      on: { click: () => _vm.handleChangeLanguage(lang) },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(language.toUpperCase()) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  )\n                }),\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", [_c(\"Profile\")], 1),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _vm.loggedIn\n        ? _c(\n            \"v-menu\",\n            {\n              attrs: {\n                \"close-on-content-click\": false,\n                \"nudge-width\": 200,\n                \"offset-x\": \"\",\n                \"offset-y\": \"\",\n              },\n              scopedSlots: _vm._u(\n                [\n                  {\n                    key: \"activator\",\n                    fn: function ({ on, attrs }) {\n                      return [\n                        _c(\n                          \"v-avatar\",\n                          _vm._g(\n                            _vm._b(\n                              { attrs: { size: \"34\", color: \"primary\" } },\n                              \"v-avatar\",\n                              attrs,\n                              false\n                            ),\n                            on\n                          ),\n                          [\n                            _c(\"span\", { staticClass: \"white--text text-h6\" }, [\n                              _vm._v(_vm._s(_vm.initial)),\n                            ]),\n                          ]\n                        ),\n                      ]\n                    },\n                  },\n                ],\n                null,\n                false,\n                3256803526\n              ),\n              model: {\n                value: _vm.menu,\n                callback: function ($$v) {\n                  _vm.menu = $$v\n                },\n                expression: \"menu\",\n              },\n            },\n            [\n              _vm._v(\" \"),\n              _c(\n                \"v-card\",\n                [\n                  _c(\n                    \"v-list\",\n                    [\n                      _c(\n                        \"v-list-item\",\n                        [\n                          _c(\n                            \"v-list-item-content\",\n                            [\n                              _c(\"v-list-item-title\", [\n                                _vm._v(\n                                  _vm._s(\n                                    _vm.cognitoInfo.given_name +\n                                      \" \" +\n                                      _vm.cognitoInfo.family_name\n                                  )\n                                ),\n                              ]),\n                              _vm._v(\" \"),\n                              _c(\"v-list-item-subtitle\", [\n                                _vm._v(_vm._s(_vm.cognitoInfo.email)),\n                              ]),\n                            ],\n                            1\n                          ),\n                        ],\n                        1\n                      ),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"v-divider\"),\n                  _vm._v(\" \"),\n                  _vm._l(_vm.bucketList, function (group) {\n                    return _c(\"v-list-item\", { key: group }, [\n                      _vm._v(\"\\n        \" + _vm._s(group) + \"\\n      \"),\n                    ])\n                  }),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-card-actions\",\n                    [\n                      _c(\"v-spacer\"),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { color: \"primary\", text: \"\" },\n                          on: { click: _vm.logout },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"logout\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                    ],\n                    1\n                  ),\n                ],\n                2\n              ),\n            ],\n            1\n          )\n        : _c(\n            \"v-tooltip\",\n            {\n              attrs: { bottom: \"\", \"open-delay\": \"250\" },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on, attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            { attrs: { icon: \"\" }, on: { click: _vm.login } },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [\n                          _c(\"v-icon\", [\n                            _vm._v(\"\\n          fas fa-sign-in-alt\\n        \"),\n                          ]),\n                        ],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\"span\", [_vm._v(_vm._s(_vm.$gettext(\"login / signin\")))]),\n            ]\n          ),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: { persistent: \"\", \"max-width\": \"350\" },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                return _vm.applyDialog.apply(null, arguments)\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                return (() => (_vm.showDialog = false)).apply(null, arguments)\n              },\n            ],\n          },\n          model: {\n            value: _vm.showDialog,\n            callback: function ($$v) {\n              _vm.showDialog = $$v\n            },\n            expression: \"showDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            [\n              _c(\"v-card-title\", { staticClass: \"text-h4\" }, [\n                _vm._v(\n                  \"\\n        \" + _vm._s(_vm.$gettext(\"Redirect\")) + \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\"v-card-text\", { staticClass: \"text-h6\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(\n                      _vm.$gettext(\"This will ERASE the current project\")\n                    ) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\" },\n                      on: { click: () => (_vm.showDialog = !_vm.showDialog) },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"No\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: { click: _vm.applyDialog },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Yes\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport auth from '../../auth'\n\nexport default {\n  name: 'Profile',\n  components: {\n\n  },\n\n  props: [],\n  events: ['logout'],\n  data () {\n    return {\n      menu: false,\n      showDialog: false,\n      action: 'login',\n    }\n  },\n  computed: {\n    projectIsEmpty () { return this.$store.getters.projectIsEmpty },\n    loggedIn () { return this.$store.getters.loggedIn },\n    cognitoInfo () { return this.$store.getters.cognitoInfo },\n    bucketList () { return this.$store.getters.bucketList },\n\n    initial () { return (this.cognitoInfo?.given_name[0] + this.cognitoInfo?.family_name[0]).toUpperCase() },\n  },\n  watch: {\n\n  },\n\n  methods: {\n\n    login () {\n      if (this.projectIsEmpty) {\n        auth.login()\n      } else {\n        this.action = 'login'\n        this.showDialog = true\n      }\n    },\n    logout () {\n      if (this.projectIsEmpty) {\n        this.menu = false\n        auth.logout()\n      } else {\n        this.action = 'logout'\n        this.showDialog = true\n      }\n    },\n    applyDialog () {\n      this.menu = false\n      this.showDialog = false\n      if (this.action === 'login') auth.login()\n      if (this.action === 'logout') auth.logout()\n    },\n\n  },\n}\n</script>\n<template>\n  <section>\n    <v-menu\n      v-if=\"loggedIn\"\n      v-model=\"menu\"\n      :close-on-content-click=\"false\"\n      :nudge-width=\"200\"\n      offset-x\n      offset-y\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-avatar\n          size=\"34\"\n          color=\"primary\"\n          v-bind=\"attrs\"\n          v-on=\"on\"\n        >\n          <span class=\"white--text text-h6\">{{ initial }}</span>\n        </v-avatar>\n      </template>\n      <v-card>\n        <v-list>\n          <v-list-item>\n            <v-list-item-content>\n              <v-list-item-title>{{ cognitoInfo.given_name+' '+ cognitoInfo.family_name }}</v-list-item-title>\n              <v-list-item-subtitle>{{ cognitoInfo.email }}</v-list-item-subtitle>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list>\n\n        <v-divider />\n        <v-list-item\n          v-for=\"group in bucketList\"\n          :key=\"group\"\n        >\n          {{ group }}\n        </v-list-item>\n        <v-card-actions>\n          <v-spacer />\n\n          <v-btn\n            color=\"primary\"\n            text\n            @click=\"logout\"\n          >\n            {{ $gettext('logout') }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-menu>\n    <v-tooltip\n      v-else\n      bottom\n      open-delay=\"250\"\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn\n          icon\n          v-bind=\"attrs\"\n          v-on=\"on\"\n          @click=\"login\"\n        >\n          <v-icon>\n            fas fa-sign-in-alt\n          </v-icon>\n        </v-btn>\n      </template>\n      <span>{{ $gettext('login / signin') }}</span>\n    </v-tooltip>\n    <v-dialog\n      v-model=\"showDialog\"\n      persistent\n      max-width=\"350\"\n      @keydown.enter=\"applyDialog\"\n      @keydown.esc=\"()=>showDialog=false\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h4\">\n          {{ $gettext(\"Redirect\") }}\n        </v-card-title>\n        <v-card-text class=\"text-h6\">\n          {{ $gettext(\"This will ERASE the current project\") }}\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"()=>showDialog = !showDialog\"\n          >\n            {{ $gettext(\"No\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"primary\"\n            @click=\"applyDialog\"\n          >\n            {{ $gettext(\"Yes\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=81b79092&scoped=true&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"81b79092\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _vm.loggedIn && _vm.modelsList.length > 0\n    ? _c(\n        \"section\",\n        [\n          _c(\n            \"v-menu\",\n            {\n              attrs: {\n                \"close-on-click\":\n                  !_vm.showDialog && !_vm.deleteDialog && !_vm.copyDialog,\n                \"close-on-content-click\": false,\n                \"max-width\": \"460px\",\n                \"offset-y\": \"\",\n              },\n              scopedSlots: _vm._u(\n                [\n                  {\n                    key: \"activator\",\n                    fn: function ({ on, attrs }) {\n                      return [\n                        _c(\n                          \"div\",\n                          _vm._g(\n                            _vm._b(\n                              { staticClass: \"title\" },\n                              \"div\",\n                              attrs,\n                              false\n                            ),\n                            on\n                          ),\n                          [\n                            _vm._v(\n                              \"\\n        \" +\n                                _vm._s(\n                                  _vm.scenario\n                                    ? _vm.model + \"/\" + _vm.scenario\n                                    : _vm.$gettext(\"Projects\")\n                                ) +\n                                \"\\n      \"\n                            ),\n                          ]\n                        ),\n                      ]\n                    },\n                  },\n                ],\n                null,\n                false,\n                2682127123\n              ),\n              model: {\n                value: _vm.menu,\n                callback: function ($$v) {\n                  _vm.menu = $$v\n                },\n                expression: \"menu\",\n              },\n            },\n            [\n              _vm._v(\" \"),\n              _c(\n                \"v-card\",\n                [\n                  _c(\n                    \"v-tabs\",\n                    {\n                      attrs: { \"show-arrows\": \"\", \"fixed-tabs\": \"\" },\n                      model: {\n                        value: _vm.localModel,\n                        callback: function ($$v) {\n                          _vm.localModel = $$v\n                        },\n                        expression: \"localModel\",\n                      },\n                    },\n                    _vm._l(_vm.modelsList, function (tab) {\n                      return _c(\n                        \"v-tab\",\n                        { key: tab, attrs: { href: \"#\" + tab } },\n                        [_vm._v(\"\\n          \" + _vm._s(tab) + \"\\n        \")]\n                      )\n                    }),\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _vm._l(_vm.scenariosList, function (scen) {\n                    return _c(\n                      \"v-list-item\",\n                      {\n                        key: scen.model + scen.scenario,\n                        class: {\n                          \"is-active\":\n                            _vm.modelScen === scen.model + scen.scenario,\n                        },\n                        attrs: {\n                          value: scen.model + scen.scenario,\n                          \"two-line\": \"\",\n                        },\n                        on: {\n                          click: function ($event) {\n                            return _vm.selectScenario(scen)\n                          },\n                        },\n                      },\n                      [\n                        _c(\n                          \"v-list-item-content\",\n                          [\n                            _c(\"v-list-item-title\", [\n                              _vm._v(_vm._s(scen.scenario)),\n                            ]),\n                            _vm._v(\" \"),\n                            _c(\"v-list-item-subtitle\", [\n                              _vm._v(_vm._s(scen.lastModified)),\n                            ]),\n                            _vm._v(\" \"),\n                            _c(\"v-list-item-subtitle\", [\n                              _vm._v(_vm._s(scen.userEmail)),\n                            ]),\n                          ],\n                          1\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"v-btn\",\n                          {\n                            staticClass: \"ma-1\",\n                            attrs: { icon: \"\" },\n                            on: {\n                              click: function ($event) {\n                                $event.stopPropagation()\n                                return (() => {\n                                  _vm.copyDialog = true\n                                  _vm.selectedScenario = scen.scenario\n                                  _vm.input = scen.scenario + \" copy\"\n                                }).apply(null, arguments)\n                              },\n                            },\n                          },\n                          [\n                            _c(\n                              \"v-icon\",\n                              { attrs: { small: \"\", color: \"regular\" } },\n                              [_vm._v(\"\\n            fas fa-copy\\n          \")]\n                            ),\n                          ],\n                          1\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"v-btn\",\n                          {\n                            staticClass: \"ma-1\",\n                            attrs: {\n                              icon: \"\",\n                              disabled:\n                                scen.model + scen.scenario === _vm.modelScen ||\n                                _vm.protectedScens.includes(scen.scenario),\n                            },\n                            on: {\n                              click: function ($event) {\n                                $event.stopPropagation()\n                                return (() => {\n                                  _vm.deleteDialog = true\n                                  _vm.scenarioToDelete = scen.scenario\n                                }).apply(null, arguments)\n                              },\n                            },\n                          },\n                          [\n                            _c(\n                              \"v-icon\",\n                              { attrs: { small: \"\", color: \"grey\" } },\n                              [\n                                _vm._v(\n                                  \"\\n            \" +\n                                    _vm._s(\n                                      _vm.protectedScens.includes(scen.scenario)\n                                        ? \"fas fa-lock\"\n                                        : \"fas fa-trash\"\n                                    ) +\n                                    \"\\n          \"\n                                ),\n                              ]\n                            ),\n                          ],\n                          1\n                        ),\n                      ],\n                      1\n                    )\n                  }),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-list-item\",\n                    {\n                      directives: [\n                        {\n                          name: \"show\",\n                          rawName: \"v-show\",\n                          value: _vm.loading,\n                          expression: \"loading\",\n                        },\n                      ],\n                    },\n                    [\n                      _c(\"v-spacer\"),\n                      _vm._v(\" \"),\n                      _c(\"v-progress-circular\", {\n                        attrs: { color: \"primary\", indeterminate: \"\" },\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"v-spacer\"),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"v-divider\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-list-item\",\n                    [\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { text: \"\" },\n                          on: {\n                            click: () => {\n                              _vm.copyDialog = true\n                              _vm.selectedScenario = null\n                              _vm.input = \"\"\n                            },\n                          },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"new scenario\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                    ],\n                    1\n                  ),\n                ],\n                2\n              ),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-dialog\",\n            {\n              attrs: { persistent: \"\", \"max-width\": \"350\" },\n              on: {\n                keydown: [\n                  function ($event) {\n                    if (\n                      !$event.type.indexOf(\"key\") &&\n                      _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                    )\n                      return null\n                    return _vm.applyDialog.apply(null, arguments)\n                  },\n                  function ($event) {\n                    if (\n                      !$event.type.indexOf(\"key\") &&\n                      _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                        \"Esc\",\n                        \"Escape\",\n                      ])\n                    )\n                      return null\n                    return _vm.cancelDialog.apply(null, arguments)\n                  },\n                ],\n              },\n              model: {\n                value: _vm.showDialog,\n                callback: function ($$v) {\n                  _vm.showDialog = $$v\n                },\n                expression: \"showDialog\",\n              },\n            },\n            [\n              _c(\n                \"v-card\",\n                [\n                  _c(\"v-card-title\", { staticClass: \"text-h4\" }, [\n                    _vm._v(\n                      \"\\n        \" +\n                        _vm._s(_vm.$gettext(\"Load Scenario?\")) +\n                        \"\\n      \"\n                    ),\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"v-card-text\", { staticClass: \"text-h6\" }, [\n                    _vm._v(\n                      \"\\n        \" +\n                        _vm._s(\n                          _vm.$gettext(\"This will ERASE the current project\")\n                        ) +\n                        \"\\n      \"\n                    ),\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-card-actions\",\n                    [\n                      _c(\"v-spacer\"),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { color: \"regular\" },\n                          on: { click: _vm.cancelDialog },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"No\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { color: \"primary\" },\n                          on: { click: _vm.applyDialog },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"Yes\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-dialog\",\n            {\n              attrs: { persistent: \"\", \"max-width\": \"350\" },\n              on: {\n                keydown: function ($event) {\n                  if (\n                    !$event.type.indexOf(\"key\") &&\n                    _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                      \"Esc\",\n                      \"Escape\",\n                    ])\n                  )\n                    return null\n                  return (() => (_vm.deleteDialog = false)).apply(\n                    null,\n                    arguments\n                  )\n                },\n              },\n              model: {\n                value: _vm.deleteDialog,\n                callback: function ($$v) {\n                  _vm.deleteDialog = $$v\n                },\n                expression: \"deleteDialog\",\n              },\n            },\n            [\n              _c(\n                \"v-card\",\n                [\n                  _c(\"v-card-title\", { staticClass: \"text-h4\" }, [\n                    _vm._v(\n                      \"\\n        \" +\n                        _vm._s(\n                          _vm.$gettext(\"Delete \") + _vm.scenarioToDelete + \" ?\"\n                        ) +\n                        \"\\n      \"\n                    ),\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"v-card-text\", { staticClass: \"text-h6\" }, [\n                    _vm._v(\n                      \"\\n        \" +\n                        _vm._s(\n                          _vm.$gettext(\n                            \"The scenario will be permanently deleted\"\n                          )\n                        ) +\n                        \"\\n      \"\n                    ),\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-card-actions\",\n                    [\n                      _c(\"v-spacer\"),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { color: \"regular\" },\n                          on: { click: () => (_vm.deleteDialog = false) },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"Cancel\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { color: \"error\" },\n                          on: { click: _vm.deleteScenario },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"Delete\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-dialog\",\n            {\n              attrs: { persistent: \"\", \"max-width\": \"290\" },\n              on: {\n                keydown: [\n                  function ($event) {\n                    if (\n                      !$event.type.indexOf(\"key\") &&\n                      _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                    )\n                      return null\n                    return _vm.createProject.apply(null, arguments)\n                  },\n                  function ($event) {\n                    if (\n                      !$event.type.indexOf(\"key\") &&\n                      _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                        \"Esc\",\n                        \"Escape\",\n                      ])\n                    )\n                      return null\n                    return _vm.cancel.apply(null, arguments)\n                  },\n                ],\n              },\n              model: {\n                value: _vm.copyDialog,\n                callback: function ($$v) {\n                  _vm.copyDialog = $$v\n                },\n                expression: \"copyDialog\",\n              },\n            },\n            [\n              _c(\n                \"v-card\",\n                [\n                  _c(\"v-card-title\", { staticClass: \"text-h5\" }, [\n                    _vm._v(\n                      \"\\n        \" +\n                        _vm._s(\n                          _vm.selectedScenario\n                            ? _vm.$gettext(\"copy\") + \" \" + _vm.selectedScenario\n                            : _vm.$gettext(\"New Scenario\")\n                        ) +\n                        \"\\n      \"\n                    ),\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-card-text\",\n                    [\n                      _c(\n                        \"v-container\",\n                        [\n                          _c(\n                            \"v-col\",\n                            { attrs: { cols: \"12\" } },\n                            [\n                              _c(\"v-text-field\", {\n                                attrs: {\n                                  autofocus: \"\",\n                                  label: _vm.$gettext(\"name\"),\n                                },\n                                model: {\n                                  value: _vm.input,\n                                  callback: function ($$v) {\n                                    _vm.input = $$v\n                                  },\n                                  expression: \"input\",\n                                },\n                              }),\n                            ],\n                            1\n                          ),\n                        ],\n                        1\n                      ),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-card-text\",\n                    { style: { textAlign: \"center\", color: \"red\" } },\n                    [\n                      _vm._v(\n                        \"\\n        \" + _vm._s(_vm.errorMessage) + \"\\n      \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-card-actions\",\n                    [\n                      _c(\"v-spacer\"),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { color: \"grey\", text: \"\" },\n                          on: { click: _vm.closeCopy },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"Cancel\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { color: \"green darken-1\", text: \"\" },\n                          on: { click: _vm.createProject },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.$gettext(\"ok\")) +\n                              \"\\n        \"\n                          ),\n                        ]\n                      ),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\n\nimport s3 from '@src/AWSClient'\nconst $gettext = s => s\n\nexport default {\n  name: 'ScenariosExplorer',\n  components: {\n\n  },\n\n  props: [],\n  events: [],\n  data () {\n    return {\n      menu: false,\n      showDialog: false,\n      modelScen: '',\n      localModel: '',\n      localScen: '',\n      errorMessage: '',\n      copyDialog: false,\n      selectedScenario: null,\n      scenarioToDelete: null,\n      input: '',\n      deleteDialog: false,\n      loading: false,\n      protectedScens: ['base'],\n\n    }\n  },\n  computed: {\n    projectIsEmpty () { return this.$store.getters.projectIsEmpty },\n    loggedIn () { return this.$store.getters.loggedIn },\n    scenariosList () {\n      // sort by alphabetical order, with protectedScens one one top\n      const arr = this.$store.getters.scenariosList\n      return arr.sort((a, b) => {\n        if (this.protectedScens.includes(a.scenario)) {\n          return -1 // `a` comes before `b`\n        } else if (this.protectedScens.includes(b.scenario)) {\n          return 1 // `b` comes before `a`\n        } else {\n          // default sorting, not case sensitive!\n          return a.scenario.localeCompare(b.scenario, undefined, { sensitivity: 'base' })\n        }\n      })\n    },\n    modelsList () { return this.$store.getters.bucketList },\n    model () { return this.$store.getters.model },\n    scenario () { return this.$store.getters.scenario },\n  },\n  watch: {\n    menu (val) {\n      if (val) {\n        this.$store.dispatch('getScenario', { model: this.localModel })\n      }\n    },\n    async localModel (val) {\n      this.$store.commit('setScenariosList', [])\n      this.loading = true\n      // try {\n      //  this.localConfig = await s3.readJson(val, 'quenedi.config.json')\n      // } catch (err) {\n      // not an error.\n      // }\n\n      await this.$store.dispatch('getScenario', { model: val })\n      this.loading = false\n    },\n  },\n  mounted () {\n    this.localModel = this.modelsList[0]\n  },\n\n  methods: {\n    selectScenario (val) {\n      this.modelScen = val.model + val.scenario\n      this.localScen = val.scenario\n      if (val.scenario) {\n        if (this.projectIsEmpty) {\n          this.loadProject()\n        } else {\n          this.showDialog = true\n        }\n      }\n    },\n    async loadProject () {\n      this.$store.commit('run/cleanRun')\n      this.$store.commit('setModel', this.localModel)\n      this.$store.commit('setScenario', this.localScen)\n      await this.$store.dispatch('run/getParameters', {\n        model: this.localModel,\n        path: this.localScen + '/inputs/params.json',\n      })\n\n      this.$router.push({ name: 'Import', query: { s3Path: this.localModel } })\n      this.menu = false\n    },\n\n    applyDialog () {\n      this.menu = false\n      this.showDialog = false\n      this.loadProject()\n    },\n    cancelDialog () {\n      // reset vmodel back to loaded scenario\n      this.modelScen = this.model + this.scenario\n      this.localScen = this.scenario\n      this.showDialog = false\n      this.menu = false\n    },\n    deleteScenario () {\n      this.deleteDialog = false\n      s3.deleteFolder(this.localModel, this.scenarioToDelete).then(resp => {\n        this.deleteDialog = false\n        this.$store.dispatch('getScenario', { model: this.localModel })\n        this.$store.commit('changeNotification',\n          { text: $gettext('Scenario deleted'), autoClose: true, color: 'success' })\n      }).catch((err) => {\n        this.deleteDialog = false\n        console.error(err)\n        this.$store.commit('changeNotification',\n          { text: $gettext('An error occured'), autoClose: true, color: 'error' })\n      })\n    },\n    async createProject () {\n      if (this.input === '') {\n        this.errorMessage = 'Please enter a name'\n      } else if (this.input.includes('/')) {\n        this.errorMessage = 'cannot have / in name'\n      } else if (this.scenariosList.map(p => p.scenario).includes(this.input)) {\n        this.errorMessage = 'project already exist'\n      } else {\n        try {\n          if (this.selectedScenario) {\n            // this is a copy\n            await s3.copyFolder(this.localModel, this.selectedScenario, this.input)\n            this.$store.commit('changeNotification',\n              { text: $gettext('Scenario successfully copied'), autoClose: true, color: 'success' })\n          } else {\n            // this is a new project\n            // copy the parameters file from Base. this will create a new project .\n            const base = this.protectedScens[0]\n            await s3.copyFolder(this.localModel, base + '/inputs/params.json', this.input)\n            this.$store.commit('changeNotification',\n              { text: $gettext('Scenario created'), autoClose: true, color: 'success' })\n          }\n        } catch (err) { this.$store.commit('changeAlert', err); this.selectedScenario = null }\n        this.closeCopy()\n        this.loading = true\n        // wait 500ms to fetch the scenarios to make sure its available on the DB\n        setTimeout(() => {\n          this.$store.dispatch('getScenario', { model: this.localModel }).then(() => { this.loading = false })\n            .catch((err) => { this.$store.commit('changeAlert', err); this.loading = false })\n        }, 500)\n      }\n    },\n\n    closeCopy () {\n      this.copyDialog = false\n      this.input = ''\n      this.selectedScenario = null\n      this.errorMessage = ''\n    },\n\n  },\n}\n</script>\n<template>\n  <section v-if=\"loggedIn && modelsList.length>0\">\n    <v-menu\n      v-model=\"menu\"\n      :close-on-click=\"!showDialog && !deleteDialog && !copyDialog\"\n      :close-on-content-click=\"false\"\n      max-width=\"460px\"\n      offset-y\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <div\n          class=\"title\"\n          v-bind=\"attrs\"\n          v-on=\"on\"\n        >\n          {{ scenario? model + '/' + scenario: $gettext('Projects') }}\n        </div>\n      </template>\n      <v-card>\n        <v-tabs\n          v-model=\"localModel\"\n          show-arrows\n          fixed-tabs\n        >\n          <v-tab\n            v-for=\"tab in modelsList\"\n            :key=\"tab\"\n            :href=\"'#'+tab\"\n          >\n            {{ tab }}\n          </v-tab>\n        </v-tabs>\n        <v-list-item\n          v-for=\"scen in scenariosList\"\n          :key=\"scen.model + scen.scenario\"\n          :value=\"scen.model + scen.scenario\"\n          :class=\"{ 'is-active': modelScen === scen.model + scen.scenario}\"\n          two-line\n          @click=\"selectScenario(scen)\"\n        >\n          <v-list-item-content>\n            <v-list-item-title>{{ scen.scenario }}</v-list-item-title>\n            <v-list-item-subtitle>{{ scen.lastModified }}</v-list-item-subtitle>\n            <v-list-item-subtitle>{{ scen.userEmail }}</v-list-item-subtitle>\n          </v-list-item-content>\n          <v-btn\n            icon\n            class=\"ma-1\"\n            @click.stop=\"()=>{copyDialog=true; selectedScenario=scen.scenario; input = scen.scenario +' copy'}\"\n          >\n            <v-icon\n              small\n              color=\"regular\"\n            >\n              fas fa-copy\n            </v-icon>\n          </v-btn>\n          <v-btn\n            icon\n            :disabled=\"(scen.model+scen.scenario===modelScen) || (protectedScens.includes(scen.scenario))\"\n            class=\"ma-1\"\n            @click.stop=\"()=>{deleteDialog=true; scenarioToDelete=scen.scenario;}\"\n          >\n            <v-icon\n              small\n              color=\"grey\"\n            >\n              {{ protectedScens.includes(scen.scenario)? 'fas fa-lock':'fas fa-trash' }}\n            </v-icon>\n          </v-btn>\n        </v-list-item>\n        <v-list-item v-show=\"loading\">\n          <v-spacer />\n          <v-progress-circular\n            color=\"primary\"\n            indeterminate\n          />\n          <v-spacer />\n        </v-list-item>\n        <v-divider />\n        <v-list-item>\n          <v-btn\n            text\n            @click=\"()=>{copyDialog=true; selectedScenario=null; input = ''}\"\n          >\n            {{ $gettext('new scenario') }}\n          </v-btn>\n        </v-list-item>\n      </v-card>\n    </v-menu>\n    <v-dialog\n      v-model=\"showDialog\"\n      persistent\n      max-width=\"350\"\n      @keydown.enter=\"applyDialog\"\n      @keydown.esc=\"cancelDialog\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h4\">\n          {{ $gettext(\"Load Scenario?\") }}\n        </v-card-title>\n        <v-card-text class=\"text-h6\">\n          {{ $gettext(\"This will ERASE the current project\") }}\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"cancelDialog\"\n          >\n            {{ $gettext(\"No\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"primary\"\n            @click=\"applyDialog\"\n          >\n            {{ $gettext(\"Yes\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog\n      v-model=\"deleteDialog\"\n      persistent\n      max-width=\"350\"\n      @keydown.esc=\"()=>deleteDialog=false\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h4\">\n          {{ $gettext(\"Delete \")+ scenarioToDelete+' ?' }}\n        </v-card-title>\n        <v-card-text class=\"text-h6\">\n          {{ $gettext(\"The scenario will be permanently deleted\") }}\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"()=>deleteDialog=false\"\n          >\n            {{ $gettext(\"Cancel\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"error\"\n            @click=\"deleteScenario\"\n          >\n            {{ $gettext(\"Delete\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-dialog\n      v-model=\"copyDialog\"\n      persistent\n      max-width=\"290\"\n      @keydown.enter=\"createProject\"\n      @keydown.esc=\"cancel\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          {{ selectedScenario? $gettext(\"copy\") +' '+ selectedScenario : $gettext('New Scenario') }}\n        </v-card-title>\n        <v-card-text>\n          <v-container>\n            <v-col cols=\"12\">\n              <v-text-field\n                v-model=\"input\"\n                autofocus\n                :label=\"$gettext('name')\"\n              />\n            </v-col>\n          </v-container>\n        </v-card-text>\n        <v-card-text :style=\"{textAlign: 'center',color:'red'}\">\n          {{ errorMessage }}\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer />\n\n          <v-btn\n            color=\"grey\"\n            text\n            @click=\"closeCopy\"\n          >\n            {{ $gettext(\"Cancel\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"green darken-1\"\n            text\n            @click=\"createProject\"\n          >\n            {{ $gettext(\"ok\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n.title {\n  font-size: 1.2em;\n  padding-left: 1.2rem;\n  color:var(--v-secondarydark-base);\n}\n.is-active{\n  opacity:1;\n  background-color:var(--v-primary-base);\n\n}\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScenariosExplorer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScenariosExplorer.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScenariosExplorer.vue?vue&type=style&index=0&id=15c50a5a&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScenariosExplorer.vue?vue&type=style&index=0&id=15c50a5a&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ScenariosExplorer.vue?vue&type=template&id=15c50a5a&scoped=true&\"\nimport script from \"./ScenariosExplorer.vue?vue&type=script&lang=js&\"\nexport * from \"./ScenariosExplorer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ScenariosExplorer.vue?vue&type=style&index=0&id=15c50a5a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15c50a5a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"","<script>\nimport Profile from '../utils/Profile.vue'\nimport ScenariosExplorer from './ScenariosExplorer.vue'\nexport default {\n  name: 'Toolbar',\n  components: { Profile, ScenariosExplorer },\n  data () {\n    return {\n      dialog: true,\n    }\n  },\n\n  watch: {\n    '$vuetify.theme.dark' (val) {\n      this.$store.commit('changeDarkMode', val)\n    },\n  },\n\n  methods: {\n    handleChangeLanguage (lang) {\n      this.$vuetify.lang.current = lang\n      this.$language.current = lang\n    },\n  },\n}\n</script>\n<template>\n  <v-toolbar\n    :class=\"'app-toolbar elevation-4'\"\n    dense\n  >\n    <v-img\n      :src=\"require('@static/systra_logo.png')\"\n      contain\n      max-width=\"6rem\"\n    />\n    <span class=\"copyright\">©</span>\n    <div class=\"app-name\">\n      Quetzal Network Editor\n    </div>\n\n    <v-spacer />\n    <div>\n      <ScenariosExplorer />\n    </div>\n    <v-spacer />\n    <div>\n      <v-tooltip bottom>\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            icon\n            v-bind=\"attrs\"\n            href=\"https://github.com/systragroup/quetzal-network-editor\"\n            target=\"_blank\"\n            v-on=\"on\"\n          >\n            <v-icon>\n              fab fa-github\n            </v-icon>\n          </v-btn>\n        </template>\n        <span>GitHub</span>\n      </v-tooltip>\n    </div>\n    <div class=\"switch\">\n      <v-switch\n        v-model=\"$vuetify.theme.dark\"\n        append-icon=\"fas fa-moon\"\n      />\n    </div>\n    <div>\n      <v-menu\n        offset-y\n        close-delay=\"100\"\n        transition=\"slide-y-transition\"\n      >\n        <template v-slot:activator=\"{ on: on,attrs:attrs }\">\n          <v-btn\n            text\n            class=\"language active\"\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            {{ $language.current }}\n          </v-btn>\n        </template>\n        <v-list>\n          <v-list-item\n            v-for=\"(language, lang) in $language.available\"\n            :key=\"lang\"\n            :class=\"language\"\n\n            @click=\"()=>handleChangeLanguage(lang)\"\n          >\n            {{ language.toUpperCase() }}\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </div>\n    <div>\n      <Profile />\n    </div>\n  </v-toolbar>\n</template>\n\n<style lang=\"scss\" scoped>\n.app-toolbar {\n  z-index: 100;\n  height: 50px !important;\n  display: flex;\n  color: $secondary !important;\n  position: relative;\n}\n.login {\n  padding-left: 50px;\n}\n.project-name {\n  font-size: 1.3em;\n}\n.app-name {\n  font-size: 1.2em;\n  padding-left: 1.2rem;\n  color:var(--v-secondarydark-base);\n}\n.copyright {\n  font-size: 0.9rem;\n  padding-left: 5px;\n  padding-top: 1rem;\n  color:var(--v-secondarydark-base);\n}\n.languages-container {\n  display: flex;\n}\n.switch {\n  display: flex;\n  padding-top: 1rem;\n  padding-left:1rem;\n  align-items: center;\n  justify-content: center;\n  color: $grey-light;\n  cursor: pointer;\n}\n.language {\n  width: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: $grey-light;\n  cursor: pointer;\n  transition: 0.3s;\n}\n.language.active, .language:hover {\n  color:var(--v-secondarydark-base);\n}\n.language:last-child {\n  border-right: 0;\n}\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=4d444598&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=4d444598&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Toolbar.vue?vue&type=template&id=4d444598&scoped=true&\"\nimport script from \"./Toolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Toolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Toolbar.vue?vue&type=style&index=0&id=4d444598&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d444598\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"transition\",\n    { attrs: { name: \"fade\" } },\n    [\n      _c(\n        \"v-navigation-drawer\",\n        {\n          staticClass: \"drawer elevation-4\",\n          attrs: {\n            app: \"\",\n            stateless: \"\",\n            temporary: !_vm.mini,\n            \"mini-variant\": _vm.mini,\n            \"mini-variant-width\": 50,\n          },\n          on: {\n            \"update:miniVariant\": function ($event) {\n              _vm.mini = $event\n            },\n            \"update:mini-variant\": function ($event) {\n              _vm.mini = $event\n            },\n          },\n          model: {\n            value: _vm.drawer,\n            callback: function ($$v) {\n              _vm.drawer = $$v\n            },\n            expression: \"drawer\",\n          },\n        },\n        [\n          _c(\n            \"div\",\n            {\n              staticClass: \"drawer-header\",\n              on: {\n                click: function ($event) {\n                  _vm.mini = !_vm.mini\n                },\n              },\n            },\n            [\n              _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.mini ? \"fa fa-bars\" : \"fas fa-angle-left\") +\n                    \"\\n      \"\n                ),\n              ]),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-list\",\n            { staticClass: \"drawer-list\", attrs: { dense: \"\" } },\n            [\n              _vm._l(_vm.getDisplayedRoutes(), function (item, key) {\n                return _c(\n                  \"v-list-item\",\n                  {\n                    key: key,\n                    staticClass: \"drawer-list-item\",\n                    class: [\n                      _vm.$route.name === item.name\n                        ? \"drawer-list-item-selected\"\n                        : \"\",\n                    ],\n                    style: {\n                      marginTop:\n                        item.name === \"Save\"\n                          ? \"auto\"\n                          : item.name === \"ResultMap\"\n                          ? \"5rem\"\n                          : \"0\",\n                    },\n                    attrs: {\n                      disabled:\n                        item.name === \"Save\" &&\n                        (!_vm.$store.getters.scenario || _vm.isProtected),\n                    },\n                    on: {\n                      click: function ($event) {\n                        return _vm.handleClickMenuItem(item)\n                      },\n                    },\n                    nativeOn: {\n                      click: function ($event) {\n                        $event.stopPropagation()\n                      },\n                    },\n                  },\n                  [\n                    _c(\n                      \"v-list-item-action\",\n                      {\n                        class:\n                          item.name === \"Save\" &&\n                          (!_vm.$store.getters.scenario || _vm.isProtected)\n                            ? \"drawer-list-item-icon-disabled\"\n                            : \"drawer-list-item-icon\",\n                      },\n                      [\n                        item.name === \"Run\" &&\n                        (_vm.running || _vm.runError || !_vm.runSychronized)\n                          ? _c(\n                              \"v-badge\",\n                              {\n                                attrs: {\n                                  \"offset-x\": _vm.running ? \"12px\" : \"6px\",\n                                  \"offset-y\": _vm.running ? \"10px\" : \"11px\",\n                                  color: _vm.runError\n                                    ? \"error\"\n                                    : !_vm.runSychronized\n                                    ? \"warning\"\n                                    : \"\",\n                                  icon:\n                                    _vm.runError || !_vm.runSychronized\n                                      ? \"fa-solid fa-exclamation\"\n                                      : \"\",\n                                },\n                                scopedSlots: _vm._u(\n                                  [\n                                    {\n                                      key: \"badge\",\n                                      fn: function () {\n                                        return [\n                                          item.name === \"Run\" && _vm.running\n                                            ? _c(\"v-progress-circular\", {\n                                                attrs: {\n                                                  size: \"18\",\n                                                  width: \"4\",\n                                                  color: \"primary\",\n                                                  indeterminate: \"\",\n                                                },\n                                              })\n                                            : _vm._e(),\n                                        ]\n                                      },\n                                      proxy: true,\n                                    },\n                                  ],\n                                  null,\n                                  true\n                                ),\n                              },\n                              [\n                                _vm._v(\" \"),\n                                _c(\n                                  \"v-icon\",\n                                  {\n                                    attrs: {\n                                      small: \"\",\n                                      title: _vm.$gettext(item.title),\n                                    },\n                                  },\n                                  [\n                                    _vm._v(\n                                      \"\\n              \" +\n                                        _vm._s(item.icon) +\n                                        \"\\n            \"\n                                    ),\n                                  ]\n                                ),\n                              ],\n                              1\n                            )\n                          : item.name === \"Save\" && _vm.saving\n                          ? _c(\n                              \"v-badge\",\n                              {\n                                attrs: {\n                                  \"offset-x\": \"12px\",\n                                  \"offset-y\": \"10px\",\n                                  color: \"\",\n                                },\n                                scopedSlots: _vm._u(\n                                  [\n                                    {\n                                      key: \"badge\",\n                                      fn: function () {\n                                        return [\n                                          _c(\"v-progress-circular\", {\n                                            attrs: {\n                                              size: \"18\",\n                                              width: \"4\",\n                                              color: \"primary\",\n                                              indeterminate: \"\",\n                                            },\n                                          }),\n                                        ]\n                                      },\n                                      proxy: true,\n                                    },\n                                  ],\n                                  null,\n                                  true\n                                ),\n                              },\n                              [\n                                _vm._v(\" \"),\n                                _c(\n                                  \"v-icon\",\n                                  {\n                                    attrs: {\n                                      small: \"\",\n                                      title: _vm.$gettext(item.title),\n                                    },\n                                  },\n                                  [\n                                    _vm._v(\n                                      \"\\n              \" +\n                                        _vm._s(item.icon) +\n                                        \"\\n            \"\n                                    ),\n                                  ]\n                                ),\n                              ],\n                              1\n                            )\n                          : _c(\n                              \"v-icon\",\n                              {\n                                attrs: {\n                                  small: \"\",\n                                  title: _vm.$gettext(item.title),\n                                },\n                              },\n                              [\n                                _vm._v(\n                                  \"\\n            \" +\n                                    _vm._s(item.icon) +\n                                    \"\\n          \"\n                                ),\n                              ]\n                            ),\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _c(\n                      \"v-list-item-content\",\n                      [\n                        _c(\n                          \"v-list-item-title\",\n                          { style: { marginLeft: \"20px\", color: \"white\" } },\n                          [\n                            _vm._v(\n                              \"\\n            \" +\n                                _vm._s(_vm.$gettext(item.title)) +\n                                \"\\n          \"\n                            ),\n                          ]\n                        ),\n                      ],\n                      1\n                    ),\n                  ],\n                  1\n                )\n              }),\n              _vm._v(\" \"),\n              _c(\n                \"v-list-item\",\n                {\n                  staticClass: \"version-number\",\n                  style: { fontSize: 24 - 2 * _vm.version.length + \"px\" },\n                },\n                [_c(\"span\", [_vm._v(_vm._s(_vm.version))])]\n              ),\n            ],\n            2\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport Router from '@src/router/index'\nconst version = require('../../../package.json').version\n\nexport default {\n  name: 'NavigationDrawer',\n  data () {\n    return {\n      leftSidenav: false,\n      drawer: true,\n      mini: true,\n      menuItems: [],\n      version: version,\n      saving: false,\n    }\n  },\n  computed: {\n    running () { return this.$store.getters['run/running'] },\n    runError () { return this.$store.getters['run/error'] },\n    runSychronized () { return this.$store.getters['run/synchronized'] },\n    isProtected () {\n      return this.$store.getters.protected.includes(this.$store.getters.scenario)\n    },\n  },\n  created () {\n    this.menuItems = Router.options.routes.concat({\n      name: 'Save',\n      icon: 'fa-solid fa-save',\n      title: this.$gettext('Save'),\n    })\n    this.menuItems = this.menuItems.concat({\n      name: 'Export',\n      icon: 'fa-solid fa-download',\n      title: this.$gettext('Export'),\n    })\n  },\n  methods: {\n    getDisplayedRoutes () {\n      return this.menuItems.filter(o => o.icon)\n    },\n    getRouteTitle (route) {\n      const tpl = this.$gettext('%{s}')\n      return this.$gettextInterpolate(tpl, { s: route.title })\n    },\n    handleClickMenuItem (route) {\n      switch (route.name) {\n        case 'Export':\n          this.$store.dispatch('exportFiles', 'all')\n          break\n        case 'Save':\n          this.saving = true\n          this.$store.dispatch('exportToS3', 'saveOnly').then(\n            () => {\n              this.saving = false\n              this.$store.commit('changeNotification',\n                { text: this.$gettext('Scenario saved'), autoClose: true, color: 'success' })\n            }).catch(\n            err => {\n              this.saving = false\n              this.$store.commit('changeAlert', err)\n            })\n          break\n        default :\n          this.$router.push(route.path).catch(() => {})\n          this.mini = true\n          break\n      }\n    },\n\n  },\n}\n</script>\n<template>\n  <transition name=\"fade\">\n    <v-navigation-drawer\n      v-model=\"drawer\"\n      app\n      class=\"drawer elevation-4\"\n      stateless\n      :temporary=\"!mini\"\n      :mini-variant.sync=\"mini\"\n      :mini-variant-width=\"50\"\n    >\n      <div\n        class=\"drawer-header\"\n        @click=\"mini = !mini\"\n      >\n        <v-icon\n          small\n        >\n          {{ mini ? 'fa fa-bars' : 'fas fa-angle-left' }}\n        </v-icon>\n      </div>\n      <v-list\n        dense\n        class=\"drawer-list\"\n      >\n        <v-list-item\n          v-for=\"( item,key ) in getDisplayedRoutes()\"\n          :key=\"key\"\n          class=\"drawer-list-item\"\n          :disabled=\"(item.name === 'Save') && ((!$store.getters.scenario) || (isProtected))\"\n          :class=\"[ $route.name === item.name ? 'drawer-list-item-selected' : '']\"\n          :style=\"{marginTop: item.name === 'Save' ? 'auto' : item.name ==='ResultMap'? '5rem' : '0' }\"\n          @click.native.stop\n          @click=\"handleClickMenuItem(item)\"\n        >\n          <v-list-item-action\n            :class=\"(item.name === 'Save') && ((!$store.getters.scenario) || (isProtected))?\n              'drawer-list-item-icon-disabled':'drawer-list-item-icon'\"\n          >\n            <v-badge\n              v-if=\"item.name==='Run' && (running || runError || !runSychronized)\"\n              :offset-x=\"running ? '12px' : '6px'\"\n              :offset-y=\"running ? '10px' : '11px'\"\n              :color=\"runError ? 'error' : !runSychronized ? 'warning' : ''\"\n              :icon=\"(runError || !runSychronized) ? 'fa-solid fa-exclamation' : ''\"\n            >\n              <template v-slot:badge>\n                <v-progress-circular\n                  v-if=\"item.name==='Run' && (running)\"\n                  size=\"18\"\n                  width=\"4\"\n                  color=\"primary\"\n                  indeterminate\n                />\n              </template>\n              <v-icon\n                small\n                :title=\"$gettext(item.title)\"\n              >\n                {{ item.icon }}\n              </v-icon>\n            </v-badge>\n            <v-badge\n              v-else-if=\"item.name==='Save' && saving\"\n              :offset-x=\" '12px' \"\n              :offset-y=\" '10px' \"\n              :color=\" ''\"\n            >\n              <template v-slot:badge>\n                <v-progress-circular\n                  size=\"18\"\n                  width=\"4\"\n                  color=\"primary\"\n                  indeterminate\n                />\n              </template>\n              <v-icon\n                small\n                :title=\"$gettext(item.title)\"\n              >\n                {{ item.icon }}\n              </v-icon>\n            </v-badge>\n            <v-icon\n              v-else\n              small\n              :title=\"$gettext(item.title)\"\n            >\n              {{ item.icon }}\n            </v-icon>\n          </v-list-item-action>\n          <v-list-item-content>\n            <v-list-item-title :style=\"{marginLeft: '20px', color: 'white'}\">\n              {{ $gettext(item.title) }}\n            </v-list-item-title>\n          </v-list-item-content>\n        </v-list-item>\n        <v-list-item\n          class=\"version-number\"\n          :style=\"{fontSize:24 - 2*version.length+'px'}\"\n        >\n          <span>{{ version }}</span>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n  </transition>\n</template>\n<style lang=\"scss\" scoped>\n.drawer {\n  background-color: var(--v-secondary-base) !important;\n}\n.drawer-header {\n  width: 100%;\n  height: 50px;\n  border-bottom: 1px solid white;\n  background-color: var(--v-secondary-base);\n  color: white;\n  display: flex;\n  align-items: center;\n  padding-left: 18px;\n  cursor: pointer;\n}\n.drawer-list {\n  height: calc(100% - 50px);\n  display: flex;\n\n  flex-direction: column;\n  padding: 20px 0;\n}\n.drawer-list-item {\n  padding: 0 13px !important;\n  justify-content: flex-start !important;\n  color:white ;\n  flex: 0;\n  transition: 0.3s;\n}\n.version-number {\n  justify-content: flex-start ;\n  color:white !important;\n  margin-bottom:-1rem;\n  flex: 0;\n}\n.drawer-list-item-icon {\n  display: flex !important;\n  flex-flow: row !important;\n  justify-content: center !important;\n  margin: 0 !important;\n  color: white;\n}\n.drawer-list-item-icon-disabled {\n  display: flex !important;\n  flex-flow: row !important;\n  justify-content: center !important;\n  margin: 0 !important;\n  opacity: 0.4;\n}\n.drawer-list-item-selected {\n  background-color: var(--v-secondarydarkfix-base);\n}\n.drawer-list-item:hover {\n  background-color: var(--v-secondary-base);\n}\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationDrawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationDrawer.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationDrawer.vue?vue&type=style&index=0&id=4d6e03d4&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationDrawer.vue?vue&type=style&index=0&id=4d6e03d4&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./NavigationDrawer.vue?vue&type=template&id=4d6e03d4&scoped=true&\"\nimport script from \"./NavigationDrawer.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationDrawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NavigationDrawer.vue?vue&type=style&index=0&id=4d6e03d4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d6e03d4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    { staticClass: \"text-center\" },\n    [\n      _c(\n        \"v-bottom-sheet\",\n        {\n          attrs: { persistent: \"\" },\n          model: {\n            value: _vm.sheet,\n            callback: function ($$v) {\n              _vm.sheet = $$v\n            },\n            expression: \"sheet\",\n          },\n        },\n        [\n          _c(\"v-sheet\", { staticClass: \"text-center\" }, [\n            _c(\n              \"div\",\n              [\n                _c(\n                  \"v-alert\",\n                  { attrs: { prominent: \"\", type: \"error\" } },\n                  [\n                    _c(\n                      \"v-row\",\n                      [\n                        _c(\"v-col\", { staticClass: \"grow\" }, [\n                          _c(\"h2\", [\n                            _vm._v(\n                              \"\\n                ERROR: \" +\n                                _vm._s(_vm.err.name) +\n                                \"\\n              \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"p\", [\n                            _vm._v(\n                              \"\\n                \" +\n                                _vm._s(_vm.err.message) +\n                                \"\\n              \"\n                            ),\n                          ]),\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\n                          \"v-col\",\n                          { staticClass: \"shrink\" },\n                          [\n                            _c(\n                              \"v-btn\",\n                              { attrs: { icon: \"\" }, on: { click: _vm.close } },\n                              [\n                                _c(\"v-icon\", [\n                                  _vm._v(\n                                    \"\\n                  fas fa-times\\n                \"\n                                  ),\n                                ]),\n                              ],\n                              1\n                            ),\n                          ],\n                          1\n                        ),\n                      ],\n                      1\n                    ),\n                  ],\n                  1\n                ),\n              ],\n              1\n            ),\n          ]),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'Alert',\n  components: {\n\n  },\n\n  props: [],\n  events: [],\n  data () {\n    return {\n      sheet: false,\n\n    }\n  },\n  computed: {\n    err () {\n      return this.$store.getters.alert\n    },\n  },\n  watch: {\n    err (val) {\n      if (val.name) {\n        this.sheet = true\n        console.error(val)\n      }\n    },\n  },\n  methods: {\n    close () {\n      this.$store.commit('changeAlert', {})\n      this.sheet = !this.sheet\n    },\n  },\n}\n</script>\n<template>\n  <div class=\"text-center\">\n    <v-bottom-sheet\n      v-model=\"sheet\"\n      persistent\n    >\n      <v-sheet\n        class=\"text-center\"\n      >\n        <div>\n          <v-alert\n            prominent\n            type=\"error\"\n          >\n            <v-row>\n              <v-col class=\"grow\">\n                <h2>\n                  ERROR: {{ err.name }}\n                </h2>\n                <p>\n                  {{ err.message }}\n                </p>\n              </v-col>\n              <v-col class=\"shrink\">\n                <v-btn\n                  icon\n                  @click=\"close\"\n                >\n                  <v-icon>\n                    fas fa-times\n                  </v-icon>\n                </v-btn>\n              </v-col>\n            </v-row>\n          </v-alert>\n        </div>\n      </v-sheet>\n    </v-bottom-sheet>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Alert.vue?vue&type=template&id=785f7271&scoped=true&\"\nimport script from \"./Alert.vue?vue&type=script&lang=js&\"\nexport * from \"./Alert.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"785f7271\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Toolbar from '@comp/layout/Toolbar.vue'\nimport NavigationDrawer from '@comp/layout/NavigationDrawer.vue'\nimport Alert from '@comp/utils/Alert.vue'\nimport auth from './auth'\nimport s3 from './AWSClient'\nimport { axiosClient } from './axiosClient'\n\nexport default {\n  name: 'App',\n  components: {\n    Toolbar,\n    NavigationDrawer,\n    Alert,\n  },\n  data () {\n    return {\n      snackbar: false,\n    }\n  },\n  computed: {\n    notification () {\n      return this.$store.getters.notification\n    },\n    loading () {\n      return this.$store.getters.loading\n    },\n  },\n  watch: {\n    notification () {\n      this.snackbar = !!this.notification.text\n    },\n  },\n  created () {\n    // init links and node to empty one (new project)\n    this.$store.commit('initNetworks')\n    this.$store.commit('changeDarkMode', this.$vuetify.theme.dark)\n\n    if (auth.auth.isUserSignedIn()) {\n      auth.login()\n      s3.login()\n      axiosClient.loginAll(this.$store.getters.idToken)\n    }\n  },\n  methods: {\n    closeSnackbar () {\n      this.snackbar = false\n      this.$store.notification = {}\n    },\n    onResize () {\n      // -50 for the ToolBar\n      this.$store.commit('changeWindowHeight', this.$refs.container.clientHeight - 50)\n    },\n  },\n}\n</script>\n<template>\n  <v-app class=\"app\">\n    <NavigationDrawer />\n    <div\n      ref=\"container\"\n      v-resize=\"onResize\"\n      class=\"container\"\n    >\n      <Toolbar />\n      <transition name=\"fade\">\n        <router-view />\n      </transition>\n    </div>\n    <v-overlay :value=\"loading\">\n      <v-progress-circular\n        indeterminate\n        size=\"64\"\n      />\n    </v-overlay>\n    <v-snackbar\n      v-model=\"snackbar\"\n      :timeout=\"notification.autoClose ? 3000 : -1\"\n      transition=\"slide-y-reverse-transition\"\n      :color=\"notification.color? notification.color : 'white'\"\n      :class=\"`snackbar-${notification.type}`\"\n    >\n      <span class=\"snackbar-text\">\n        {{ $gettext(notification.text) }}\n      </span>\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn\n          small\n          color=\"secondarydark\"\n          text\n          v-bind=\"attrs\"\n          @click=\"closeSnackbar\"\n        >\n          {{ $gettext(\"Close\") }}\n        </v-btn>\n      </template>\n    </v-snackbar>\n    <Alert />\n  </v-app>\n</template>\n<style lang=\"scss\" scoped>\n.app {\n  background-color: $grey-ultralight !important;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.snackbar-text{\n  color:var(--v-secondarydark-base);\n}\n.container {\n  height: 100%;\n  margin-left: 50px;\n  width: calc(100% - 50px);\n  max-width: calc(100% - 50px);\n  padding: 0;\n}\n.container.login {\n  margin-left: 0;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=65f09c9a&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=65f09c9a&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=65f09c9a&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=65f09c9a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65f09c9a\",\n  null\n  \n)\n\nexport default component.exports","import '@fortawesome/fontawesome-free/css/all.css'\nimport 'vuetify/dist/vuetify.min.css'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport '@scss/app.scss'\n\nimport Vue from 'vue'\nimport GetTextPlugin from 'vue-gettext'\nimport { store } from './store'\nimport router from './router'\nimport Vuetify from 'vuetify'\nimport 'promise-polyfill/src/polyfill'\n\nimport fr from 'vuetify/es5/locale/fr'\nimport en from 'vuetify/es5/locale/en'\nimport de from 'vuetify/es5/locale/de'\nimport es from 'vuetify/es5/locale/es'\nimport pt from 'vuetify/es5/locale/pt'\n\nimport translations from './translations.json'\n\nimport App from './App.vue'\nconst mapboxPublicKey = process.env.VUE_APP_MAPBOX_PUBLIC_KEY\nconsole.assert(mapboxPublicKey)\n\nconst languageMixin = {\n  methods: {\n    $selectBestLanguage (browserLangs, supportedLangs) {\n      if (browserLangs.length) {\n        for (const lang of browserLangs) {\n          const parts = lang.toLowerCase().split('-')\n          if (parts.length > 1) {\n            parts[1] = parts[1].toUpperCase()\n          }\n          const normLang = parts.join('-')\n          if (supportedLangs.includes(normLang)) {\n            return normLang\n          } else if (parts.length > 1 && supportedLangs.includes(parts[0])) {\n            return parts[0]\n          }\n        }\n        return supportedLangs[0]\n      } else {\n        return supportedLangs[0]\n      }\n    },\n  },\n}\n\nconst bestLanguage = languageMixin.methods.$selectBestLanguage(navigator.languages, ['en', 'fr', 'es', 'de', 'pt'])\nconst darkMode = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)\n\nVue.use(Vuetify)\nVue.use(GetTextPlugin, {\n  autoAddKeyAttributes: true,\n  availableLanguages: {\n    en: 'English',\n    fr: 'Français',\n    es: 'Español',\n    de: 'Deutsch',\n    pt: 'Português',\n  },\n  defaultLanguage: bestLanguage,\n  translations,\n  silent: true,\n})\n\nVue.config.productionTip = false\nVue.config.devtools = true\nVue.config.performance = false\n\nconst vuetify = new Vuetify({\n  theme: {\n    dark: !!darkMode,\n    options: {\n      customProperties: true,\n    },\n    themes: {\n\n      light: {\n        primary: '#B5E0D6',\n        primarydark: '#7EBAAC',\n        secondary: '#2C3E4E',\n        secondarydark: '#1A242C',\n        secondarydarkfix: '#1A242C',\n        secondarylight: '#334453',\n        background: '#808080',\n        lightgrey: '#E3E4E6',\n        white: '#fff',\n        black: '#000000',\n        mediumgrey: '#9E9E9E',\n        darkgrey: '#5B5B5C',\n        accent: '#2C3E4E',\n        linksprimary: '#7EBAAC',\n        linkssecondary: '#B5E0D6',\n        chart: {\n          lightgreen: '#CDDC39',\n          darkgreen: '#4CAF50',\n          lightblue: '#00BCD4',\n          darkblue: '#2196F3',\n          purple: '#673AB7',\n          pink: '#E91E63',\n          orange: '#FF7B30',\n          yellow: '#FFC107',\n        },\n      },\n      dark: {\n        primary: '#2196F3',\n        primarydark: '#191919',\n        secondary: '#263238',\n        secondarydark: '#fff',\n        secondarydarkfix: '#1A242C',\n        lightgrey: '#403f3f',\n        mediumgrey: '#575757',\n        darkgrey: '#d9d9db',\n        background: '#000000',\n        white: '#000000',\n        black: '#fff',\n        success: '#2196F3',\n        accent: '#d3c1b1',\n        linksprimary: '#2196F3',\n        linkssecondary: '#90CAF9',\n        chart: {\n          lightgreen: '#CDDC39',\n          darkgreen: '#4CAF50',\n          lightblue: '#00BCD4',\n          darkblue: '#2196F3',\n          purple: '#673AB7',\n          pink: '#E91E63',\n          orange: '#FF7B30',\n          yellow: '#FFC107',\n        },\n\n      },\n\n    },\n  },\n  icons: {\n    iconfont: 'fa',\n  },\n  lang: {\n    locales: { fr, en, es, de, pt },\n    current: bestLanguage,\n  },\n})\n\nVue.mixin(languageMixin)\n\nVue.mixin({\n  methods: {\n    $flatEdges (obj, recurse = false) {\n      let flatObj = obj\n      if (obj.edges) {\n        flatObj = obj.edges.map(edge => edge.node)\n      }\n      if (recurse) {\n        for (const key in obj) {\n          if (obj[key] !== null && typeof obj[key] === 'object') {\n            obj[key] = this.$flatEdges(obj[key], true)\n          }\n        }\n      }\n      return flatObj\n    },\n  },\n})\n\nconst app = new Vue({\n\n  router,\n  store,\n  vuetify,\n  render: h => h(App),\n  template: '<App/>',\n})\n\napp.$mount('#app')\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\"input\", {\n        ref: \"zipInput\",\n        staticStyle: { display: \"none\" },\n        attrs: { id: \"zip-input\", type: \"file\", accept: \".zip\" },\n        on: { change: _vm.readZip },\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"layout\" },\n        [\n          _c(\"div\", {\n            staticClass: \"layout-overlay\",\n            class: { \"animate-layer\": _vm.loggedIn },\n          }),\n          _vm._v(\" \"),\n          _c(\n            \"v-card\",\n            { staticClass: \"card\", class: { \"animate-login\": _vm.loggedIn } },\n            [\n              _c(\n                \"v-row\",\n                [\n                  _c(\n                    \"v-col\",\n                    [\n                      _c(\n                        \"v-card-text\",\n                        { style: { textAlign: \"center\" } },\n                        [\n                          _c(\"div\", { staticClass: \"title\" }, [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(_vm.$gettext(\"Select a Project\")) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(\n                                  _vm.$gettext(\n                                    \"Log in and select an existing project or create a new project from project navigation menu\"\n                                  )\n                                ) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", { staticClass: \"subtitle\" }, [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(_vm.$gettext(\"OR\")) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", { staticClass: \"title\" }, [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(\n                                  _vm.$gettext(\"Continue Without Project\")\n                                ) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(\n                                  _vm.$gettext(\n                                    \"Start importing files individually \"\n                                  )\n                                ) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", { staticClass: \"subtitle\" }, [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(_vm.$gettext(\"OR\")) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", { staticClass: \"title\" }, [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(_vm.$gettext(\"Load Zip\")) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-tooltip\",\n                            {\n                              attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                              scopedSlots: _vm._u([\n                                {\n                                  key: \"activator\",\n                                  fn: function ({ on, attrs }) {\n                                    return [\n                                      _c(\n                                        \"v-btn\",\n                                        _vm._g(\n                                          _vm._b(\n                                            {\n                                              attrs: { color: \"normal\" },\n                                              on: {\n                                                click: function ($event) {\n                                                  return _vm.buttonHandle(\"zip\")\n                                                },\n                                              },\n                                            },\n                                            \"v-btn\",\n                                            attrs,\n                                            false\n                                          ),\n                                          on\n                                        ),\n                                        [\n                                          _c(\n                                            \"v-icon\",\n                                            { attrs: { small: \"\", left: \"\" } },\n                                            [\n                                              _vm._v(\n                                                \"\\n                    fas fa-file-archive\\n                  \"\n                                              ),\n                                            ]\n                                          ),\n                                          _vm._v(\n                                            \"\\n                  \" +\n                                              _vm._s(\n                                                _vm.$gettext(\"Load Zip File\")\n                                              ) +\n                                              \"\\n                \"\n                                          ),\n                                        ],\n                                        1\n                                      ),\n                                    ]\n                                  },\n                                },\n                              ]),\n                            },\n                            [\n                              _vm._v(\" \"),\n                              _c(\"span\", [\n                                _vm._v(\n                                  _vm._s(\n                                    _vm.$gettext(\"Load zip files containing\")\n                                  )\n                                ),\n                              ]),\n                              _vm._v(\" \"),\n                              _c(\"br\"),\n                              _vm._v(\" \"),\n                              _c(\"span\", [\n                                _vm._v(\n                                  _vm._s(\n                                    _vm.$gettext(\n                                      \"inputs/pt/ nodes.geojson and links.geojson\"\n                                    )\n                                  )\n                                ),\n                              ]),\n                              _vm._v(\" \"),\n                              _c(\"br\"),\n                              _vm._v(\" \"),\n                              _c(\"span\", [\n                                _vm._v(\n                                  _vm._s(\n                                    _vm.$gettext(\n                                      \"inputs/road/ road_nodes.geojson and road_links.geojson\"\n                                    )\n                                  )\n                                ),\n                              ]),\n                              _vm._v(\" \"),\n                              _c(\"br\"),\n                              _vm._v(\" \"),\n                              _c(\"span\", [\n                                _vm._v(\n                                  _vm._s(_vm.$gettext(\"outputs/ anything\"))\n                                ),\n                              ]),\n                            ]\n                          ),\n                          _vm._v(\" \"),\n                          _c(\"div\", { staticClass: \"subtitle\" }, [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(_vm.$gettext(\"OR\")) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", { staticClass: \"title\" }, [\n                            _vm._v(\n                              \"\\n              \" +\n                                _vm._s(_vm.$gettext(\"Load Example\")) +\n                                \"\\n            \"\n                            ),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-menu\",\n                            {\n                              attrs: {\n                                \"offset-y\": \"\",\n                                \"nudge-left\": \"70\",\n                                \"close-delay\": \"100\",\n                                transition: \"slide-y-transition\",\n                              },\n                              scopedSlots: _vm._u([\n                                {\n                                  key: \"activator\",\n                                  fn: function ({ on: on, attrs: attrs }) {\n                                    return [\n                                      _c(\n                                        \"v-btn\",\n                                        _vm._g(\n                                          _vm._b(\n                                            {\n                                              style: {\n                                                \"margin-bottom\": \"2rem\",\n                                              },\n                                            },\n                                            \"v-btn\",\n                                            attrs,\n                                            false\n                                          ),\n                                          on\n                                        ),\n                                        [\n                                          _vm._v(\n                                            \"\\n                  \" +\n                                              _vm._s(\n                                                _vm.$gettext(\"Load Example\")\n                                              ) +\n                                              \"\\n                \"\n                                          ),\n                                        ]\n                                      ),\n                                    ]\n                                  },\n                                },\n                              ]),\n                            },\n                            [\n                              _vm._v(\" \"),\n                              _c(\n                                \"v-list\",\n                                [\n                                  _c(\n                                    \"v-list-item\",\n                                    {\n                                      attrs: { link: \"\" },\n                                      on: {\n                                        click: () =>\n                                          _vm.buttonHandle(\"example1\"),\n                                      },\n                                    },\n                                    [\n                                      _c(\"v-list-item-title\", [\n                                        _vm._v(\n                                          \"\\n                    \" +\n                                            _vm._s(_vm.$gettext(\"PT & Road\")) +\n                                            \"\\n                  \"\n                                        ),\n                                      ]),\n                                    ],\n                                    1\n                                  ),\n                                  _vm._v(\" \"),\n                                  _c(\n                                    \"v-list-item\",\n                                    {\n                                      attrs: { link: \"\" },\n                                      on: {\n                                        click: () =>\n                                          _vm.buttonHandle(\"example2\"),\n                                      },\n                                    },\n                                    [\n                                      _c(\"v-list-item-title\", [\n                                        _vm._v(\n                                          \"\\n                    \" +\n                                            _vm._s(\n                                              _vm.$gettext(\n                                                \"PT, Road, Zones, OD & Results\"\n                                              )\n                                            ) +\n                                            \"\\n                  \"\n                                        ),\n                                      ]),\n                                    ],\n                                    1\n                                  ),\n                                ],\n                                1\n                              ),\n                            ],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\"v-divider\"),\n                          _vm._v(\" \"),\n                          _c(\n                            \"div\",\n                            [\n                              _c(\n                                \"v-tooltip\",\n                                {\n                                  attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                                  scopedSlots: _vm._u([\n                                    {\n                                      key: \"activator\",\n                                      fn: function ({ on, attrs }) {\n                                        return [\n                                          _c(\n                                            \"v-btn\",\n                                            _vm._g(\n                                              _vm._b(\n                                                {\n                                                  on: {\n                                                    click: function ($event) {\n                                                      return _vm.buttonHandle(\n                                                        \"newProject\"\n                                                      )\n                                                    },\n                                                  },\n                                                },\n                                                \"v-btn\",\n                                                attrs,\n                                                false\n                                              ),\n                                              on\n                                            ),\n                                            [\n                                              _vm._v(\n                                                \"\\n                    \" +\n                                                  _vm._s(\n                                                    _vm.$gettext(\"Delete All\")\n                                                  ) +\n                                                  \"\\n                  \"\n                                              ),\n                                            ]\n                                          ),\n                                        ]\n                                      },\n                                    },\n                                  ]),\n                                },\n                                [\n                                  _vm._v(\" \"),\n                                  _c(\"span\", [\n                                    _vm._v(\n                                      _vm._s(\n                                        _vm.$gettext(\n                                          \"Delete all network and start from scratch\"\n                                        )\n                                      )\n                                    ),\n                                  ]),\n                                ]\n                              ),\n                              _vm._v(\" \"),\n                              _c(\n                                \"v-btn\",\n                                {\n                                  attrs: {\n                                    disabled: !_vm.filesAdded,\n                                    color: \"primary\",\n                                  },\n                                  on: {\n                                    click: function ($event) {\n                                      return _vm.login()\n                                    },\n                                  },\n                                },\n                                [\n                                  _vm._v(\n                                    \"\\n                \" +\n                                      _vm._s(_vm.$gettext(\"Go!\")) +\n                                      \"\\n              \"\n                                  ),\n                                ]\n                              ),\n                            ],\n                            1\n                          ),\n                        ],\n                        1\n                      ),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"v-divider\", { attrs: { vertical: \"\" } }),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-col\",\n                    [\n                      _c(\"FileLoader\", {\n                        on: {\n                          networkLoaded: (e) =>\n                            _vm.loadNetwork(e.links, e.nodes, e.type),\n                          parametersLoaded: (data) => _vm.loadParams(data),\n                          outputsLoaded: (data) =>\n                            _vm.loadOutputs(data, \"local\"),\n                          inputsLoaded: (data) =>\n                            _vm.loadOtherInputs(data, \"local\"),\n                        },\n                      }),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: { persistent: \"\", \"max-width\": \"350\" },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                return _vm.applyDialog.apply(null, arguments)\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                _vm.showDialog = false\n              },\n            ],\n          },\n          model: {\n            value: _vm.showDialog,\n            callback: function ($$v) {\n              _vm.showDialog = $$v\n            },\n            expression: \"showDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            [\n              _c(\"v-card-title\", { staticClass: \"text-h5\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Overwrite current Project ?\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.showDialog = !_vm.showDialog\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"No\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: { click: _vm.applyDialog },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Yes\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    [\n      _c(\"div\", { staticClass: \"row\" }, [\n        _c(\"input\", {\n          ref: \"fileInput\",\n          staticStyle: { display: \"none\" },\n          attrs: { id: \"file-input\", type: \"file\", accept: \".geojson\" },\n          on: { change: _vm.readFile },\n        }),\n        _vm._v(\" \"),\n        _c(\"input\", {\n          ref: \"otherInputs\",\n          staticStyle: { display: \"none\" },\n          attrs: { id: \"other-inputs\", type: \"file\", multiple: \"multiple\" },\n          on: { change: _vm.readOtherInputs },\n        }),\n        _vm._v(\" \"),\n        _c(\"input\", {\n          ref: \"otherOutputs\",\n          staticStyle: { display: \"none\" },\n          attrs: {\n            id: \"other-outputs\",\n            type: \"file\",\n            multiple: \"multiple\",\n            accept: \".geojson, .json\",\n          },\n          on: { change: _vm.readOtherOutputs },\n        }),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          { staticClass: \"container\" },\n          [\n            _c(\"v-icon\", { staticClass: \"type-icon\" }, [\n              _vm._v(\"\\n        fas fa-project-diagram\\n      \"),\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"subtitle\" },\n              [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"PT Network\")) +\n                    \"\\n        \"\n                ),\n                _c(\n                  \"v-icon\",\n                  {\n                    staticClass: \"check-icon\",\n                    attrs: { color: _vm.linksIsEmpty ? \"warning\" : \"success\" },\n                  },\n                  [\n                    _vm._v(\n                      \"\\n          \" +\n                        _vm._s(\n                          _vm.linksIsEmpty ? \"fas fa-times\" : \"fas fa-check\"\n                        ) +\n                        \"\\n        \"\n                    ),\n                  ]\n                ),\n              ],\n              1\n            ),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"element\" },\n              [\n                _c(\n                  \"v-menu\",\n                  {\n                    attrs: {\n                      \"offset-y\": \"\",\n                      \"close-delay\": \"100\",\n                      transition: \"slide-y-transition\",\n                    },\n                    scopedSlots: _vm._u([\n                      {\n                        key: \"activator\",\n                        fn: function ({ on: on, attrs: attrs }) {\n                          return [\n                            _c(\n                              \"v-btn\",\n                              _vm._g(\n                                _vm._b(\n                                  { attrs: { icon: \"\", outlined: \"\" } },\n                                  \"v-btn\",\n                                  attrs,\n                                  false\n                                ),\n                                on\n                              ),\n                              [\n                                _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                                  _vm._v(\n                                    \"\\n                fa-solid fa-upload\\n              \"\n                                  ),\n                                ]),\n                              ],\n                              1\n                            ),\n                          ]\n                        },\n                      },\n                    ]),\n                  },\n                  [\n                    _vm._v(\" \"),\n                    _c(\n                      \"v-list\",\n                      [\n                        _c(\n                          \"v-list-item\",\n                          {\n                            attrs: {\n                              link: \"\",\n                              disabled:\n                                _vm.loadedType == \"road\" ||\n                                _vm.localLinksLoaded,\n                            },\n                            on: { click: () => _vm.buttonHandle(\"PT links\") },\n                          },\n                          [\n                            _c(\"v-list-item-title\", [\n                              _vm._v(\n                                \"\\n                \" +\n                                  _vm._s(_vm.$gettext(\"Links\")) +\n                                  \"\\n              \"\n                              ),\n                            ]),\n                          ],\n                          1\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"v-list-item\",\n                          {\n                            attrs: {\n                              link: \"\",\n                              disabled:\n                                _vm.loadedType == \"road\" ||\n                                _vm.localNodesLoaded,\n                            },\n                            on: { click: () => _vm.buttonHandle(\"PT nodes\") },\n                          },\n                          [\n                            _c(\"v-list-item-title\", [\n                              _vm._v(\n                                \"\\n                \" +\n                                  _vm._s(_vm.$gettext(\"Nodes\")) +\n                                  \"\\n              \"\n                              ),\n                            ]),\n                          ],\n                          1\n                        ),\n                      ],\n                      1\n                    ),\n                  ],\n                  1\n                ),\n              ],\n              1\n            ),\n          ],\n          1\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          { staticClass: \"container\" },\n          [\n            _c(\"v-icon\", { staticClass: \"type-icon\" }, [\n              _vm._v(\"\\n        fas fa-project-diagram\\n      \"),\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"subtitle\" },\n              [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Road Network\")) +\n                    \"\\n        \"\n                ),\n                _c(\n                  \"v-icon\",\n                  {\n                    staticClass: \"check-icon\",\n                    attrs: { color: _vm.rlinksIsEmpty ? \"warning\" : \"success\" },\n                  },\n                  [\n                    _vm._v(\n                      \"\\n          \" +\n                        _vm._s(\n                          _vm.rlinksIsEmpty ? \"fas fa-times\" : \"fas fa-check\"\n                        ) +\n                        \"\\n        \"\n                    ),\n                  ]\n                ),\n              ],\n              1\n            ),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"element\" },\n              [\n                _c(\n                  \"v-menu\",\n                  {\n                    attrs: {\n                      \"offset-y\": \"\",\n                      \"close-delay\": \"100\",\n                      transition: \"slide-y-transition\",\n                    },\n                    scopedSlots: _vm._u([\n                      {\n                        key: \"activator\",\n                        fn: function ({ on: on, attrs: attrs }) {\n                          return [\n                            _c(\n                              \"v-btn\",\n                              _vm._g(\n                                _vm._b(\n                                  { attrs: { icon: \"\", outlined: \"\" } },\n                                  \"v-btn\",\n                                  attrs,\n                                  false\n                                ),\n                                on\n                              ),\n                              [\n                                _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                                  _vm._v(\n                                    \"\\n                fa-solid fa-upload\\n              \"\n                                  ),\n                                ]),\n                              ],\n                              1\n                            ),\n                          ]\n                        },\n                      },\n                    ]),\n                  },\n                  [\n                    _vm._v(\" \"),\n                    _c(\n                      \"v-list\",\n                      [\n                        _c(\n                          \"v-list-item\",\n                          {\n                            attrs: {\n                              link: \"\",\n                              disabled:\n                                _vm.loadedType == \"PT\" || _vm.localLinksLoaded,\n                            },\n                            on: { click: () => _vm.buttonHandle(\"road links\") },\n                          },\n                          [\n                            _c(\"v-list-item-title\", [\n                              _vm._v(\n                                \"\\n                \" +\n                                  _vm._s(_vm.$gettext(\"Links\")) +\n                                  \"\\n              \"\n                              ),\n                            ]),\n                          ],\n                          1\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"v-list-item\",\n                          {\n                            attrs: {\n                              link: \"\",\n                              disabled:\n                                _vm.loadedType == \"PT\" || _vm.localNodesLoaded,\n                            },\n                            on: { click: () => _vm.buttonHandle(\"road nodes\") },\n                          },\n                          [\n                            _c(\"v-list-item-title\", [\n                              _vm._v(\n                                \"\\n                \" +\n                                  _vm._s(_vm.$gettext(\"Nodes\")) +\n                                  \"\\n              \"\n                              ),\n                            ]),\n                          ],\n                          1\n                        ),\n                      ],\n                      1\n                    ),\n                  ],\n                  1\n                ),\n              ],\n              1\n            ),\n          ],\n          1\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          { staticClass: \"container\" },\n          [\n            _c(\"v-icon\", { staticClass: \"type-icon\" }, [\n              _vm._v(\"\\n        fas fa-cog\\n      \"),\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"subtitle\" },\n              [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Parameters\")) +\n                    \"\\n        \"\n                ),\n                _c(\n                  \"v-icon\",\n                  {\n                    staticClass: \"check-icon\",\n                    attrs: { color: _vm.paramsIsEmpty ? \"warning\" : \"success\" },\n                  },\n                  [\n                    _vm._v(\n                      \"\\n          \" +\n                        _vm._s(\n                          _vm.paramsIsEmpty ? \"fas fa-times\" : \"fas fa-check\"\n                        ) +\n                        \"\\n        \"\n                    ),\n                  ]\n                ),\n              ],\n              1\n            ),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"element\" },\n              [\n                _c(\n                  \"v-btn\",\n                  {\n                    attrs: { icon: \"\", outlined: \"\" },\n                    on: { click: () => _vm.buttonHandle(\"parameters\") },\n                  },\n                  [\n                    _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                      _vm._v(\"\\n            fa-solid fa-upload\\n          \"),\n                    ]),\n                  ],\n                  1\n                ),\n              ],\n              1\n            ),\n          ],\n          1\n        ),\n      ]),\n      _vm._v(\" \"),\n      _c(\"v-divider\"),\n      _vm._v(\" \"),\n      _c(\"FilesList\", { on: { importButton: (e) => _vm.buttonHandle(e) } }),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\"div\", [\n    _c(\"div\", { staticClass: \"files-container\" }, [\n      _c(\"div\", { staticClass: \"title-box\" }, [\n        _c(\"h1\", { staticClass: \"title\" }, [\n          _vm._v(\n            \"\\n        \" + _vm._s(_vm.$gettext(\"Other Inputs\")) + \"\\n      \"\n          ),\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          { staticClass: \"upload-button\" },\n          [\n            _c(\n              \"v-btn\",\n              {\n                attrs: { icon: \"\", outlined: \"\" },\n                on: { click: () => _vm.$emit(\"importButton\", \"inputs\") },\n              },\n              [\n                _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                  _vm._v(\"\\n            fa-solid fa-upload\\n          \"),\n                ]),\n              ],\n              1\n            ),\n          ],\n          1\n        ),\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"list\" },\n        _vm._l(_vm.inputFiles, function (item, key) {\n          return _c(\"li\", { key: key }, [\n            _vm._v(\"\\n        \" + _vm._s(item.name) + \"\\n      \"),\n          ])\n        }),\n        0\n      ),\n    ]),\n    _vm._v(\" \"),\n    _c(\"div\", { staticClass: \"files-container\" }, [\n      _c(\"div\", { staticClass: \"title-box\" }, [\n        _c(\"h1\", { staticClass: \"title\" }, [\n          _vm._v(\"\\n        \" + _vm._s(_vm.$gettext(\"Outputs\")) + \"\\n      \"),\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          { staticClass: \"upload-button\" },\n          [\n            _c(\n              \"v-btn\",\n              {\n                attrs: { icon: \"\", outlined: \"\" },\n                on: { click: () => _vm.$emit(\"importButton\", \"outputs\") },\n              },\n              [\n                _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                  _vm._v(\"\\n            fa-solid fa-upload\\n          \"),\n                ]),\n              ],\n              1\n            ),\n          ],\n          1\n        ),\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"list\" },\n        _vm._l(_vm.outputFiles, function (item, key) {\n          return _c(\"li\", { key: key }, [\n            _vm._v(\"\\n        \" + _vm._s(item.name) + \"\\n      \"),\n          ])\n        }),\n        0\n      ),\n    ]),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<!-- eslint-disable no-case-declarations -->\n<script>\n\n// const $gettext = s => s\n\nexport default {\n  name: 'FilesList',\n  events: ['importButton'],\n\n  data () {\n    return {\n      filesPanel: [0, 1],\n    }\n  },\n\n  computed: {\n    loadedFiles () { return this.$store.getters.loadedFiles },\n    inputFiles () { return this.loadedFiles.filter(file => file.name.startsWith('input')) },\n    outputFiles () { return this.loadedFiles.filter(file => file.name.startsWith('output')) },\n  },\n\n  mounted () {\n  },\n}\n</script>\n<template>\n  <div>\n    <div class=\"files-container\">\n      <div class=\"title-box\">\n        <h1 class=\"title\">\n          {{ $gettext('Other Inputs') }}\n        </h1>\n        <div class=\"upload-button\">\n          <v-btn\n            icon\n            outlined\n            @click=\"()=>$emit('importButton','inputs')\"\n          >\n            <v-icon small>\n              fa-solid fa-upload\n            </v-icon>\n          </v-btn>\n        </div>\n      </div>\n      <div class=\"list\">\n        <li\n          v-for=\"(item, key) in inputFiles\"\n          :key=\"key\"\n        >\n          {{ item.name }}\n        </li>\n      </div>\n    </div>\n    <div class=\"files-container\">\n      <div class=\"title-box\">\n        <h1 class=\"title\">\n          {{ $gettext('Outputs') }}\n        </h1>\n        <div class=\"upload-button\">\n          <v-btn\n            icon\n            outlined\n            @click=\"()=>$emit('importButton','outputs')\"\n          >\n            <v-icon small>\n              fa-solid fa-upload\n            </v-icon>\n          </v-btn>\n        </div>\n      </div>\n      <div class=\"list\">\n        <li\n          v-for=\"(item, key) in outputFiles\"\n          :key=\"key\"\n        >\n          {{ item.name }}\n        </li>\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n.files-container{\n  height: 13rem;\n  border-radius: 5px;\n  background:var(--v-background-lighten4);\n  display: flex;\n  margin: 10px 0px 0px 00px;\n  flex-direction: column;\n\n}\n.title-box {\n  display: flex;\n  flex-direction: row;\n  background:var(--v-background-lighten3);\n\n  border-radius: 5px 5px 0px 0px;\n  padding: 0.5rem 0.5rem 0.5rem 1rem;\n\n}\n.title{\n  font-size: 2em !important;\n  font-weight: bold;\n}\n.upload-button {\n  margin-left: auto;\n}\n.list {\n  font-size: 1em;\n  font-weight: bold;\n  //border: 1px solid red;\n  overflow-y: auto;\n  padding: 1rem;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilesList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilesList.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilesList.vue?vue&type=style&index=0&id=72099582&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilesList.vue?vue&type=style&index=0&id=72099582&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./FilesList.vue?vue&type=template&id=72099582&scoped=true&\"\nimport script from \"./FilesList.vue?vue&type=script&lang=js&\"\nexport * from \"./FilesList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FilesList.vue?vue&type=style&index=0&id=72099582&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72099582\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileLoader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileLoader.vue?vue&type=script&lang=js&\"","<!-- eslint-disable no-case-declarations -->\n<script>\nimport { serializer } from '@comp/utils/serializer.js'\nimport { readFileAsText, readFileAsBytes } from '@comp/utils/utils.js'\nimport FilesList from '@comp/import/FilesList.vue'\n\n// const $gettext = s => s\n\nexport default {\n  name: 'FileLoader',\n  events: ['networkLoaded', 'parametersLoaded', 'outputsLoaded', 'inputsLoaded'],\n  components: {\n    FilesList,\n  },\n  data () {\n    return {\n      loadedLinks: {},\n      loadedNodes: {},\n      loadedType: '',\n      choice: '',\n\n    }\n  },\n\n  computed: {\n    rlinksIsEmpty () { return this.$store.getters.rlinksIsEmpty },\n    linksIsEmpty () { return this.$store.getters.linksIsEmpty },\n    paramsIsEmpty () { return this.$store.getters['run/parametersIsEmpty'] },\n    localLinksLoaded () { return Object.keys(this.loadedLinks).length !== 0 },\n    localNodesLoaded () { return Object.keys(this.loadedNodes).length !== 0 },\n    localFilesAreLoaded () {\n      return (this.localLinksLoaded && this.localNodesLoaded)\n    },\n\n  },\n  watch: {\n\n    localFilesAreLoaded (val) {\n      if (val) {\n        this.$emit('networkLoaded', { links: this.loadedLinks, nodes: this.loadedNodes, type: this.loadedType })\n        this.loadedLinks = {}\n        this.loadedNodes = {}\n        this.loadedType = ''\n      }\n    },\n\n  },\n\n  methods: {\n    buttonHandle (choice) {\n      this.choice = choice\n      if (this.choice === 'inputs') {\n        this.$refs.otherInputs.click()\n        document.getElementById('other-inputs').value = '' // clean it for next file\n      } else if (this.choice === 'outputs') {\n        this.$refs.otherOutputs.click()\n        document.getElementById('other-outputs').value = '' // clean it for next file\n      } else {\n        this.$refs.fileInput.click()\n        document.getElementById('file-input').value = '' // clean it for next file\n      }\n    },\n    async readOtherInputs (event) {\n      // this.$store.commit('changeLoading', true)\n      this.$store.commit('changeLoading', true)\n      const fileList = []\n      const files = event.target.files\n      for (const file of files) {\n        const name = 'inputs/' + file.name\n        try {\n          const content = await readFileAsBytes(file)\n          fileList.push({ data: content, type: 'other', fileName: name })\n          this.$store.commit('changeLoading', false)\n        } catch (err) {\n          this.$store.commit('changeLoading', false)\n          this.$store.commit('changeAlert', err)\n        }\n      }\n      this.$store.commit('changeLoading', false)\n      this.$emit('inputsLoaded', fileList)\n\n      // this.$store.commit('changeLoading', false)\n    },\n    async readOtherOutputs (event) {\n      this.$store.commit('changeLoading', true)\n      const fileList = []\n      const files = event.target.files\n      for (const file of files) {\n        const name = 'outputs/' + file.name\n        const type = file.name.endsWith('.geojson') ? 'result' : 'matrix'\n        try {\n          let content = await readFileAsText(file)\n          content = JSON.parse(content)\n          fileList.push({ data: content, type: type, fileName: name })\n          this.$store.commit('changeLoading', false)\n        } catch (err) {\n          this.$store.commit('changeLoading', false)\n          this.$store.commit('changeAlert', err)\n        }\n      }\n      this.$store.commit('changeLoading', false)\n      this.$emit('outputsLoaded', fileList)\n    },\n    async readFile (event) {\n      this.$store.commit('changeLoading', true)\n      const files = event.target.files\n      // it is a geojson\n      if (files[0].name.slice(-7) !== 'geojson') {\n        this.$store.commit('changeLoading', false)\n        this.$store.commit('changeAlert', { name: 'ImportError', message: 'File must be a geojson' })\n        return\n      }\n      const name = files[0].name\n\n      try {\n        let data = await readFileAsText(files[0])\n        data = JSON.parse(data)\n        switch (this.choice) {\n          case 'PT links':\n            this.loadedLinks = serializer(data, name, 'LineString')\n            this.loadedType = 'PT'\n            break\n          case 'PT nodes':\n            this.loadedNodes = serializer(data, name, 'Point')\n            this.loadedType = 'PT'\n            break\n          case 'road links':\n            this.loadedLinks = serializer(data, name, 'LineString')\n            this.loadedType = 'road'\n            break\n          case 'road nodes':\n            this.loadedNodes = serializer(data, name, 'Point')\n            this.loadedType = 'road'\n            break\n          case 'parameters':\n            this.$emit('parametersLoaded', data)\n            break\n          default:\n            console.log('autre')\n        }\n        this.$store.commit('changeLoading', false)\n      } catch (err) {\n        this.$store.commit('changeLoading', false)\n        this.$store.commit('changeAlert', err)\n      }\n    },\n  },\n}\n</script>\n<template>\n  <div>\n    <div class=\"row\">\n      <input\n        id=\"file-input\"\n        ref=\"fileInput\"\n        type=\"file\"\n        style=\"display: none\"\n        accept=\".geojson\"\n        @change=\"readFile\"\n      >\n      <input\n        id=\"other-inputs\"\n        ref=\"otherInputs\"\n        type=\"file\"\n        style=\"display: none\"\n        multiple=\"multiple\"\n        @change=\"readOtherInputs\"\n      >\n      <input\n        id=\"other-outputs\"\n        ref=\"otherOutputs\"\n        type=\"file\"\n        style=\"display: none\"\n        multiple=\"multiple\"\n        accept=\".geojson, .json\"\n        @change=\"readOtherOutputs\"\n      >\n      <div class=\"container\">\n        <v-icon class=\"type-icon\">\n          fas fa-project-diagram\n        </v-icon>\n        <div class=\"subtitle\">\n          {{ $gettext('PT Network') }}\n          <v-icon\n            class=\"check-icon\"\n            :color=\"linksIsEmpty? 'warning':'success'\"\n          >\n            {{ linksIsEmpty? 'fas fa-times':'fas fa-check' }}\n          </v-icon>\n        </div>\n\n        <div class=\"element\">\n          <v-menu\n            offset-y\n            close-delay=\"100\"\n            transition=\"slide-y-transition\"\n          >\n            <template v-slot:activator=\"{ on: on,attrs:attrs }\">\n              <v-btn\n                icon\n                outlined\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon small>\n                  fa-solid fa-upload\n                </v-icon>\n              </v-btn>\n            </template>\n            <v-list>\n              <v-list-item\n                link\n                :disabled=\"loadedType=='road' || localLinksLoaded\"\n                @click=\"()=>buttonHandle('PT links')\"\n              >\n                <v-list-item-title>\n                  {{ $gettext('Links') }}\n                </v-list-item-title>\n              </v-list-item>\n              <v-list-item\n                link\n                :disabled=\"loadedType=='road' || localNodesLoaded\"\n                @click=\"()=>buttonHandle('PT nodes')\"\n              >\n                <v-list-item-title>\n                  {{ $gettext('Nodes') }}\n                </v-list-item-title>\n              </v-list-item>\n            </v-list>\n          </v-menu>\n        </div>\n      </div>\n      <div class=\"container\">\n        <v-icon class=\"type-icon\">\n          fas fa-project-diagram\n        </v-icon>\n        <div class=\"subtitle\">\n          {{ $gettext('Road Network') }}\n          <v-icon\n            class=\"check-icon\"\n            :color=\"rlinksIsEmpty? 'warning':'success'\"\n          >\n            {{ rlinksIsEmpty? 'fas fa-times':'fas fa-check' }}\n          </v-icon>\n        </div>\n\n        <div class=\"element\">\n          <v-menu\n            offset-y\n            close-delay=\"100\"\n            transition=\"slide-y-transition\"\n          >\n            <template v-slot:activator=\"{ on: on,attrs:attrs }\">\n              <v-btn\n                icon\n                outlined\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <v-icon\n                  small\n                >\n                  fa-solid fa-upload\n                </v-icon>\n              </v-btn>\n            </template>\n            <v-list>\n              <v-list-item\n                link\n                :disabled=\"loadedType=='PT' || localLinksLoaded\"\n                @click=\"()=>buttonHandle('road links')\"\n              >\n                <v-list-item-title>\n                  {{ $gettext('Links') }}\n                </v-list-item-title>\n              </v-list-item>\n              <v-list-item\n                link\n                :disabled=\"loadedType=='PT' || localNodesLoaded\"\n                @click=\"()=>buttonHandle('road nodes')\"\n              >\n                <v-list-item-title>\n                  {{ $gettext('Nodes') }}\n                </v-list-item-title>\n              </v-list-item>\n            </v-list>\n          </v-menu>\n        </div>\n      </div>\n      <div class=\"container\">\n        <v-icon class=\"type-icon\">\n          fas fa-cog\n        </v-icon>\n        <div class=\"subtitle\">\n          {{ $gettext('Parameters') }}\n          <v-icon\n            class=\"check-icon\"\n            :color=\"paramsIsEmpty? 'warning':'success'\"\n          >\n            {{ paramsIsEmpty? 'fas fa-times':'fas fa-check' }}\n          </v-icon>\n        </div>\n\n        <div class=\"element\">\n          <v-btn\n            icon\n            outlined\n            @click=\"()=>buttonHandle('parameters')\"\n          >\n            <v-icon small>\n              fa-solid fa-upload\n            </v-icon>\n          </v-btn>\n        </div>\n      </div>\n    </div>\n    <v-divider />\n    <FilesList\n      @importButton=\"(e)=>buttonHandle(e)\"\n    />\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n\n.row{\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 30px;\n\n}\n.container{\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  padding-left: 2em;\n  padding-right: 2em;\n\n}\n.type-icon{\n  padding-right: 0.2em;\n}\n.element{\n  margin-left: auto;\n}\n.check-icon{\n  padding-left: 1em;\n}\n.subtitle {\n  flex:2;\n  font-size: 1.5em;\n  font-weight: bold;\n\n}\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileLoader.vue?vue&type=style&index=0&id=b25de7ce&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileLoader.vue?vue&type=style&index=0&id=b25de7ce&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./FileLoader.vue?vue&type=template&id=b25de7ce&scoped=true&\"\nimport script from \"./FileLoader.vue?vue&type=script&lang=js&\"\nexport * from \"./FileLoader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FileLoader.vue?vue&type=style&index=0&id=b25de7ce&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b25de7ce\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=script&lang=js&\"","<!-- eslint-disable no-case-declarations -->\n<script>\nimport s3 from '../AWSClient'\nimport { extractZip, IndexAreDifferent, unzip, classFile } from '../components/utils/utils.js'\nimport { serializer } from '../components/utils/serializer.js'\nimport FileLoader from '@comp/import/FileLoader.vue'\n\nconst $gettext = s => s\n\nexport default {\n  name: 'Import',\n  components: {\n    FileLoader,\n\n  },\n\n  data () {\n    return {\n      loggedIn: false,\n      choice: null,\n      showDialog: false,\n\n      filesAdded: false,\n    }\n  },\n\n  computed: {\n    projectIsEmpty () { return this.$store.getters.projectIsEmpty },\n    s3Path () { return this.$route.query.s3Path },\n\n  },\n  watch: {\n    s3Path (val) {\n      if (val) this.loadFilesFromS3(val)\n    },\n\n  },\n  mounted () {\n    this.$store.commit('changeNotification', '')\n    if (this.s3Path) this.loadFilesFromS3(this.s3Path)\n  },\n  methods: {\n    login () {\n      // Leave time for animation to end (.animate-login and .animate-layer css rules)\n      setTimeout(() => {\n        this.$router.push('/Home').catch(() => {})\n      }, 300)\n    },\n\n    buttonHandle (choice) {\n      this.choice = choice\n      switch (this.choice) {\n        case 'zip':\n          this.$refs.zipInput.click()\n          document.getElementById('zip-input').value = '' // clean it for next file\n          break\n        case 'example1':\n          this.projectIsEmpty ? this.loadExample(['PT', 'road']) : this.showDialog = true\n          break\n        case 'example2':\n          this.projectIsEmpty ? this.loadExample(['PT', 'road', 'loaded', 'zones']) : this.showDialog = true\n          break\n        case 'newProject':\n          this.projectIsEmpty ? this.newProject() : this.showDialog = true\n          break\n      }\n    },\n\n    applyDialog () {\n      // this only happen when both files are loaded.\n      // remove links and nodes from store. (and filesAreLoaded)\n      this.$store.commit('initNetworks')\n      this.$store.commit('unloadLayers')\n      this.$store.commit('unloadProject')\n      this.$store.commit('run/cleanRun')\n\n      if (this.choice === 'example1') {\n        this.loadExample(['PT', 'road'])\n      } else if (this.choice === 'example2') {\n        this.loadExample(['PT', 'road', 'loaded', 'zones'])\n      } else if (this.choice === 'newProject') {\n        this.newProject()\n      }\n      this.showDialog = !this.showDialog\n    },\n\n    newProject () {\n      this.$store.commit('initNetworks')\n      this.$store.commit('unloadLayers')\n      this.$store.commit('unloadProject')\n      this.$store.commit('run/cleanRun')\n      this.$store.commit('changeNotification',\n        { text: $gettext('project overwrited'), autoClose: true, color: 'success' })\n    },\n\n    loadNetwork (links, nodes, type) {\n      if (type === 'PT') {\n        if (IndexAreDifferent(links, this.$store.getters.links) &&\n            IndexAreDifferent(nodes, this.$store.getters.nodes)) {\n          this.$store.commit('appendNewLinks', { links: links, nodes: nodes })\n          this.filesAdded = true\n        } else {\n          this.$store.commit('changeAlert', {\n            name: 'ImportError',\n            message: $gettext('there are duplicated links or nodes index. Import aborted'),\n          })\n        }\n      } else if (type === 'road') {\n        if (IndexAreDifferent(links, this.$store.getters.rlinks) &&\n            IndexAreDifferent(nodes, this.$store.getters.rnodes)) {\n          this.$store.commit('appendNewrLinks', { rlinks: links, rnodes: nodes })\n          this.filesAdded = true\n        } else {\n          this.$store.commit('changeAlert', {\n            name: 'ImportError',\n            message: $gettext('there are duplicated links or nodes index. Import aborted'),\n          })\n        }\n      }\n    },\n    loadParams (params) {\n      // TODO: verify params form!!\n      this.$store.commit('run/getLocalParameters', params)\n    },\n    loadOutputs (files, source) {\n      this.$store.commit('loadLayers', { files: files, name: source })\n    },\n    loadOtherInputs (files, source) {\n      this.$store.commit('loadOtherFiles', { files: files, source: source })\n    },\n\n    async readZip (event) {\n      try {\n        this.$store.commit('changeLoading', true)\n        const zfiles = event.target.files\n        // there is a file\n        if (!zfiles.length) {\n          this.$store.commit('changeLoading', false)\n          return\n        }\n        // it is a zip\n        if (zfiles[0].name.slice(-3) !== 'zip') {\n          this.$store.commit('changeLoading', false)\n          this.$store.commit('changeAlert', { name: 'ImportError', message: $gettext('file is not a zip') })\n          return\n        }\n        // read every selected zip and create a list of promises.\n        // each promises contain {links, nodes}\n\n        // when all files are read\n        const zipFiles = await extractZip(zfiles[0])\n        // asign first file to links and node var\n        // for each other files concat, concat to links and nodes\n        const files = zipFiles.files\n\n        const zipName = zipFiles.zipName\n        const ptFiles = files.filter(file => ['links', 'nodes'].includes(file?.type))\n        const roadFiles = files.filter(file => ['road_links', 'road_nodes'].includes(file?.type))\n        if (ptFiles.length % 2 !== 0) {\n          const err = new Error($gettext('Need the same number of links and nodes files.'))\n          err.name = 'ImportError'\n          throw err\n        }\n        if (roadFiles.length % 2 !== 0) {\n          const err = new Error($gettext('Need the same number of road_links and road_nodes files.'))\n          err.name = 'ImportError'\n          throw err\n        }\n        for (let i = 0; i < ptFiles.length / 2; i++) {\n          const links = files.filter(file => file.type === 'links')[i]\n          const nodes = files.filter(file => file.type === 'nodes')[i]\n          this.loadNetwork(\n            serializer(links.data, links.fileName, 'LineString'),\n            serializer(nodes.data, nodes.filesNames, 'Point'),\n            'PT')\n        } for (let i = 0; i < roadFiles.length / 2; i++) {\n          const links = files.filter(file => file.type === 'road_links')[0]\n          const nodes = files.filter(file => file.type === 'road_nodes')[0]\n          this.loadNetwork(\n            serializer(links.data, links.fileName, 'LineString'),\n            serializer(nodes.data, nodes.fileName, 'Point'),\n            'road')\n        }\n        // load params\n        const params = files.filter(file => file.type === 'params')\n        if (params.length > 0) {\n          this.loadParams(params[0].data)\n        }\n\n        this.loadOutputs(files.filter(file => ['result', 'matrix'].includes(file?.type), zipFiles))\n\n        this.loadOtherInputs(files.filter(file => file?.type === 'other'), zipName)\n\n        this.$store.commit('changeLoading', false)\n        this.$store.commit('changeLoading', false)\n      } catch (err) {\n        this.$store.commit('changeLoading', false)\n        this.$store.commit('changeAlert', err)\n      }\n    },\n\n    async loadFilesFromS3 () {\n      if (!this.projectIsEmpty) {\n        this.$store.commit('initNetworks')\n        this.$store.commit('unloadLayers')\n      }\n      this.$store.commit('changeLoading', true)\n      this.$router.replace({ query: null }) // remove query in url when page is load.\n\n      const model = this.$store.getters.model\n      const scen = this.$store.getters.scenario + '/'\n      const inputFolder = scen + 'inputs/'\n      const outputFolder = scen + 'outputs/'\n      const ptFolder = inputFolder + 'pt/'\n      const roadFolder = inputFolder + 'road/'\n      const rasterFolder = inputFolder + 'raster/'\n\n      const paths = {\n        links: ptFolder + 'links.geojson',\n        nodes: ptFolder + 'nodes.geojson',\n        rlinks: roadFolder + 'road_links.geojson',\n        rnodes: roadFolder + 'road_nodes.geojson',\n        params: scen + '/inputs/params.json',\n      }\n      let links = {}\n      let nodes = {}\n      try {\n        let filesList = await s3.listFiles(model, scen)\n        filesList = filesList.filter(name => !name.endsWith('/'))\n        // get PT Network\n        let filesNames = filesList.filter(name => name.startsWith(ptFolder))\n        if (filesNames.length > 0) {\n          links = await s3.readJson(model, paths.links)\n          nodes = await s3.readJson(model, paths.nodes)\n          this.loadNetwork(\n            serializer(links, paths.links, 'LineString'),\n            serializer(nodes, paths.nodes, 'Point'),\n            'PT')\n        }\n        // get Road Network\n        filesNames = filesList.filter(name => name.startsWith(roadFolder))\n        if (filesNames.length > 0) {\n          links = await s3.readJson(model, paths.rlinks)\n          nodes = await s3.readJson(model, paths.rnodes)\n          this.loadNetwork(\n            serializer(links, paths.rlinks, 'LineString'),\n            serializer(nodes, paths.rnodes, 'Point'),\n            'road')\n        }\n        // then load results layers.\n        filesNames = filesList.filter(name => name.startsWith(outputFolder))\n        filesNames = filesNames.filter(name => name.endsWith('.json') || name.endsWith('.geojson'))\n        const files = []\n        for (const file of filesNames) {\n          const content = await s3.readJson(model, file)\n          const name = file.split('/').slice(1).join('/')\n          files.push(classFile(name, content))\n        }\n        if (filesNames.length > 0) this.loadOutputs(files, 'db')\n\n        // load rasters (static geojson layers.)\n        filesNames = filesList.filter(name => name.startsWith(rasterFolder))\n        filesNames = filesNames.filter(name => name.endsWith('.geojson'))\n        const rasterFiles = []\n        for (const file of filesNames) {\n          let type = await s3.readJson(model, file)\n          type = type.features[0].geometry.type\n          rasterFiles.push({ name: file, type: type })\n        }\n        this.$store.commit('setRasterFiles', rasterFiles)\n\n        // add others inputs (and outputs pngs.) to the list of loaded Files\n        filesNames = filesList.filter(name => name.startsWith(inputFolder))\n        filesNames = filesNames.filter(name => !name.startsWith(ptFolder))\n        filesNames = filesNames.filter(name => !name.startsWith(roadFolder))\n        filesNames = filesNames.filter(name => !name.endsWith('params.json'))\n        const otherFiles = []\n        for (const file of filesNames) {\n          const name = file.slice(scen.length) // remove scen name from file\n          // provide no data. we will fetch it on S3 when we download.\n          otherFiles.push({ data: null, fileName: name, type: 'other' })\n        }\n        // add others inputs (and outputs pngs.) to the list of loaded Files\n        filesNames = filesList.filter(name => name.startsWith(outputFolder))\n        filesNames = filesNames.filter(name => !(name.endsWith('.json') || name.endsWith('.geojson')))\n        for (const file of filesNames) {\n          const name = file.slice(scen.length) // remove scen name from file\n          otherFiles.push({ data: null, fileName: name, type: 'other' })\n        }\n        this.$store.commit('loadOtherFiles', { files: otherFiles, source: 'db' })\n\n        // this.loggedIn = true\n        // this.login()\n        this.$store.commit('changeLoading', false)\n      } catch (err) {\n        this.$store.commit('changeAlert', err)\n        this.$store.commit('changeLoading', false)\n      }\n    },\n\n    async loadExample (filesToLoads) {\n      this.$store.commit('changeLoading', true)\n      const url = 'https://raw.githubusercontent.com/systragroup/quetzal-network-editor/master/example/'\n      let links = {}\n      let nodes = {}\n      try {\n        if (filesToLoads.includes('PT')) {\n          links = await fetch(url + 'links_exemple.geojson').then(res => res.json())\n          if (!links) return\n          nodes = await fetch(url + 'nodes_exemple.geojson').then(res => res.json())\n          if (!nodes) return\n          this.loadNetwork(links, nodes, 'PT')\n        }\n\n        if (filesToLoads.includes('road')) {\n          links = await fetch(url + 'road_links_exemple.geojson').then(res => res.json())\n          if (!links) return\n          nodes = await fetch(url + 'road_nodes_exemple.geojson').then(res => res.json())\n          if (!nodes) return\n          this.loadNetwork(links, nodes, 'road')\n        }\n\n        if (filesToLoads.includes('loaded')) {\n          links = await fetch(url + 'loaded_links.geojson').then(res => res.json())\n          if (!links) return\n          this.$store.commit('createLayer', { fileName: 'loaded_links', data: links, mat: {} })\n          nodes = await fetch(url + 'loaded_nodes.geojson').then(res => res.json())\n          if (!nodes) return\n          this.$store.commit('createLayer', { fileName: 'loaded_nodes', data: nodes, mat: {} })\n          // add files to list of loaded files\n          this.$store.commit('addFile', { name: 'loaded_links', source: 'example', type: 'result' })\n          this.$store.commit('addFile', { name: 'loaded_nodes', source: 'example', type: 'result' })\n        }\n\n        if (filesToLoads.includes('zones')) {\n          links = await fetch(url + 'zones.geojson').then(res => res.json())\n          if (!links) return\n          nodes = await fetch(url + 'zones.zip').then(res => unzip(res.blob()))\n          if (!nodes) return\n          this.$store.commit('createLayer', { fileName: 'zones', data: links, mat: nodes })\n          // add files to list of loaded files\n          this.$store.commit('addFile', { name: 'zones', source: 'example', type: 'result' })\n          this.$store.commit('addFile', { name: 'zones', source: 'matrix', type: 'result matrix' })\n        }\n        // this is zones and mat. reuse var to save memory\n\n        this.$store.commit('changeLoading', false)\n        this.loggedIn = true\n        this.login()\n      } catch {\n        this.$store.commit('changeLoading', false)\n        this.$store.commit('changeAlert', {\n          name: 'ImportError',\n          message: $gettext($gettext('An error occur fetching example on github')),\n        })\n      }\n    },\n\n  },\n}\n</script>\n<template>\n  <section>\n    <input\n      id=\"zip-input\"\n      ref=\"zipInput\"\n      type=\"file\"\n      style=\"display: none\"\n      accept=\".zip\"\n      @change=\"readZip\"\n    >\n\n    <div class=\"layout\">\n      <div\n        class=\"layout-overlay\"\n        :class=\"{ 'animate-layer': loggedIn }\"\n      />\n      <v-card\n        class=\"card\"\n        :class=\"{ 'animate-login': loggedIn }\"\n      >\n        <v-row>\n          <v-col>\n            <v-card-text :style=\"{textAlign: 'center'}\">\n              <div class=\"title\">\n                {{ $gettext(\"Select a Project\") }}\n              </div>\n              <div>\n                {{ $gettext(\"Log in and select an existing project or create a new project from project navigation menu\") }}\n              </div>\n              <div class=\"subtitle\">\n                {{ $gettext(\"OR\") }}\n              </div>\n              <div class=\"title\">\n                {{ $gettext(\"Continue Without Project\") }}\n              </div>\n              <div>\n                {{ $gettext(\"Start importing files individually \") }}\n              </div>\n              <div class=\"subtitle\">\n                {{ $gettext(\"OR\") }}\n              </div>\n              <div class=\"title\">\n                {{ $gettext(\"Load Zip\") }}\n              </div>\n              <v-tooltip\n                bottom\n                open-delay=\"500\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-bind=\"attrs\"\n                    :color=\"'normal'\"\n                    v-on=\"on\"\n                    @click=\"buttonHandle('zip')\"\n                  >\n                    <v-icon\n                      small\n                      left\n                    >\n                      fas fa-file-archive\n                    </v-icon>\n                    {{ $gettext('Load Zip File') }}\n                  </v-btn>\n                </template>\n                <span>{{ $gettext(\"Load zip files containing\") }}</span>\n                <br>\n                <span>{{ $gettext(\"inputs/pt/ nodes.geojson and links.geojson\") }}</span>\n                <br>\n                <span>{{ $gettext(\"inputs/road/ road_nodes.geojson and road_links.geojson\") }}</span>\n                <br>\n                <span>{{ $gettext(\"outputs/ anything\") }}</span>\n              </v-tooltip>\n\n              <div class=\"subtitle\">\n                {{ $gettext(\"OR\") }}\n              </div>\n              <div class=\"title\">\n                {{ $gettext(\"Load Example\") }}\n              </div>\n\n              <v-menu\n\n                offset-y\n                nudge-left=\"70\"\n                close-delay=\"100\"\n                transition=\"slide-y-transition\"\n              >\n                <template v-slot:activator=\"{ on: on,attrs:attrs }\">\n                  <v-btn\n                    :style=\"{'margin-bottom':'2rem'}\"\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    {{ $gettext('Load Example') }}\n                  </v-btn>\n                </template>\n                <v-list>\n                  <v-list-item\n                    link\n                    @click=\"()=>buttonHandle('example1')\"\n                  >\n                    <v-list-item-title>\n                      {{ $gettext(\"PT & Road\") }}\n                    </v-list-item-title>\n                  </v-list-item>\n                  <v-list-item\n                    link\n                    @click=\"()=>buttonHandle('example2')\"\n                  >\n                    <v-list-item-title>\n                      {{ $gettext(\"PT, Road, Zones, OD & Results\") }}\n                    </v-list-item-title>\n                  </v-list-item>\n                </v-list>\n              </v-menu>\n              <v-divider />\n\n              <div>\n                <v-tooltip\n                  bottom\n                  open-delay=\"500\"\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      v-bind=\"attrs\"\n                      @click=\"buttonHandle('newProject')\"\n                      v-on=\"on\"\n                    >\n                      {{ $gettext('Delete All') }}\n                    </v-btn>\n                  </template>\n                  <span>{{ $gettext(\"Delete all network and start from scratch\") }}</span>\n                </v-tooltip>\n                <v-btn\n                  :disabled=\"!filesAdded\"\n                  color=\"primary\"\n                  @click=\"login()\"\n                >\n                  {{ $gettext('Go!') }}\n                </v-btn>\n              </div>\n            </v-card-text>\n          </v-col>\n          <v-divider vertical />\n          <v-col>\n            <FileLoader\n              @networkLoaded=\"(e) => loadNetwork(e.links,e.nodes,e.type)\"\n              @parametersLoaded=\"(data) => loadParams(data)\"\n              @outputsLoaded=\"(data) => loadOutputs(data, 'local')\"\n              @inputsLoaded=\"(data) => loadOtherInputs(data,'local')\"\n            />\n          </v-col>\n        </v-row>\n      </v-card>\n    </div>\n    <v-dialog\n      v-model=\"showDialog\"\n      persistent\n      max-width=\"350\"\n      @keydown.enter=\"applyDialog\"\n      @keydown.esc=\"showDialog=false\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          {{ $gettext(\"Overwrite current Project ?\") }}\n        </v-card-title>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"showDialog = !showDialog\"\n          >\n            {{ $gettext(\"No\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"primary\"\n            @click=\"applyDialog\"\n          >\n            {{ $gettext(\"Yes\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color:var(--v-background-base);\n\n  position: absolute;\n}\n.card {\n  height: 42em;\n  width:60rem;\n  overflow-y:hidden;\n  padding: 20px;\n}\n.col{\n  margin:1em;\n}\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 2em !important;\n  color: var(--v-primary-base);\n  font-weight: bold;\n  margin-top:30px;\n}\n.subtitle {\n  font-size: 1.5em;\n  font-weight: bold;\n  margin: 20px;\n}\n.card button {\n  margin-top: 0.5rem;\n}\n.animate-login {\n  transform: translateY(-185%);\n  transition: 1s;\n}\n.animate-layer {\n  opacity: 0;\n  transition: 1s;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=style&index=0&id=15d0878a&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=style&index=0&id=15d0878a&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Import.vue?vue&type=template&id=15d0878a&scoped=true&\"\nimport script from \"./Import.vue?vue&type=script&lang=js&\"\nexport * from \"./Import.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Import.vue?vue&type=style&index=0&id=15d0878a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15d0878a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    { staticClass: \"map-view\" },\n    [\n      _c(\n        \"v-dialog\",\n        {\n          attrs: {\n            scrollable: \"\",\n            persistent: \"\",\n            \"max-width\": _vm.numLinks > 1 ? \"40rem\" : \"20rem\",\n          },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                return _vm.applyAction.apply(null, arguments)\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                return _vm.cancelAction.apply(null, arguments)\n              },\n            ],\n          },\n          model: {\n            value: _vm.showDialog,\n            callback: function ($$v) {\n              _vm.showDialog = $$v\n            },\n            expression: \"showDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            { attrs: { \"max-height\": \"55rem\" } },\n            [\n              _c(\"v-card-title\", { staticClass: \"text-h5\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(\n                      [\"deleteTrip\", \"deleterGroup\"].includes(_vm.action)\n                        ? _vm.$gettext(\"Delete\") + \" \" + _vm.message + \"?\"\n                        : _vm.$gettext(\"Edit Properties\")\n                    ) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\"v-divider\"),\n              _vm._v(\" \"),\n              _vm.editForm\n                ? _c(\n                    \"v-card-text\",\n                    [\n                      _c(\n                        \"v-row\",\n                        _vm._l(_vm.numLinks, function (n, idx) {\n                          return _c(\n                            \"v-col\",\n                            { key: idx },\n                            [\n                              _c(\n                                \"v-list\",\n                                [\n                                  _vm.numLinks > 1\n                                    ? _c(\n                                        \"v-list-item\",\n                                        [\n                                          _c(\n                                            \"v-icon\",\n                                            {\n                                              style: {\n                                                \"align-items\": \"center\",\n                                                \"justify-content\": \"center\",\n                                                transform:\n                                                  \"rotate(\" +\n                                                  _vm.linkDir[idx] +\n                                                  \"deg)\",\n                                              },\n                                            },\n                                            [\n                                              _vm._v(\n                                                \"\\n                  fas fa-long-arrow-alt-up\\n                \"\n                                              ),\n                                            ]\n                                          ),\n                                        ],\n                                        1\n                                      )\n                                    : _vm._e(),\n                                  _vm._v(\" \"),\n                                  _vm._l(\n                                    _vm.orderedForm(idx),\n                                    function (value, key) {\n                                      return _c(\"v-text-field\", {\n                                        key: key,\n                                        attrs: {\n                                          label: key,\n                                          hint: _vm.showHint\n                                            ? _vm.$gettext(_vm.hints[key])\n                                            : \"\",\n                                          \"persistent-hint\": _vm.showHint,\n                                          filled: !value[\"disabled\"],\n                                          type: _vm.$store.getters.attributeType(\n                                            key\n                                          ),\n                                          placeholder: value[\"placeholder\"]\n                                            ? _vm.$gettext(\"multiple Values\")\n                                            : \"\",\n                                          \"persistent-placeholder\": value[\n                                            \"placeholder\"\n                                          ]\n                                            ? true\n                                            : false,\n                                          disabled: value[\"disabled\"],\n                                        },\n                                        on: {\n                                          wheel: function ($event) {\n                                            return $event.target.blur()\n                                          },\n                                        },\n                                        scopedSlots: _vm._u(\n                                          [\n                                            key === \"route_color\"\n                                              ? {\n                                                  key: \"append\",\n                                                  fn: function () {\n                                                    return [\n                                                      _c(\"color-picker\", {\n                                                        model: {\n                                                          value: value[\"value\"],\n                                                          callback: function (\n                                                            $$v\n                                                          ) {\n                                                            _vm.$set(\n                                                              value,\n                                                              \"value\",\n                                                              $$v\n                                                            )\n                                                          },\n                                                          expression:\n                                                            \"value['value']\",\n                                                        },\n                                                      }),\n                                                    ]\n                                                  },\n                                                  proxy: true,\n                                                }\n                                              : null,\n                                            _vm.showDeleteOption\n                                              ? {\n                                                  key: \"prepend\",\n                                                  fn: function () {\n                                                    return [\n                                                      _c(\n                                                        \"v-btn\",\n                                                        {\n                                                          attrs: {\n                                                            icon: \"\",\n                                                            \"x-small\": \"\",\n                                                            disabled:\n                                                              _vm.attributeNonDeletable(\n                                                                key\n                                                              ),\n                                                            color: \"error\",\n                                                          },\n                                                          on: {\n                                                            click: () =>\n                                                              _vm.deleteField(\n                                                                key\n                                                              ),\n                                                          },\n                                                        },\n                                                        [\n                                                          _c(\"v-icon\", [\n                                                            _vm._v(\n                                                              \"fas fa-trash small\"\n                                                            ),\n                                                          ]),\n                                                        ],\n                                                        1\n                                                      ),\n                                                    ]\n                                                  },\n                                                  proxy: true,\n                                                }\n                                              : null,\n                                          ],\n                                          null,\n                                          true\n                                        ),\n                                        model: {\n                                          value: value[\"value\"],\n                                          callback: function ($$v) {\n                                            _vm.$set(value, \"value\", $$v)\n                                          },\n                                          expression: \"value['value']\",\n                                        },\n                                      })\n                                    }\n                                  ),\n                                ],\n                                2\n                              ),\n                            ],\n                            1\n                          )\n                        }),\n                        1\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-row\",\n                        [\n                          _c(\"v-text-field\", {\n                            attrs: {\n                              label: _vm.$gettext(\"add field\"),\n                              placeholder: _vm.$gettext(\"new field name\"),\n                              filled: \"\",\n                              rules: _vm.rules.newField,\n                            },\n                            on: {\n                              keydown: function ($event) {\n                                if (\n                                  !$event.type.indexOf(\"key\") &&\n                                  _vm._k(\n                                    $event.keyCode,\n                                    \"enter\",\n                                    13,\n                                    $event.key,\n                                    \"Enter\"\n                                  )\n                                )\n                                  return null\n                                $event.stopPropagation()\n                                return _vm.addField.apply(null, arguments)\n                              },\n                              wheel: function ($event) {\n                                return $event.target.blur()\n                              },\n                            },\n                            scopedSlots: _vm._u(\n                              [\n                                {\n                                  key: \"append-outer\",\n                                  fn: function () {\n                                    return [\n                                      _c(\n                                        \"v-btn\",\n                                        {\n                                          staticClass: \"text--primary\",\n                                          attrs: {\n                                            color: \"primary\",\n                                            fab: \"\",\n                                            \"x-small\": \"\",\n                                          },\n                                          on: { click: _vm.addField },\n                                        },\n                                        [_c(\"v-icon\", [_vm._v(\"fas fa-plus\")])],\n                                        1\n                                      ),\n                                    ]\n                                  },\n                                  proxy: true,\n                                },\n                              ],\n                              null,\n                              false,\n                              941361224\n                            ),\n                            model: {\n                              value: _vm.newFieldName,\n                              callback: function ($$v) {\n                                _vm.newFieldName = $$v\n                              },\n                              expression: \"newFieldName\",\n                            },\n                          }),\n                        ],\n                        1\n                      ),\n                    ],\n                    1\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              [\"cloneTrip\"].includes(_vm.action)\n                ? _c(\n                    \"v-card-text\",\n                    [\n                      _c(\"v-text-field\", {\n                        attrs: { label: _vm.$gettext(\"New name\") },\n                        model: {\n                          value: _vm.cloneName,\n                          callback: function ($$v) {\n                            _vm.cloneName = $$v\n                          },\n                          expression: \"cloneName\",\n                        },\n                      }),\n                    ],\n                    1\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _c(\"v-divider\"),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _vm.editForm\n                    ? _c(\n                        \"v-btn\",\n                        {\n                          attrs: { icon: \"\", \"x-small\": \"\" },\n                          on: { click: () => (_vm.showHint = !_vm.showHint) },\n                        },\n                        [\n                          _c(\"v-icon\", [\n                            _vm._v(\"far fa-question-circle small\"),\n                          ]),\n                        ],\n                        1\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.editForm\n                    ? _c(\n                        \"v-btn\",\n                        {\n                          attrs: { icon: \"\", \"x-small\": \"\" },\n                          on: { click: _vm.ToggleDeleteOption },\n                        },\n                        [\n                          _vm.showDeleteOption\n                            ? _c(\"v-icon\", [\n                                _vm._v(\n                                  \"\\n            fas fa-minus-circle fa-rotate-90\\n          \"\n                                ),\n                              ])\n                            : _c(\"v-icon\", [\n                                _vm._v(\n                                  \"\\n            fas fa-minus-circle\\n          \"\n                                ),\n                              ]),\n                        ],\n                        1\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"grey\", text: \"\" },\n                      on: { click: _vm.cancelAction },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Cancel\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"success\", text: \"\" },\n                      on: { click: _vm.applyAction },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Save\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: { \"max-width\": \"300\" },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                return _vm.duplicate()\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                return _vm.cancelClone.apply(null, arguments)\n              },\n            ],\n          },\n          model: {\n            value: _vm.cloneDialog,\n            callback: function ($$v) {\n              _vm.cloneDialog = $$v\n            },\n            expression: \"cloneDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            [\n              _c(\"v-card-title\", [\n                _c(\"span\", { staticClass: \"text-h5\" }, [\n                  _vm._v(_vm._s(_vm.$gettext(\"Duplicate and reverse\"))),\n                ]),\n                _vm._v(\" \"),\n                _c(\"span\", { staticClass: \"text-h5\" }, [\n                  _vm._v(_vm._s(_vm.message + \" ?\")),\n                ]),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-text\",\n                [\n                  _c(\"v-text-field\", {\n                    attrs: { label: _vm.$gettext(\"New name\") },\n                    model: {\n                      value: _vm.cloneName,\n                      callback: function ($$v) {\n                        _vm.cloneName = $$v\n                      },\n                      expression: \"cloneName\",\n                    },\n                  }),\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-text\",\n                { style: { textAlign: \"center\", color: \"red\" } },\n                [_vm._v(\"\\n        \" + _vm._s(_vm.errorMessage) + \"\\n      \")]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"grey\", text: \"\" },\n                      on: { click: _vm.cancelClone },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Cancel\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"green darken-1\", text: \"\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.duplicate()\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Save\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"SidePanel\", {\n        attrs: {\n          \"selected-trips\": _vm.selectedTrips,\n          \"selectedr-group\": _vm.selectedrGroup,\n        },\n        on: {\n          \"update-tripList\": _vm.updateSelectedTrips,\n          confirmChanges: _vm.confirmChanges,\n          abortChanges: _vm.abortChanges,\n          deleteButton: _vm.deleteButton,\n          cloneButton: _vm.cloneButton,\n          propertiesButton: _vm.actionClick,\n          isRoadMode: (e) => (_vm.isRoadMode = e),\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\"Map\", {\n        ref: \"mapref\",\n        attrs: {\n          \"selected-trips\": _vm.selectedTrips,\n          \"is-road-mode\": _vm.isRoadMode,\n        },\n        on: { clickFeature: _vm.actionClick },\n      }),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    {\n      class: _vm.showLeftPanel ? \"left-panel elevation-4\" : \"left-panel-close\",\n      style: { width: _vm.showLeftPanel ? \"400px\" : \"0px\" },\n    },\n    [\n      _c(\n        \"div\",\n        {\n          staticClass: \"left-panel-toggle-btn elevation-4\",\n          on: {\n            click: function ($event) {\n              return _vm.$store.commit(\"changeLeftPanel\")\n            },\n          },\n        },\n        [\n          _c(\"v-icon\", { attrs: { small: \"\", color: \"secondary\" } }, [\n            _vm._v(\n              \"\\n      \" +\n                _vm._s(\n                  _vm.showLeftPanel\n                    ? \"fas fa-chevron-left\"\n                    : \"fas fa-chevron-right\"\n                ) +\n                \"\\n    \"\n            ),\n          ]),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"transition\", { attrs: { name: \"fade\" } }, [\n        _c(\n          \"div\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.showLeftPanelContent,\n                expression: \"showLeftPanelContent\",\n              },\n            ],\n            ref: \"leftPanel\",\n            staticClass: \"left-panel-content\",\n            attrs: { id: \"left-panel\" },\n          },\n          [\n            _c(\"div\", [\n              _c(\n                \"div\",\n                {\n                  style: {\n                    \"margin-top\": \"20px\",\n                    \"margin-bottom\": \"20px\",\n                    \"margin-right\": \"20px\",\n                  },\n                },\n                [\n                  _c(\n                    \"v-tabs\",\n                    {\n                      attrs: {\n                        \"background-color\": \"secondary\",\n                        dark: \"\",\n                        grow: \"\",\n                      },\n                      model: {\n                        value: _vm.tab,\n                        callback: function ($$v) {\n                          _vm.tab = $$v\n                        },\n                        expression: \"tab\",\n                      },\n                    },\n                    [\n                      _c(\"v-tab\", [_vm._v(_vm._s(_vm.$gettext(\"PT Links\")))]),\n                      _vm._v(\" \"),\n                      _c(\"v-tab\", [_vm._v(_vm._s(_vm.$gettext(\"Road Links\")))]),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"LinksSidePanel\", {\n                    directives: [\n                      {\n                        name: \"show\",\n                        rawName: \"v-show\",\n                        value: !_vm.roadMode,\n                        expression: \"!roadMode\",\n                      },\n                    ],\n                    attrs: {\n                      height: _vm.windowHeight,\n                      \"selected-trips\": _vm.selectedTrips,\n                    },\n                    on: {\n                      \"update-tripList\": (e) =>\n                        _vm.$emit(\"update-tripList\", {\n                          type: \"links\",\n                          data: e,\n                        }),\n                      confirmChanges: (e) => _vm.$emit(\"confirmChanges\", e),\n                      abortChanges: (e) => _vm.$emit(\"abortChanges\", e),\n                      cloneButton: (e) => _vm.$emit(\"cloneButton\", e),\n                      deleteButton: (e) => _vm.$emit(\"deleteButton\", e),\n                      propertiesButton: (e) => _vm.$emit(\"propertiesButton\", e),\n                    },\n                  }),\n                  _vm._v(\" \"),\n                  _c(\"RoadSidePanel\", {\n                    directives: [\n                      {\n                        name: \"show\",\n                        rawName: \"v-show\",\n                        value: _vm.roadMode,\n                        expression: \"roadMode\",\n                      },\n                    ],\n                    attrs: {\n                      height: _vm.windowHeight,\n                      \"selectedr-goup\": _vm.selectedrGroup,\n                    },\n                    on: {\n                      \"update-tripList\": (e) =>\n                        _vm.$emit(\"update-tripList\", {\n                          type: \"rlinks\",\n                          data: e,\n                        }),\n                      confirmChanges: (e) => _vm.$emit(\"confirmChanges\", e),\n                      abortChanges: (e) => _vm.$emit(\"abortChanges\", e),\n                      deleteButton: (e) => _vm.$emit(\"deleteButton\", e),\n                      propertiesButton: (e) => _vm.$emit(\"propertiesButton\", e),\n                    },\n                  }),\n                ],\n                1\n              ),\n            ]),\n          ]\n        ),\n      ]),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"v-card-title\",\n        { staticClass: \"white--text secondary\" },\n        [\n          _c(\n            \"v-tooltip\",\n            {\n              attrs: { bottom: \"\", \"open-delay\": \"500\" },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on, attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              staticClass: \"ma-2\",\n                              style: { color: \"white\" },\n                              attrs: { icon: \"\" },\n                              on: {\n                                click: function ($event) {\n                                  return _vm.showAll()\n                                },\n                              },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [\n                          _c(\"v-icon\", { staticClass: \"list-item-icon\" }, [\n                            _vm._v(\n                              \"\\n            \" +\n                                _vm._s(\n                                  _vm.tripList == _vm.tripId\n                                    ? \"fa-eye fa\"\n                                    : \"fa-eye-slash fa\"\n                                ) +\n                                \"\\n          \"\n                            ),\n                          ]),\n                        ],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\"span\", [\n                _vm._v(\n                  _vm._s(\n                    _vm.tripList == _vm.tripId\n                      ? _vm.$gettext(\"Hide All\")\n                      : _vm.$gettext(\"Show All\")\n                  )\n                ),\n              ]),\n            ]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-tooltip\",\n            {\n              attrs: { bottom: \"\", \"open-delay\": \"500\" },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on, attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              staticClass: \"ma-2\",\n                              style: { color: \"white\" },\n                              attrs: {\n                                icon: \"\",\n                                disabled:\n                                  _vm.tripList.length === 0 ? true : false,\n                              },\n                              on: {\n                                click: function ($event) {\n                                  return _vm.propertiesButton(_vm.tripList)\n                                },\n                              },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [\n                          _c(\"v-icon\", { staticClass: \"list-item-icon\" }, [\n                            _vm._v(\"\\n            fas fa-list\\n          \"),\n                          ]),\n                        ],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\"span\", [\n                _vm._v(_vm._s(_vm.$gettext(\"Edit Visibles Properties\"))),\n              ]),\n            ]\n          ),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\"span\", { style: { color: \"white\" } }, [\n            _vm._v(\"\\n      \" + _vm._s(_vm.$gettext(\"Lines\")) + \"\\n    \"),\n          ]),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-menu\",\n            {\n              attrs: {\n                \"offset-y\": \"\",\n                \"open-on-hover\": \"\",\n                \"close-delay\": \"100\",\n                transition: \"slide-y-transition\",\n              },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on: on, attrs: attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              staticClass: \"ma-2\",\n                              style: { color: \"white\" },\n                              attrs: { icon: \"\", dark: \"\" },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [_c(\"v-icon\", [_vm._v(\"fa-solid fa-download\")])],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\n                \"v-list\",\n                [\n                  _c(\n                    \"v-list-item\",\n                    {\n                      attrs: { link: \"\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.$store.dispatch(\"exportFiles\")\n                        },\n                      },\n                    },\n                    [\n                      _c(\"v-list-item-title\", [\n                        _vm._v(\n                          \"\\n            \" +\n                            _vm._s(_vm.$gettext(\"Export All\")) +\n                            \"\\n          \"\n                        ),\n                      ]),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-list-item\",\n                    {\n                      attrs: { link: \"\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.$store.dispatch(\"exportFiles\", \"visibles\")\n                        },\n                      },\n                    },\n                    [\n                      _c(\"v-list-item-title\", [\n                        _vm._v(\n                          \"\\n            \" +\n                            _vm._s(_vm.$gettext(\"Export Only Visible\")) +\n                            \"\\n          \"\n                        ),\n                      ]),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-card\",\n        {\n          staticClass: \"mx-auto scrollable\",\n          attrs: {\n            \"max-width\": \"100%\",\n            \"min-width\": \"100%\",\n            height: _vm.height,\n          },\n        },\n        [\n          _c(\n            \"v-list-item\",\n            [\n              _c(\"v-select\", {\n                attrs: {\n                  items: _vm.filterChoices,\n                  \"prepend-icon\": \"fas fa-filter\",\n                  label: _vm.$gettext(\"filter\"),\n                  \"item-color\": \"secondarydark\",\n                  color: \"secondarydark\",\n                },\n                model: {\n                  value: _vm.vmodelSelectedFilter,\n                  callback: function ($$v) {\n                    _vm.vmodelSelectedFilter = $$v\n                  },\n                  expression: \"vmodelSelectedFilter\",\n                },\n              }),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _vm._l(_vm.classifiedTripId, function (value, key) {\n            return _c(\n              \"v-list-group\",\n              {\n                key: String(value.name) + String(key),\n                attrs: {\n                  color: \"secondarydark\",\n                  value: false,\n                  \"no-action\": \"\",\n                },\n                scopedSlots: _vm._u(\n                  [\n                    {\n                      key: \"activator\",\n                      fn: function () {\n                        return [\n                          _c(\n                            \"v-list-item-action\",\n                            [\n                              _c(\n                                \"v-tooltip\",\n                                {\n                                  attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                                  scopedSlots: _vm._u(\n                                    [\n                                      {\n                                        key: \"activator\",\n                                        fn: function ({ on, attrs }) {\n                                          return [\n                                            _c(\n                                              \"v-btn\",\n                                              _vm._g(\n                                                _vm._b(\n                                                  {\n                                                    attrs: { icon: \"\" },\n                                                    on: {\n                                                      click: function ($event) {\n                                                        $event.stopPropagation()\n                                                        return _vm.showGroup(\n                                                          value.tripId\n                                                        )\n                                                      },\n                                                    },\n                                                  },\n                                                  \"v-btn\",\n                                                  attrs,\n                                                  false\n                                                ),\n                                                on\n                                              ),\n                                              [\n                                                _c(\n                                                  \"v-icon\",\n                                                  {\n                                                    staticClass:\n                                                      \"list-item-icon\",\n                                                  },\n                                                  [\n                                                    _vm._v(\n                                                      \"\\n                  \" +\n                                                        _vm._s(\n                                                          value.tripId.some(\n                                                            (val) =>\n                                                              _vm.tripList.includes(\n                                                                val\n                                                              )\n                                                          )\n                                                            ? \"fa-eye fa\"\n                                                            : \"fa-eye-slash fa\"\n                                                        ) +\n                                                        \"\\n                \"\n                                                    ),\n                                                  ]\n                                                ),\n                                              ],\n                                              1\n                                            ),\n                                          ]\n                                        },\n                                      },\n                                    ],\n                                    null,\n                                    true\n                                  ),\n                                },\n                                [\n                                  _vm._v(\" \"),\n                                  _c(\"span\", [\n                                    _vm._v(\n                                      \"\\n              \" +\n                                        _vm._s(\n                                          value.tripId.some((val) =>\n                                            _vm.tripList.includes(val)\n                                          )\n                                            ? _vm.$gettext(\"Hide All\")\n                                            : _vm.$gettext(\"Show All\")\n                                        ) +\n                                        \"\\n            \"\n                                    ),\n                                  ]),\n                                ]\n                              ),\n                            ],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-list-item-content\",\n                            [\n                              _c(\"v-list-item-title\", [\n                                _c(\"strong\", [\n                                  _vm._v(\n                                    \"\\n              \" +\n                                      _vm._s(\n                                        value.name == \"undefined\"\n                                          ? _vm.$gettext(value.name)\n                                          : value.name\n                                      ) +\n                                      \"\\n            \"\n                                  ),\n                                ]),\n                              ]),\n                            ],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-tooltip\",\n                            {\n                              attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                              scopedSlots: _vm._u(\n                                [\n                                  {\n                                    key: \"activator\",\n                                    fn: function ({ on, attrs }) {\n                                      return [\n                                        _c(\n                                          \"v-btn\",\n                                          _vm._g(\n                                            _vm._b(\n                                              {\n                                                staticClass: \"ma-1\",\n                                                attrs: {\n                                                  icon: \"\",\n                                                  disabled:\n                                                    _vm.editorTrip != null\n                                                      ? true\n                                                      : false,\n                                                },\n                                                on: {\n                                                  click: function ($event) {\n                                                    $event.stopPropagation()\n                                                    return _vm.propertiesButton(\n                                                      value.tripId\n                                                    )\n                                                  },\n                                                },\n                                              },\n                                              \"v-btn\",\n                                              attrs,\n                                              false\n                                            ),\n                                            on\n                                          ),\n                                          [\n                                            _c(\n                                              \"v-icon\",\n                                              { attrs: { color: \"regular\" } },\n                                              [\n                                                _vm._v(\n                                                  \"\\n                fas fa-list\\n              \"\n                                                ),\n                                              ]\n                                            ),\n                                          ],\n                                          1\n                                        ),\n                                      ]\n                                    },\n                                  },\n                                ],\n                                null,\n                                true\n                              ),\n                            },\n                            [\n                              _vm._v(\" \"),\n                              _c(\"span\", [\n                                _vm._v(\n                                  _vm._s(_vm.$gettext(\"Edit Group Properties\"))\n                                ),\n                              ]),\n                            ]\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-tooltip\",\n                            {\n                              attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                              scopedSlots: _vm._u(\n                                [\n                                  {\n                                    key: \"activator\",\n                                    fn: function ({ on, attrs }) {\n                                      return [\n                                        _c(\n                                          \"v-btn\",\n                                          _vm._g(\n                                            _vm._b(\n                                              {\n                                                staticClass: \"ma-1\",\n                                                attrs: {\n                                                  icon: \"\",\n                                                  disabled: _vm.editorTrip\n                                                    ? true\n                                                    : false,\n                                                },\n                                                on: {\n                                                  click: function ($event) {\n                                                    $event.stopPropagation()\n                                                    return _vm.deleteButton({\n                                                      trip: value.tripId,\n                                                      message: value.name,\n                                                      action: \"deleteTrip\",\n                                                    })\n                                                  },\n                                                },\n                                              },\n                                              \"v-btn\",\n                                              attrs,\n                                              false\n                                            ),\n                                            on\n                                          ),\n                                          [\n                                            _c(\n                                              \"v-icon\",\n                                              {\n                                                attrs: {\n                                                  small: \"\",\n                                                  color: \"regular\",\n                                                },\n                                              },\n                                              [\n                                                _vm._v(\n                                                  \"\\n                fas fa-trash\\n              \"\n                                                ),\n                                              ]\n                                            ),\n                                          ],\n                                          1\n                                        ),\n                                      ]\n                                    },\n                                  },\n                                ],\n                                null,\n                                true\n                              ),\n                            },\n                            [\n                              _vm._v(\" \"),\n                              _c(\"span\", [\n                                _vm._v(_vm._s(_vm.$gettext(\"Delete Group\"))),\n                              ]),\n                            ]\n                          ),\n                        ]\n                      },\n                      proxy: true,\n                    },\n                  ],\n                  null,\n                  true\n                ),\n              },\n              [\n                _vm._v(\" \"),\n                _c(\"v-virtual-scroll\", {\n                  attrs: {\n                    items: value.tripId,\n                    \"item-height\": 45,\n                    height: Math.min(\n                      _vm.height - 220,\n                      45 * value.tripId.length + 3\n                    ),\n                  },\n                  scopedSlots: _vm._u(\n                    [\n                      {\n                        key: \"default\",\n                        fn: function ({ item }) {\n                          return [\n                            _c(\n                              \"v-list-item\",\n                              { key: item, staticClass: \"pl-2\" },\n                              [\n                                _c(\n                                  \"v-list-item-action\",\n                                  [\n                                    _c(\"v-checkbox\", {\n                                      staticClass: \"pl-2\",\n                                      attrs: {\n                                        \"on-icon\": \"fa-eye fa\",\n                                        \"off-icon\": \"fa-eye-slash fa\",\n                                        color: \"primary\",\n                                        value: item,\n                                        size: \"10\",\n                                        \"hide-details\": \"\",\n                                      },\n                                      model: {\n                                        value: _vm.tripList,\n                                        callback: function ($$v) {\n                                          _vm.tripList = $$v\n                                        },\n                                        expression: \"tripList\",\n                                      },\n                                    }),\n                                  ],\n                                  1\n                                ),\n                                _vm._v(\" \"),\n                                item == _vm.editorTrip\n                                  ? _c(\"v-list-item-title\", [\n                                      _c(\"strong\", [_vm._v(_vm._s(item))]),\n                                    ])\n                                  : _c(\"v-list-item-title\", [\n                                      _vm._v(\n                                        \"\\n              \" +\n                                          _vm._s(item) +\n                                          \"\\n            \"\n                                      ),\n                                    ]),\n                                _vm._v(\" \"),\n                                _c(\n                                  \"v-tooltip\",\n                                  {\n                                    attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                                    scopedSlots: _vm._u(\n                                      [\n                                        {\n                                          key: \"activator\",\n                                          fn: function ({ on, attrs }) {\n                                            return [\n                                              _c(\n                                                \"v-btn\",\n                                                _vm._g(\n                                                  _vm._b(\n                                                    {\n                                                      staticClass: \"ma-1\",\n                                                      attrs: {\n                                                        icon: \"\",\n                                                        disabled:\n                                                          (item !=\n                                                            _vm.editorTrip) &\n                                                          (_vm.editorTrip !=\n                                                            null)\n                                                            ? true\n                                                            : false,\n                                                      },\n                                                      on: {\n                                                        click: function (\n                                                          $event\n                                                        ) {\n                                                          return _vm.editButton(\n                                                            item\n                                                          )\n                                                        },\n                                                      },\n                                                    },\n                                                    \"v-btn\",\n                                                    attrs,\n                                                    false\n                                                  ),\n                                                  on\n                                                ),\n                                                [\n                                                  _c(\n                                                    \"v-icon\",\n                                                    {\n                                                      attrs: {\n                                                        color:\n                                                          item == _vm.editorTrip\n                                                            ? \"regular\"\n                                                            : \"regular\",\n                                                      },\n                                                    },\n                                                    [\n                                                      _vm._v(\n                                                        \"\\n                    fas fa-pen\\n                  \"\n                                                      ),\n                                                    ]\n                                                  ),\n                                                ],\n                                                1\n                                              ),\n                                            ]\n                                          },\n                                        },\n                                      ],\n                                      null,\n                                      true\n                                    ),\n                                  },\n                                  [\n                                    _vm._v(\" \"),\n                                    _c(\"span\", [\n                                      _vm._v(_vm._s(_vm.$gettext(\"Edit Line\"))),\n                                    ]),\n                                  ]\n                                ),\n                                _vm._v(\" \"),\n                                _c(\n                                  \"v-tooltip\",\n                                  {\n                                    attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                                    scopedSlots: _vm._u(\n                                      [\n                                        {\n                                          key: \"activator\",\n                                          fn: function ({ on, attrs }) {\n                                            return [\n                                              _c(\n                                                \"v-btn\",\n                                                _vm._g(\n                                                  _vm._b(\n                                                    {\n                                                      staticClass: \"ma-1\",\n                                                      attrs: {\n                                                        icon: \"\",\n                                                        disabled:\n                                                          (item !=\n                                                            _vm.editorTrip) &\n                                                          (_vm.editorTrip !=\n                                                            null)\n                                                            ? true\n                                                            : false,\n                                                      },\n                                                      on: {\n                                                        click: function (\n                                                          $event\n                                                        ) {\n                                                          return _vm.propertiesButton(\n                                                            item\n                                                          )\n                                                        },\n                                                      },\n                                                    },\n                                                    \"v-btn\",\n                                                    attrs,\n                                                    false\n                                                  ),\n                                                  on\n                                                ),\n                                                [\n                                                  _c(\n                                                    \"v-icon\",\n                                                    {\n                                                      attrs: {\n                                                        color:\n                                                          item == _vm.editorTrip\n                                                            ? \"regular\"\n                                                            : \"regular\",\n                                                      },\n                                                    },\n                                                    [\n                                                      _vm._v(\n                                                        \"\\n                    fas fa-list\\n                  \"\n                                                      ),\n                                                    ]\n                                                  ),\n                                                ],\n                                                1\n                                              ),\n                                            ]\n                                          },\n                                        },\n                                      ],\n                                      null,\n                                      true\n                                    ),\n                                  },\n                                  [\n                                    _vm._v(\" \"),\n                                    _c(\"span\", [\n                                      _vm._v(\n                                        _vm._s(\n                                          _vm.$gettext(\"Edit Line Properties\")\n                                        )\n                                      ),\n                                    ]),\n                                  ]\n                                ),\n                                _vm._v(\" \"),\n                                _c(\n                                  \"v-tooltip\",\n                                  {\n                                    attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                                    scopedSlots: _vm._u(\n                                      [\n                                        {\n                                          key: \"activator\",\n                                          fn: function ({ on, attrs }) {\n                                            return [\n                                              _c(\n                                                \"v-btn\",\n                                                _vm._g(\n                                                  _vm._b(\n                                                    {\n                                                      staticClass: \"ma-1\",\n                                                      attrs: {\n                                                        icon: \"\",\n                                                        disabled:\n                                                          (item !=\n                                                            _vm.editorTrip) &\n                                                          (_vm.editorTrip !=\n                                                            null)\n                                                            ? true\n                                                            : false,\n                                                      },\n                                                      on: {\n                                                        click: function (\n                                                          $event\n                                                        ) {\n                                                          return _vm.cloneButton(\n                                                            {\n                                                              trip: item,\n                                                              message: item,\n                                                            }\n                                                          )\n                                                        },\n                                                      },\n                                                    },\n                                                    \"v-btn\",\n                                                    attrs,\n                                                    false\n                                                  ),\n                                                  on\n                                                ),\n                                                [\n                                                  _c(\n                                                    \"v-icon\",\n                                                    {\n                                                      attrs: {\n                                                        color:\n                                                          item == _vm.editorTrip\n                                                            ? \"regular\"\n                                                            : \"regular\",\n                                                      },\n                                                    },\n                                                    [\n                                                      _vm._v(\n                                                        \"\\n                    fas fa-clone\\n                  \"\n                                                      ),\n                                                    ]\n                                                  ),\n                                                ],\n                                                1\n                                              ),\n                                            ]\n                                          },\n                                        },\n                                      ],\n                                      null,\n                                      true\n                                    ),\n                                  },\n                                  [\n                                    _vm._v(\" \"),\n                                    _c(\"span\", [\n                                      _vm._v(_vm._s(_vm.$gettext(\"Duplicate\"))),\n                                    ]),\n                                  ]\n                                ),\n                                _vm._v(\" \"),\n                                _c(\n                                  \"v-tooltip\",\n                                  {\n                                    attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                                    scopedSlots: _vm._u(\n                                      [\n                                        {\n                                          key: \"activator\",\n                                          fn: function ({ on, attrs }) {\n                                            return [\n                                              _c(\n                                                \"v-btn\",\n                                                _vm._g(\n                                                  _vm._b(\n                                                    {\n                                                      staticClass: \"ma-1\",\n                                                      attrs: {\n                                                        icon: \"\",\n                                                        disabled: _vm.editorTrip\n                                                          ? true\n                                                          : false,\n                                                      },\n                                                      on: {\n                                                        click: function (\n                                                          $event\n                                                        ) {\n                                                          return _vm.deleteButton(\n                                                            {\n                                                              trip: item,\n                                                              message: item,\n                                                              action:\n                                                                \"deleteTrip\",\n                                                            }\n                                                          )\n                                                        },\n                                                      },\n                                                    },\n                                                    \"v-btn\",\n                                                    attrs,\n                                                    false\n                                                  ),\n                                                  on\n                                                ),\n                                                [\n                                                  _c(\n                                                    \"v-icon\",\n                                                    {\n                                                      attrs: {\n                                                        small: \"\",\n                                                        color: \"regular\",\n                                                      },\n                                                    },\n                                                    [\n                                                      _vm._v(\n                                                        \"\\n                    fas fa-trash\\n                  \"\n                                                      ),\n                                                    ]\n                                                  ),\n                                                ],\n                                                1\n                                              ),\n                                            ]\n                                          },\n                                        },\n                                      ],\n                                      null,\n                                      true\n                                    ),\n                                  },\n                                  [\n                                    _vm._v(\" \"),\n                                    _c(\"span\", [\n                                      _vm._v(\n                                        _vm._s(_vm.$gettext(\"Delete Line\"))\n                                      ),\n                                    ]),\n                                  ]\n                                ),\n                              ],\n                              1\n                            ),\n                          ]\n                        },\n                      },\n                    ],\n                    null,\n                    true\n                  ),\n                }),\n              ],\n              1\n            )\n          }),\n          _vm._v(\" \"),\n          _c(\"v-divider\"),\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-card\",\n        { staticClass: \"mx-auto\" },\n        [\n          (_vm.editorTrip ? true : false)\n            ? _c(\n                \"v-list-item\",\n                [\n                  _c(\n                    \"v-tooltip\",\n                    {\n                      attrs: { right: \"\", \"open-delay\": \"500\" },\n                      scopedSlots: _vm._u(\n                        [\n                          {\n                            key: \"activator\",\n                            fn: function ({ on, attrs }) {\n                              return [\n                                _c(\n                                  \"v-btn\",\n                                  _vm._g(\n                                    _vm._b(\n                                      {\n                                        staticClass: \"mx-2\",\n                                        attrs: {\n                                          color: _vm.$store.getters.anchorMode\n                                            ? \"grey\"\n                                            : \"regular\",\n                                        },\n                                        on: {\n                                          click: function ($event) {\n                                            return _vm.$store.commit(\n                                              \"changeAnchorMode\"\n                                            )\n                                          },\n                                        },\n                                      },\n                                      \"v-btn\",\n                                      attrs,\n                                      false\n                                    ),\n                                    on\n                                  ),\n                                  [\n                                    _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                                      _vm._v(\n                                        \"\\n              fas fa-anchor\\n            \"\n                                      ),\n                                    ]),\n                                  ],\n                                  1\n                                ),\n                              ]\n                            },\n                          },\n                        ],\n                        null,\n                        false,\n                        3833012906\n                      ),\n                    },\n                    [\n                      _vm._v(\" \"),\n                      _c(\"span\", [\n                        _vm._v(\n                          \" \" + _vm._s(_vm.$gettext(\"Edit Line geometry\")) + \" \"\n                        ),\n                        _c(\"b\", [_vm._v(\"(CTRL)\")]),\n                      ]),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      on: {\n                        click: function ($event) {\n                          return _vm.$emit(\"abortChanges\")\n                        },\n                      },\n                    },\n                    [\n                      _c(\"v-icon\", { attrs: { small: \"\", left: \"\" } }, [\n                        _vm._v(\"\\n          fas fa-times-circle\\n        \"),\n                      ]),\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(_vm.$gettext(\"Abort\")) +\n                          \"\\n      \"\n                      ),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.$emit(\"confirmChanges\")\n                        },\n                      },\n                    },\n                    [\n                      _c(\"v-icon\", { attrs: { small: \"\", left: \"\" } }, [\n                        _vm._v(\"\\n          fas fa-save\\n        \"),\n                      ]),\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(_vm.$gettext(\"Confirm\")) +\n                          \"\\n      \"\n                      ),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              )\n            : _vm._e(),\n          _vm._v(\" \"),\n          _c(\n            \"v-list-item\",\n            {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value: _vm.editorTrip ? false : true,\n                  expression: \"editorTrip ? false: true\",\n                },\n              ],\n            },\n            [\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\n                \"v-tooltip\",\n                {\n                  attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                  scopedSlots: _vm._u([\n                    {\n                      key: \"activator\",\n                      fn: function ({ on, attrs }) {\n                        return [\n                          _c(\n                            \"v-btn\",\n                            _vm._g(\n                              _vm._b(\n                                {\n                                  staticClass: \"text--primary\",\n                                  attrs: {\n                                    color: \"primary\",\n                                    fab: \"\",\n                                    small: \"\",\n                                  },\n                                  on: { click: _vm.createNewLine },\n                                },\n                                \"v-btn\",\n                                attrs,\n                                false\n                              ),\n                              on\n                            ),\n                            [_c(\"v-icon\", [_vm._v(\"fas fa-plus\")])],\n                            1\n                          ),\n                        ]\n                      },\n                    },\n                  ]),\n                },\n                [\n                  _vm._v(\" \"),\n                  _c(\"span\", [_vm._v(_vm._s(_vm.$gettext(\"Create new Line\")))]),\n                ]\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: { persistent: \"\", \"max-width\": \"290\" },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                _vm.$emit(\"confirmChanges\")\n                _vm.showDialog = !_vm.showDialog\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                _vm.showDialog = false\n              },\n            ],\n          },\n          model: {\n            value: _vm.showDialog,\n            callback: function ($$v) {\n              _vm.showDialog = $$v\n            },\n            expression: \"showDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            [\n              _c(\"v-card-title\", { staticClass: \"text-h5\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Save Changes?\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\", left: \"\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.showDialog = false\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Cancel\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.$emit(\"abortChanges\")\n                          _vm.showDialog = !_vm.showDialog\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"No\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.$emit(\"confirmChanges\")\n                          _vm.showDialog = !_vm.showDialog\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Yes\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\n\nconst $gettext = s => s\nconst short = require('short-uuid')\n\nexport default {\n  name: 'LinksSidePanel',\n  components: {\n  },\n\n  props: ['selectedTrips', 'height'], // height is here to resize with the windows...\n  events: ['selectEditorTrip', 'confirmChanges', 'abortChanges', 'cloneButton', 'deleteButton', 'propertiesButton', 'newLine'],\n\n  data () {\n    return {\n      showDialog: false,\n      tripList: [],\n      // for some reason, the v-model does not update when i force it in a watcher or a method.\n      // I this vmodelselectedFilter for displaying the correct selected filter in the filter selector.\n      selectedFilter: '',\n      vmodelSelectedFilter: '',\n    }\n  },\n  computed: {\n    filterChoices () { return this.$store.getters.lineAttributes },\n    editorTrip () { return this.$store.getters.editorTrip },\n    tripId () { return this.$store.getters.tripId },\n    arrayUniqueTripId () {\n      // drop duplicates links trips. each line is a trip here.\n      const arrayUniqueByKey = [...new Map(this.$store.getters.links.features.map(item =>\n        [item.properties.trip_id, item.properties])).values()]\n      return arrayUniqueByKey\n    },\n    filteredCat () {\n      // for a given filter (key) get array of unique value\n      // e.g. get ['bus','subway'] for route_type\n      const val = Array.from(new Set(this.arrayUniqueTripId.map(\n        item => item[this.selectedFilter])))\n      return val\n    },\n\n    classifiedTripId () {\n      // return this list of object, {cat_name, tripId list}\n      const classifiedTripId = []\n      const undefinedCat = { name: $gettext('undefined'), tripId: [] }\n      this.filteredCat.forEach(c => {\n        const arr = this.arrayUniqueTripId.filter(\n          item => item[this.selectedFilter] === c,\n        ).map((item) => item.trip_id)\n\n        // regroup all null values into a single list 'undefined'\n        if (c === null | c === '' | c === undefined) {\n          undefinedCat.tripId.push(...arr)\n        } else {\n          classifiedTripId.push({ name: c, tripId: arr })\n        }\n      })\n      // if there was undefined Categories, append it at the end.\n      if (undefinedCat.tripId.length > 0) {\n        classifiedTripId.push(undefinedCat)\n      }\n      return classifiedTripId\n    },\n  },\n\n  watch: {\n    tripList (val) {\n      this.$emit('update-tripList', val)\n    },\n    tripId (newVal, oldVal) {\n      if (newVal.length < oldVal.length) {\n        // if a trip is deleted. we remove it, no remapping.\n        this.tripList = this.tripList.filter((trip) => newVal.includes(trip))\n      } else if (newVal.length > oldVal.length) {\n        // if a trip is added, we add it!\n        const newTrip = newVal.filter(item => !oldVal.includes(item))[0]\n        this.tripList.push(newTrip)\n      } else {\n        // if a trip name changes.\n        // update TripList v-model when a trip_id is changed.\n        const dict = {}\n        oldVal.forEach(\n          function (key, i) {\n            dict[key] = newVal[i]\n          })\n        this.tripList = this.tripList.map((trip) => dict[trip])\n      }\n    },\n    vmodelSelectedFilter (newVal, oldVal) {\n      this.selectedFilter = newVal\n      // prevent group larger than 500.\n      if (this.filteredCat.length > 500) {\n        // if it is larger, return to oldValue\n        this.selectedFilter = oldVal\n        // display error message\n        this.$store.commit('changeNotification',\n          {\n            text: $gettext('Cannot filter by this field. There is more than 500 groups'),\n            autoClose: true,\n            color: 'red darken-2',\n          })\n        // return the value in the v-select as the old Value\n        // eslint-disable-next-line no-return-assign\n        this.$nextTick(() => this.vmodelSelectedFilter = oldVal)\n      }\n    },\n\n  },\n  created () {\n    this.tripList = this.selectedTrips\n    this.selectedFilter = 'route_type'\n    this.vmodelSelectedFilter = this.selectedFilter\n  },\n\n  methods: {\n\n    editButton (value) {\n      if (this.editorTrip === value) {\n        this.showDialog = true\n      } else {\n        this.$store.commit('setEditorTrip', { tripId: value, changeBounds: true })\n        this.$store.commit('changeNotification', { text: '', autoClose: true })\n      }\n    },\n\n    propertiesButton (value) {\n      // select the TripId and open dialog\n      if (typeof value === 'object') {\n        this.$emit('propertiesButton', { action: 'Edit Group Info', lingering: false, tripIds: value })\n      } else if (!this.editorTrip) {\n        this.$store.commit('setEditorTrip', { tripId: value, changeBounds: false })\n        this.$emit('propertiesButton', { action: 'Edit Line Info', lingering: false })\n        // just open dialog\n      } else {\n        this.$emit('propertiesButton', { action: 'Edit Line Info', lingering: true })\n        this.$store.commit('changeNotification', { text: '', autoClose: true })\n      }\n    },\n    createNewLine () {\n      const name = 'trip_' + short.generate()\n      this.$store.commit('setEditorTrip', { tripId: name, changeBounds: false })\n      this.$emit('propertiesButton', { action: 'Edit Line Info', lingering: true })\n    },\n\n    cloneButton (obj) {\n      this.$emit('cloneButton', obj)\n    },\n\n    deleteButton (obj) {\n      // obj contain trip and message.\n      this.$emit('deleteButton', obj)\n    },\n    showAll () {\n      if (this.tripList === this.tripId) {\n        this.tripList = []\n      } else {\n        this.tripList = this.tripId\n      }\n    },\n    showGroup (val) {\n      // at least one value is selected in the group : uncheck all\n      if (val.some(value => this.tripList.includes(value))) {\n        this.tripList = this.tripList.filter(trip => !val.includes(trip))\n      // none are selected : select All.\n      } else {\n        this.tripList = Array.from(new Set([...this.tripList, ...val]))\n      }\n    },\n\n  },\n\n}\n</script>\n<template>\n  <section>\n    <v-card-title class=\"white--text secondary\">\n      <v-tooltip\n        bottom\n        open-delay=\"500\"\n      >\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            icon\n            class=\"ma-2\"\n            :style=\"{color: 'white'}\"\n            v-bind=\"attrs\"\n            v-on=\"on\"\n            @click=\"showAll()\"\n          >\n            <v-icon class=\"list-item-icon\">\n              {{ tripList == tripId ? 'fa-eye fa' : 'fa-eye-slash fa' }}\n            </v-icon>\n          </v-btn>\n        </template>\n        <span>{{ tripList == tripId? $gettext(\"Hide All\"): $gettext(\"Show All\") }}</span>\n      </v-tooltip>\n      <v-tooltip\n        bottom\n        open-delay=\"500\"\n      >\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            icon\n            class=\"ma-2\"\n            :style=\"{color: 'white'}\"\n            v-bind=\"attrs\"\n            :disabled=\"tripList.length===0? true: false\"\n            v-on=\"on\"\n            @click=\"propertiesButton(tripList)\"\n          >\n            <v-icon class=\"list-item-icon\">\n              fas fa-list\n            </v-icon>\n          </v-btn>\n        </template>\n        <span>{{ $gettext(\"Edit Visibles Properties\") }}</span>\n      </v-tooltip>\n\n      <v-spacer />\n      <span :style=\"{color: 'white'}\">\n        {{ $gettext(\"Lines\") }}\n      </span>\n\n      <v-spacer />\n\n      <v-spacer />\n      <v-menu\n        offset-y\n        open-on-hover\n        close-delay=\"100\"\n        transition=\"slide-y-transition\"\n      >\n        <template v-slot:activator=\"{ on: on,attrs:attrs }\">\n          <v-btn\n            icon\n            class=\"ma-2\"\n            :style=\"{color: 'white'}\"\n            dark\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            <v-icon>fa-solid fa-download</v-icon>\n          </v-btn>\n        </template>\n        <v-list>\n          <v-list-item\n            link\n            @click=\"$store.dispatch('exportFiles')\"\n          >\n            <v-list-item-title>\n              {{ $gettext(\"Export All\") }}\n            </v-list-item-title>\n          </v-list-item>\n          <v-list-item\n            link\n            @click=\"$store.dispatch('exportFiles','visibles')\"\n          >\n            <v-list-item-title>\n              {{ $gettext(\"Export Only Visible\") }}\n            </v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </v-card-title>\n    <v-card\n      max-width=\"100%\"\n      min-width=\"100%\"\n      :height=\"height\"\n      class=\"mx-auto scrollable\"\n    >\n      <v-list-item>\n        <v-select\n          v-model=\"vmodelSelectedFilter\"\n          :items=\"filterChoices\"\n          prepend-icon=\"fas fa-filter\"\n          :label=\"$gettext('filter')\"\n          item-color=\"secondarydark\"\n          color=\"secondarydark\"\n        />\n      </v-list-item>\n      <v-list-group\n        v-for=\"(value, key) in classifiedTripId\"\n        :key=\"String(value.name) + String(key)\"\n        color=\"secondarydark\"\n        :value=\"false\"\n        no-action\n      >\n        <template v-slot:activator>\n          <v-list-item-action>\n            <v-tooltip\n              bottom\n              open-delay=\"500\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn\n                  icon\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                  @click.stop=\"showGroup(value.tripId)\"\n                >\n                  <v-icon class=\"list-item-icon\">\n                    {{ value.tripId.some(val => tripList.includes(val))\n                      ? 'fa-eye fa' :\n                        'fa-eye-slash fa' }}\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>\n                {{ value.tripId.some(val => tripList.includes(val))\n                  ? $gettext(\"Hide All\"):\n                    $gettext(\"Show All\") }}\n              </span>\n            </v-tooltip>\n          </v-list-item-action>\n          <v-list-item-content>\n            <v-list-item-title>\n              <strong>\n                {{ value.name=='undefined'? $gettext(value.name): value.name }}\n              </strong>\n            </v-list-item-title>\n          </v-list-item-content>\n          <v-tooltip\n            bottom\n            open-delay=\"500\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                icon\n                class=\"ma-1\"\n                v-bind=\"attrs\"\n                :disabled=\"editorTrip!=null? true: false\"\n                v-on=\"on\"\n                @click.stop=\"propertiesButton(value.tripId)\"\n              >\n                <v-icon color=\"regular\">\n                  fas fa-list\n                </v-icon>\n              </v-btn>\n            </template>\n            <span>{{ $gettext(\"Edit Group Properties\") }}</span>\n          </v-tooltip>\n          <v-tooltip\n            bottom\n            open-delay=\"500\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                icon\n                class=\"ma-1\"\n                v-bind=\"attrs\"\n                :disabled=\"editorTrip ? true: false\"\n                v-on=\"on\"\n                @click.stop=\"deleteButton({trip:value.tripId, message:value.name,action:'deleteTrip'})\"\n              >\n                <v-icon\n                  small\n                  color=\"regular\"\n                >\n                  fas fa-trash\n                </v-icon>\n              </v-btn>\n            </template>\n            <span>{{ $gettext(\"Delete Group\") }}</span>\n          </v-tooltip>\n        </template>\n\n        <v-virtual-scroll\n          :items=\"value.tripId\"\n          :item-height=\"45\"\n          :height=\"Math.min(height-220, 45*value.tripId.length+3)\"\n        >\n          <template v-slot=\"{ item }\">\n            <v-list-item\n              :key=\"item\"\n              class=\"pl-2\"\n            >\n              <v-list-item-action>\n                <v-checkbox\n                  v-model=\"tripList\"\n                  class=\"pl-2\"\n                  :on-icon=\"'fa-eye fa'\"\n                  :off-icon=\"'fa-eye-slash fa'\"\n                  :color=\"'primary'\"\n                  :value=\"item\"\n                  size=\"10\"\n                  hide-details\n                />\n              </v-list-item-action>\n              <v-list-item-title v-if=\"item==editorTrip\">\n                <strong>{{ item }}</strong>\n              </v-list-item-title>\n              <v-list-item-title v-else>\n                {{ item }}\n              </v-list-item-title>\n              <v-tooltip\n                bottom\n                open-delay=\"500\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    icon\n                    class=\"ma-1\"\n                    v-bind=\"attrs\"\n                    :disabled=\"(item != editorTrip) & (editorTrip!=null) ? true: false\"\n                    v-on=\"on\"\n                    @click=\"editButton(item)\"\n                  >\n                    <v-icon :color=\"item == editorTrip? 'regular':'regular' \">\n                      fas fa-pen\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>{{ $gettext(\"Edit Line\") }}</span>\n              </v-tooltip>\n\n              <v-tooltip\n                bottom\n                open-delay=\"500\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    icon\n                    class=\"ma-1\"\n                    v-bind=\"attrs\"\n                    :disabled=\"(item != editorTrip) & (editorTrip!=null) ? true: false\"\n                    v-on=\"on\"\n                    @click=\"propertiesButton(item)\"\n                  >\n                    <v-icon :color=\"item == editorTrip? 'regular':'regular' \">\n                      fas fa-list\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>{{ $gettext(\"Edit Line Properties\") }}</span>\n              </v-tooltip>\n\n              <v-tooltip\n                bottom\n                open-delay=\"500\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    icon\n                    class=\"ma-1\"\n                    v-bind=\"attrs\"\n                    :disabled=\"(item != editorTrip) & (editorTrip!=null) ? true: false\"\n                    v-on=\"on\"\n                    @click=\"cloneButton({trip:item,message:item})\"\n                  >\n                    <v-icon :color=\"item == editorTrip? 'regular':'regular' \">\n                      fas fa-clone\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>{{ $gettext(\"Duplicate\") }}</span>\n              </v-tooltip>\n\n              <v-tooltip\n                bottom\n                open-delay=\"500\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    icon\n                    class=\"ma-1\"\n                    v-bind=\"attrs\"\n                    :disabled=\"editorTrip ? true: false\"\n                    v-on=\"on\"\n                    @click=\"deleteButton({trip:item,message:item,action:'deleteTrip'})\"\n                  >\n                    <v-icon\n                      small\n                      color=\"regular\"\n                    >\n                      fas fa-trash\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>{{ $gettext(\"Delete Line\") }}</span>\n              </v-tooltip>\n            </v-list-item>\n          </template>\n        </v-virtual-scroll>\n      </v-list-group>\n\n      <v-divider />\n    </v-card>\n    <v-card class=\"mx-auto\">\n      <v-list-item v-if=\"editorTrip ? true: false\">\n        <v-tooltip\n          right\n          open-delay=\"500\"\n        >\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn\n              v-bind=\"attrs\"\n              class=\"mx-2\"\n              :color=\"$store.getters.anchorMode? 'grey':'regular'\"\n              v-on=\"on\"\n              @click=\"$store.commit('changeAnchorMode')\"\n            >\n              <v-icon small>\n                fas fa-anchor\n              </v-icon>\n            </v-btn>\n          </template>\n          <span> {{ $gettext(\"Edit Line geometry\") }} <b>(CTRL)</b></span>\n        </v-tooltip>\n\n        <v-btn\n          @click=\"$emit('abortChanges')\"\n        >\n          <v-icon\n            small\n            left\n          >\n            fas fa-times-circle\n          </v-icon>\n          {{ $gettext(\"Abort\") }}\n        </v-btn>\n        <v-btn\n          color=\"primary\"\n          @click=\"$emit('confirmChanges')\"\n        >\n          <v-icon\n            small\n            left\n          >\n            fas fa-save\n          </v-icon>\n          {{ $gettext(\"Confirm\") }}\n        </v-btn>\n      </v-list-item>\n      <v-list-item v-show=\"editorTrip ? false: true\">\n        <v-spacer />\n\n        <v-tooltip\n          bottom\n          open-delay=\"500\"\n        >\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn\n              v-bind=\"attrs\"\n              color=\"primary\"\n              class=\"text--primary\"\n              fab\n              small\n              v-on=\"on\"\n              @click=\"createNewLine\"\n            >\n              <v-icon>fas fa-plus</v-icon>\n            </v-btn>\n          </template>\n          <span>{{ $gettext(\"Create new Line\") }}</span>\n        </v-tooltip>\n      </v-list-item>\n    </v-card>\n    <v-dialog\n      v-model=\"showDialog\"\n      persistent\n      max-width=\"290\"\n      @keydown.enter=\"$emit('confirmChanges'); showDialog = !showDialog\"\n      @keydown.esc=\"showDialog=false\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          {{ $gettext(\"Save Changes?\") }}\n        </v-card-title>\n        <v-card-actions>\n          <v-btn\n            color=\"regular\"\n            left\n            @click=\"showDialog = false\"\n          >\n            {{ $gettext(\"Cancel\") }}\n          </v-btn>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"$emit('abortChanges'); showDialog = !showDialog\"\n          >\n            {{ $gettext(\"No\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"primary\"\n\n            @click=\"$emit('confirmChanges'); showDialog = !showDialog\"\n          >\n            {{ $gettext(\"Yes\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n@import \"src/scss/variables.scss\";\n.left-panel {\n  height: 100%;\n  background-color: $primary-dark;\n  transition: 0.3s;\n  position: absolute;\n  display:flex;\n  z-index: 20;\n\n}\n.left-panel-close {\ntransition:0.3s\n}\n.left-panel-content {\n  display:inline-block;\n  width : 100%;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  //resize: horizontal;\n  overflow: auto;\n\n}\n.v-list__tile {\n  padding: 0\n}\n.left-panel-toggle-btn {\n  left: 100%;\n  width: 25px;\n  z-index: 1;\n  background-color: $primary-dark;\n  display: flex;\n  position: relative;\n  align-items: center;\n  justify-content: center;\n  height: 50px;\n  transition: 0.3s;\n  cursor: pointer;\n}\n.left-panel-title {\n  height: 50px;\n  line-height: 55px;\n  padding-left: 20px;\n  font-size: 1.1em;\n  margin-bottom: 10px;\n}\n.trip-list {\n  height: height;\n  padding-left:20px\n}\n\n.scrollable {\n   overflow-y:scroll;\n\n}\n\n.drawer-list-item {\n  padding: 0 13px !important;\n  justify-content: flex-start !important;\n  flex: 0;\n  transition: 0.3s;\n}\n\n.list-item-icon {\n  display: flex !important;\n  flex-flow: row !important;\n  justify-content: center !important;\n  margin: 0 !important;\n  color: white;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinksSidePanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinksSidePanel.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinksSidePanel.vue?vue&type=style&index=0&id=acad4354&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinksSidePanel.vue?vue&type=style&index=0&id=acad4354&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./LinksSidePanel.vue?vue&type=template&id=acad4354&scoped=true&\"\nimport script from \"./LinksSidePanel.vue?vue&type=script&lang=js&\"\nexport * from \"./LinksSidePanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LinksSidePanel.vue?vue&type=style&index=0&id=acad4354&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"acad4354\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"v-card-title\",\n        { staticClass: \"white--text secondary\" },\n        [\n          _c(\n            \"v-tooltip\",\n            {\n              attrs: { bottom: \"\", \"open-delay\": \"500\" },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on, attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              staticClass: \"ma-2\",\n                              style: { color: \"white\" },\n                              attrs: { icon: \"\" },\n                              on: {\n                                click: function ($event) {\n                                  return _vm.showAll()\n                                },\n                              },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [\n                          _c(\"v-icon\", { staticClass: \"list-item-icon\" }, [\n                            _vm._v(\n                              \"\\n            \" +\n                                _vm._s(\n                                  _vm.tripList.length > 0\n                                    ? \"fa-eye fa\"\n                                    : \"fa-eye-slash fa\"\n                                ) +\n                                \"\\n          \"\n                            ),\n                          ]),\n                        ],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\"span\", [\n                _vm._v(\n                  _vm._s(\n                    _vm.tripList.length > 0\n                      ? _vm.$gettext(\"Hide All\")\n                      : _vm.$gettext(\"Show All\")\n                  )\n                ),\n              ]),\n            ]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-tooltip\",\n            {\n              attrs: { bottom: \"\", \"open-delay\": \"500\" },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on, attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              staticClass: \"ma-2\",\n                              style: { color: \"white\" },\n                              attrs: {\n                                icon: \"\",\n                                disabled:\n                                  _vm.tripList.length === 0 ? true : false,\n                              },\n                              on: {\n                                click: function ($event) {\n                                  return _vm.editVisible()\n                                },\n                              },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [\n                          _c(\"v-icon\", { staticClass: \"list-item-icon\" }, [\n                            _vm._v(\"\\n            fas fa-list\\n          \"),\n                          ]),\n                        ],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\"span\", [\n                _vm._v(_vm._s(_vm.$gettext(\"Edit Visibles Properties\"))),\n              ]),\n            ]\n          ),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\"span\", { style: { color: \"white\" } }, [\n            _vm._v(\"\\n      \" + _vm._s(_vm.$gettext(\"Roads\")) + \"\\n    \"),\n          ]),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-menu\",\n            {\n              attrs: {\n                \"offset-y\": \"\",\n                \"open-on-hover\": \"\",\n                \"close-delay\": \"100\",\n                transition: \"slide-y-transition\",\n              },\n              scopedSlots: _vm._u([\n                {\n                  key: \"activator\",\n                  fn: function ({ on: on, attrs: attrs }) {\n                    return [\n                      _c(\n                        \"v-btn\",\n                        _vm._g(\n                          _vm._b(\n                            {\n                              staticClass: \"ma-2\",\n                              style: { color: \"white\" },\n                              attrs: { icon: \"\", dark: \"\" },\n                            },\n                            \"v-btn\",\n                            attrs,\n                            false\n                          ),\n                          on\n                        ),\n                        [_c(\"v-icon\", [_vm._v(\"fa-solid fa-download\")])],\n                        1\n                      ),\n                    ]\n                  },\n                },\n              ]),\n            },\n            [\n              _vm._v(\" \"),\n              _c(\n                \"v-list\",\n                [\n                  _c(\n                    \"v-list-item\",\n                    {\n                      attrs: { link: \"\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.$store.dispatch(\"exportFiles\", \"all\")\n                        },\n                      },\n                    },\n                    [\n                      _c(\"v-list-item-title\", [\n                        _vm._v(\n                          \"\\n            \" +\n                            _vm._s(_vm.$gettext(\"Export All\")) +\n                            \"\\n          \"\n                        ),\n                      ]),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-list-item\",\n                    {\n                      attrs: { link: \"\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.$store.dispatch(\"exportFiles\", \"visible\")\n                        },\n                      },\n                    },\n                    [\n                      _c(\"v-list-item-title\", [\n                        _vm._v(\n                          \"\\n            \" +\n                            _vm._s(_vm.$gettext(\"Export Only Visible\")) +\n                            \"\\n          \"\n                        ),\n                      ]),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-card\",\n        {\n          staticClass: \"mx-auto scrollable\",\n          attrs: {\n            \"max-width\": \"100%\",\n            \"min-width\": \"100%\",\n            height: _vm.height,\n          },\n        },\n        [\n          _c(\n            \"v-list-item\",\n            [\n              _c(\"v-select\", {\n                attrs: {\n                  items: _vm.filterChoices,\n                  \"prepend-icon\": \"fas fa-filter\",\n                  label: _vm.$gettext(\"filter\"),\n                  \"item-color\": \"secondarydark\",\n                  color: \"secondarydark\",\n                },\n                model: {\n                  value: _vm.vmodelSelectedFilter,\n                  callback: function ($$v) {\n                    _vm.vmodelSelectedFilter = $$v\n                  },\n                  expression: \"vmodelSelectedFilter\",\n                },\n              }),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"v-virtual-scroll\", {\n            attrs: {\n              items: _vm.filteredCat,\n              \"item-height\": 45,\n              height: _vm.height - 71,\n            },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function ({ item }) {\n                  return [\n                    _c(\n                      \"v-list-item\",\n                      {\n                        key: _vm.vmodelSelectedFilter.concat(item),\n                        staticClass: \"pl-2\",\n                      },\n                      [\n                        _c(\n                          \"v-list-item-action\",\n                          [\n                            _c(\"v-checkbox\", {\n                              staticClass: \"pl-2\",\n                              attrs: {\n                                \"on-icon\": \"fa-eye fa\",\n                                \"off-icon\": \"fa-eye-slash fa\",\n                                color: \"primary\",\n                                value: item,\n                                size: \"10\",\n                                \"hide-details\": \"\",\n                              },\n                              model: {\n                                value: _vm.tripList,\n                                callback: function ($$v) {\n                                  _vm.tripList = $$v\n                                },\n                                expression: \"tripList\",\n                              },\n                            }),\n                          ],\n                          1\n                        ),\n                        _vm._v(\" \"),\n                        _c(\"v-list-item-title\", [\n                          _vm._v(\n                            \"\\n            \" + _vm._s(item) + \"\\n          \"\n                          ),\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\n                          \"v-tooltip\",\n                          {\n                            attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                            scopedSlots: _vm._u(\n                              [\n                                {\n                                  key: \"activator\",\n                                  fn: function ({ on, attrs }) {\n                                    return [\n                                      _c(\n                                        \"v-btn\",\n                                        _vm._g(\n                                          _vm._b(\n                                            {\n                                              staticClass: \"ma-1\",\n                                              attrs: {\n                                                icon: \"\",\n                                                disabled: false,\n                                              },\n                                              on: {\n                                                click: function ($event) {\n                                                  return _vm.propertiesButton(\n                                                    item\n                                                  )\n                                                },\n                                              },\n                                            },\n                                            \"v-btn\",\n                                            attrs,\n                                            false\n                                          ),\n                                          on\n                                        ),\n                                        [\n                                          _c(\n                                            \"v-icon\",\n                                            { attrs: { color: \"regular\" } },\n                                            [\n                                              _vm._v(\n                                                \"\\n                  fas fa-list\\n                \"\n                                              ),\n                                            ]\n                                          ),\n                                        ],\n                                        1\n                                      ),\n                                    ]\n                                  },\n                                },\n                              ],\n                              null,\n                              true\n                            ),\n                          },\n                          [\n                            _vm._v(\" \"),\n                            _c(\"span\", [\n                              _vm._v(\n                                _vm._s(_vm.$gettext(\"Edit Line Properties\"))\n                              ),\n                            ]),\n                          ]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"v-tooltip\",\n                          {\n                            attrs: { bottom: \"\", \"open-delay\": \"500\" },\n                            scopedSlots: _vm._u(\n                              [\n                                {\n                                  key: \"activator\",\n                                  fn: function ({ on, attrs }) {\n                                    return [\n                                      _c(\n                                        \"v-btn\",\n                                        _vm._g(\n                                          _vm._b(\n                                            {\n                                              staticClass: \"ma-1\",\n                                              attrs: {\n                                                icon: \"\",\n                                                disabled: false,\n                                              },\n                                              on: {\n                                                click: function ($event) {\n                                                  return _vm.deleteButton({\n                                                    trip: item,\n                                                    group: _vm.selectedFilter,\n                                                    message: item,\n                                                    action: \"deleterGroup\",\n                                                  })\n                                                },\n                                              },\n                                            },\n                                            \"v-btn\",\n                                            attrs,\n                                            false\n                                          ),\n                                          on\n                                        ),\n                                        [\n                                          _c(\n                                            \"v-icon\",\n                                            {\n                                              attrs: {\n                                                small: \"\",\n                                                color: \"regular\",\n                                              },\n                                            },\n                                            [\n                                              _vm._v(\n                                                \"\\n                  fas fa-trash\\n                \"\n                                              ),\n                                            ]\n                                          ),\n                                        ],\n                                        1\n                                      ),\n                                    ]\n                                  },\n                                },\n                              ],\n                              null,\n                              true\n                            ),\n                          },\n                          [\n                            _vm._v(\" \"),\n                            _c(\"span\", [\n                              _vm._v(_vm._s(_vm.$gettext(\"Delete Line\"))),\n                            ]),\n                          ]\n                        ),\n                      ],\n                      1\n                    ),\n                  ]\n                },\n              },\n            ]),\n          }),\n          _vm._v(\" \"),\n          _c(\"v-divider\"),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-card\",\n        { staticClass: \"mx-auto\" },\n        [\n          _c(\n            \"v-list-item\",\n            [\n              _c(\n                \"v-tooltip\",\n                {\n                  attrs: { right: \"\", \"open-delay\": \"500\" },\n                  scopedSlots: _vm._u([\n                    {\n                      key: \"activator\",\n                      fn: function ({ on, attrs }) {\n                        return [\n                          _c(\n                            \"v-btn\",\n                            _vm._g(\n                              _vm._b(\n                                {\n                                  staticClass: \"mx-2\",\n                                  attrs: {\n                                    color: _vm.$store.getters.anchorMode\n                                      ? \"grey\"\n                                      : \"regular\",\n                                  },\n                                  on: {\n                                    click: function ($event) {\n                                      return _vm.$store.commit(\n                                        \"changeAnchorMode\"\n                                      )\n                                    },\n                                  },\n                                },\n                                \"v-btn\",\n                                attrs,\n                                false\n                              ),\n                              on\n                            ),\n                            [\n                              _c(\"v-icon\", { attrs: { small: \"\" } }, [\n                                _vm._v(\n                                  \"\\n              fas fa-anchor\\n            \"\n                                ),\n                              ]),\n                            ],\n                            1\n                          ),\n                        ]\n                      },\n                    },\n                  ]),\n                },\n                [\n                  _vm._v(\" \"),\n                  _c(\"span\", [\n                    _vm._v(\n                      \" \" + _vm._s(_vm.$gettext(\"Edit Line geometry\")) + \" \"\n                    ),\n                    _c(\"b\", [_vm._v(\"(CTRL)\")]),\n                  ]),\n                ]\n              ),\n              _vm._v(\" \"),\n              _c(\"v-spacer\"),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: { persistent: \"\", \"max-width\": \"290\" },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                _vm.$emit(\"confirmChanges\")\n                _vm.showDialog = !_vm.showDialog\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                _vm.showDialog = false\n              },\n            ],\n          },\n          model: {\n            value: _vm.showDialog,\n            callback: function ($$v) {\n              _vm.showDialog = $$v\n            },\n            expression: \"showDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            [\n              _c(\"v-card-title\", { staticClass: \"text-h5\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Save Changes?\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\", left: \"\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.showDialog = false\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Cancel\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.$emit(\"abortChanges\")\n                          _vm.showDialog = !_vm.showDialog\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"No\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.$emit(\"confirmChanges\")\n                          _vm.showDialog = !_vm.showDialog\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Yes\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\n\nexport default {\n  name: 'RoadSidePanel',\n  components: {\n  },\n  props: ['selectedrGoup', 'height'], // height is here to resize with the windows...\n  events: ['selectEditorTrip', 'confirmChanges', 'abortChanges', 'deleteButton', 'propertiesButton', 'newLine'],\n\n  data () {\n    return {\n      showDialog: false,\n      tripList: this.selectedrGoup,\n      // for some reason, the v-model does not update when i force it in a watcher or a method.\n      // I this vmodelselectedFilter for displaying the correct selected filter in the filter selector.\n      selectedFilter: '',\n      vmodelSelectedFilter: '',\n    }\n  },\n  computed: {\n    filterChoices () { return this.$store.getters.rlineAttributes },\n    filteredCat () { return this.$store.getters.filteredrCategory },\n\n  },\n\n  watch: {\n    tripList (newVal, oldVal) {\n      let changes = ''\n      let method = 'add'\n      if (newVal === this.filteredCat) {\n        changes = newVal\n        method = 'showAll'\n      } else if (newVal.length === 0) {\n        changes = []\n        method = 'hideAll'\n      } else if (newVal.length < oldVal.length) {\n        // if a tripis unchecked. we remove it\n        changes = oldVal.filter(item => !newVal.includes(item))\n        method = 'remove'\n      } else if (newVal.length > oldVal.length) {\n        // if a trip is added, we add it!\n        changes = newVal.filter(item => !oldVal.includes(item))\n        method = 'add'\n      }\n      if (changes !== '') {\n        this.$emit('update-tripList', { category: this.vmodelSelectedFilter, data: changes, method: method })\n      }\n    },\n    selectedrGoup (newVal) {\n      // check selected group in store. if it changes from another component\n      const a = new Set(newVal)\n      const b = new Set(this.tripList)\n      if (!(a.size === b.size && new Set([...a, ...b]).size === a.size)) {\n        this.tripList = structuredClone(newVal)\n      }\n    },\n\n    vmodelSelectedFilter (newVal, oldVal) {\n      this.selectedFilter = newVal\n      // only reset if we change the filter.\n      this.$store.commit('changeSelectedrFilter', this.selectedFilter)\n      // when the component is loaded, oldVal is null and we dont want to overwrite tripList to [].\n      if (oldVal) {\n        this.tripList = []\n      }\n    },\n\n  },\n  mounted () {\n    this.tripList = this.selectedrGoup\n    this.selectedFilter = this.$store.getters.selectedrFilter\n    this.vmodelSelectedFilter = this.selectedFilter\n    this.$store.commit('changeSelectedrFilter', this.selectedFilter)\n\n    if (this.$store.getters.links.features.length === 0 &&\n    !this.$store.getters.projectIsEmpty &&\n    this.selectedrGoup.length === 0) {\n      this.showAll()\n    }\n  },\n\n  methods: {\n\n    propertiesButton (value) {\n      // select the TripId and open dialog\n      this.$emit('propertiesButton', {\n        action: 'Edit Road Group Info',\n        lingering: false,\n        category: this.vmodelSelectedFilter,\n        group: value,\n      })\n    },\n    editVisible () {\n      this.$emit('propertiesButton', {\n        action: 'Edit Visible Road Info',\n        lingering: false,\n      })\n    },\n\n    deleteButton (obj) {\n      // obj contain trip and message.\n      this.$emit('deleteButton', obj)\n    },\n    showAll () {\n      if (this.tripList.length === this.filteredCat.length) {\n        this.tripList = []\n      } else {\n        this.tripList = this.filteredCat\n      }\n    },\n    showGroup (val) {\n      this.tripList = Array.from(new Set([...this.tripList, ...val]))\n    },\n\n  },\n\n}\n</script>\n<template>\n  <section>\n    <v-card-title class=\"white--text secondary\">\n      <v-tooltip\n        bottom\n        open-delay=\"500\"\n      >\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            icon\n            class=\"ma-2\"\n            :style=\"{color: 'white'}\"\n            v-bind=\"attrs\"\n            v-on=\"on\"\n            @click=\"showAll()\"\n          >\n            <v-icon class=\"list-item-icon\">\n              {{ tripList.length > 0 ? 'fa-eye fa' : 'fa-eye-slash fa' }}\n            </v-icon>\n          </v-btn>\n        </template>\n        <span>{{ tripList.length > 0 ? $gettext(\"Hide All\"): $gettext(\"Show All\") }}</span>\n      </v-tooltip>\n      <v-tooltip\n        bottom\n        open-delay=\"500\"\n      >\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            icon\n            class=\"ma-2\"\n            :style=\"{color: 'white'}\"\n            :disabled=\"tripList.length===0? true: false\"\n            v-bind=\"attrs\"\n            v-on=\"on\"\n            @click=\"editVisible()\"\n          >\n            <v-icon class=\"list-item-icon\">\n              fas fa-list\n            </v-icon>\n          </v-btn>\n        </template>\n        <span>{{ $gettext(\"Edit Visibles Properties\") }}</span>\n      </v-tooltip>\n\n      <v-spacer />\n      <span :style=\"{color: 'white'}\">\n        {{ $gettext(\"Roads\") }}\n      </span>\n\n      <v-spacer />\n\n      <v-spacer />\n      <v-menu\n        offset-y\n        open-on-hover\n        close-delay=\"100\"\n        transition=\"slide-y-transition\"\n      >\n        <template v-slot:activator=\"{ on: on,attrs:attrs }\">\n          <v-btn\n            icon\n            class=\"ma-2\"\n            :style=\"{color: 'white'}\"\n            dark\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            <v-icon>fa-solid fa-download</v-icon>\n          </v-btn>\n        </template>\n        <v-list>\n          <v-list-item\n            link\n            @click=\"$store.dispatch('exportFiles','all')\"\n          >\n            <v-list-item-title>\n              {{ $gettext(\"Export All\") }}\n            </v-list-item-title>\n          </v-list-item>\n          <v-list-item\n            link\n            @click=\"$store.dispatch('exportFiles','visible')\"\n          >\n            <v-list-item-title>\n              {{ $gettext(\"Export Only Visible\") }}\n            </v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </v-card-title>\n    <v-card\n      max-width=\"100%\"\n      min-width=\"100%\"\n      :height=\"height\"\n      class=\"mx-auto scrollable\"\n    >\n      <v-list-item>\n        <v-select\n          v-model=\"vmodelSelectedFilter\"\n          :items=\"filterChoices\"\n          prepend-icon=\"fas fa-filter\"\n          :label=\"$gettext('filter')\"\n          item-color=\"secondarydark\"\n          color=\"secondarydark\"\n        />\n      </v-list-item>\n\n      <v-virtual-scroll\n        :items=\"filteredCat\"\n        :item-height=\"45\"\n        :height=\"height-71\"\n      >\n        <template v-slot=\"{ item }\">\n          <v-list-item\n            :key=\"vmodelSelectedFilter.concat(item)\"\n            class=\"pl-2\"\n          >\n            <v-list-item-action>\n              <v-checkbox\n                v-model=\"tripList\"\n                class=\"pl-2\"\n                :on-icon=\"'fa-eye fa'\"\n                :off-icon=\"'fa-eye-slash fa'\"\n                :color=\"'primary'\"\n                :value=\"item\"\n                size=\"10\"\n                hide-details\n              />\n            </v-list-item-action>\n\n            <v-list-item-title>\n              {{ item }}\n            </v-list-item-title>\n\n            <v-tooltip\n              bottom\n              open-delay=\"500\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn\n                  icon\n                  class=\"ma-1\"\n                  v-bind=\"attrs\"\n                  :disabled=\"false\"\n                  v-on=\"on\"\n                  @click=\"propertiesButton(item)\"\n                >\n                  <v-icon :color=\"'regular' \">\n                    fas fa-list\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>{{ $gettext(\"Edit Line Properties\") }}</span>\n            </v-tooltip>\n\n            <v-tooltip\n              bottom\n              open-delay=\"500\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn\n                  icon\n                  class=\"ma-1\"\n                  v-bind=\"attrs\"\n                  :disabled=\"false\"\n                  v-on=\"on\"\n                  @click=\"deleteButton({trip:item,group:selectedFilter,message:item,action:'deleterGroup'})\"\n                >\n                  <v-icon\n                    small\n                    color=\"regular\"\n                  >\n                    fas fa-trash\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>{{ $gettext(\"Delete Line\") }}</span>\n            </v-tooltip>\n          </v-list-item>\n        </template>\n      </v-virtual-scroll>\n\n      <v-divider />\n    </v-card>\n    <v-card class=\"mx-auto\">\n      <v-list-item>\n        <v-tooltip\n          right\n          open-delay=\"500\"\n        >\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn\n              v-bind=\"attrs\"\n              class=\"mx-2\"\n              :color=\"$store.getters.anchorMode? 'grey':'regular'\"\n              v-on=\"on\"\n              @click=\"$store.commit('changeAnchorMode')\"\n            >\n              <v-icon small>\n                fas fa-anchor\n              </v-icon>\n            </v-btn>\n          </template>\n          <span> {{ $gettext(\"Edit Line geometry\") }} <b>(CTRL)</b></span>\n        </v-tooltip>\n        <v-spacer />\n      </v-list-item>\n    </v-card>\n    <v-dialog\n      v-model=\"showDialog\"\n      persistent\n      max-width=\"290\"\n      @keydown.enter=\"$emit('confirmChanges'); showDialog = !showDialog\"\n      @keydown.esc=\"showDialog=false\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          {{ $gettext(\"Save Changes?\") }}\n        </v-card-title>\n        <v-card-actions>\n          <v-btn\n            color=\"regular\"\n            left\n            @click=\"showDialog = false\"\n          >\n            {{ $gettext(\"Cancel\") }}\n          </v-btn>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"$emit('abortChanges'); showDialog = !showDialog\"\n          >\n            {{ $gettext(\"No\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"primary\"\n\n            @click=\"$emit('confirmChanges'); showDialog = !showDialog\"\n          >\n            {{ $gettext(\"Yes\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n@import \"src/scss/variables.scss\";\n.left-panel {\n  height: 100%;\n  background-color: $primary-dark;\n  transition: 0.3s;\n  position: absolute;\n  display:flex;\n  z-index: 20;\n\n}\n.left-panel-close {\ntransition:0.3s\n}\n.left-panel-content {\n  display:inline-block;\n  width : 100%;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  //resize: horizontal;\n  overflow: auto;\n\n}\n.v-list__tile {\n  padding: 0\n}\n.left-panel-toggle-btn {\n  left: 100%;\n  width: 25px;\n  z-index: 1;\n  background-color: $primary-dark;\n  display: flex;\n  position: relative;\n  align-items: center;\n  justify-content: center;\n  height: 50px;\n  transition: 0.3s;\n  cursor: pointer;\n}\n.left-panel-title {\n  height: 50px;\n  line-height: 55px;\n  padding-left: 20px;\n  font-size: 1.1em;\n  margin-bottom: 10px;\n}\n.trip-list {\n  height: height;\n  padding-left:20px\n}\n\n.scrollable {\n   overflow-y:scroll;\n\n}\n\n.drawer-list-item {\n  padding: 0 13px !important;\n  justify-content: flex-start !important;\n  flex: 0;\n  transition: 0.3s;\n}\n\n.list-item-icon {\n  display: flex !important;\n  flex-flow: row !important;\n  justify-content: center !important;\n  margin: 0 !important;\n  color: white;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoadSidePanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoadSidePanel.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoadSidePanel.vue?vue&type=style&index=0&id=06e9c070&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoadSidePanel.vue?vue&type=style&index=0&id=06e9c070&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./RoadSidePanel.vue?vue&type=template&id=06e9c070&scoped=true&\"\nimport script from \"./RoadSidePanel.vue?vue&type=script&lang=js&\"\nexport * from \"./RoadSidePanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoadSidePanel.vue?vue&type=style&index=0&id=06e9c070&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06e9c070\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidePanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidePanel.vue?vue&type=script&lang=js&\"","<script>\nimport LinksSidePanel from './LinksSidePanel.vue'\nimport RoadSidePanel from './RoadSidePanel.vue'\nexport default {\n  name: 'SidePanel',\n  components: {\n    LinksSidePanel,\n    RoadSidePanel,\n  },\n  props: ['selectedTrips', 'selectedrGroup'],\n  events: ['selectEditorTrip', 'confirmChanges', 'abortChanges', 'cloneButton', 'deleteButton', 'propertiesButton', 'newLine', 'isRoadMode'],\n\n  data () {\n    return {\n      showLeftPanelContent: true,\n      tab: 0,\n      roadMode: false,\n    }\n  },\n  computed: {\n    showLeftPanel () { return this.$store.getters.showLeftPanel },\n    windowHeight () { return this.$store.getters.windowHeight - 200 },\n  },\n\n  watch: {\n    showLeftPanel (val) {\n      if (val) {\n        // Leave time for animation to end (.fade-enter-active css rule)\n        setTimeout(() => {\n          this.showLeftPanelContent = true\n        }, 500)\n      } else {\n        this.showLeftPanelContent = false\n      }\n    },\n\n    tab (val) {\n      if (val === 1) {\n        this.roadMode = true\n      } else {\n        this.roadMode = false\n      }\n      this.$emit('isRoadMode', this.roadMode)\n    },\n  },\n  created () {\n    if (this.$store.getters.links.features.length === 0 && !this.$store.getters.projectIsEmpty) {\n      this.tab = 1\n    }\n  },\n\n}\n</script>\n<template>\n  <section\n    :class=\"showLeftPanel ? 'left-panel elevation-4' : 'left-panel-close'\"\n    :style=\"{'width': showLeftPanel ? '400px' : '0px'}\"\n  >\n    <div\n      class=\"left-panel-toggle-btn elevation-4\"\n      @click=\"$store.commit('changeLeftPanel')\"\n    >\n      <v-icon\n        small\n        color=\"secondary\"\n      >\n        {{ showLeftPanel ? 'fas fa-chevron-left' : 'fas fa-chevron-right' }}\n      </v-icon>\n    </div>\n    <transition name=\"fade\">\n      <div\n        v-show=\"showLeftPanelContent\"\n        id=\"left-panel\"\n        ref=\"leftPanel\"\n        class=\"left-panel-content\"\n      >\n        <div>\n          <div :style=\"{'margin-top': '20px','margin-bottom': '20px','margin-right':'20px'}\">\n            <v-tabs\n              v-model=\"tab\"\n              background-color=\"secondary\"\n              dark\n              grow\n            >\n              <v-tab>{{ $gettext(\"PT Links\") }}</v-tab>\n              <v-tab>{{ $gettext(\"Road Links\") }}</v-tab>\n            </v-tabs>\n            <LinksSidePanel\n              v-show=\"!roadMode\"\n              :height=\"windowHeight\"\n              :selected-trips=\"selectedTrips\"\n              @update-tripList=\"(e) => $emit('update-tripList', {type: 'links', data: e})\"\n              @confirmChanges=\"(e) => $emit('confirmChanges',e)\"\n              @abortChanges=\"(e) => $emit('abortChanges',e)\"\n              @cloneButton=\"(e) => $emit('cloneButton',e)\"\n              @deleteButton=\"(e) => $emit('deleteButton',e)\"\n              @propertiesButton=\"(e) => $emit('propertiesButton',e)\"\n            />\n            <RoadSidePanel\n              v-show=\"roadMode\"\n              :height=\"windowHeight\"\n              :selectedr-goup=\"selectedrGroup\"\n              @update-tripList=\"(e) => $emit('update-tripList',{type: 'rlinks', data: e})\"\n              @confirmChanges=\"(e) => $emit('confirmChanges',e)\"\n              @abortChanges=\"(e) => $emit('abortChanges',e)\"\n              @deleteButton=\"(e) => $emit('deleteButton',e)\"\n              @propertiesButton=\"(e) => $emit('propertiesButton',e)\"\n            />\n          </div>\n        </div>\n      </div>\n    </transition>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n.left-panel {\n  height: 100%;\n  background-color:var(--v-primarydark-base);\n  transition: 0.3s;\n  position: absolute;\n  display:flex;\n  z-index: 20;\n\n}\n.left-panel-close {\ntransition:0.3s\n}\n.left-panel-content {\n  display:inline-block;\n  width : 100%;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  //resize: horizontal;\n  overflow: auto;\n\n}\n.v-list__tile {\n  padding: 0\n}\n.left-panel-toggle-btn {\n  left: 100%;\n  width: 25px;\n  z-index: 1;\n  background-color: var(--v-primarydark-base);\n  display: flex;\n  position: relative;\n  align-items: center;\n  justify-content: center;\n  height: 50px;\n  transition: 0.3s;\n  cursor: pointer;\n}\n.left-panel-title {\n  height: 50px;\n  line-height: 55px;\n  padding-left: 20px;\n  font-size: 1.1em;\n  margin-bottom: 10px;\n}\n.trip-list {\n  height: height;\n  padding-left:20px\n}\n\n.scrollable {\n   overflow-y:scroll;\n\n}\n\n.drawer-list-item {\n  padding: 0 13px !important;\n  justify-content: flex-start !important;\n  flex: 0;\n  transition: 0.3s;\n}\n\n.list-item-icon {\n  display: flex !important;\n  flex-flow: row !important;\n  justify-content: center !important;\n  margin: 0 !important;\n  color: white;\n}\n\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidePanel.vue?vue&type=style&index=0&id=7105305e&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidePanel.vue?vue&type=style&index=0&id=7105305e&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SidePanel.vue?vue&type=template&id=7105305e&scoped=true&\"\nimport script from \"./SidePanel.vue?vue&type=script&lang=js&\"\nexport * from \"./SidePanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SidePanel.vue?vue&type=style&index=0&id=7105305e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7105305e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"MglMap\",\n    {\n      key: _vm.mapStyle,\n      style: { width: \"100%\" },\n      attrs: {\n        \"access-token\": _vm.mapboxPublicKey,\n        \"map-style\": _vm.mapStyle,\n        center: _vm.$store.getters.mapCenter,\n        zoom: _vm.$store.getters.mapZoom,\n      },\n      on: {\n        load: _vm.onMapLoaded,\n        mousemove: _vm.draw,\n        mouseout: function ($event) {\n          return _vm.resetDraw()\n        },\n        click: _vm.addPoint,\n        mouseup: _vm.rightClickMap,\n      },\n    },\n    [\n      _vm.mapIsLoaded ? [_c(\"Settings\")] : _vm._e(),\n      _vm._v(\" \"),\n      _vm.mapIsLoaded & (_vm.rasterFiles.length > 0)\n        ? [\n            _c(\"LayerSelector\", {\n              attrs: { choices: _vm.rasterFiles.map((item) => item.name) },\n            }),\n          ]\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"MglScaleControl\", { attrs: { position: \"bottom-right\" } }),\n      _vm._v(\" \"),\n      _c(\"MglNavigationControl\", { attrs: { position: \"bottom-right\" } }),\n      _vm._v(\" \"),\n      _vm._l(_vm.rasterFiles, function (file) {\n        return _c(\n          \"div\",\n          { key: file.name },\n          [\n            _vm.mapIsLoaded\n              ? [\n                  _c(\"StaticLayer\", {\n                    attrs: {\n                      \"file-name\": file.name,\n                      type: file.type,\n                      visible: _vm.rasterLayers.includes(file.name),\n                    },\n                  }),\n                ]\n              : _vm._e(),\n          ],\n          2\n        )\n      }),\n      _vm._v(\" \"),\n      _vm.mapIsLoaded\n        ? [\n            _c(\n              \"RoadLinks\",\n              _vm._g(\n                {\n                  ref: \"roadref\",\n                  attrs: {\n                    map: _vm.map,\n                    \"is-editor-mode\": _vm.isEditorMode,\n                    \"is-road-mode\": _vm.isRoadMode,\n                    \"anchor-mode\": _vm.anchorMode,\n                  },\n                },\n                _vm.isEditorMode\n                  ? {}\n                  : _vm.anchorMode\n                  ? { clickFeature: _vm.clickFeature }\n                  : {\n                      onHover: _vm.onHoverRoad,\n                      offHover: _vm.offHover,\n                      clickFeature: _vm.clickFeature,\n                    }\n              )\n            ),\n          ]\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.mapIsLoaded\n        ? [\n            _c(\"StaticLinks\", {\n              attrs: {\n                map: _vm.map,\n                \"showed-trips\": _vm.selectedTrips,\n                \"is-editor-mode\": _vm.isEditorMode,\n              },\n              on: { rightClick: (e) => _vm.$emit(\"clickFeature\", e) },\n            }),\n          ]\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.mapIsLoaded\n        ? [\n            _c(\n              \"EditorLinks\",\n              _vm._g(\n                { attrs: { map: _vm.map, \"anchor-mode\": _vm.anchorMode } },\n                _vm.anchorMode\n                  ? { clickFeature: _vm.clickFeature }\n                  : {\n                      onHover: _vm.onHover,\n                      offHover: _vm.offHover,\n                      clickFeature: _vm.clickFeature,\n                    }\n              )\n            ),\n          ]\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.mapIsLoaded\n        ? [\n            _vm.drawMode\n              ? _c(\"MglGeojsonLayer\", {\n                  attrs: {\n                    \"source-id\": \"drawLink\",\n                    source: {\n                      type: \"geojson\",\n                      data: _vm.drawLink,\n                      buffer: 0,\n                      generateId: true,\n                    },\n                    \"layer-id\": \"drawLink\",\n                    layer: {\n                      type: \"line\",\n                      minzoom: 2,\n                      paint: {\n                        \"line-opacity\": 1,\n                        \"line-color\":\n                          _vm.$vuetify.theme.currentTheme.linksprimary,\n                        \"line-width\": [\n                          \"case\",\n                          [\"boolean\", _vm.connectedDrawLink, false],\n                          5,\n                          3,\n                        ],\n                        \"line-dasharray\": [\n                          \"case\",\n                          [\"boolean\", _vm.connectedDrawLink, false],\n                          [\"literal\", []],\n                          [\"literal\", [0, 2, 4]],\n                        ],\n                      },\n                    },\n                  },\n                })\n              : _vm._e(),\n          ]\n        : _vm._e(),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"v-menu\",\n    {\n      attrs: {\n        \"close-on-content-click\": false,\n        \"close-on-click\": false,\n        origin: \"top right\",\n        transition: \"scale-transition\",\n        \"position-y\": 30,\n        \"nudge-width\": 200,\n        \"offset-x\": \"\",\n        \"offset-y\": \"\",\n      },\n      scopedSlots: _vm._u([\n        {\n          key: \"activator\",\n          fn: function ({ on, attrs }) {\n            return [\n              _c(\n                \"v-btn\",\n                _vm._g(\n                  _vm._b(\n                    { staticClass: \"setting\", attrs: { fab: \"\", small: \"\" } },\n                    \"v-btn\",\n                    attrs,\n                    false\n                  ),\n                  on\n                ),\n                [\n                  _c(\"v-icon\", { attrs: { color: \"regular\" } }, [\n                    _vm._v(\"\\n        fa-solid fa-cog\\n      \"),\n                  ]),\n                ],\n                1\n              ),\n            ]\n          },\n        },\n      ]),\n      model: {\n        value: _vm.show,\n        callback: function ($$v) {\n          _vm.show = $$v\n        },\n        expression: \"show\",\n      },\n    },\n    [\n      _vm._v(\" \"),\n      _c(\n        \"v-card\",\n        {\n          class: { shake: _vm.shake },\n          attrs: { \"max-width\": 300 },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                return _vm.submit.apply(null, arguments)\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                return _vm.cancel.apply(null, arguments)\n              },\n            ],\n          },\n        },\n        [\n          _c(\"v-card-title\", { staticClass: \"subtitle\" }, [\n            _vm._v(\"\\n      \" + _vm._s(_vm.$gettext(\"Settings\")) + \"\\n    \"),\n          ]),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-text\",\n            [\n              _c(\n                \"v-form\",\n                { ref: \"form\", attrs: { \"lazy-validation\": \"\" } },\n                [\n                  _c(\n                    \"v-container\",\n                    [\n                      _c(\n                        \"v-col\",\n                        [\n                          _c(\"v-text-field\", {\n                            attrs: {\n                              type: _vm.linkSpeed.type,\n                              label: _vm.$gettext(_vm.linkSpeed.name),\n                              suffix: _vm.linkSpeed.units,\n                              hint: _vm.showHint\n                                ? _vm.$gettext(_vm.linkSpeed.hint)\n                                : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              rules: _vm.rules,\n                              required: \"\",\n                            },\n                            on: { wheel: () => {} },\n                            model: {\n                              value: _vm.linkSpeed.value,\n                              callback: function ($$v) {\n                                _vm.$set(_vm.linkSpeed, \"value\", $$v)\n                              },\n                              expression: \"linkSpeed.value\",\n                            },\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"v-text-field\", {\n                            attrs: {\n                              type: _vm.roadSpeed.type,\n                              label: _vm.$gettext(_vm.roadSpeed.name),\n                              suffix: _vm.roadSpeed.units,\n                              hint: _vm.showHint\n                                ? _vm.$gettext(_vm.roadSpeed.hint)\n                                : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              rules: _vm.rules,\n                              required: \"\",\n                            },\n                            on: { wheel: () => {} },\n                            model: {\n                              value: _vm.roadSpeed.value,\n                              callback: function ($$v) {\n                                _vm.$set(_vm.roadSpeed, \"value\", $$v)\n                              },\n                              expression: \"roadSpeed.value\",\n                            },\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"v-select\", {\n                            attrs: {\n                              items: _vm.linksPopupContent.choices,\n                              label: _vm.$gettext(_vm.linksPopupContent.name),\n                              hint: _vm.showHint\n                                ? _vm.$gettext(_vm.linksPopupContent.hint)\n                                : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              \"menu-props\": { top: true, offsetY: true },\n                              chips: \"\",\n                              multiple: \"\",\n                            },\n                            model: {\n                              value: _vm.linksPopupContent.value,\n                              callback: function ($$v) {\n                                _vm.$set(_vm.linksPopupContent, \"value\", $$v)\n                              },\n                              expression: \"linksPopupContent.value\",\n                            },\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"v-select\", {\n                            attrs: {\n                              items: _vm.roadsPopupContent.choices,\n                              label: _vm.$gettext(_vm.roadsPopupContent.name),\n                              hint: _vm.showHint\n                                ? _vm.$gettext(_vm.roadsPopupContent.hint)\n                                : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              \"menu-props\": { top: true, offsetY: true },\n                              chips: \"\",\n                              multiple: \"\",\n                            },\n                            model: {\n                              value: _vm.roadsPopupContent.value,\n                              callback: function ($$v) {\n                                _vm.$set(_vm.roadsPopupContent, \"value\", $$v)\n                              },\n                              expression: \"roadsPopupContent.value\",\n                            },\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"v-text-field\", {\n                            attrs: {\n                              type: _vm.defaultHighway.type,\n                              label: _vm.$gettext(_vm.defaultHighway.name),\n                              suffix: _vm.defaultHighway.units,\n                              hint: _vm.showHint\n                                ? _vm.$gettext(_vm.defaultHighway.hint)\n                                : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              rules: _vm.zipRules,\n                              required: \"\",\n                            },\n                            model: {\n                              value: _vm.defaultHighway.value,\n                              callback: function ($$v) {\n                                _vm.$set(_vm.defaultHighway, \"value\", $$v)\n                              },\n                              expression: \"defaultHighway.value\",\n                            },\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"v-text-field\", {\n                            attrs: {\n                              type: _vm.outputName.type,\n                              label: _vm.$gettext(_vm.outputName.name),\n                              suffix: _vm.outputName.units,\n                              hint: _vm.showHint\n                                ? _vm.$gettext(_vm.outputName.hint)\n                                : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              rules: _vm.zipRules,\n                              required: \"\",\n                            },\n                            model: {\n                              value: _vm.outputName.value,\n                              callback: function ($$v) {\n                                _vm.$set(_vm.outputName, \"value\", $$v)\n                              },\n                              expression: \"outputName.value\",\n                            },\n                          }),\n                        ],\n                        1\n                      ),\n                    ],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-actions\",\n            [\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { color: \"grey\", text: \"\" },\n                  on: { click: _vm.cancel },\n                },\n                [\n                  _vm._v(\n                    \"\\n        \" + _vm._s(_vm.$gettext(\"Cancel\")) + \"\\n      \"\n                  ),\n                ]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { color: \"green darken-1\", text: \"\" },\n                  on: { click: _vm.submit },\n                },\n                [\n                  _vm._v(\n                    \"\\n        \" + _vm._s(_vm.$gettext(\"Save\")) + \"\\n      \"\n                  ),\n                ]\n              ),\n              _vm._v(\" \"),\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { icon: \"\", small: \"\" },\n                  on: {\n                    click: function ($event) {\n                      _vm.showHint = !_vm.showHint\n                    },\n                  },\n                },\n                [_c(\"v-icon\", [_vm._v(\"far fa-question-circle small\")])],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nconst $gettext = s => s\n\nexport default {\n  name: 'Settings',\n  events: ['submit'],\n  data () {\n    return {\n      show: false,\n\n      linkSpeed: {\n        name: $gettext('PT speed'),\n        type: 'Number',\n        value: 0,\n        units: 'km/h',\n        hint: $gettext('Speed used to calculate travel time when a link is drawn, extend or a node is moved'),\n      },\n      roadSpeed: {\n        name: $gettext('Road speed'),\n        type: 'Number',\n        value: 0,\n        units: 'km/h',\n        hint: $gettext('Speed used to calculate road travel time when a link is drawn'),\n      },\n      linksPopupContent: {\n        name: $gettext('PT Popup Content'),\n        type: 'String',\n        choices: [],\n        value: '',\n        hint: $gettext('Link field to display when hovering a trip on the map'),\n      },\n      roadsPopupContent: {\n        name: $gettext('Road Popup Content'),\n        type: 'String',\n        choices: [],\n        value: '',\n        hint: $gettext('Link field to display when hovering road link on the map'),\n      },\n      defaultHighway: {\n        name: $gettext('Road Highway name'),\n        type: 'String',\n        value: '',\n        hint: $gettext('New road links Highway property name'),\n      },\n      outputName: {\n        name: $gettext('Export name'),\n        type: 'String',\n        value: '',\n        units: '.zip',\n        hint: $gettext('the name of the exported zip file'),\n      },\n      errorMessage: null,\n      showHint: false,\n      shake: false,\n\n      rules: [\n        v => !!v || $gettext('Required'),\n        v => v >= 0 || $gettext('should be larger than 0'),\n      ],\n      zipRules: [v => v.slice(-4) !== '.zip' || $gettext('do not add .zip to the end')],\n      showDialog: true,\n    }\n  },\n  watch: {\n    show () { this.fetch() },\n  },\n  created () {\n    this.localShow = this.show\n    this.fetch()\n  },\n  methods: {\n    fetch () {\n      // value are init with this function.\n      // we want to get the value each time we show the settings.\n      // if not, Cancel will not work as the state here and in the store will differ.\n      this.linkSpeed.value = this.$store.getters.linkSpeed\n      this.roadSpeed.value = this.$store.getters.roadSpeed\n      this.linksPopupContent.choices = this.$store.getters.lineAttributes\n      this.linksPopupContent.value = this.$store.getters.linksPopupContent\n      this.roadsPopupContent.choices = this.$store.getters.rlineAttributes\n      this.roadsPopupContent.value = this.$store.getters.roadsPopupContent\n      this.defaultHighway.value = this.$store.getters.defaultHighway\n      this.outputName.value = this.$store.getters.outputName\n    },\n\n    submit () {\n      if (this.$refs.form.validate()) {\n        const payload = {\n          linkSpeed: this.linkSpeed.value,\n          roadSpeed: this.roadSpeed.value,\n          linksPopupContent: this.linksPopupContent.value,\n          roadsPopupContent: this.roadsPopupContent.value,\n          outputName: this.outputName.value,\n          defaultHighway: this.defaultHighway.value,\n        }\n        this.$store.commit('applySettings', payload)\n        this.$emit('submit', true)\n        this.show = false\n        this.$store.commit('changeNotification',\n          { text: $gettext('modification applied'), autoClose: true, color: 'success' })\n      } else {\n        this.shake = true\n        setTimeout(() => {\n          this.shake = false\n        }, 500)\n      }\n    },\n    cancel () {\n      this.$emit('submit', false)\n      this.show = false\n    },\n  },\n}\n</script>\n<template>\n  <v-menu\n    v-model=\"show\"\n    :close-on-content-click=\"false\"\n    :close-on-click=\"false\"\n    :origin=\"'top right'\"\n    transition=\"scale-transition\"\n    :position-y=\"30\"\n    :nudge-width=\"200\"\n    offset-x\n    offset-y\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-btn\n        class=\"setting\"\n        fab\n        small\n        v-bind=\"attrs\"\n        v-on=\"on\"\n      >\n        <v-icon\n          color=\"regular\"\n        >\n          fa-solid fa-cog\n        </v-icon>\n      </v-btn>\n    </template>\n\n    <v-card\n      :class=\"{'shake':shake}\"\n      :max-width=\"300\"\n      @keydown.enter=\"submit\"\n      @keydown.esc=\"cancel\"\n    >\n      <v-card-title class=\"subtitle\">\n        {{ $gettext('Settings') }}\n      </v-card-title>\n\n      <v-card-text>\n        <v-form\n          ref=\"form\"\n          lazy-validation\n        >\n          <v-container>\n            <v-col>\n              <v-text-field\n                v-model=\"linkSpeed.value\"\n                :type=\"linkSpeed.type\"\n                :label=\"$gettext(linkSpeed.name)\"\n                :suffix=\"linkSpeed.units\"\n                :hint=\"showHint? $gettext(linkSpeed.hint): ''\"\n                :persistent-hint=\"showHint\"\n                :rules=\"rules\"\n                required\n                @wheel=\"()=>{}\"\n              />\n              <v-text-field\n                v-model=\"roadSpeed.value\"\n                :type=\"roadSpeed.type\"\n                :label=\"$gettext(roadSpeed.name)\"\n                :suffix=\"roadSpeed.units\"\n                :hint=\"showHint? $gettext(roadSpeed.hint): ''\"\n                :persistent-hint=\"showHint\"\n                :rules=\"rules\"\n                required\n                @wheel=\"()=>{}\"\n              />\n              <v-select\n                v-model=\"linksPopupContent.value\"\n                :items=\"linksPopupContent.choices\"\n                :label=\"$gettext(linksPopupContent.name)\"\n                :hint=\"showHint? $gettext(linksPopupContent.hint): ''\"\n                :persistent-hint=\"showHint\"\n                :menu-props=\"{ top: true, offsetY: true }\"\n                chips\n                multiple\n              />\n              <v-select\n                v-model=\"roadsPopupContent.value\"\n                :items=\"roadsPopupContent.choices\"\n                :label=\"$gettext(roadsPopupContent.name)\"\n                :hint=\"showHint? $gettext(roadsPopupContent.hint): ''\"\n                :persistent-hint=\"showHint\"\n                :menu-props=\"{ top: true, offsetY: true }\"\n                chips\n                multiple\n              />\n              <v-text-field\n                v-model=\"defaultHighway.value\"\n                :type=\"defaultHighway.type\"\n                :label=\"$gettext(defaultHighway.name)\"\n                :suffix=\"defaultHighway.units\"\n                :hint=\"showHint? $gettext(defaultHighway.hint): ''\"\n                :persistent-hint=\"showHint\"\n                :rules=\"zipRules\"\n                required\n              />\n              <v-text-field\n                v-model=\"outputName.value\"\n                :type=\"outputName.type\"\n                :label=\"$gettext(outputName.name)\"\n                :suffix=\"outputName.units\"\n                :hint=\"showHint? $gettext(outputName.hint): ''\"\n                :persistent-hint=\"showHint\"\n                :rules=\"zipRules\"\n                required\n              />\n            </v-col>\n          </v-container>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn\n          color=\"grey\"\n          text\n          @click=\"cancel\"\n        >\n          {{ $gettext(\"Cancel\") }}\n        </v-btn>\n\n        <v-btn\n          color=\"green darken-1\"\n          text\n          @click=\"submit\"\n        >\n          {{ $gettext(\"Save\") }}\n        </v-btn>\n\n        <v-spacer />\n        <v-btn\n          icon\n          small\n          @click=\"showHint = !showHint\"\n        >\n          <v-icon>far fa-question-circle small</v-icon>\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-menu>\n</template>\n<style lang=\"scss\" scoped>\n.setting {\n  position: absolute;\n  top: 10px;\n  right: 20px;\n}\n\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: absolute;\n}\n.card {\n  width: 500px;\n  overflow-y: auto;\n  padding: 40px;\n}\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 3.5em;\n  color: $primary !important;\n  font-weight: bold;\n}\n.subtitle {\n  font-size: 2em;\n  color:  var(--v-secondarydark-base) !important;\n  font-weight: bold;\n  padding:1rem\n\n}\n.card button {\n  margin-top: 40px;\n}\n.shake {\n  animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;\n  transform: translate3d(0, 0, 0);\n}\n@keyframes shake {\n  10%, 90% {\n    transform: translate3d(-1px, 0, 0);\n  }\n  20%, 80% {\n    transform: translate3d(2px, 0, 0);\n  }\n  30%, 50%, 70% {\n    transform: translate3d(-4px, 0, 0);\n  }\n  40%, 60% {\n    transform: translate3d(4px, 0, 0);\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=6c428464&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=6c428464&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=6c428464&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=6c428464&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c428464\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"MglGeojsonLayer\",\n        _vm._g(\n          {\n            attrs: {\n              \"source-id\": \"links\",\n              source: {\n                type: \"geojson\",\n                data: _vm.visibleLinks,\n                buffer: 0,\n                promoteId: \"index\",\n              },\n              \"layer-id\": \"links\",\n              layer: {\n                interactive: true,\n                type: \"line\",\n                minzoom: 1,\n                maxzoom: 18,\n                paint: {\n                  \"line-color\": [\n                    \"case\",\n                    [\"has\", \"route_color\"],\n                    [\"concat\", \"#\", [\"get\", \"route_color\"]],\n                    _vm.$vuetify.theme.currentTheme.linksprimary,\n                  ],\n                  \"line-opacity\": [\n                    \"case\",\n                    [\"boolean\", _vm.isEditorMode, false],\n                    0.1,\n                    1,\n                  ],\n                  \"line-width\": [\n                    \"case\",\n                    [\"has\", \"route_width\"],\n                    [\n                      \"case\",\n                      [\"to-boolean\", [\"to-number\", [\"get\", \"route_width\"]]],\n                      [\"to-number\", [\"get\", \"route_width\"]],\n                      3,\n                    ],\n                    3,\n                  ],\n                },\n\n                layout: {\n                  \"line-sort-key\": [\"to-number\", [\"get\", \"route_width\"]],\n                  \"line-cap\": \"round\",\n                },\n              },\n            },\n          },\n          _vm.isEditorMode\n            ? {}\n            : {\n                mouseenter: _vm.enterLink,\n                mouseleave: _vm.leaveLink,\n                contextmenu: _vm.editLineProperties,\n              }\n        )\n      ),\n      _vm._v(\" \"),\n      _c(\"MglGeojsonLayer\", {\n        attrs: {\n          \"source-id\": \"nodes\",\n          source: {\n            type: \"geojson\",\n            data: _vm.visibleNodes,\n            buffer: 0,\n            promoteId: \"index\",\n          },\n          \"layer-id\": \"nodes\",\n          layer: {\n            interactive: true,\n            type: \"circle\",\n            minzoom: 12,\n            maxzoom: 18,\n            paint: {\n              \"circle-color\": [\n                \"case\",\n                [\"boolean\", _vm.isEditorMode, false],\n                _vm.$vuetify.theme.currentTheme.mediumgrey,\n                _vm.$vuetify.theme.currentTheme.accent,\n              ],\n              \"circle-stroke-color\": _vm.$vuetify.theme.currentTheme.white,\n              \"circle-stroke-width\": 1,\n              \"circle-radius\": [\n                \"case\",\n                [\"has\", \"route_width\"],\n                [\n                  \"case\",\n                  [\"to-boolean\", [\"to-number\", [\"get\", \"route_width\"]]],\n                  [\"to-number\", [\"get\", \"route_width\"]],\n                  3,\n                ],\n                3,\n              ],\n            },\n          },\n        },\n      }),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<!-- eslint-disable no-return-assign -->\n<script>\nimport { MglGeojsonLayer } from 'vue-mapbox'\nimport mapboxgl from 'mapbox-gl'\nexport default {\n  name: 'StaticLinks',\n  components: {\n    MglGeojsonLayer,\n  },\n  props: ['map', 'showedTrips', 'isEditorMode'],\n  events: ['rightClick'],\n\n  data () {\n    return {\n      visibleNodes: {},\n      visibleLinks: {},\n      selectedFeatures: [],\n\n    }\n  },\n  computed: {\n    selectedPopupContent () { return this.$store.getters.linksPopupContent },\n    links () { return this.$store.getters.links },\n    nodes () { return this.$store.getters.nodes },\n  },\n\n  watch: {\n    showedTrips (newVal, oldVal) {\n      this.setHiddenFeatures()\n    },\n    isEditorMode (val) {\n      val ? this.map.off('dblclick', this.selectLine) : this.map.on('dblclick', this.selectLine)\n    },\n  },\n\n  created () {\n    this.visibleLinks = structuredClone(this.$store.getters.linksHeader)\n    this.visibleNodes = structuredClone(this.$store.getters.nodesHeader)\n    this.setHiddenFeatures()\n    this.map.on('dblclick', this.selectLine)\n  },\n\n  methods: {\n\n    enterLink (event) {\n      event.map.getCanvas().style.cursor = 'pointer'\n      this.selectedFeatures = event.mapboxEvent.features\n\n      if (this.popup?.isOpen()) this.popup.remove() // make sure there is no popup before creating one.\n      if (this.selectedPopupContent.length > 0) { // do not show popup if nothing is selected (selectedPopupContent)\n        let htmlContent = this.selectedPopupContent.map(prop => `${prop}: <b>${this.selectedFeatures[0].properties[prop]}</b>`)\n        htmlContent = htmlContent.join('<br> ')\n        this.popup = new mapboxgl.Popup({ closeButton: false })\n          .setLngLat([event.mapboxEvent.lngLat.lng, event.mapboxEvent.lngLat.lat])\n          .setHTML(htmlContent)\n          .addTo(event.map)\n      }\n    },\n    leaveLink (event) {\n      this.selectedFeatures = []\n      if (this.popup?.isOpen()) this.popup.remove()\n      event.map.getCanvas().style.cursor = ''\n    },\n    setHiddenFeatures () {\n      // get visible links and nodes.\n      const showedTripsSet = new Set(this.showedTrips)\n      this.visibleLinks.features = this.links.features.filter(link => showedTripsSet.has(link.properties.trip_id))\n      const a = this.visibleLinks.features.map(item => item.properties.a)\n      const b = this.visibleLinks.features.map(item => item.properties.b)\n      const ab = new Set([...a, ...b])\n      this.visibleNodes.features = this.visibleNodes.features.filter(node => ab.has(node.properties.index))\n\n      // get all unique width\n      const widthArr = [...new Set(this.visibleLinks.features.map(item => Number(item.properties.route_width)))]\n      // create a dict {width:[node_index]}\n      const widthDict = {}\n      widthArr.forEach(key => widthDict[key] = new Set())\n      this.visibleLinks.features.map(item =>\n        [item.properties.a, item.properties.b].forEach(\n          node => widthDict[Number(item.properties.route_width)].add(node)))\n      // remove duplicated nodes. only keep larger one (if node_1 is in a line of size 5 and 3, only keep the 5 one.)\n      let totSet = new Set()\n      for (let i = 0; i < widthArr.length - 1; i++) {\n        const a = widthDict[widthArr[i + 1]]\n        const b = widthDict[widthArr[i]]\n        totSet = new Set([...totSet, ...b])\n        widthDict[widthArr[i + 1]] = new Set([...a].filter(x => !totSet.has(x)))\n      }\n      // for each width, get the nodes and add the width to the properties for rendering.\n      widthArr.forEach(key => {\n        const newNodes = this.nodes.features.filter(node => widthDict[key].has(node.properties.index))\n        newNodes.map(node => node.properties.route_width = key)\n        this.visibleNodes.features.push(...newNodes)\n      })\n\n      // const endTime = performance.now()\n    },\n    selectLine (e) {\n      e.preventDefault() // prevent map control\n      // if we are not hovering. select closest link (within 5 pixels)\n      if (this.selectedFeatures.length === 0) {\n        // Set `bbox` as 5px reactangle area around clicked point.\n        const bbox = [\n          [e.point.x - 5, e.point.y - 5],\n          [e.point.x + 5, e.point.y + 5],\n        ]\n        // Find features intersecting the bounding box.\n        this.selectedFeatures = this.map.queryRenderedFeatures(bbox, {\n          layers: ['links'],\n        })\n      }\n      // do nothing if nothing is clicked (clicking on map, not on a link)\n      if (this.selectedFeatures.length > 0) {\n        // set. the first one as editor mode\n        // eslint-disable-next-line max-len\n        this.$store.commit('setEditorTrip', { tripId: this.selectedFeatures[0].properties.trip_id, changeBounds: false })\n        this.$store.commit('changeNotification', { text: '', autoClose: true })\n      }\n    },\n    editLineProperties (event) {\n      // eslint-disable-next-line max-len\n      this.$store.commit('setEditorTrip', { tripId: event.mapboxEvent.features[0].properties.trip_id, changeBounds: false })\n      this.$emit('rightClick', { action: 'Edit Line Info', lingering: false })\n    },\n\n  },\n}\n</script>\n<template>\n  <section>\n    <MglGeojsonLayer\n      source-id=\"links\"\n      :source=\"{\n        type: 'geojson',\n        data: visibleLinks,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"links\"\n      :layer=\"{\n        interactive: true,\n        type: 'line',\n        minzoom: 1,\n        maxzoom: 18,\n        paint: {\n          'line-color': ['case', ['has', 'route_color'], ['concat', '#', ['get', 'route_color']], $vuetify.theme.currentTheme.linksprimary],\n          'line-opacity': ['case', ['boolean', isEditorMode, false], 0.1, 1],\n          'line-width': ['case', ['has', 'route_width'],\n                         ['case', ['to-boolean', ['to-number', ['get', 'route_width']]],\n                          ['to-number', ['get', 'route_width']],\n                          3], 3],\n        },\n\n        layout: {\n          'line-sort-key': ['to-number',['get', 'route_width']],\n          'line-cap': 'round',\n        }\n      }\"\n      v-on=\"isEditorMode ? { } : { mouseenter: enterLink, mouseleave: leaveLink, contextmenu:editLineProperties }\"\n    />\n\n    <MglGeojsonLayer\n      source-id=\"nodes\"\n      :source=\"{\n        type: 'geojson',\n        data: visibleNodes,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"nodes\"\n      :layer=\"{\n        interactive: true,\n        type: 'circle',\n        minzoom: 12,\n        maxzoom: 18,\n        paint: {\n          'circle-color': ['case', ['boolean', isEditorMode, false],$vuetify.theme.currentTheme.mediumgrey, $vuetify.theme.currentTheme.accent],\n          'circle-stroke-color': $vuetify.theme.currentTheme.white,\n          'circle-stroke-width': 1,\n          'circle-radius': ['case', ['has', 'route_width'],\n                            ['case', ['to-boolean', ['to-number', ['get', 'route_width']]],\n                             ['to-number', ['get', 'route_width']],\n                             3], 3],\n        },\n      }\"\n    />\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticLinks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticLinks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StaticLinks.vue?vue&type=template&id=661f6889&scoped=true&\"\nimport script from \"./StaticLinks.vue?vue&type=script&lang=js&\"\nexport * from \"./StaticLinks.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"661f6889\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"MglGeojsonLayer\",\n        _vm._g(\n          {\n            attrs: {\n              \"source-id\": \"editorLinks\",\n              source: {\n                type: \"geojson\",\n                data: _vm.$store.getters.editorLinks,\n                buffer: 0,\n                promoteId: \"index\",\n              },\n              \"layer-id\": \"editorLinks\",\n              layer: {\n                type: \"line\",\n                minzoom: 2,\n                paint: {\n                  \"line-color\": [\n                    \"case\",\n                    [\"boolean\", _vm.anchorMode, false],\n                    _vm.$vuetify.theme.currentTheme.linkssecondary,\n                    _vm.$vuetify.theme.currentTheme.linksprimary,\n                  ],\n                  \"line-width\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    12,\n                    5,\n                  ],\n                  \"line-blur\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    6,\n                    0,\n                  ],\n                },\n              },\n            },\n            on: {\n              click: _vm.selectClick,\n              mouseover: _vm.onCursor,\n              mouseleave: _vm.offCursor,\n            },\n          },\n          _vm.anchorMode ? {} : { contextmenu: _vm.linkRightClick }\n        )\n      ),\n      _vm._v(\" \"),\n      _c(\"MglImageLayer\", {\n        attrs: {\n          \"source-id\": \"editorLinks\",\n          type: \"symbol\",\n          source: \"editorLinks\",\n          \"layer-id\": \"arrow-layer\",\n          layer: {\n            type: \"symbol\",\n            minzoom: 5,\n            layout: {\n              \"symbol-placement\": \"line\",\n              \"symbol-spacing\": 30,\n              \"icon-ignore-placement\": true,\n              \"icon-image\": \"arrow\",\n              \"icon-size\": 0.5,\n              \"icon-rotate\": 90,\n            },\n            paint: {\n              \"icon-color\": [\n                \"case\",\n                [\"boolean\", _vm.anchorMode, false],\n                _vm.$vuetify.theme.currentTheme.linkssecondary,\n                _vm.$vuetify.theme.currentTheme.linksprimary,\n              ],\n            },\n          },\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"MglGeojsonLayer\",\n        _vm._g(\n          {\n            attrs: {\n              \"source-id\": \"editorNodes\",\n              source: {\n                type: \"geojson\",\n                data: _vm.$store.getters.editorNodes,\n                buffer: 0,\n                promoteId: \"index\",\n              },\n              \"layer-id\": \"editorNodes\",\n              layer: {\n                interactive: true,\n                type: \"circle\",\n                minzoom: 2,\n                paint: {\n                  \"circle-color\": _vm.$vuetify.theme.currentTheme.accent,\n                  \"circle-radius\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    16,\n                    8,\n                  ],\n                  \"circle-blur\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    0.3,\n                    0,\n                  ],\n                },\n              },\n            },\n            on: {\n              mouseover: _vm.onCursor,\n              mouseleave: _vm.offCursor,\n              mousedown: _vm.moveNode,\n            },\n          },\n          _vm.anchorMode\n            ? {}\n            : { click: _vm.selectClick, contextmenu: _vm.contextMenuNode }\n        )\n      ),\n      _vm._v(\" \"),\n      _c(\"MglGeojsonLayer\", {\n        attrs: {\n          \"source-id\": \"anchorNodes\",\n          source: {\n            type: \"geojson\",\n            data: _vm.anchorNodes,\n            buffer: 0,\n            promoteId: \"index\",\n          },\n          \"layer-id\": \"anchorNodes\",\n          layer: {\n            interactive: true,\n            type: \"circle\",\n            minzoom: 2,\n            paint: {\n              \"circle-color\": \"#ffffff\",\n              \"circle-opacity\": 0.5,\n              \"circle-radius\": [\n                \"case\",\n                [\"boolean\", [\"feature-state\", \"hover\"], false],\n                10,\n                5,\n              ],\n              \"circle-blur\": [\n                \"case\",\n                [\"boolean\", [\"feature-state\", \"hover\"], false],\n                0.3,\n                0,\n              ],\n              \"circle-stroke-color\": \"#2C3E4E\",\n              \"circle-stroke-width\": 2,\n            },\n          },\n        },\n        on: {\n          click: _vm.selectClick,\n          mouseover: _vm.onCursor,\n          mouseleave: _vm.offCursor,\n          mousedown: _vm.moveNode,\n          contextmenu: _vm.contextMenuNode,\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"MglPopup\",\n        {\n          attrs: {\n            \"close-button\": false,\n            showed: _vm.popupEditor.showed,\n            coordinates: _vm.popupEditor.coordinates,\n          },\n          on: {\n            close: function ($event) {\n              _vm.popupEditor.showed = false\n            },\n          },\n        },\n        [\n          _c(\"span\", [\n            _c(\"h3\", [_vm._v(_vm._s(_vm.popupEditor.content))]),\n            _vm._v(\" \"),\n            _c(\"hr\"),\n            _vm._v(\n              \"\\n      \" +\n                _vm._s(\n                  _vm.hoveredStateId?.layerId == \"editorLinks\"\n                    ? _vm.$gettext(\"Left click to add a stop\")\n                    : _vm.$gettext(\"Hold left click to drag\")\n                ) +\n                \"\\n      \"\n            ),\n            _c(\"hr\"),\n            _vm._v(\n              \"\\n      \" +\n                _vm._s(\n                  _vm.hoveredStateId?.layerId == \"editorLinks\"\n                    ? _vm.$gettext(\"Right click to edit properties\")\n                    : _vm.$gettext(\"Right click for context menu\")\n                ) +\n                \"\\n    \"\n            ),\n          ]),\n        ]\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"MglPopup\",\n        {\n          attrs: {\n            \"close-button\": false,\n            showed: _vm.contextMenu.showed,\n            coordinates: _vm.contextMenu.coordinates,\n          },\n          on: {\n            close: function ($event) {\n              _vm.contextMenu.showed = false\n            },\n          },\n        },\n        [\n          _c(\n            \"span\",\n            {\n              on: {\n                mouseleave: function ($event) {\n                  _vm.contextMenu.showed = false\n                },\n              },\n            },\n            [\n              _c(\n                \"v-list\",\n                { attrs: { dense: \"\", flat: \"\" } },\n                [\n                  _c(\n                    \"v-list-item-group\",\n                    _vm._l(_vm.contextMenu.actions, function (action) {\n                      return _c(\n                        \"v-list-item\",\n                        { key: action.id },\n                        [\n                          _c(\n                            \"v-list-item-content\",\n                            [\n                              _c(\n                                \"v-btn\",\n                                {\n                                  attrs: { outlined: \"\", small: \"\" },\n                                  on: {\n                                    click: function ($event) {\n                                      return _vm.actionClick({\n                                        action: action,\n                                        feature: _vm.contextMenu.feature,\n                                        coordinates:\n                                          _vm.contextMenu.coordinates,\n                                      })\n                                    },\n                                  },\n                                },\n                                [\n                                  _vm._v(\n                                    \"\\n                \" +\n                                      _vm._s(_vm.$gettext(action)) +\n                                      \"\\n              \"\n                                  ),\n                                ]\n                              ),\n                            ],\n                            1\n                          ),\n                        ],\n                        1\n                      )\n                    }),\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ]\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport { MglPopup, MglImageLayer, MglGeojsonLayer } from 'vue-mapbox'\nconst $gettext = s => s\n\nexport default {\n  name: 'EditorLinks',\n  components: {\n    MglPopup,\n    MglImageLayer,\n    MglGeojsonLayer,\n  },\n  props: ['map', 'anchorMode'],\n  events: ['clickFeature', 'onHover', 'offHover'],\n  data () {\n    return {\n      selectedFeature: null,\n      hoveredStateId: null,\n      disablePopup: false,\n      keepHovering: false,\n      dragNode: false,\n      popupEditor: {\n        coordinates: [0, 0],\n        showed: false,\n        content: null,\n      },\n      contextMenu: {\n        coordinates: [0, 0],\n        showed: false,\n        actions: [],\n        feature: null,\n        type: null, // link of node\n      },\n    }\n  },\n  computed: {\n    anchorNodes () { return this.anchorMode ? this.$store.getters.anchorNodes : this.$store.getters.nodesHeader },\n  },\n\n  watch: {\n\n  },\n  created () {\n  },\n\n  methods: {\n    selectClick (event) {\n      if (this.hoveredStateId !== null) {\n        // Get the highlighted feature\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id)[0]\n        // Emit a click base on layer type (node or link)\n\n        if (this.selectedFeature !== null) {\n          if (this.hoveredStateId.layerId === 'editorLinks') {\n            const action = this.anchorMode ? 'Add Anchor Inline' : 'Add Stop Inline'\n            const click = {\n              selectedFeature: this.selectedFeature,\n              action: action,\n              lngLat: event.mapboxEvent.lngLat,\n            }\n            this.$emit('clickFeature', click)\n          }\n        }\n      }\n    },\n    onCursor (event) {\n      if (this.hoveredStateId === null || this.hoveredStateId.layerId === 'editorLinks') {\n        this.map.getCanvas().style.cursor = 'pointer'\n        if (this.hoveredStateId !== null) {\n          this.map.setFeatureState(\n            { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id },\n            { hover: false },\n          )\n        }\n        this.hoveredStateId = { layerId: event.layerId, id: event.mapboxEvent.features[0].id }\n        this.map.setFeatureState(\n          { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id },\n          { hover: true },\n        )\n        if (!this.disablePopup & !this.anchorMode) {\n          this.popupEditor.coordinates = [event.mapboxEvent.lngLat.lng,\n            event.mapboxEvent.lngLat.lat,\n          ]\n          this.popupEditor.content = this.hoveredStateId.id\n          this.popupEditor.showed = true\n        }\n      }\n      this.$emit('onHover', { selectedId: this.hoveredStateId.id })\n    },\n    offCursor (event) {\n      if (this.hoveredStateId !== null) {\n        // eslint-disable-next-line max-len\n        if (!(['editorNodes', 'anchorNodes'].includes(this.hoveredStateId.layerId) && event?.layerId === 'editorLinks')) {\n          // when we drag a node, we want to start dragging when we leave the node, but we will stay in hovering mode.\n          if (this.keepHovering) {\n            this.dragNode = true\n            this.contextMenu.showed = false\n            // normal behaviours, hovering is false\n          } else {\n            this.map.getCanvas().style.cursor = ''\n            this.popupEditor.showed = false\n            this.map.setFeatureState(\n              { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id },\n              { hover: false },\n            )\n            this.hoveredStateId = null\n            this.$emit('offHover', event)\n          }\n        }\n      }\n    },\n    contextMenuNode (event) {\n      if (this.popupEditor.showed && this.hoveredStateId?.layerId === 'editorNodes') {\n        this.contextMenu.coordinates = [event.mapboxEvent.lngLat.lng,\n          event.mapboxEvent.lngLat.lat,\n        ]\n        this.contextMenu.showed = true\n\n        this.contextMenu.type = 'node'\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        this.contextMenu.feature = features.filter(item => item.id === this.hoveredStateId.id)[0]\n\n        const selectedNode = this.contextMenu.feature.properties.index\n\n        if (selectedNode === this.$store.getters.firstNodeId) {\n          this.contextMenu.actions =\n          [\n            $gettext('Edit Node Info'),\n            $gettext('Delete Stop'),\n          ]\n        } else if (selectedNode === this.$store.getters.lastNodeId) {\n          this.contextMenu.actions =\n          [\n            $gettext('Edit Node Info'),\n            $gettext('Delete Stop'),\n          ]\n        } else {\n          this.contextMenu.actions =\n           [\n             $gettext('Edit Node Info'),\n             $gettext('Cut Before Node'),\n             $gettext('Cut After Node'),\n             $gettext('Delete Stop'),\n           ]\n        }\n      } else if (this.hoveredStateId?.layerId === 'anchorNodes') {\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id)\n        const click = {\n          selectedFeature: this.selectedFeature[0],\n          action: 'Delete Anchor',\n          lngLat: null,\n        }\n        this.$emit('clickFeature', click)\n      }\n    },\n\n    linkRightClick (event) {\n      if (this.hoveredStateId.layerId === 'editorLinks') {\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id)[0]\n        const click = {\n          selectedFeature: this.selectedFeature,\n          action: 'Edit Link Info',\n          lngLat: event.mapboxEvent.lngLat,\n          lingering: true,\n        }\n        this.$emit('clickFeature', click)\n      }\n    },\n\n    actionClick (event) {\n      const click = {\n        selectedFeature: event.feature,\n        action: event.action,\n        lngLat: event.coordinates,\n      }\n      this.$emit('clickFeature', click)\n\n      this.contextMenu.showed = false\n      this.contextMenu.type = null\n    },\n\n    moveNode (event) {\n      if (event.mapboxEvent.originalEvent.button === 0 &\n      ['editorNodes', 'anchorNodes'].includes(this.hoveredStateId.layerId)) {\n        event.mapboxEvent.preventDefault() // prevent map control\n        this.map.getCanvas().style.cursor = 'grab'\n        // disable mouseLeave so we stay in hover state.\n        this.keepHovering = true\n        // get selected node\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id)[0]\n\n        // disable popup\n        this.disablePopup = true\n        this.popupEditor.showed = false\n        // get position\n        this.map.on('mousemove', this.onMove)\n        this.map.on('mouseup', this.stopMovingNode)\n      }\n    },\n    onMove (event) {\n      // get position and update node position\n      // only if dragmode is activated (we just leave the node hovering state.)\n      if (this.map.loaded() && this.dragNode && this.selectedFeature) {\n        const click = {\n          selectedFeature: this.selectedFeature,\n          action: null,\n          lngLat: Object.values(event.lngLat),\n        }\n        if (this.hoveredStateId.layerId === 'anchorNodes') {\n          click.action = 'Move Anchor'\n          this.$emit('clickFeature', click)\n        } else {\n          click.action = 'Move Node'\n          this.$emit('clickFeature', click)\n        }\n      }\n    },\n\n    stopMovingNode (event) {\n      // stop tracking position (moving node.)\n      this.map.getCanvas().style.cursor = 'pointer'\n      this.map.off('mousemove', this.onMove)\n      // enable popup and hovering off back. disable Dragmode\n      this.keepHovering = false\n      this.dragNode = false\n      this.disablePopup = false\n      // call offCursor event, if we drag too quickly, it will not be call and the node will stay in hovering mode.\n      this.offCursor()\n      this.map.off('mouseup', this.stopMovingNode)\n      // emit a clickNode with the selected node.\n      // this will work with lag as it is the selectedFeature and not the highlighted one.\n    },\n  },\n\n}\n</script>\n<template>\n  <section>\n    <MglGeojsonLayer\n      source-id=\"editorLinks\"\n      :source=\"{\n        type: 'geojson',\n        data: $store.getters.editorLinks,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"editorLinks\"\n      :layer=\"{\n        type: 'line',\n        minzoom: 2,\n        paint: {\n          'line-color': ['case', ['boolean', anchorMode, false],$vuetify.theme.currentTheme.linkssecondary, $vuetify.theme.currentTheme.linksprimary],\n          'line-width': ['case', ['boolean', ['feature-state', 'hover'], false], 12, 5],\n          'line-blur': ['case', ['boolean', ['feature-state', 'hover'], false], 6, 0]\n        }\n      }\"\n      v-on=\"anchorMode ? {} : {contextmenu: linkRightClick}\"\n      @click=\"selectClick\"\n      @mouseover=\"onCursor\"\n      @mouseleave=\"offCursor\"\n    />\n\n    <MglImageLayer\n      source-id=\"editorLinks\"\n      type=\"symbol\"\n      source=\"editorLinks\"\n      layer-id=\"arrow-layer\"\n      :layer=\"{\n        type: 'symbol',\n        minzoom: 5,\n        layout: {\n          'symbol-placement': 'line',\n          'symbol-spacing': 30,\n          'icon-ignore-placement': true,\n          'icon-image':'arrow',\n          'icon-size': 0.5,\n          'icon-rotate': 90\n        },\n        paint: {\n          'icon-color': ['case', ['boolean', anchorMode, false], $vuetify.theme.currentTheme.linkssecondary, $vuetify.theme.currentTheme.linksprimary],\n        }\n      }\"\n    />\n\n    <MglGeojsonLayer\n      source-id=\"editorNodes\"\n      :source=\"{\n        type: 'geojson',\n        data: $store.getters.editorNodes,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"editorNodes\"\n      :layer=\"{\n        interactive: true,\n        type: 'circle',\n        minzoom: 2,\n        paint: {\n          'circle-color': $vuetify.theme.currentTheme.accent,\n          'circle-radius': ['case', ['boolean', ['feature-state', 'hover'], false], 16, 8],\n          'circle-blur': ['case', ['boolean', ['feature-state', 'hover'], false], 0.3, 0]\n        }\n      }\"\n      v-on=\"anchorMode ? {} : {click: selectClick, contextmenu: contextMenuNode}\"\n      @mouseover=\"onCursor\"\n      @mouseleave=\"offCursor\"\n      @mousedown=\"moveNode\"\n    />\n\n    <MglGeojsonLayer\n      source-id=\"anchorNodes\"\n      :source=\"{\n        type: 'geojson',\n        data: anchorNodes,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"anchorNodes\"\n      :layer=\"{\n        interactive: true,\n        type: 'circle',\n        minzoom: 2,\n        paint: {\n          'circle-color': '#ffffff',\n          'circle-opacity':0.5,\n          'circle-radius': ['case', ['boolean', ['feature-state', 'hover'], false], 10, 5],\n          'circle-blur': ['case', ['boolean', ['feature-state', 'hover'], false], 0.3, 0],\n          'circle-stroke-color': '#2C3E4E',\n          'circle-stroke-width': 2,\n        },\n      }\"\n      @click=\"selectClick\"\n      @mouseover=\"onCursor\"\n      @mouseleave=\"offCursor\"\n      @mousedown=\"moveNode\"\n      @contextmenu=\"contextMenuNode\"\n    />\n\n    <MglPopup\n      :close-button=\"false\"\n      :showed=\"popupEditor.showed\"\n      :coordinates=\"popupEditor.coordinates\"\n      @close=\"popupEditor.showed=false\"\n    >\n      <span>\n        <h3>{{ popupEditor.content }}</h3>\n        <hr>\n        {{ hoveredStateId?.layerId == 'editorLinks'?\n          $gettext(\"Left click to add a stop\"):\n          $gettext(\"Hold left click to drag\") }}\n        <hr>\n        {{ hoveredStateId?.layerId == 'editorLinks'?\n          $gettext(\"Right click to edit properties\"):\n          $gettext(\"Right click for context menu\") }}\n      </span>\n    </MglPopup>\n\n    <MglPopup\n      :close-button=\"false\"\n      :showed=\"contextMenu.showed\"\n      :coordinates=\"contextMenu.coordinates\"\n      @close=\"contextMenu.showed=false\"\n    >\n      <span\n        @mouseleave=\"contextMenu.showed=false\"\n      >\n        <v-list\n          dense\n          flat\n        >\n          <v-list-item-group>\n            <v-list-item\n              v-for=\"action in contextMenu.actions\"\n              :key=\"action.id\"\n            >\n              <v-list-item-content>\n                <v-btn\n                  outlined\n                  small\n                  @click=\"actionClick({action: action,\n                                       feature: contextMenu.feature,\n                                       coordinates: contextMenu.coordinates})\"\n                >\n                  {{ $gettext(action) }}\n                </v-btn>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list-item-group>\n        </v-list>\n      </span>\n    </MglPopup>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorLinks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorLinks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorLinks.vue?vue&type=template&id=02bf194d&scoped=true&\"\nimport script from \"./EditorLinks.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorLinks.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02bf194d\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"MglGeojsonLayer\",\n        _vm._g(\n          {\n            attrs: {\n              \"source-id\": \"rlinks\",\n              source: {\n                type: \"geojson\",\n                data: _vm.isRoadMode ? _vm.renderedrLinks : _vm.rlinks,\n                buffer: 0,\n                promoteId: \"index\",\n              },\n              \"layer-id\": \"rlinks\",\n              layer: {\n                interactive: true,\n                type: \"line\",\n                minzoom: _vm.minZoom.links,\n                paint: {\n                  \"line-color\": [\n                    \"case\",\n                    [\"has\", \"route_color\"],\n                    [\"concat\", \"#\", [\"get\", \"route_color\"]],\n                    _vm.$vuetify.theme.currentTheme.linksprimary,\n                  ],\n                  \"line-opacity\": [\n                    \"case\",\n                    [\"boolean\", _vm.isEditorMode, false],\n                    0.3,\n                    1,\n                  ],\n                  \"line-width\": [\n                    \"*\",\n                    [\n                      \"case\",\n                      [\"boolean\", [\"feature-state\", \"hover\"], false],\n                      3,\n                      1,\n                    ],\n                    [\n                      \"case\",\n                      [\"has\", \"route_width\"],\n                      [\n                        \"case\",\n                        [\"to-boolean\", [\"to-number\", [\"get\", \"route_width\"]]],\n                        [\"to-number\", [\"get\", \"route_width\"]],\n                        2,\n                      ],\n                      2,\n                    ],\n                  ],\n                  \"line-blur\": [\n                    \"*\",\n                    [\n                      \"case\",\n                      [\"boolean\", [\"feature-state\", \"hover\"], false],\n                      1,\n                      0,\n                    ],\n                    [\n                      \"case\",\n                      [\"has\", \"route_width\"],\n                      [\n                        \"case\",\n                        [\"to-boolean\", [\"to-number\", [\"get\", \"route_width\"]]],\n                        [\"to-number\", [\"get\", \"route_width\"]],\n                        2,\n                      ],\n                      2,\n                    ],\n                  ],\n                },\n                layout: {\n                  \"line-sort-key\": [\"to-number\", [\"get\", \"route_width\"]],\n                },\n              },\n            },\n          },\n          _vm.isEditorMode\n            ? {}\n            : {\n                mouseenter: _vm.onCursor,\n                mouseleave: _vm.offCursor,\n                click: _vm.selectClick,\n                contextmenu: _vm.linkRightClick,\n              }\n        )\n      ),\n      _vm._v(\" \"),\n      _c(\"MglImageLayer\", {\n        attrs: {\n          \"source-id\": \"rlinks\",\n          type: \"symbol\",\n          source: \"rlinks\",\n          \"layer-id\": \"arrow-rlinks\",\n          layer: {\n            type: \"symbol\",\n            minzoom: _vm.minZoom.rendered,\n            layout: {\n              \"symbol-placement\": \"line\",\n              \"symbol-spacing\": 200,\n              \"icon-ignore-placement\": true,\n              \"icon-image\": \"arrow\",\n              \"icon-size\": [\n                \"*\",\n                [\n                  \"case\",\n                  [\"has\", \"oneway\"],\n                  [\n                    \"case\",\n                    [\"to-boolean\", [\"to-number\", [\"get\", \"oneway\"]]],\n                    0.15,\n                    0,\n                  ],\n                  0.15,\n                ],\n                [\n                  \"case\",\n                  [\"has\", \"route_width\"],\n                  [\n                    \"case\",\n                    [\"to-boolean\", [\"to-number\", [\"get\", \"route_width\"]]],\n                    [\"to-number\", [\"get\", \"route_width\"]],\n                    2,\n                  ],\n                  2,\n                ],\n              ],\n              \"icon-rotate\": 90,\n            },\n            paint: {\n              \"icon-color\": [\n                \"case\",\n                [\"has\", \"route_color\"],\n                [\"concat\", \"#\", [\"get\", \"route_color\"]],\n                _vm.$vuetify.theme.currentTheme.linksprimary,\n              ],\n            },\n          },\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"MglGeojsonLayer\",\n        _vm._g(\n          {\n            attrs: {\n              \"source-id\": \"rnodes\",\n              source: {\n                type: \"geojson\",\n                data: _vm.isRoadMode ? _vm.renderedrNodes : _vm.rnodes,\n                buffer: 0,\n                promoteId: \"index\",\n              },\n              \"layer-id\": \"rnodes\",\n              layer: {\n                interactive: true,\n                type: \"circle\",\n                minzoom: _vm.minZoom.rendered,\n                paint: {\n                  \"circle-color\": [\n                    \"case\",\n                    [\"boolean\", _vm.isEditorMode, false],\n                    _vm.$vuetify.theme.currentTheme.mediumgrey,\n                    _vm.$vuetify.theme.currentTheme.accent,\n                  ],\n                  \"circle-stroke-color\": _vm.$vuetify.theme.currentTheme.white,\n                  \"circle-stroke-width\": 1,\n                  \"circle-radius\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    14,\n                    3,\n                  ],\n                  \"circle-blur\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    0.3,\n                    0,\n                  ],\n                },\n              },\n            },\n          },\n          _vm.isEditorMode\n            ? {}\n            : {\n                mouseenter: _vm.onCursor,\n                mouseleave: _vm.offCursor,\n                mousedown: _vm.moveNode,\n                contextmenu: _vm.contextMenuNode,\n              }\n        )\n      ),\n      _vm._v(\" \"),\n      _c(\"MglGeojsonLayer\", {\n        attrs: {\n          \"source-id\": \"anchorrNodes\",\n          source: {\n            type: \"geojson\",\n            data: _vm.isRoadMode\n              ? _vm.renderedAnchorrNodes\n              : _vm.$store.getters.rnodesHeader,\n            buffer: 0,\n            promoteId: \"index\",\n          },\n          \"layer-id\": \"anchorrNodes\",\n          layer: {\n            interactive: true,\n            type: \"circle\",\n            minzoom: _vm.minZoom.rendered,\n            paint: {\n              \"circle-color\": \"#ffffff\",\n              \"circle-opacity\": 0.5,\n              \"circle-radius\": [\n                \"case\",\n                [\"boolean\", [\"feature-state\", \"hover\"], false],\n                10,\n                5,\n              ],\n              \"circle-blur\": [\n                \"case\",\n                [\"boolean\", [\"feature-state\", \"hover\"], false],\n                0.3,\n                0,\n              ],\n              \"circle-stroke-color\": _vm.$vuetify.theme.currentTheme.darkgrey,\n              \"circle-stroke-width\": 2,\n            },\n          },\n        },\n        on: {\n          click: _vm.selectClick,\n          mouseover: _vm.onCursor,\n          mouseleave: _vm.offCursor,\n          mousedown: _vm.moveNode,\n          contextmenu: _vm.contextMenuNode,\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"MglPopup\",\n        {\n          attrs: {\n            \"close-button\": false,\n            showed: _vm.contextMenu.showed,\n            coordinates: _vm.contextMenu.coordinates,\n          },\n          on: {\n            close: function ($event) {\n              _vm.contextMenu.showed = false\n            },\n          },\n        },\n        [\n          _c(\n            \"span\",\n            {\n              on: {\n                mouseleave: function ($event) {\n                  _vm.contextMenu.showed = false\n                },\n              },\n            },\n            [\n              _c(\n                \"v-list\",\n                { attrs: { dense: \"\", flat: \"\" } },\n                [\n                  _c(\n                    \"v-list-item-group\",\n                    _vm._l(_vm.contextMenu.actions, function (action) {\n                      return _c(\n                        \"v-list-item\",\n                        { key: action.id },\n                        [\n                          _c(\n                            \"v-list-item-content\",\n                            [\n                              _c(\n                                \"v-btn\",\n                                {\n                                  attrs: { outlined: \"\", small: \"\" },\n                                  on: {\n                                    click: function ($event) {\n                                      return _vm.actionClick({\n                                        action: action,\n                                        feature: _vm.contextMenu.feature,\n                                        coordinates:\n                                          _vm.contextMenu.coordinates,\n                                      })\n                                    },\n                                  },\n                                },\n                                [\n                                  _vm._v(\n                                    \"\\n                \" +\n                                      _vm._s(_vm.$gettext(action)) +\n                                      \"\\n              \"\n                                  ),\n                                ]\n                              ),\n                            ],\n                            1\n                          ),\n                        ],\n                        1\n                      )\n                    }),\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ]\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<!-- eslint-disable max-len -->\n<!-- eslint-disable no-return-assign -->\n<script>\nimport { MglGeojsonLayer, MglImageLayer, MglPopup } from 'vue-mapbox'\nimport mapboxgl from 'mapbox-gl'\nimport booleanContains from '@turf/boolean-contains'\nimport booleanCrosses from '@turf/boolean-crosses'\nimport buffer from '@turf/buffer'\nimport bboxPolygon from '@turf/bbox-polygon'\nconst $gettext = s => s\nexport default {\n  name: 'StaticLinks',\n  components: {\n    MglGeojsonLayer,\n    MglImageLayer,\n    MglPopup,\n  },\n  props: ['map', 'isEditorMode', 'anchorMode', 'isRoadMode'],\n  events: ['clickFeature'],\n\n  data () {\n    return {\n      hoveredStateId: null,\n      visibleNodes: {},\n      visibleLinks: {},\n      disablePopup: false,\n      editorRnodes: {},\n      renderedrLinks: {},\n      renderedrNodes: {},\n      renderedAnchorrNodes: {},\n      bbox: null,\n      minZoom: {\n        links: 2,\n        rendered: 14,\n      },\n      contextMenu: {\n        coordinates: [0, 0],\n        showed: false,\n        actions: [],\n        feature: null,\n      },\n\n    }\n  },\n  computed: {\n    selectedPopupContent () { return this.$store.getters.roadsPopupContent },\n    selectedrGroup () { return this.$store.getters.selectedrGroup },\n    rnodes () { return this.$store.getters.visiblerNodes },\n    rlinks () { return this.$store.getters.visiblerLinks },\n    anchorrNodes () {\n      return this.anchorMode ? this.$store.getters.anchorrNodes(this.renderedrLinks) : this.$store.getters.rnodesHeader\n    },\n\n  },\n\n  watch: {\n    anchorMode () { this.getBounds() },\n    selectedrGroup (val) { this.getBounds() },\n    isRoadMode (val) {\n      if (val) {\n        this.map.on('dragend', this.getBounds)\n        this.map.on('zoomend', this.getBounds)\n      } else {\n        this.map.off('dragend', this.getBounds)\n        this.map.off('zoomend', this.getBounds)\n      }\n    },\n\n  },\n  created () {\n    this.renderedrNodes = structuredClone(this.$store.getters.rnodesHeader)\n    this.renderedAnchorrNodes = structuredClone(this.$store.getters.rnodesHeader)\n    this.renderedrLinks = structuredClone(this.$store.getters.rlinksHeader)\n    this.map.on('dragend', this.getBounds)\n    this.map.on('zoomend', this.getBounds)\n  },\n  beforeDestroy () {\n    // remove arrow layer first as it depend on rlink layer\n    this.map.removeLayer('arrow-rlinks')\n  },\n\n  methods: {\n    getBounds () {\n      // get map bounds and return only the features inside of it.\n      // this way, only the visible links and node are rendered and updating is fast\n      // (i.e. moving a node in real time)\n      // note only line inside the bbox (buffured) are visible.\n      const bounds = this.map.getBounds()\n      // create a BBOX with a 800m buffer\n      this.bbox = buffer(bboxPolygon([bounds._sw.lng, bounds._sw.lat, bounds._ne.lng, bounds._ne.lat]), 0.2)\n      // only get the geojson if the zoom level is bigger than the min.\n      // if not, getting all anchorpoint would be very intensive!!\n      // this way, only a small number of anchor points are computed\n      if (this.map.getZoom() > this.minZoom.rendered) {\n        // get links in or intersecting with bbox\n        this.renderedrLinks.features = this.rlinks.features.filter(\n          link => (booleanContains(this.bbox, link) || booleanCrosses(this.bbox, link)))\n        // get rendered nodes\n        const a = this.renderedrLinks.features.map(item => item.properties.a)\n        const b = this.renderedrLinks.features.map(item => item.properties.b)\n        const rNodesList = new Set([...a, ...b])\n        // filter with rnodesList\n        this.renderedrNodes.features = this.rnodes.features.filter(node => rNodesList.has(node.properties.index))\n        this.renderedAnchorrNodes.features = this.anchorrNodes.features.filter(node => booleanContains(this.bbox, node))\n      } else if (this.map.getZoom() > this.minZoom.links) {\n        // ion this case. nodes are unloaded. we display links.\n        this.renderedrLinks.features = this.rlinks.features\n        this.renderedrNodes.features = []\n        this.renderedAnchorrNodes.features = []\n      } else {\n        this.renderedrLinks.features = []\n        this.renderedrNodes.features = []\n        this.renderedAnchorrNodes.features = []\n      }\n    },\n    onCursor (event) {\n      if (this.isRoadMode) {\n        if (this.popup?.isOpen()) this.popup.remove() // make sure there is no popup before creating one.\n        if (this.hoveredStateId === null || this.hoveredStateId.layerId === 'rlinks') {\n          if (!this.disablePopup && this.selectedPopupContent.length > 0) {\n            const selectedFeature = event.mapboxEvent.features[0]\n            if (selectedFeature.layer.id !== 'rnodes') {\n              let htmlContent = this.selectedPopupContent.map(prop => `${prop}: <b>${selectedFeature.properties[prop]}</b>`)\n              htmlContent = htmlContent.join('<br> ')\n              this.popup = new mapboxgl.Popup({ closeButton: false })\n                .setLngLat([event.mapboxEvent.lngLat.lng, event.mapboxEvent.lngLat.lat])\n                .setHTML(htmlContent)\n                .addTo(event.map)\n            }\n          }\n          this.map.getCanvas().style.cursor = 'pointer'\n          if (this.hoveredStateId !== null) {\n            this.map.setFeatureState(\n              { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n              { hover: false },\n            )\n          }\n          // get a list of all overID. if there is multiple superposed link get all of them!\n          const uniqueArray = [...new Set(event.mapboxEvent.features.map(item => item.id))]\n          this.hoveredStateId = { layerId: event.layerId, id: uniqueArray }\n          this.map.setFeatureState(\n            { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n            { hover: true },\n          )\n\n          this.$emit('onHover', { layerId: this.hoveredStateId.layerId, selectedId: this.hoveredStateId.id })\n        }\n      }\n    },\n\n    offCursor (event) {\n      if (this.isRoadMode) {\n      // todo: error warning is throw sometime when we move a node over another node or anchor.\n        if (this.popup?.isOpen()) this.popup.remove()\n        if (this.hoveredStateId !== null) {\n          // eslint-disable-next-line max-len\n          if (!(['rnodes', 'anchorrNodes'].includes(this.hoveredStateId?.layerId) && event?.layerId === 'rlinks')) {\n            // when we drag a node, we want to start dragging when we leave the node, but we will stay in hovering mode.\n            if (this.keepHovering) {\n              this.dragNode = true\n              // normal behaviours, hovering is false\n            } else {\n              this.map.getCanvas().style.cursor = ''\n              this.map.setFeatureState(\n                { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n                { hover: false },\n              )\n              this.hoveredStateId = null\n              this.$emit('offHover', event)\n            }\n          }\n        }\n      }\n    },\n\n    selectClick (event) {\n      if (this.isRoadMode) {\n        if (this.hoveredStateId !== null) {\n        // Get the highlighted feature\n        // const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        // this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id[0])[0]\n          this.selectedFeature = this.hoveredStateId.id\n          // Emit a click base on layer type (node or link)\n\n          if (this.selectedFeature !== null) {\n            if (this.hoveredStateId.layerId === 'rlinks') {\n              const action = this.anchorMode ? 'Add Road Anchor Inline' : 'Add Road Node Inline'\n              const click = {\n                selectedIndex: this.selectedFeature,\n                action: action,\n                lngLat: event.mapboxEvent.lngLat,\n              }\n              this.$emit('clickFeature', click)\n              this.getBounds()\n            }\n          }\n        }\n      }\n    },\n\n    linkRightClick (event) {\n      if (this.isRoadMode) {\n        if (this.hoveredStateId.layerId === 'rlinks') {\n          this.contextMenu.coordinates = [event.mapboxEvent.lngLat.lng, event.mapboxEvent.lngLat.lat]\n          this.contextMenu.showed = true\n          this.contextMenu.feature = this.hoveredStateId.id\n          this.contextMenu.actions =\n          [\n            $gettext('Edit rLink Info'),\n            $gettext('Delete rLink'),\n          ]\n        }\n      }\n    },\n    actionClick (event) {\n      const click = {\n        selectedIndex: event.feature,\n        action: event.action,\n        lngLat: event.coordinates,\n      }\n      this.$emit('clickFeature', click)\n      this.contextMenu.showed = false\n      this.contextMenu.type = null\n      this.getBounds()\n    },\n\n    contextMenuNode (event) {\n      if (this.isRoadMode) {\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        this.selectedFeature = features.filter(item => this.hoveredStateId.id.includes(item.id))\n\n        if (this.selectedFeature.length > 0) {\n          if (this.hoveredStateId?.layerId === 'rnodes') {\n            const click = {\n              selectedFeature: this.selectedFeature[0],\n              action: 'Edit rNode Info',\n              lngLat: event.mapboxEvent.lngLat,\n            }\n            this.$emit('clickFeature', click)\n          } else if (this.hoveredStateId?.layerId === 'anchorrNodes') {\n            const click = {\n              selectedFeature: this.selectedFeature[0],\n              action: 'Delete Road Anchor',\n              lngLat: null,\n            }\n            this.$emit('clickFeature', click)\n            this.getBounds()\n          }\n        }\n      }\n    },\n\n    moveNode (event) {\n      if (this.isRoadMode) {\n        if (event.mapboxEvent.originalEvent.button === 0 &\n      ['rnodes', 'anchorrNodes'].includes(this.hoveredStateId.layerId)) {\n          event.mapboxEvent.preventDefault() // prevent map control\n          this.map.getCanvas().style.cursor = 'grab'\n          // disable mouseLeave so we stay in hover state.\n          this.keepHovering = true\n          // get selected node\n          const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n          this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id[0])[0]\n          // disable popup\n          this.disablePopup = true\n          if (this.hoveredStateId.layerId === 'rnodes') {\n            this.$store.commit('getConnectedLinks', { selectedNode: this.selectedFeature })\n          }\n          // get position\n          this.map.on('mousemove', this.onMove)\n          this.map.on('mouseup', this.stopMovingNode)\n        }\n      }\n    },\n    onMove (event) {\n      // get position and update node position\n      // only if dragmode is activated (we just leave the node hovering state.)\n      if (this.dragNode && this.selectedFeature) {\n        const click = {\n          selectedFeature: this.selectedFeature,\n          action: null,\n          lngLat: Object.values(event.lngLat),\n        }\n        if (this.hoveredStateId.layerId === 'anchorrNodes') {\n          click.action = 'Move rAnchor'\n          this.$emit('clickFeature', click)\n          // rerender the anchor as they are getter and are not directly modified by the moverAnchor mutation.\n          this.renderedAnchorrNodes.features = this.anchorrNodes.features.filter(node =>\n            booleanContains(this.bbox, node))\n        } else {\n          click.action = 'Move rNode'\n          this.$emit('clickFeature', click)\n        }\n      }\n    },\n    stopMovingNode (event) {\n      if (this.isRoadMode) {\n        // stop tracking position (moving node.)\n        this.map.getCanvas().style.cursor = 'pointer'\n        this.map.off('mousemove', this.onMove)\n        // enable popup and hovering off back. disable Dragmode\n        this.keepHovering = false\n        this.dragNode = false\n        this.disablePopup = false\n        // if we drag too quickly, offcursor it will not be call and the node will stay in hovering mode.\n        // calling offscursor will break the sticky node drawlink behaviour, so we only make its state back to hover-false\n        this.map.getCanvas().style.cursor = ''\n        this.map.setFeatureState(\n          { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n          { hover: false },\n        )\n        this.hoveredStateId = null\n        this.map.off('mouseup', this.stopMovingNode)\n\n      // emit a clickNode with the selected node.\n      // this will work with lag as it is the selectedFeature and not the highlighted one.}\n      }\n    },\n  },\n}\n</script>\n<template>\n  <section>\n    <MglGeojsonLayer\n      source-id=\"rlinks\"\n      :source=\"{\n        type: 'geojson',\n        data: isRoadMode? renderedrLinks : rlinks,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"rlinks\"\n      :layer=\"{\n        interactive: true,\n        type: 'line',\n        minzoom: minZoom.links,\n        paint: {\n          'line-color': ['case', ['has', 'route_color'], ['concat', '#', ['get', 'route_color']], $vuetify.theme.currentTheme.linksprimary],\n          'line-opacity': ['case', ['boolean', isEditorMode, false], 0.3, 1],\n          'line-width': ['*',['case', ['boolean', ['feature-state', 'hover'], false], 3, 1],\n                         ['case', ['has', 'route_width'],\n                          ['case', ['to-boolean', ['to-number', ['get', 'route_width']]],\n                           ['to-number', ['get', 'route_width']],\n                           2], 2]],\n          'line-blur': ['*',['case', ['boolean', ['feature-state', 'hover'], false], 1, 0],\n                        ['case', ['has', 'route_width'],\n                         ['case', ['to-boolean', ['to-number', ['get', 'route_width']]],\n                          ['to-number', ['get', 'route_width']],\n                          2], 2]],\n        },\n        layout: {\n          'line-sort-key': ['to-number',['get', 'route_width']],\n        }\n\n      }\"\n      v-on=\"isEditorMode ? { } : { mouseenter: onCursor,\n                                   mouseleave: offCursor,\n                                   click: selectClick,\n                                   contextmenu: linkRightClick }\"\n    />\n    <MglImageLayer\n      source-id=\"rlinks\"\n      type=\"symbol\"\n      source=\"rlinks\"\n      layer-id=\"arrow-rlinks\"\n      :layer=\"{\n        type: 'symbol',\n        minzoom: minZoom.rendered,\n        layout: {\n          'symbol-placement': 'line',\n          'symbol-spacing': 200,\n          'icon-ignore-placement': true,\n          'icon-image':'arrow',\n          'icon-size': ['*',['case', ['has', 'oneway'],\n                             ['case',['to-boolean',['to-number',['get','oneway']]],0.15, 0],\n                             0.15], ['case', ['has', 'route_width'],\n                                     ['case', ['to-boolean', ['to-number', ['get', 'route_width']]],\n                                      ['to-number', ['get', 'route_width']],\n                                      2], 2]],\n          'icon-rotate': 90,\n        },\n        paint: {\n          'icon-color': ['case', ['has', 'route_color'], ['concat', '#', ['get', 'route_color']], $vuetify.theme.currentTheme.linksprimary],\n        }\n      }\"\n    />\n\n    <MglGeojsonLayer\n      source-id=\"rnodes\"\n      :source=\"{\n        type: 'geojson',\n        data: isRoadMode? renderedrNodes:rnodes,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"rnodes\"\n      :layer=\"{\n        interactive: true,\n        type: 'circle',\n        minzoom: minZoom.rendered,\n        paint: {\n          'circle-color': ['case', ['boolean', isEditorMode, false], $vuetify.theme.currentTheme.mediumgrey, $vuetify.theme.currentTheme.accent],\n          'circle-stroke-color': $vuetify.theme.currentTheme.white,\n          'circle-stroke-width': 1,\n          'circle-radius': ['case', ['boolean', ['feature-state', 'hover'], false], 14, 3],\n          'circle-blur': ['case', ['boolean', ['feature-state', 'hover'], false], 0.3, 0]\n        },\n      }\"\n      v-on=\"isEditorMode ? { } : { mouseenter: onCursor,\n                                   mouseleave: offCursor,\n                                   mousedown: moveNode,\n                                   contextmenu:contextMenuNode }\"\n    />\n\n    <MglGeojsonLayer\n      source-id=\"anchorrNodes\"\n      :source=\"{\n        type: 'geojson',\n        data: isRoadMode? renderedAnchorrNodes: $store.getters.rnodesHeader,\n        buffer: 0,\n        promoteId: 'index',\n      }\"\n      layer-id=\"anchorrNodes\"\n      :layer=\"{\n        interactive: true,\n        type: 'circle',\n        minzoom: minZoom.rendered,\n        paint: {\n          'circle-color': '#ffffff',\n          'circle-opacity':0.5,\n          'circle-radius': ['case', ['boolean', ['feature-state', 'hover'], false], 10, 5],\n          'circle-blur': ['case', ['boolean', ['feature-state', 'hover'], false], 0.3, 0],\n          'circle-stroke-color': $vuetify.theme.currentTheme.darkgrey,\n          'circle-stroke-width': 2,\n        },\n      }\"\n      @click=\"selectClick\"\n      @mouseover=\"onCursor\"\n      @mouseleave=\"offCursor\"\n      @mousedown=\"moveNode\"\n      @contextmenu=\"contextMenuNode\"\n    />\n    <MglPopup\n      :close-button=\"false\"\n      :showed=\"contextMenu.showed\"\n      :coordinates=\"contextMenu.coordinates\"\n      @close=\"contextMenu.showed=false\"\n    >\n      <span\n        @mouseleave=\"contextMenu.showed=false\"\n      >\n        <v-list\n          dense\n          flat\n        >\n          <v-list-item-group>\n            <v-list-item\n              v-for=\"action in contextMenu.actions\"\n              :key=\"action.id\"\n            >\n              <v-list-item-content>\n                <v-btn\n                  outlined\n                  small\n                  @click=\"actionClick({action: action,\n                                       feature: contextMenu.feature,\n                                       coordinates: contextMenu.coordinates})\"\n                >\n                  {{ $gettext(action) }}\n                </v-btn>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list-item-group>\n        </v-list>\n      </span>\n    </MglPopup>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoadLinks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoadLinks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoadLinks.vue?vue&type=template&id=4e4388be&scoped=true&\"\nimport script from \"./RoadLinks.vue?vue&type=script&lang=js&\"\nexport * from \"./RoadLinks.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e4388be\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      [\"MultiPolygon\", \"Polygon\"].includes(_vm.type)\n        ? _c(\"MglGeojsonLayer\", {\n            attrs: {\n              \"source-id\": _vm.fileName,\n              source: {\n                type: \"geojson\",\n                data: _vm.url,\n              },\n              \"layer-id\": _vm.fileName,\n              layer: {\n                interactive: false,\n                type: \"fill\",\n                minzoom: 5,\n                paint: {\n                  \"fill-color\": [\"get\", \"display_color\"],\n                  \"fill-opacity\": [\n                    \"case\",\n                    [\"has\", \"display_opacity\"],\n                    [\"get\", \"display_opacity\"],\n                    0.5,\n                  ],\n                },\n              },\n            },\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.type == \"LineString\"\n        ? _c(\"MglGeojsonLayer\", {\n            attrs: {\n              \"source-id\": _vm.fileName,\n              source: {\n                type: \"geojson\",\n                data: _vm.url,\n              },\n              \"layer-id\": _vm.fileName,\n              layer: {\n                interactive: false,\n                type: \"line\",\n                minzoom: 5,\n                paint: {\n                  \"line-color\": [\"get\", \"display_color\"],\n                  \"line-opacity\": [\n                    \"case\",\n                    [\"has\", \"display_opacity\"],\n                    [\"get\", \"display_opacity\"],\n                    0.8,\n                  ],\n                  \"line-width\": [\"get\", \"display_width\"],\n                },\n              },\n            },\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.type == \"Point\"\n        ? _c(\"MglGeojsonLayer\", {\n            attrs: {\n              \"source-id\": _vm.fileName,\n              source: {\n                type: \"geojson\",\n                data: _vm.url,\n              },\n              \"layer-id\": _vm.fileName,\n              layer: {\n                interactive: false,\n                type: \"circle\",\n                minzoom: 5,\n                paint: {\n                  \"circle-color\": [\"get\", \"display_color\"],\n                  \"circle-radius\": [\"get\", \"display_width\"],\n                  \"circle-opacity\": [\n                    \"case\",\n                    [\"has\", \"display_opacity\"],\n                    [\"get\", \"display_opacity\"],\n                    0.5,\n                  ],\n                },\n              },\n            },\n          })\n        : _vm._e(),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport { MglGeojsonLayer } from 'vue-mapbox'\nimport s3 from '../../AWSClient'\n// set visibility. to render or not by fetching the data.\n// we need to create all the statics link (even without the data)\n// for the correct z-order. if not, they are drawn over the links.\nexport default {\n  name: 'StaticLayer',\n  components: {\n    MglGeojsonLayer,\n  },\n  props: ['fileName', 'type', 'visible'],\n  data () {\n    return {\n      url: '',\n\n    }\n  },\n  watch: {\n    async visible (val) {\n      if (val) {\n        const url = await s3.getImagesURL(this.$store.getters.model, this.fileName)\n        this.url = url\n      } else {\n        this.url = structuredClone(this.$store.getters.linksHeader)\n      }\n    },\n  },\n  created () {\n    // init data to empty geojson to load the mapbox layer\n    this.url = structuredClone(this.$store.getters.linksHeader)\n  },\n  async mounted () {\n    // if selected when loading the map, fetch the data to display the correct geojson.\n    if (this.visible) {\n      const url = await s3.getImagesURL(this.$store.getters.model, this.fileName)\n      this.url = url\n    }\n  },\n\n  methods: {\n\n  },\n}\n</script>\n<template>\n  <section>\n    <MglGeojsonLayer\n      v-if=\"['MultiPolygon', 'Polygon'].includes(type)\"\n      :source-id=\"fileName\"\n      :source=\"{\n        type: 'geojson',\n        data: url,\n      }\"\n      :layer-id=\"fileName\"\n      :layer=\"{\n        interactive: false,\n        type: 'fill',\n        minzoom: 5,\n        'paint': {\n          'fill-color': ['get', 'display_color'],\n          'fill-opacity':['case', ['has', 'display_opacity'], ['get', 'display_opacity'], 0.5],\n\n        }\n      }\"\n    />\n    <MglGeojsonLayer\n      v-if=\"type=='LineString'\"\n      :source-id=\"fileName\"\n      :source=\"{\n        type: 'geojson',\n        data: url,\n      }\"\n      :layer-id=\"fileName\"\n      :layer=\"{\n        interactive: false,\n        type: 'line',\n        minzoom: 5,\n        'paint': {\n          'line-color': ['get', 'display_color'],\n          'line-opacity':['case', ['has', 'display_opacity'], ['get', 'display_opacity'], 0.8],\n          'line-width': ['get', 'display_width'],\n\n        }\n      }\"\n    />\n    <MglGeojsonLayer\n      v-if=\"type == 'Point'\"\n      :source-id=\"fileName\"\n      :source=\"{\n        type: 'geojson',\n        data: url,\n      }\"\n      :layer-id=\"fileName\"\n      :layer=\"{\n        interactive: false,\n        type: 'circle',\n        minzoom: 5,\n        paint: {\n          'circle-color': ['get', 'display_color'],\n          'circle-radius': ['get', 'display_width'],\n          'circle-opacity':['case', ['has', 'display_opacity'], ['get', 'display_opacity'], 0.5],\n        },\n      }\"\n    />\n  </section>\n</template>\n\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StaticLayer.vue?vue&type=template&id=62115073&scoped=true&\"\nimport script from \"./StaticLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./StaticLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62115073\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"v-menu\",\n        {\n          attrs: {\n            \"close-on-content-click\": false,\n            \"close-on-click\": true,\n            origin: \"top right\",\n            transition: \"scale-transition\",\n            \"position-y\": 30,\n            \"nudge-width\": 200,\n            \"offset-x\": \"\",\n            \"offset-y\": \"\",\n          },\n          scopedSlots: _vm._u([\n            {\n              key: \"activator\",\n              fn: function ({ on, attrs }) {\n                return [\n                  _c(\n                    \"v-btn\",\n                    _vm._g(\n                      _vm._b(\n                        {\n                          staticClass: \"layer-button\",\n                          attrs: { fab: \"\", small: \"\" },\n                        },\n                        \"v-btn\",\n                        attrs,\n                        false\n                      ),\n                      on\n                    ),\n                    [\n                      _c(\"v-icon\", { attrs: { color: \"regular\" } }, [\n                        _vm._v(\"\\n          fas fa-layer-group\\n        \"),\n                      ]),\n                    ],\n                    1\n                  ),\n                ]\n              },\n            },\n          ]),\n          model: {\n            value: _vm.show,\n            callback: function ($$v) {\n              _vm.show = $$v\n            },\n            expression: \"show\",\n          },\n        },\n        [\n          _vm._v(\" \"),\n          _c(\n            \"v-card\",\n            { attrs: { \"max-width\": 300 } },\n            [\n              _c(\"v-card-title\", { staticClass: \"subtitle\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Static Layers\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _vm._l(_vm.choices, function (item, key) {\n                return _c(\n                  \"v-list-item\",\n                  { key: key },\n                  [\n                    _c(\"v-checkbox\", {\n                      attrs: { value: item, label: _vm.parsePath(item) },\n                      model: {\n                        value: _vm.selectedLayers,\n                        callback: function ($$v) {\n                          _vm.selectedLayers = $$v\n                        },\n                        expression: \"selectedLayers\",\n                      },\n                    }),\n                  ],\n                  1\n                )\n              }),\n            ],\n            2\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\n\nexport default {\n  name: 'LayerSelector',\n  components: {\n  },\n  props: {\n    choices: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data () {\n    return {\n      show: false,\n      selectedLayers: [],\n      selectedOpacity: 0,\n\n    }\n  },\n  watch: {\n    selectedLayers (val) {\n      const resp = []\n      val.forEach(item => resp.push({ name: item, opacity: 0.5 }))\n      this.$store.commit('setRasterLayers', val)\n    },\n  },\n  mounted () {\n    this.selectedLayers = this.$store.getters.rasterLayers\n  },\n\n  methods: {\n    parsePath (path) { return path.split('/').splice(-1)[0].slice(0, -8) },\n\n  },\n}\n</script>\n<template>\n  <section>\n    <v-menu\n      v-model=\"show\"\n      :close-on-content-click=\"false\"\n      :close-on-click=\"true\"\n      :origin=\"'top right'\"\n      transition=\"scale-transition\"\n      :position-y=\"30\"\n      :nudge-width=\"200\"\n      offset-x\n      offset-y\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn\n          class=\"layer-button\"\n          fab\n          small\n          v-bind=\"attrs\"\n          v-on=\"on\"\n        >\n          <v-icon\n            color=\"regular\"\n          >\n            fas fa-layer-group\n          </v-icon>\n        </v-btn>\n      </template>\n      <v-card\n        :max-width=\"300\"\n      >\n        <v-card-title class=\"subtitle\">\n          {{ $gettext('Static Layers') }}\n        </v-card-title>\n        <v-list-item\n          v-for=\"(item,key) in choices\"\n          :key=\"key\"\n        >\n          <v-checkbox\n            v-model=\"selectedLayers\"\n            :value=\"item\"\n            :label=\"parsePath(item)\"\n          />\n        </v-list-item>\n      </v-card>\n    </v-menu>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n.layer-button {\n  position: absolute;\n  top: 60px;\n  right: 20px;\n}\n.card {\n  width: 500px;\n  overflow-y: auto;\n  padding: 40px;\n}\n.subtitle {\n  font-size: 1.5em;\n  color:  var(--v-secondarydark-base) !important;\n  font-weight: bold;\n  padding:1rem\n\n}\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 3.5em;\n  color: $primary !important;\n  font-weight: bold;\n}\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerSelector.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerSelector.vue?vue&type=style&index=0&id=1a6c8be4&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerSelector.vue?vue&type=style&index=0&id=1a6c8be4&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./LayerSelector.vue?vue&type=template&id=1a6c8be4&scoped=true&\"\nimport script from \"./LayerSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./LayerSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LayerSelector.vue?vue&type=style&index=0&id=1a6c8be4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a6c8be4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","<script>\nimport Mapbox from 'mapbox-gl'\nimport { MglMap, MglNavigationControl, MglScaleControl, MglGeojsonLayer } from 'vue-mapbox'\nimport arrowImage from '@static/arrow.png'\nimport Linestring from 'turf-linestring'\nimport Settings from './Settings.vue'\nimport StaticLinks from './StaticLinks.vue'\nimport EditorLinks from './EditorLinks.vue'\nimport RoadLinks from './RoadLinks.vue'\nimport StaticLayer from '../utils/StaticLayer.vue'\nimport LayerSelector from '../utils/LayerSelector.vue'\n\nconst mapboxPublicKey = process.env.VUE_APP_MAPBOX_PUBLIC_KEY\n// Filter links from selected line\nconst $gettext = s => s\n\nexport default {\n  name: 'Map',\n  components: {\n    MglMap,\n    MglNavigationControl,\n    MglScaleControl,\n    MglGeojsonLayer,\n    LayerSelector,\n    StaticLayer,\n    StaticLinks,\n    EditorLinks,\n    RoadLinks,\n    Settings,\n  },\n  props: {\n    selectedTrips: {\n      type: Array,\n      default: () => [],\n    },\n    isRoadMode: {\n      type: Boolean,\n      default: false,\n    },\n\n  },\n  events: ['clickFeature'],\n  data () {\n    return {\n      mapboxPublicKey: null,\n      selectedFeature: null,\n      isEditorMode: false,\n      mapIsLoaded: false,\n      drawMode: false,\n      hoverId: null,\n      hoverLayer: null,\n      mapDiv: null,\n      drawLink: null,\n      mouseout: false,\n      selectedNode: { id: null, layerId: null },\n      connectedDrawLink: false,\n\n    }\n  },\n  computed: {\n    mapStyle () { return this.$store.getters.mapStyle },\n    showLeftPanel () {\n      return this.$store.getters.showLeftPanel\n    },\n    editorTrip () {\n      return this.$store.getters.editorTrip\n    },\n    editorNodes () {\n      return this.$store.getters.editorNodes\n    },\n    firstNode () {\n      return this.$store.getters.firstNode\n    },\n    lastNode () {\n      return this.$store.getters.lastNode\n    },\n    anchorMode () { return this.$store.getters.anchorMode },\n    rasterLayers () { return this.$store.getters.rasterLayers },\n    rasterFiles () { return this.$store.getters.rasterFiles },\n  },\n  watch: {\n\n    showLeftPanel () {\n      setTimeout(() => this.map.resize(), 250)\n    },\n    anchorMode (val) {\n      if (val) {\n        this.drawMode = false\n        this.$store.commit('changeNotification',\n          { text: $gettext('Left click to add an anchor point, right click to delete'), autoClose: false })\n      } else {\n        this.$store.commit('changeNotification', { text: '', autoClose: true })\n      }\n    },\n    isRoadMode (val) {\n      if (!val) {\n        this.drawMode = false\n      }\n    },\n    mapStyle (val) {\n      this.saveMapPosition()\n    },\n\n    editorNodes (newVal, oldVal) {\n      this.$store.commit('setAnchorMode', false)\n      this.isEditorMode = (newVal.features.length > 0)\n      if (this.isEditorMode) {\n        if (this.$store.getters.changeBounds) {\n          const bounds = new Mapbox.LngLatBounds()\n          newVal.features.forEach(node => {\n            bounds.extend(node.geometry.coordinates)\n          })\n          this.map.fitBounds(bounds, {\n            padding: 100,\n          })\n        }\n      }\n    },\n\n    drawMode (val) {\n      // set layer visible if drawMode is true\n      // check if layer exist. will bug if it is check befere rendering the layer\n      if (this.map?.getStyle().layers.filter(layer => layer.id === 'drawLink').length > 0) {\n        if (val) {\n          this.map.setLayoutProperty('drawLink', 'visibility', 'visible')\n        } else {\n          this.map.setLayoutProperty('drawLink', 'visibility', 'none')\n        }\n      }\n    },\n\n    editorTrip (val) {\n      if (val) {\n        this.isEditorMode = true\n        this.connectedDrawLink = false\n      }\n    },\n    isEditorMode (val) {\n      // check if map is loaded too, there is a bug if not, when component is laoded in edition mode (changing page).\n      if (val && this.editorNodes.features.length > 0 && !this.anchorMode && this.mapIsLoaded) {\n        this.drawMode = true\n      } else {\n        this.drawMode = false\n      }// remove drawmode if we quit edition mode.\n      if (!val & this.drawMode) {\n        this.drawMode = false\n      }\n    },\n    // when the first or last node change (delete or new) change the value of those nodes.\n    'firstNode.geometry.coordinates' (val) {\n      if (this.editorTrip) {\n        this.drawLink = Linestring([val, val])\n        this.selectedNode.layerId = 'nodes'\n        this.selectedNode.id = this.firstNode.properties.index\n      }\n    },\n    'lastNode.geometry.coordinates' (val) {\n      if (this.editorTrip) {\n        this.drawLink = Linestring([val, val])\n        this.selectedNode.layerId = 'nodes'\n        this.selectedNode.id = this.lastNode.properties.index\n      }\n    },\n  },\n  created () {\n    if (this.editorTrip) { this.isEditorMode = true }\n    this.mapboxPublicKey = mapboxPublicKey\n    this.drawLink = structuredClone(this.$store.getters.linksHeader)\n  },\n  beforeDestroy () {\n    this.saveMapPosition()\n  },\n\n  methods: {\n    saveMapPosition () {\n      const center = this.map.getCenter()\n      this.$store.commit('saveMapPosition', {\n        mapCenter: [center.lng, center.lat],\n        mapZoom: this.map.getZoom(),\n      })\n    },\n    onMapLoaded (event) {\n      if (this.map) this.mapIsLoaded = false\n      const bounds = new Mapbox.LngLatBounds()\n      // only use first and last point. seems to bug when there is anchor...\n      if (this.$store.getters.links.features.length > 0) {\n        this.$store.getters.links.features.forEach(link => {\n          bounds.extend([link.geometry.coordinates[0],\n            link.geometry.coordinates[link.geometry.coordinates.length - 1]])\n        })\n      } else {\n        this.$store.getters.rlinks.features.forEach(link => {\n          bounds.extend([link.geometry.coordinates[0],\n            link.geometry.coordinates[link.geometry.coordinates.length - 1]])\n        })\n      }\n\n      // for empty (new) project, do not fit bounds around the links geometries.\n      if (Object.keys(bounds).length !== 0) {\n        event.map.fitBounds(bounds, {\n          padding: 100,\n        })\n      }\n      event.map.loadImage(arrowImage, function (err, image) {\n        if (err) {\n          console.error('err image', err)\n          return\n        }\n        event.map.addImage('arrow', image, { sdf: true })\n      })\n\n      this.map = event.map\n      event.map.dragRotate.disable()\n      this.mapIsLoaded = true\n    },\n\n    draw (event) {\n      // do not update position on connected link, this makes the node sticky\n      if (!this.connectedDrawLink) {\n        // there is no mousein event, so if drawlink was put nonvisible by mouseout, we cancel here.\n        if (this.drawMode && this.mouseout) {\n          this.map.setLayoutProperty('drawLink', 'visibility', 'visible')\n          this.mouseout = false\n        }\n        if (this.drawMode && !this.anchorMode) {\n        // update draw line with new geometry.\n          const geometry = [this.drawLink.geometry.coordinates[0], Object.values(event.mapboxEvent.lngLat)]\n          this.drawLink = Linestring(geometry)\n        }\n      }\n    },\n    addPoint (event) {\n      if (this.drawMode) {\n        if (this.selectedNode.layerId === 'rnodes') {\n          const pointGeom = Object.values(event.mapboxEvent.lngLat)\n          const payload = {\n            nodeIdA: this.selectedNode.id,\n            nodeIdB: this.hoverId, // could be null, a node or a link.\n            geom: pointGeom,\n            layerId: this.hoverLayer,\n          }\n          // this action overwrite payload.nodeIdB to the actual newLink nodeB.\n          this.$store.commit('createrLink', payload)\n          this.drawMode = false\n          // then, create a hover (and off hover) to the new node b to continue drawing\n          this.onHoverRoad({ layerId: 'rnodes', selectedId: [payload.nodeIdB] })\n          this.offHover()\n\n          // onHoverRoad (event)\n          this.$refs.roadref.getBounds()\n        } else { // PT nodes\n          if (this.drawMode & !this.anchorMode & !this.hoverId) {\n            const action = (this.selectedNode.id === this.$store.getters.lastNodeId)\n              ? 'Extend Line Upward'\n              : 'Extend Line Downward'\n            const pointGeom = Object.values(event.mapboxEvent.lngLat)\n\n            this.$store.commit('applyNewLink', { nodeId: this.selectedNode.id, geom: pointGeom, action: action })\n          }\n        }\n      } else {\n        // for a new Line\n        if (this.editorNodes.features.length === 0 && this.editorTrip) {\n          this.$store.commit('createNewNode', Object.values(event.mapboxEvent.lngLat))\n          this.$store.commit('changeNotification', { text: '', autoClose: true })\n        }\n      }\n    },\n    resetDraw (event) {\n      // reset draw line when we leave the map.\n      // there is no mouseIn event, so we track it with mouseout = true, and reapply visible on mousemove.\n      if (this.drawMode) {\n        this.mouseout = true\n        this.map.setLayoutProperty('drawLink', 'visibility', 'none')\n      }\n    },\n\n    rightClickMap (event) {\n      // remove drawmode when we right click on map\n      if (event.mapboxEvent.originalEvent.button === 2 & !this.hoverId) {\n        this.drawMode = false\n      }\n    },\n    onHover (event) {\n      // no drawing when we hover on link or node\n      this.hoverId = event.selectedId\n      if (this.drawMode) { this.map.setLayoutProperty('drawLink', 'visibility', 'none') }\n      // change hook when we hover first or last node.\n      if ([this.$store.getters.lastNodeId, this.$store.getters.firstNodeId].includes(this.hoverId)) {\n        const node = this.$store.getters.editorNodes.features.filter(node =>\n          node.properties.index === event.selectedId)\n        this.drawLink = Linestring([node[0].geometry.coordinates, node[0].geometry.coordinates])\n        this.selectedNode.id = this.hoverId\n        this.selectedNode.layerId = event.layerId\n\n        this.drawMode = true\n      }\n    },\n    onHoverRoad (event) {\n      if (event?.layerId === 'rnodes') {\n        this.hoverLayer = event.layerId\n        this.hoverId = event.selectedId[0]\n        if (this.drawMode) {\n          // nodes are sticky. drawlink change size and style\n          this.connectedDrawLink = true\n        } else {\n          this.connectedDrawLink = false\n          const node = this.$store.getters.visiblerNodes.features.filter(node =>\n            node.properties.index === this.hoverId)\n          this.drawLink = Linestring([node[0].geometry.coordinates, node[0].geometry.coordinates])\n          this.drawMode = true\n          this.connectedDrawLink = false\n          this.selectedNode.id = this.hoverId\n          this.selectedNode.layerId = this.hoverLayer\n        }\n      } else if (event?.layerId === 'rlinks') {\n        this.hoverLayer = event.layerId\n        this.hoverId = event.selectedId\n      }\n    },\n    offHover (event) {\n      // put back visible draw line\n      this.hoverId = null\n      this.hoverLayer = null\n      if (this.drawMode) {\n        this.map.setLayoutProperty('drawLink', 'visibility', 'visible')\n        this.connectedDrawLink = false\n      }\n    },\n    clickFeature (event) {\n      // when we move a rNode, we need to update drawlink as it is link to this moved node.\n      if (['Move rNode', 'Delete rLink'].includes(event.action)) {\n        this.drawMode = false\n        // this.drawLink = Linestring([event.lngLat, event.lngLat])\n      }\n      // prevent emitting add road node inline when drawmode is on.\n      // we will add the node inlne and create the new link in this component.\n      if (!(event.action === 'Add Road Node Inline' && this.drawMode)) {\n        this.$emit('clickFeature', event)\n      }\n    },\n\n  },\n\n}\n</script>\n<template>\n  <MglMap\n    :key=\"mapStyle\"\n    :style=\"{'width': '100%'}\"\n    :access-token=\"mapboxPublicKey\"\n    :map-style=\"mapStyle\"\n    :center=\"$store.getters.mapCenter\"\n    :zoom=\"$store.getters.mapZoom\"\n    @load=\"onMapLoaded\"\n    @mousemove=\"draw\"\n    @mouseout=\"resetDraw()\"\n    @click=\"addPoint\"\n    @mouseup=\"rightClickMap\"\n  >\n    <template v-if=\"mapIsLoaded\">\n      <Settings />\n    </template>\n    <template v-if=\"mapIsLoaded & rasterFiles.length>0\">\n      <LayerSelector :choices=\"rasterFiles.map(item=>item.name)\" />\n    </template>\n    <MglScaleControl position=\"bottom-right\" />\n    <MglNavigationControl position=\"bottom-right\" />\n    <div\n      v-for=\"file in rasterFiles\"\n      :key=\"file.name\"\n    >\n      <template v-if=\"mapIsLoaded\">\n        <StaticLayer\n          :file-name=\"file.name\"\n          :type=\"file.type\"\n          :visible=\"rasterLayers.includes(file.name)\"\n        />\n      </template>\n    </div>\n\n    <template v-if=\"mapIsLoaded\">\n      <RoadLinks\n        ref=\"roadref\"\n        :map=\"map\"\n        :is-editor-mode=\"isEditorMode\"\n        :is-road-mode=\"isRoadMode\"\n        :anchor-mode=\"anchorMode\"\n        v-on=\"(isEditorMode)? {} : anchorMode ? {clickFeature: clickFeature } : {onHover:onHoverRoad, offHover:offHover,clickFeature: clickFeature}\"\n      />\n    </template>\n    <template v-if=\"mapIsLoaded\">\n      <StaticLinks\n        :map=\"map\"\n        :showed-trips=\"selectedTrips\"\n        :is-editor-mode=\"isEditorMode\"\n        @rightClick=\"(e) => $emit('clickFeature',e)\"\n      />\n    </template>\n    <template v-if=\"mapIsLoaded\">\n      <EditorLinks\n        :map=\"map\"\n        :anchor-mode=\"anchorMode\"\n        v-on=\"anchorMode ? {clickFeature: clickFeature } : {onHover:onHover, offHover:offHover,clickFeature: clickFeature}\"\n      />\n    </template>\n    <template v-if=\"mapIsLoaded\">\n      <MglGeojsonLayer\n        v-if=\"drawMode\"\n        source-id=\"drawLink\"\n        :source=\"{\n          type: 'geojson',\n          data:drawLink,\n          buffer: 0,\n          generateId: true,\n        }\"\n        layer-id=\"drawLink\"\n        :layer=\"{\n          type: 'line',\n          minzoom: 2,\n          paint: {\n            'line-opacity': 1,\n            'line-color': $vuetify.theme.currentTheme.linksprimary,\n            'line-width': ['case', ['boolean', connectedDrawLink, false], 5, 3],\n            'line-dasharray':['case', ['boolean', connectedDrawLink, false],['literal', []] , ['literal', [0, 2, 4]]],\n\n          }\n        }\"\n      />\n    </template>\n  </MglMap>\n</template>\n<style lang=\"scss\" scoped>\n.map-view {\n  width: 100%;\n\n}\n.my-custom-dialog {\n  position: absolute !important;\n  top: 10px !important;\n  right: 20px !important;\n}\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=86ac8544&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=86ac8544&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=86ac8544&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=86ac8544&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"86ac8544\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"v-menu\",\n    {\n      attrs: {\n        top: \"\",\n        \"nudge-bottom\": \"105\",\n        \"nudge-left\": \"16\",\n        \"close-on-content-click\": false,\n      },\n      scopedSlots: _vm._u([\n        {\n          key: \"activator\",\n          fn: function ({ on }) {\n            return [_c(\"div\", _vm._g({ style: _vm.swatchStyle }, on))]\n          },\n        },\n      ]),\n      model: {\n        value: _vm.menu,\n        callback: function ($$v) {\n          _vm.menu = $$v\n        },\n        expression: \"menu\",\n      },\n    },\n    [\n      _vm._v(\" \"),\n      _c(\n        \"v-card\",\n        [\n          _c(\n            \"v-card-text\",\n            { staticClass: \"pa-0\" },\n            [\n              _c(\"v-color-picker\", {\n                attrs: {\n                  mode: \"hexa\",\n                  swatches: _vm.swatches,\n                  \"show-swatches\": \"\",\n                  flat: \"\",\n                },\n                model: {\n                  value: _vm.color,\n                  callback: function ($$v) {\n                    _vm.color = $$v\n                  },\n                  expression: \"color\",\n                },\n              }),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-actions\",\n            [\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { color: \"grey\", outlined: \"\" },\n                  on: { click: _vm.cancel },\n                },\n                [\n                  _vm._v(\n                    \"\\n        \" + _vm._s(_vm.$gettext(\"cancel\")) + \"\\n      \"\n                  ),\n                ]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { color: \"green darken-1\", outlined: \"\" },\n                  on: { click: _vm.updateColor },\n                },\n                [\n                  _vm._v(\n                    \"\\n        \" + _vm._s(_vm.$gettext(\"apply\")) + \"\\n      \"\n                  ),\n                ]\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\n\nexport default {\n  name: 'ColorPicker',\n  components: {\n\n  },\n  model: {\n    prop: 'pcolor',\n    event: 'update-color',\n  },\n  props: ['pcolor'],\n  events: ['update-color'],\n  data () {\n    return {\n      color: '$primary',\n      menu: false,\n      swatches: [],\n\n    }\n  },\n  computed: {\n    swatchStyle () {\n      const { color, menu } = this\n\n      return {\n        'backgroundColor': color,\n        'border-style': 'solid',\n        'border-width': '1px',\n        'border-color': '#868686',\n        'cursor': 'pointer',\n        'height': '20px',\n        'width': '20px',\n        'borderRadius': menu ? '50%' : '4px',\n        'transition': 'border-radius 200ms ease-in-out',\n      }\n    },\n  },\n  watch: {\n    // this only happen when we type a value.\n    pcolor (val) {\n      if (this.pcolor[0] !== '#') {\n        this.color = '#'.concat(this.pcolor)\n        this.$emit('update-color', this.pcolor.slice(0, 6))\n      }\n      if (this.pcolor[0] === '#') {\n        this.$emit('update-color', this.pcolor.slice(1, 7))\n      }\n    },\n\n  },\n\n  mounted () {\n    // get chart color and create a 2x4 Swatch for quick color selection.\n    const keys = Object.keys(this.$vuetify.theme.currentTheme.chart)\n    let tempArr = []\n    // eslint-disable-next-line array-callback-return\n    keys.map((key) => {\n      tempArr.push(this.$vuetify.theme.currentTheme.chart[key])\n      if (tempArr.length === 2) {\n        this.swatches.push(tempArr)\n        tempArr = []\n      }\n    })\n\n    // if it is null, do nothing, just put the blue color on the selection square.\n    if ([null, undefined, ''].includes(this.pcolor)) {\n      this.color = this.$vuetify.theme.currentTheme.chart.lightblue\n      // this.$emit('update-color', this.color.slice(1))\n    // the input color never start with #, must add it for this component only (on local var this.color)\n    } else if (this.pcolor[0] !== '#') {\n      this.color = '#'.concat(this.pcolor)\n    // it start with #, leave it as is (this should and will never be the case.)\n    } else {\n      this.color = this.pcolor\n    }\n  },\n\n  methods: {\n    // this method is call when we select a color, the # is remove and pcolor is updated.\n    updateColor () {\n      this.$emit('update-color', this.color)\n\n      this.menu = false\n    },\n    cancel () {\n      this.color = this.pcolor\n      this.menu = false\n    },\n  },\n}\n</script>\n<template\n  v-slot:append\n>\n  <v-menu\n    v-model=\"menu\"\n    top\n    nudge-bottom=\"105\"\n    nudge-left=\"16\"\n    :close-on-content-click=\"false\"\n  >\n    <template v-slot:activator=\"{ on }\">\n      <div\n        :style=\"swatchStyle\"\n        v-on=\"on\"\n      />\n    </template>\n    <v-card>\n      <v-card-text\n        class=\"pa-0\"\n      >\n        <v-color-picker\n          v-model=\"color\"\n          mode=\"hexa\"\n          :swatches=\"swatches\"\n          show-swatches\n          flat\n        />\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n\n        <v-btn\n          color=\"grey\"\n          outlined\n          @click=\"cancel\"\n        >\n          {{ $gettext(\"cancel\") }}\n        </v-btn>\n        <v-btn\n          color=\"green darken-1\"\n          outlined\n          @click=\"updateColor\"\n        >\n          {{ $gettext(\"apply\") }}\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-menu>\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColorPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColorPicker.vue?vue&type=script&lang=js&\"","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","<!-- eslint-disable no-multi-str -->\n<!-- eslint-disable no-return-assign -->\n<script>\nimport SidePanel from '@comp/map/SidePanel.vue'\nimport Map from '@comp/map/Map.vue'\nimport ColorPicker from '@comp/utils/ColorPicker.vue'\nimport { getGroupForm } from '@comp/utils/utils.js'\n\n// only used to force to see translation to vue-gettext\nconst $gettext = s => s\n\nexport default {\n  name: 'Home',\n  components: {\n    Map,\n    SidePanel,\n    ColorPicker,\n  },\n  data () {\n    return {\n      editorTrip: null,\n      action: null,\n      selectedNode: null,\n      selectedLink: null,\n      selectedIndex: null,\n      showDialog: false,\n      cloneDialog: false,\n      editorForm: {},\n      cursorPosition: [],\n      tripToDelete: null,\n      tripToClone: null,\n      message: '',\n      cloneName: null,\n      errorMessage: null,\n      lingering: true,\n      groupTripIds: [],\n      isRoadMode: false,\n      showHint: false,\n      showDeleteOption: false,\n      newFieldName: null,\n      linkDir: [],\n      rules: {\n        newField: [\n          val => !Object.keys(this.editorForm).includes(val) || $gettext('field already exist'),\n          val => val !== '' || $gettext('cannot add empty field'),\n        ],\n      },\n\n      hints: {\n        agency_id: $gettext('transit brand or transit agency'),\n        direction_id: $gettext(`direction of travel for a trip. used to separate trips by directions.\n         ex: 0 - Travel in one direction. 1 - Travel in the opposite direction.`),\n        drop_off_type: $gettext(`0 - Regularly scheduled drop off.\n        1 - No drop off available.\n        2 - Must phone agency to arrange drop off.\n        3 - Must coordinate with driver to arrange drop off.`),\n        headway: $gettext('Time between departures in seconds'),\n        pickup_type: $gettext(`0 - Regularly scheduled pickup.\n        1 - No pickup available.\n        2 - Must phone agency to arrange pickup.\n        3 - Must coordinate with driver to arrange pickup`),\n        route_color: $gettext('color to display on the map (i.e. FFFFFF)'),\n        route_id: $gettext('Identifies a route. Often a string'),\n        route_long_name: $gettext(\"Full name of a route.This name is generally more descriptive\\\n         than the route_short_name and often includes the roudefaultAttributeste's destination or stop\"),\n        route_short_name: $gettext(`Short name of a route. This will often be a short,\n         abstract identifier like \"32\", \"100X\", or \"Green\"`),\n        route_type: $gettext(`Indicates the type of transportation used on a route.\n         subway, metro, rail, bus, ferry, tram, etc`),\n        route_width: $gettext('width to display on the map'),\n        time: $gettext('Travel time on the link. set as length / speed when a link is created or edited (seconds)'),\n        trip_id: $gettext(`Line (or trip) identifier (i.e. 100 Est).\n         Links are group by trip_id in Quetzal-network-editor.`),\n        length: $gettext('links geometry linestring length (meters)'),\n        highway: $gettext('Main identifier or any kind of road, street or path. ex: (motorway, residential, primary)'),\n        speed: $gettext('speed on the link (Km/h)'),\n\n      },\n\n    }\n  },\n  computed: {\n    selectedTrips () { return this.$store.getters.selectedTrips },\n    selectedrGroup () { return this.$store.getters.selectedrGroup },\n    numLinks () { return Array.isArray(this.editorForm) ? this.editorForm.length : 1 },\n\n    editForm () {\n      return ['Edit Line Info',\n        'Edit Link Info',\n        'Edit Node Info',\n        'Edit Group Info',\n        'Edit rLink Info',\n        'Edit Road Group Info',\n        'Edit Visible Road Info',\n        'Edit rNode Info'].includes(this.action)\n    },\n  },\n  watch: {\n    showDialog (val) {\n      // do not show a notification when dialog is on. sometim its over the confirm button\n      if (val) { this.$store.commit('changeNotification', { text: '', autoClose: true }) }\n      this.showHint = false\n      this.showDeleteOption = false\n    },\n\n  },\n  created () {\n    this.editorTrip = this.$store.getters.editorTrip\n    window.addEventListener('keydown', (e) => {\n      if ((e.key === 'Control') && (!this.showDialog) && (!this.cloneDialog)) {\n        this.$store.commit('changeAnchorMode')\n      }\n    })\n  },\n\n  methods: {\n    orderedForm (index) {\n      // order editor Form in alphatical order\n      let form = this.editorForm\n      // if we have tab. there is a list of form\n      if (form.length >= 1) {\n        form = form[index]\n      }\n      // order keys in alphabetical order, and with disabled last\n      const keys = Object.keys(form).filter(key => !form[key].disabled).sort()\n      keys.push(...Object.keys(form).filter(key => form[key].disabled).sort())\n      const ordered = keys.reduce(\n        (obj, key) => {\n          obj[key] = form[key]\n          return obj\n        },\n        {},\n      )\n      return ordered\n    },\n\n    updateSelectedTrips (event) {\n      if (event.type === 'links') {\n        this.$store.commit('changeSelectedTrips', event.data)\n      } else if (event.type === 'rlinks') {\n        this.$store.commit('changeVisibleRoads', event.data)\n      }\n    },\n\n    actionClick (event) {\n      this.action = event.action\n      if (this.action === 'Edit Line Info') {\n        this.editorForm = structuredClone(this.$store.getters.editorLineInfo)\n        this.lingering = event.lingering\n        this.showDialog = true\n      } else if (this.action === 'Edit Group Info') {\n        this.groupTripIds = event.tripIds\n        const uneditable = ['index', 'length', 'a', 'b', 'link_sequence', 'trip_id']\n        const lineAttributes = this.$store.getters.lineAttributes\n        const features = structuredClone(this.$store.getters.links.features.filter(\n          link => this.groupTripIds.includes(link.properties.trip_id)))\n\n        this.editorForm = getGroupForm(features, lineAttributes, uneditable)\n        this.lingering = event.lingering\n        this.showDialog = true\n      } else if (this.action === 'Edit Link Info') {\n        // link is clicked on the map\n        this.selectedLink = event.selectedFeature.properties\n        const uneditable = ['a', 'b', 'index', 'link_sequence', 'trip_id']\n        const lineAttributes = this.$store.getters.lineAttributes\n        const features = this.$store.getters.editorLinks.features.filter(\n          (link) => link.properties.index === this.selectedLink.index)\n\n        this.editorForm = getGroupForm(features, lineAttributes, uneditable)\n        this.lingering = event.lingering\n        this.showDialog = true\n      } else if (this.action === 'Edit rLink Info') {\n        this.selectedLink = event.selectedIndex\n        this.editorForm = this.selectedLink.map(linkId => this.$store.getters.rlinksForm(linkId))\n        this.linkDir = this.$store.getters.rlinkDirection(this.selectedLink)\n        event.selectedIndex.forEach(linkId => {\n          if (this.$store.getters.onewayIndex.has(linkId)) {\n            this.selectedLink.push(linkId)\n            this.editorForm.push(this.$store.getters.reversedrLinksForm(linkId))\n            this.linkDir.push(this.$store.getters.rlinkDirection(this.selectedLink, true))\n          }\n        })\n        this.showDialog = true\n      } else if (this.action === 'Edit Road Group Info') {\n        const features = this.$store.getters.grouprLinks(event.category, event.group)\n        this.selectedLinks = features // this is an observer. modification will be applied to it in next commit.\n        const lineAttributes = this.$store.getters.rlineAttributes\n        const uneditable = ['index', 'length', 'a', 'b']\n        this.editorForm = getGroupForm(features, lineAttributes, uneditable)\n        this.lingering = event.lingering\n        this.showDialog = true\n      } else if (this.action === 'Edit Visible Road Info') {\n        const features = this.$store.getters.visiblerLinks.features\n        this.selectedLinks = features // this is an observer. modification will be applied to it in next commit.\n        const lineAttributes = this.$store.getters.rlineAttributes\n        const uneditable = ['index', 'length', 'a', 'b']\n        this.editorForm = getGroupForm(features, lineAttributes, uneditable)\n        this.lingering = event.lingering\n        this.showDialog = true\n      } else if (['Edit Node Info', 'Edit rNode Info'].includes(this.action)) {\n        this.selectedNode = event.selectedFeature.properties\n        // map selected node doesnt not return properties with nanulln value.\n        // we need to get the node in the store with the selected index.\n        if (this.action === 'Edit Node Info') {\n          this.editorForm = this.$store.getters.editorNodes.features.filter(\n            (node) => node.properties.index === this.selectedNode.index)\n        } else if (this.action === 'Edit rNode Info') {\n          this.editorForm = this.$store.getters.visiblerNodes.features.filter(\n            (node) => node.properties.index === this.selectedNode.index)\n        }\n        this.editorForm = this.editorForm[0].properties\n        // filter properties to only the one that are editable.\n        const uneditable = ['index', 'route_width']\n        const filtered = Object.keys(this.editorForm)\n          .reduce((obj, key) => {\n            obj[key] = {\n              value: this.editorForm[key],\n              disabled: uneditable.includes(key),\n              placeholder: false,\n            }\n            return obj\n          }, {})\n        this.editorForm = filtered\n        this.showDialog = true\n      } else if (['Cut Before Node', 'Cut After Node',\n        'Move Stop', 'Delete Stop', 'Delete Anchor', 'Delete Road Anchor'].includes(this.action)) {\n        this.selectedNode = event.selectedFeature.properties\n        this.applyAction()\n      } else if (['Add Stop Inline', 'Add Anchor Inline'].includes(this.action)) {\n        this.selectedLink = event.selectedFeature.properties\n        this.cursorPosition = event.lngLat\n        this.applyAction()\n      } else if (['Add Road Node Inline', 'Add Road Anchor Inline', 'Delete rLink'].includes(this.action)) {\n        this.selectedIndex = event.selectedIndex\n        this.cursorPosition = event.lngLat\n        this.applyAction()\n      } else if (['Move Node', 'Move Anchor', 'Move rNode', 'Move rAnchor'].includes(this.action)) {\n        this.selectedNode = event.selectedFeature\n        this.cursorPosition = event.lngLat\n        this.applyAction()\n      }\n    },\n\n    applyAction () {\n      // click yes on dialog\n      this.showDialog = false\n      switch (this.action) {\n        case 'Cut Before Node':\n          this.$store.commit('cutLineAtNode', { selectedNode: this.selectedNode })\n          break\n        case 'Cut After Node':\n          this.$store.commit('cutLineFromNode', { selectedNode: this.selectedNode })\n          break\n        case 'Delete Stop':\n          this.$store.commit('deleteNode', { selectedNode: this.selectedNode })\n          break\n        case 'Edit Link Info':\n          this.$store.commit('editLinkInfo', { selectedLinkId: this.selectedLink.index, info: this.editorForm })\n          break\n        case 'Edit Node Info':\n          this.$store.commit('editNodeInfo', { selectedNodeId: this.selectedNode.index, info: this.editorForm })\n          break\n        case 'Edit Line Info':\n          // check if trip_id was changed and if it already exist.\n          if ((this.editorForm.trip_id.value !== this.$store.getters.editorTrip) &&\n          this.$store.getters.tripId.includes(this.editorForm.trip_id.value)) {\n            // reset all. just like abortChanges but without the abort changes notification\n            this.lingering = true // if not, applyAction is call after and the notification is overwrite.\n            this.editorTrip = null\n            this.$store.commit('setEditorTrip', { tripId: null, changeBounds: false })\n            this.action = null\n            this.$store.commit('changeNotification', {\n              text: $gettext('Could not apply modification. Trip_id already exist'),\n              autoClose: true,\n              color: 'red darken-2',\n            })\n          }\n          this.$store.commit('editLineInfo', this.editorForm)\n          if (this.$store.getters.editorNodes.features.length === 0) {\n            this.$store.commit('changeNotification',\n              { text: $gettext('Click on the map to start drawing'), autoClose: false })\n          }\n          break\n        case 'Edit Group Info':\n          this.$store.commit('editGroupInfo', { groupTripIds: this.groupTripIds, info: this.editorForm })\n          break\n        case 'deleteTrip':\n          this.$store.commit('deleteTrip', this.tripToDelete)\n          break\n        case 'Add Stop Inline':\n          this.$store.commit('addNodeInline', {\n            selectedLink: this.selectedLink,\n            lngLat: this.cursorPosition,\n            nodes: 'editorNodes',\n          })\n          break\n        case 'Add Anchor Inline':\n          this.$store.commit('addNodeInline', {\n            selectedLink: this.selectedLink,\n            lngLat: this.cursorPosition,\n            nodes: 'anchorNodes',\n          })\n          break\n        case 'Delete Anchor':\n          this.$store.commit('deleteAnchorNode', { selectedNode: this.selectedNode })\n          break\n        case 'Edit rLink Info':\n          this.$store.commit('editrLinkInfo', { selectedLinkId: this.selectedLink, info: this.editorForm })\n          break\n        case 'Edit Road Group Info':\n          this.$store.commit('editrGroupInfo', { selectedLinks: this.selectedLinks, info: this.editorForm })\n          this.$refs.mapref.$refs.roadref.getBounds()\n          break\n        case 'Edit Visible Road Info':\n          this.$store.commit('editrGroupInfo', {\n            selectedLinks: this.$store.getters.visiblerLinks.features,\n            info: this.editorForm,\n          })\n          this.$refs.mapref.$refs.roadref.getBounds()\n          break\n        case 'Edit rNode Info':\n          this.$store.commit('editrNodeInfo', { selectedNodeId: this.selectedNode.index, info: this.editorForm })\n          break\n        case 'Add Road Node Inline':\n          this.$store.commit('addRoadNodeInline', {\n            selectedIndex: this.selectedIndex,\n            lngLat: this.cursorPosition,\n            nodes: 'rnodes',\n          })\n          break\n        case 'Add Road Anchor Inline':\n          this.$store.commit('addRoadNodeInline', {\n            selectedIndex: this.selectedIndex,\n            lngLat: this.cursorPosition,\n            nodes: 'anchorrNodes',\n          })\n          break\n        case 'Move Node':\n          this.$store.commit('moveNode', { selectedNode: this.selectedNode, lngLat: this.cursorPosition })\n          break\n        case 'Move Anchor':\n          this.$store.commit('moveAnchor', { selectedNode: this.selectedNode, lngLat: this.cursorPosition })\n          break\n        case 'Move rNode':\n          this.$store.commit('moverNode', { selectedNode: this.selectedNode, lngLat: this.cursorPosition })\n          break\n        case 'Move rAnchor':\n          this.$store.commit('moverAnchor', { selectedNode: this.selectedNode, lngLat: this.cursorPosition })\n          break\n        case 'Delete Road Anchor':\n          this.$store.commit('deleteAnchorrNode', { selectedNode: this.selectedNode })\n          break\n        case 'Delete rLink':\n          this.$store.commit('deleterLink', { selectedIndex: this.selectedIndex })\n          break\n        case 'deleterGroup':\n          this.$store.commit('deleterGroup', this.tripToDelete)\n          break\n      }\n      if (!this.lingering) {\n        this.confirmChanges()\n        this.lingering = true\n      }\n    },\n    cancelAction () {\n      this.showDialog = false\n      if (!this.lingering) {\n        this.abortChanges()\n        this.lingering = true\n      }\n    },\n    confirmChanges () {\n      // confirm changes on sidePanel, this overwrite Links in store.\n      this.$store.commit('confirmChanges')\n      // put editTrip and action to null.\n      this.editorTrip = null\n      this.$store.commit('setEditorTrip', { tripId: null, changeBounds: false })\n      this.action = null\n      // notification\n      this.$store.commit('changeNotification',\n        { text: $gettext('modification applied'), autoClose: true, color: 'success' })\n    },\n    abortChanges () {\n      // unselect a trip for edition. nothing to commit on link here.\n      // put editTrip and action to null.\n      this.editorTrip = null\n      this.$store.commit('setEditorTrip', { tripId: null, changeBounds: false })\n      this.action = null\n      // notification\n      this.$store.commit('changeNotification', { text: $gettext('modification aborted'), autoClose: true })\n    },\n    deleteButton (selection) {\n      // could be a trip, or a roadLinks group\n      this.tripToDelete = selection.trip\n      this.message = selection.message\n      this.action = selection.action\n      this.showDialog = true\n    },\n\n    duplicate () {\n      if (this.$store.getters.tripId.includes(this.cloneName)) {\n        this.errorMessage = 'already exist'\n      } else {\n        this.$store.commit('cloneTrip', { tripId: this.tripToClone, name: this.cloneName })\n        this.errorMessage = ''\n        this.cloneDialog = false\n      }\n    },\n\n    cloneButton (selection) {\n      this.tripToClone = selection.trip\n      this.message = selection.message\n      // this.action = 'cloneTrip'\n      this.cloneName = selection.trip + ' copy'\n      this.cloneDialog = true\n    },\n\n    cancelClone () {\n      this.errorMessage = ''\n      this.cloneDialog = false\n    },\n    addField () {\n      let form = {}\n      if (Array.isArray(this.editorForm)) {\n        form = structuredClone(this.editorForm[0])\n      } else {\n        form = structuredClone(this.editorForm)\n      }\n      // do not append if its null, empty or already exist.\n\n      if ((Object.keys(form).includes(this.newFieldName)) | (this.newFieldName === '') |\n       (!this.newFieldName) | (this.newFieldName?.endsWith('_r'))) {\n        // put ' ' so the rule error is diplayed.\n        this.newFieldName = ''\n      } else {\n        // need to rewrite editorForm object to be updated in DOM\n        if (Array.isArray(this.editorForm)) {\n          const tempArr = structuredClone(this.editorForm)\n          tempArr.forEach(el => {\n            // if its a reverse link. only add it to the form if its not an excluded one\n            // (ex: route_width, no route_width_r)\n            if (Object.keys(el)[0].endsWith('_r')) {\n              if (!this.$store.getters.rcstAttributes.includes(this.newFieldName)) {\n                el[this.newFieldName + '_r'] = { disabled: false, placeholder: false, value: undefined }\n              }\n            } else { // normal link. add the new field to the list.\n              el[this.newFieldName] = { disabled: false, placeholder: false, value: undefined }\n            }\n          })\n          this.editorForm = null\n          this.editorForm = tempArr\n        } else {\n          form[this.newFieldName] = { disabled: false, placeholder: false, value: undefined }\n          this.editorForm = {}\n          this.editorForm = form\n        }\n\n        if (['Edit Line Info', 'Edit Link Info', 'Edit Group Info'].includes(this.action)) {\n          this.$store.commit('addPropertie', { name: this.newFieldName, table: 'links' })\n        } else if (['Edit rLink Info', 'Edit Road Group Info', 'Edit Visible Road Info'].includes(this.action)) {\n          this.$store.commit('addRoadPropertie', { name: this.newFieldName, table: 'rlinks' })\n        } else if (this.action === 'Edit Node Info') {\n          this.$store.commit('addPropertie', { name: this.newFieldName, table: 'nodes' })\n        } else if (this.action === 'Edit rNode Info') {\n          this.$store.commit('addRoadPropertie', { name: this.newFieldName, table: 'rnodes' })\n        }\n        this.newFieldName = null // null so there is no rules error.\n        this.$store.commit('changeNotification',\n          { text: $gettext('Field added'), autoClose: true, color: 'success' })\n      }\n    },\n    deleteField (field) {\n      let form = structuredClone(this.editorForm)\n      // if roadLinks.\n      if (Array.isArray(this.editorForm)) {\n        // if we delete a reverse attribute, change it to normal as _r are deleted with normal one\n        if (field.endsWith('_r')) {\n          field = field.substr(0, field.length - 2)\n        }\n        form = form.filter(el => delete el[field])\n        form = form.filter(el => delete el[field + '_r'])\n      // TC links\n      } else {\n        delete form[field]\n      }\n      this.editorForm = {}\n      this.editorForm = form\n\n      if (['Edit Line Info', 'Edit Link Info', 'Edit Group Info'].includes(this.action)) {\n        this.$store.commit('deletePropertie', { name: field, table: 'links' })\n      } else if (['Edit rLink Info', 'Edit Road Group Info', 'Edit Visible Road Info'].includes(this.action)) {\n        this.$store.commit('deleteRoadPropertie', { name: field, table: 'rlinks' })\n      } else if (this.action === 'Edit Node Info') {\n        this.$store.commit('deletePropertie', { name: field, table: 'nodes' })\n      } else if (this.action === 'Edit rNode Info') {\n        this.$store.commit('deleteRoadPropertie', { name: field, table: 'rnodes' })\n      }\n      this.$store.commit('changeNotification',\n        { text: $gettext('Field deleted'), autoClose: true, color: 'success' })\n    },\n    attributeNonDeletable (field) {\n      if (['Edit Line Info', 'Edit Link Info', 'Edit Group Info', 'Edit Node Info'].includes(this.action)) {\n        return this.$store.getters.defaultAttributesNames.includes(field)\n      } else {\n        return this.$store.getters.rundeletable.includes(field)\n      }\n    },\n    ToggleDeleteOption () {\n      this.showDeleteOption = !this.showDeleteOption\n\n      if (this.showDeleteOption) {\n        this.$store.commit('changeNotification', {\n          text: $gettext('This action will delete properties on every links (and reversed one for two-way roads)'),\n          autoClose: false,\n          color: 'warning',\n        })\n      } else {\n        this.$store.commit('changeNotification', { text: '', autoClose: true })\n      }\n    },\n\n  },\n}\n</script>\n<template>\n  <section class=\"map-view\">\n    <v-dialog\n      v-model=\"showDialog\"\n      scrollable\n      persistent\n      :max-width=\"numLinks>1? '40rem':'20rem'\"\n      @keydown.enter=\"applyAction\"\n      @keydown.esc=\"cancelAction\"\n    >\n      <v-card\n        max-height=\"55rem\"\n      >\n        <v-card-title class=\"text-h5\">\n          {{ ['deleteTrip','deleterGroup'].includes(action)? $gettext(\"Delete\") + ' '+ message + '?': $gettext(\"Edit Properties\") }}\n        </v-card-title>\n        <v-divider />\n        <v-card-text v-if=\"editForm\">\n          <v-row>\n            <v-col\n              v-for=\"(n,idx) in numLinks\"\n              :key=\"idx\"\n            >\n              <v-list>\n                <v-list-item v-if=\"numLinks > 1\">\n                  <v-icon\n                    :style=\"{'align-items':'center',\n                             'justify-content': 'center',\n                             transform: 'rotate('+linkDir[idx]+'deg)'}\"\n                  >\n                    fas fa-long-arrow-alt-up\n                  </v-icon>\n                </v-list-item>\n                <v-text-field\n                  v-for=\"(value, key) in orderedForm(idx)\"\n                  :key=\"key\"\n                  v-model=\"value['value']\"\n                  :label=\"key\"\n                  :hint=\"showHint? $gettext(hints[key]): ''\"\n                  :persistent-hint=\"showHint\"\n                  :filled=\"!value['disabled']\"\n                  :type=\"$store.getters.attributeType(key)\"\n                  :placeholder=\"value['placeholder']? $gettext('multiple Values'):''\"\n                  :persistent-placeholder=\" value['placeholder']? true:false \"\n                  :disabled=\"value['disabled']\"\n                  @wheel=\"$event.target.blur()\"\n                >\n                  <template\n                    v-if=\"key==='route_color'\"\n                    v-slot:append\n                  >\n                    <color-picker\n                      v-model=\"value['value']\"\n                    />\n                  </template>\n                  <template\n                    v-if=\"showDeleteOption\"\n                    v-slot:prepend\n                  >\n                    <v-btn\n                      icon\n                      x-small\n                      :disabled=\"attributeNonDeletable(key)\"\n                      color=\"error\"\n                      @click=\"()=>deleteField(key)\"\n                    >\n                      <v-icon>fas fa-trash small</v-icon>\n                    </v-btn>\n                  </template>\n                </v-text-field>\n              </v-list>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-text-field\n              v-model=\"newFieldName\"\n              :label=\" $gettext('add field')\"\n              :placeholder=\"$gettext('new field name')\"\n              filled\n              :rules=\"rules.newField\"\n              @keydown.enter.stop=\"addField\"\n              @wheel=\"$event.target.blur()\"\n            >\n              <template v-slot:append-outer>\n                <v-btn\n                  color=\"primary\"\n                  class=\"text--primary\"\n                  fab\n                  x-small\n                  @click=\"addField\"\n                >\n                  <v-icon>fas fa-plus</v-icon>\n                </v-btn>\n              </template>\n            </v-text-field>\n          </v-row>\n        </v-card-text>\n        <v-card-text v-if=\"['cloneTrip'].includes(action)\">\n          <v-text-field\n            v-model=\"cloneName\"\n            :label=\"$gettext('New name')\"\n          />\n        </v-card-text>\n        <v-divider />\n\n        <v-card-actions>\n          <v-btn\n            v-if=\"editForm\"\n            icon\n            x-small\n            @click=\"()=>showHint = !showHint\"\n          >\n            <v-icon>far fa-question-circle small</v-icon>\n          </v-btn>\n          <v-btn\n            v-if=\"editForm\"\n            icon\n            x-small\n            @click=\"ToggleDeleteOption\"\n          >\n            <v-icon v-if=\"showDeleteOption\">\n              fas fa-minus-circle fa-rotate-90\n            </v-icon>\n            <v-icon v-else>\n              fas fa-minus-circle\n            </v-icon>\n          </v-btn>\n          <v-spacer />\n\n          <v-btn\n            color=\"grey\"\n            text\n            @click=\"cancelAction\"\n          >\n            {{ $gettext(\"Cancel\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"success\"\n            text\n            @click=\"applyAction\"\n          >\n            {{ $gettext(\"Save\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-dialog\n      v-model=\"cloneDialog\"\n      max-width=\"300\"\n      @keydown.enter=\"duplicate()\"\n      @keydown.esc=\"cancelClone\"\n    >\n      <v-card>\n        <v-card-title>\n          <span class=\"text-h5\">{{ $gettext('Duplicate and reverse') }}</span>\n          <span class=\"text-h5\">{{ message +' ?' }}</span>\n        </v-card-title>\n        <v-card-text>\n          <v-text-field\n            v-model=\"cloneName\"\n            :label=\"$gettext('New name')\"\n          />\n        </v-card-text>\n        <v-card-text :style=\"{textAlign: 'center',color:'red'}\">\n          {{ errorMessage }}\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"grey\"\n            text\n            @click=\"cancelClone\"\n          >\n            {{ $gettext(\"Cancel\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"green darken-1\"\n            text\n            @click=\"duplicate()\"\n          >\n            {{ $gettext(\"Save\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <SidePanel\n      :selected-trips=\"selectedTrips\"\n      :selectedr-group=\"selectedrGroup\"\n      @update-tripList=\"updateSelectedTrips\"\n      @confirmChanges=\"confirmChanges\"\n      @abortChanges=\"abortChanges\"\n      @deleteButton=\"deleteButton\"\n      @cloneButton=\"cloneButton\"\n      @propertiesButton=\"actionClick\"\n      @isRoadMode=\"(e) => isRoadMode = e\"\n    />\n    <Map\n      ref=\"mapref\"\n      :selected-trips=\"selectedTrips\"\n      :is-road-mode=\"isRoadMode\"\n      @clickFeature=\"actionClick\"\n    />\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n.map-view {\n  height: calc(100% - 50px);\n  width: 100%;\n  display: flex;\n}\n\n</style>\n","import { render, staticRenderFns } from \"./ColorPicker.vue?vue&type=template&id=380a869c&scoped=true&v-slot%3Aappend=true&\"\nimport script from \"./ColorPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./ColorPicker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"380a869c\",\n  null\n  \n)\n\nexport default component.exports","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=11cc9f12&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=11cc9f12&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=11cc9f12&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=11cc9f12&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11cc9f12\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Import from '@page/Import.vue'\n\nimport auth from '../auth'\nimport Home from '@page/Home.vue'\nimport { store } from '../store/index.js'\nconst Microservices = () => import('@page/Microservices.vue')\nconst ResultMap = () => import('@page/ResultMap.vue')\nconst Run = () => import('@page/Run.vue')\nconst ResultPicture = () => import('@page/ResultPicture.vue')\nconst basePath = process.env.VUE_APP_BASE_PATH\n\nVue.use(Router)\n\n// only used to force to see translation to vue-gettext\nconst $gettext = s => s\n\nconst router = new Router({\n  linkExactActiveClass: 'active',\n  mode: 'history',\n  base: basePath,\n  routes: [\n    {\n      path: '/',\n      name: Import.name,\n      component: Import,\n      icon: 'fa-solid fa-upload',\n      title: $gettext('Import'),\n    },\n    {\n      path: '/Microservices',\n      name: Microservices.name,\n      component: Microservices,\n      icon: 'fas fa-tachometer-alt',\n      title: $gettext('Microservices'),\n      beforeEnter: (to, from, next) => {\n        if (!store.getters.loggedIn) {\n          store.commit('changeNotification',\n            {\n              text: $gettext('Must be logged in'),\n              autoClose: true,\n              color: 'error',\n            })\n        } else {\n          next()\n        }\n      },\n    },\n    {\n      path: '/Home',\n      name: Home.name,\n      component: Home,\n      icon: 'fa-solid fa-map',\n      title: $gettext('Map'),\n    },\n    {\n      path: '/Run',\n      name: Run.name,\n      component: Run,\n      icon: 'fa-solid fa-play',\n      title: $gettext('Parameters and Run'),\n      beforeEnter: (to, from, next) => {\n        if (store.getters.scenario === null) {\n          store.commit('changeNotification',\n            {\n              text: $gettext('A scenario must be loaded to enter this page'),\n              autoClose: true,\n              color: 'error',\n            })\n        } else {\n          next()\n        }\n      },\n    },\n    {\n      path: '/ResultMap',\n      name: ResultMap.name,\n      component: ResultMap,\n      icon: 'fa-solid fa-layer-group',\n      title: $gettext('Results Map'),\n    },\n    {\n      path: '/ResultPicture',\n      name: ResultPicture.name,\n      component: ResultPicture,\n      icon: 'fas fa-images',\n      title: $gettext('Results Pictures'),\n      beforeEnter: (to, from, next) => {\n        if (store.getters.scenario === null) {\n          store.commit('changeNotification',\n            {\n              text: $gettext('A scenario must be loaded to enter this page'),\n              autoClose: true,\n              color: 'error',\n            })\n        } else {\n          next()\n        }\n      },\n    },\n    {\n      path: '/callback',\n      name: 'callback',\n      beforeEnter: (to, from, next) => {\n        const currUrl = window.location.href\n        auth.auth.parseCognitoWebResponse(currUrl)\n        next('/')\n      },\n    },\n    {\n      path: '/signout',\n      name: 'signout',\n      beforeEnter: (to, from, next) => {\n        next('/')\n      },\n    },\n  ],\n})\n\n// router.replace({ 'query.s3Path': null }) // remove query in url when page is load.\n\nrouter.beforeEach((to, from, next) => {\n  if ((!['Import', 'callback', 'signout'].includes(to.name)) &&\n      store.getters.projectIsUndefined) {\n    next({ name: 'Import' })\n  } else next()\n})\n\nexport default router\n","/* eslint-disable array-callback-return */\n/* eslint-disable no-return-assign */\nimport length from '@turf/length'\nimport nearestPointOnLine from '@turf/nearest-point-on-line'\nimport Linestring from 'turf-linestring'\nimport Point from 'turf-point'\n\nconst short = require('short-uuid')\n\nexport default {\n  state: {\n    links: {},\n    editorTrip: null,\n    editorNodes: {},\n    editorLinks: {},\n    editorLineInfo: {},\n    nodes: {},\n    nodesHeader: {},\n    linksHeader: {},\n    tripId: [],\n    selectedTrips: [],\n    newLink: {},\n    newNode: {},\n    changeBounds: true,\n    linkSpeed: 20, // 20KmH for time (speed/distance)\n    linksDefaultColor: '2196F3',\n    lineAttributes: [],\n    nodeAttributes: [],\n    defaultAttributes: [\n      { name: 'index', type: 'String' },\n      { name: 'a', type: 'String' },\n      { name: 'b', type: 'String' },\n      { name: 'trip_id', type: 'String' },\n      { name: 'route_id', type: 'String' },\n      { name: 'agency_id', type: 'String' },\n      { name: 'route_short_name', type: 'String' },\n      { name: 'route_type', type: 'String' },\n      { name: 'route_color', type: 'String' },\n      { name: 'length', type: 'Number' }, // float\n      { name: 'time', type: 'Number' }, // float\n      { name: 'headway', type: 'Number' }, // float\n      { name: 'route_width', type: 'Number' }, // float\n      { name: 'pickup_type', type: 'Number' }, // float\n      { name: 'drop_off_type', type: 'Number' }, // int\n      { name: 'link_sequence', type: 'Number' }, // int\n      { name: 'direction_id', type: 'Number' }, // int\n    ],\n  },\n\n  mutations: {\n    loadLinks (state, payload) {\n      state.links = structuredClone(payload)\n      if (['urn:ogc:def:crs:OGC:1.3:CRS84', 'EPSG:4326'].includes(state.links.crs.properties.name)) {\n        const linksHeader = { ...state.links }\n        linksHeader.features = []\n        state.linksHeader = linksHeader\n\n        state.editorLinks = linksHeader\n        // limit geometry precision to 6 digit\n        state.links.features.forEach(link => link.geometry.coordinates = link.geometry.coordinates.map(\n          points => points.map(coord => Math.round(Number(coord) * 1000000) / 1000000)))\n        this.commit('applyPropertiesTypes')\n        this.commit('getTripId')\n        // set all trips visible\n        this.commit('changeSelectedTrips', state.tripId)\n\n        this.commit('getLinksProperties')\n      } else { alert('invalid CRS. use CRS84 / EPSG:4326') }\n    },\n\n    loadNodes (state, payload) {\n      state.nodes = JSON.parse(JSON.stringify(payload))\n      if (['urn:ogc:def:crs:OGC:1.3:CRS84', 'EPSG:4326'].includes(state.nodes.crs.properties.name)) {\n        const nodesHeader = { ...state.nodes }\n        nodesHeader.features = []\n        state.nodesHeader = nodesHeader\n        state.editorNodes = nodesHeader\n        // limit geometry precision to 6 digit\n        state.nodes.features.forEach(node => node.geometry.coordinates = node.geometry.coordinates.map(\n          coord => Math.round(Number(coord) * 1000000) / 1000000))\n\n        this.commit('getNodesProperties')\n      } else { alert('invalid CRS. use CRS84 / EPSG:4326') }\n    },\n    unloadFiles (state) {\n      // when we reload files (some were already loaded.)\n      state.links.features = []\n      state.nodes.features = []\n      state.editorTrip = null\n      state.tripId = []\n      state.selectedTrips = []\n    },\n    appendNewLinks (state, payload) {\n      // append new links and node to the project (import page)\n      payload.links.features.forEach(link => link.geometry.coordinates = link.geometry.coordinates.map(\n        points => points.map(coord => Math.round(Number(coord) * 1000000) / 1000000)))\n      payload.nodes.features.forEach(node => node.geometry.coordinates = node.geometry.coordinates.map(\n        coord => Math.round(Number(coord) * 1000000) / 1000000))\n\n      // state.links.features.push(...payload.links.features) will crash with large array (stack size limit)\n      payload.links.features.forEach(link => state.links.features.push(link))\n      payload.nodes.features.forEach(node => state.nodes.features.push(node))\n      this.commit('applyPropertiesTypes')\n      this.commit('getLinksProperties')\n      this.commit('getNodesProperties')\n      this.commit('getTripId')\n      this.commit('changeSelectedTrips', state.tripId)\n    },\n\n    getLinksProperties (state) {\n      let header = new Set([])\n      state.links.features.forEach(element => {\n        Object.keys(element.properties).forEach(key => header.add(key))\n      })\n      // header.delete('index')\n      // add all default attributes\n      const defaultAttributes = state.defaultAttributes.map(attr => attr.name)\n      defaultAttributes.forEach(att => header.add(att))\n      header = Array.from(header)\n      state.lineAttributes = header\n    },\n    getNodesProperties (state) {\n      let header = new Set([])\n      state.nodes.features.forEach(element => {\n        Object.keys(element.properties).forEach(key => header.add(key))\n      })\n      // add all default attributes\n      const defaultAttributes = [\n        'index',\n        'stop_code',\n        'stop_name']\n      defaultAttributes.forEach(att => header.add(att))\n      header = Array.from(header)\n      state.nodeAttributes = header\n    },\n\n    addPropertie (state, payload) {\n      // when a new line properties is added (in dataframe page)\n      if (payload.table === 'links') {\n        state.links.features.map(link => link.properties[payload.name] = null)\n        state.editorLinks.features.map(link => link.properties[payload.name] = null)\n        state.lineAttributes.push(payload.name) // could put that at applied. so we can cancel\n      } else {\n        state.nodes.features.map(node => node.properties[payload.name] = null)\n        state.editorNodes.features.map(node => node.properties[payload.name] = null)\n      }\n    },\n    deletePropertie (state, payload) {\n      // when a link property is deleted\n      if (payload.table === 'links') {\n        state.links.features.filter(link => delete link.properties[payload.name])\n        state.editorLinks.features.filter(link => delete link.properties[payload.name])\n        state.lineAttributes = state.lineAttributes.filter(item => item !== payload.name)\n      } else {\n        state.nodes.features.filter(node => delete node.properties[payload.name])\n        state.editorNodes.features.filter(node => delete node.properties[payload.name])\n      }\n    },\n    changeSelectedTrips (state, payload) {\n      // trips list of visible trip_id.\n      state.selectedTrips = payload\n    },\n\n    setEditorTrip (state, payload) {\n      // set Trip Id\n      state.editorTrip = payload.tripId\n      state.changeBounds = payload.changeBounds\n      // set editor links corresponding to trip id\n      // var filtered = {...state.links}\n      const filtered = JSON.parse(JSON.stringify(state.links))\n      filtered.features = filtered.features.filter(link => link.properties.trip_id === state.editorTrip)\n      state.editorLinks = filtered\n      // get the corresponding nodes\n      this.commit('getEditorNodes', { nodes: state.nodes })\n      this.commit('getEditorLineInfo')\n    },\n\n    cloneTrip (state, payload) {\n      // clone and reversed a trip.\n      const cloned = structuredClone(state.links)\n      cloned.features = cloned.features.filter(link => link.properties.trip_id === payload.tripId)\n\n      let linkSequence = cloned.features.length\n      for (const link of cloned.features) {\n        link.properties.trip_id = payload.name\n        // mettre dans l'autre sens » inverser 0 et 1 et leur coordonées\n        link.geometry.coordinates.reverse()//\n        // inverser node a et b (propriétés)\n        link.properties.a = [link.properties.b, link.properties.b = link.properties.a][0]\n        // changer le link-sequence de tous les objets\n        link.properties.link_sequence = linkSequence\n        linkSequence -= 1\n        // changer la direction\n        if (link.properties.direction_id === 0) {\n          link.properties.direction_id = 1\n        } else {\n          link.properties.direction_id = 0\n        }\n        // changer nom de l'index\n        link.properties.index = 'link_' + short.generate()\n      }\n      // inverser l'ordre des features\n      cloned.features.reverse()\n      state.links.features.push(...cloned.features)\n      this.commit('getTripId')\n    },\n    getEditorNodes (state, payload) {\n      // payload contain nodes. state.nodes or state.editorNodes\n      // find the nodes in the editor links\n      const a = state.editorLinks.features.map(item => item.properties.a)\n      const b = state.editorLinks.features.map(item => item.properties.b)\n      const editorNodesList = new Set([...a, ...b])\n      // set nodes corresponding to trip id\n      const filtered = JSON.parse(JSON.stringify(payload.nodes))\n      filtered.features = filtered.features.filter(node => editorNodesList.has(node.properties.index))\n      state.editorNodes = filtered\n    },\n\n    getEditorLineInfo (state) {\n      const form = {}\n      const uneditable = ['index', 'length', 'a', 'b', 'link_sequence']\n      // empty trip, when its a newLine\n      if (state.editorLinks.features.length === 0) {\n        const defaultValue = {\n          route_id: 'Q1',\n          agency_id: 'QUENEDI',\n          route_short_name: 'Q1',\n          route_type: 'quenedi',\n          route_color: state.linksDefaultColor,\n          route_width: 3,\n          headway: 600,\n          pickup_type: 0,\n          drop_off_type: 0,\n          direction_id: 0,\n        }\n\n        state.lineAttributes.forEach(key => {\n          form[key] = {\n            value: defaultValue[key],\n            disabled: uneditable.includes(key),\n            placeholder: false,\n          }\n        })\n\n        form.trip_id = { value: state.editorTrip, disabled: false, placeholder: false }\n      } else {\n        const features = state.editorLinks.features\n\n        state.lineAttributes.forEach(key => {\n          const val = new Set(features.map(link => link.properties[key]))\n          form[key] = {\n            value: val.size > 1 ? '' : [...val][0],\n            disabled: uneditable.includes(key),\n            placeholder: val.size > 1,\n          }\n        })\n      }\n      state.editorLineInfo = form\n    },\n\n    getTripId (state) {\n      state.tripId = Array.from(new Set(state.links.features.map(item => item.properties.trip_id)))\n    },\n\n    setNewLink (state, payload) {\n      // copy editor links geoJSON, only take first (or last) link.\n      // delete some properties like id and index.\n      const uncopiedPropeties = {\n        index: null,\n        length: null,\n        time: null,\n        pickup_type: 0,\n        drop_off_type: 0,\n      }\n      // create link\n      const tempLink = structuredClone(state.editorLinks)\n      // if there is no link to copy, create one. (new Line)\n      if (tempLink.features.length === 0) {\n        // copy Line properties.\n        const linkProperties = {}\n        Object.keys(state.editorLineInfo).forEach((key) => {\n          linkProperties[key] = state.editorLineInfo[key].value\n        })\n        // set default links values\n        const defaultValue = {\n          index: 'link_' + short.generate(),\n          a: state.editorNodes.features[0].properties.index,\n          b: state.editorNodes.features[0].properties.index,\n          length: null,\n          time: null,\n          pickup_type: 0,\n          drop_off_type: 0,\n          link_sequence: 0,\n        }\n        Object.keys(defaultValue).forEach((key) => {\n          linkProperties[key] = defaultValue[key]\n        })\n\n        const linkGeometry = {\n          coordinates: [state.editorNodes.features[0].geometry.coordinates,\n            state.editorNodes.features[0].geometry.coordinates],\n          type: 'LineString',\n        }\n        const linkFeature = { geometry: linkGeometry, properties: linkProperties, type: 'Feature' }\n        tempLink.features = [linkFeature]\n      }\n\n      if (payload.action === 'Extend Line Upward') {\n        // Take last link and copy properties\n        // eslint-disable-next-line no-var\n        var features = tempLink.features[tempLink.features.length - 1]\n        Object.assign(features.properties, uncopiedPropeties)\n        // sequence +1\n        features.properties.link_sequence = features.properties.link_sequence + 1\n        // replace node a by b and delete node a\n        features.properties.a = features.properties.b\n        features.geometry.coordinates[0] = features.geometry.coordinates.slice(-1)[0]\n        // new node index (hash)\n        payload.nodeCopyId = features.properties.a\n        this.commit('setNewNode', payload)\n\n        features.properties.b = state.newNode.features[0].properties.index\n        features.properties.index = 'link_' + short.generate()\n      } else if (payload.action === 'Extend Line Downward') {\n        // Take first link and copy properties\n        // eslint-disable-next-line no-var, no-redeclare\n        var features = tempLink.features[0]\n        Object.assign(features.properties, uncopiedPropeties)\n        // sequence + 1\n        features.properties.link_sequence = features.properties.link_sequence - 1\n        //  replace node b by a and delete node b\n        features.properties.b = features.properties.a\n        features.geometry.coordinates[1] = features.geometry.coordinates[0]\n        // new node index (hash)\n        payload.nodeCopyId = features.properties.b\n        this.commit('setNewNode', payload)\n        features.properties.a = state.newNode.features[0].properties.index\n        features.properties.index = 'link_' + short.generate()\n      }\n      tempLink.features = [features]\n      state.newLink = tempLink\n      state.newLink.action = payload.action\n    },\n    createNewNode (state, payload) {\n      const nodeProperties = {}\n      state.nodeAttributes.forEach(key => {\n        nodeProperties[key] = null\n      })\n      nodeProperties.index = 'node_' + short.generate()\n      const nodeGeometry = {\n        coordinates: payload,\n        type: 'Point',\n      }\n      // Copy specified nodenewNode\n      const nodeFeatures = { geometry: nodeGeometry, properties: nodeProperties, type: 'Feature' }\n      state.editorNodes.features = [nodeFeatures]\n    },\n\n    setNewNode (state, payload) {\n      const { coordinates = [null, null] } = payload\n      const uncopiedPropeties = {}\n      state.nodeAttributes.forEach(key => {\n        uncopiedPropeties[key] = null\n      })\n      // Copy specified node\n      const tempNode = JSON.parse(JSON.stringify(state.editorNodes))\n      const features = tempNode.features.filter(node => node.properties.index === payload.nodeCopyId)[0]\n      Object.assign(features.properties, uncopiedPropeties)\n      features.properties.index = 'node_' + short.generate()\n      features.geometry.coordinates = coordinates\n      tempNode.features = [features]\n      state.newNode = tempNode\n    },\n\n    editNewLink (state, payload) {\n      // for realtime viz. this method change the linestring to the payload (mouse position)\n      // for some reason, it doesnt work when i only apply payload to coordinates[1]\n      state.newNode.features[0].geometry.coordinates = payload\n      if (state.newLink.action === 'Extend Line Upward') {\n        state.newLink.features[0].geometry.coordinates = [state.newLink.features[0].geometry.coordinates[0], payload]\n      } else {\n        state.newLink.features[0].geometry.coordinates = [payload, state.newLink.features[0].geometry.coordinates[1]]\n      }\n    },\n\n    applyNewLink (state, payload) {\n      // nodeId: this.selectedNodeId, geom: pointGeom, action: Extend Line Upward\n      // get linestring length in km\n      this.commit('setNewLink', { action: payload.action })\n      this.commit('editNewLink', payload.geom)\n\n      const distance = length(state.newLink)\n      state.newLink.features[0].properties.length = Number((distance * 1000).toFixed(0)) // metres\n      const time = distance / state.linkSpeed * 3600 // 20kmh hard code speed. time in secs\n\n      state.newLink.features[0].properties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n\n      const action = state.newLink.action\n      if (action === 'Extend Line Upward') {\n        state.editorLinks.features.push(state.newLink.features[0])\n        state.editorNodes.features.push(state.newNode.features[0])\n      } else if (action === 'Extend Line Downward') {\n        state.editorLinks.features.splice(0, 0, state.newLink.features[0])\n        state.editorNodes.features.splice(0, 0, state.newNode.features[0])\n        state.editorLinks.features.forEach(link => link.properties.link_sequence += 1)\n      }\n    },\n\n    deleteNode (state, payload) {\n      const nodeIndex = payload.selectedNode.index\n      // remove node\n      state.editorNodes.features = state.editorNodes.features.filter(node => node.properties.index !== nodeIndex)\n      // changing link1 change editorLinks as it is an observer.\n      const link1 = state.editorLinks.features.filter(link => link.properties.b === nodeIndex)[0] // link is extented\n      const link2 = state.editorLinks.features.filter(link => link.properties.a === nodeIndex)[0] // link is deleted\n      // if the last or first node is selected, there is only one link. The node and the link are deleted.\n      if (!link1) {\n        state.editorLinks.features = state.editorLinks.features.filter(\n          link => link.properties.index !== link2.properties.index)\n        // a link was remove, link_sequence -1\n        state.editorLinks.features.forEach(link => link.properties.link_sequence -= 1)\n      } else if (!link2) {\n        state.editorLinks.features = state.editorLinks.features.filter(\n          link => link.properties.index !== link1.properties.index)\n        // the node is inbetween 2 links. 1 link is deleted, and the other is extented.\n      } else {\n        link1.geometry.coordinates = [\n          ...link1.geometry.coordinates.slice(0, -1),\n          ...link2.geometry.coordinates.slice(1)]\n        link1.properties.b = link2.properties.b\n        link1.properties.length = Number(link1.properties.length) + Number(link2.properties.length)\n        link1.properties.time = Number(link1.properties.time) + Number(link2.properties.time)\n        // find removed link index. drop everylinks link_sequence after by 1\n        const featureIndex = state.editorLinks.features.findIndex(\n          link => link.properties.index === link2.properties.index)\n        state.editorLinks.features.slice(featureIndex).forEach(\n          link => link.properties.link_sequence -= 1)\n        // delete link2\n        state.editorLinks.features = state.editorLinks.features.filter(\n          link => link.properties.index !== link2.properties.index)\n      }\n    },\n\n    splitLink (state, payload) {\n      const linkIndex = payload.selectedLink.index\n      const featureIndex = state.editorLinks.features.findIndex(link => link.properties.index === linkIndex)\n      // changing link1 change editorLinks as it is an observer.\n      const link1 = state.editorLinks.features[featureIndex] // this link is extented\n      const link2 = structuredClone(link1)\n      // distance du point (entre 0 et 1) sur le lien original\n      const ratio = payload.offset\n\n      link1.properties.b = state.newNode.features[0].properties.index\n      link1.geometry.coordinates = [\n        ...link1.geometry.coordinates.slice(0, payload.sliceIndex),\n        state.newNode.features[0].geometry.coordinates,\n      ]\n\n      link1.properties.index = 'link_' + short.generate() // link1.properties.index+ '-1'\n      link1.properties.length = link1.properties.length * ratio\n      link1.properties.time = link1.properties.time * ratio\n\n      link2.properties.a = state.newNode.features[0].properties.index\n      link2.geometry.coordinates = [\n        state.newNode.features[0].geometry.coordinates,\n        ...link2.geometry.coordinates.slice(payload.sliceIndex),\n      ]\n      link2.properties.index = 'link_' + short.generate() // link2.properties.index+ '-2'\n      link2.properties.length = link2.properties.length * (1 - ratio)\n      link2.properties.time = link2.properties.time * (1 - ratio)\n\n      state.editorLinks.features.splice(featureIndex + 1, 0, link2)\n      state.editorNodes.features.push(state.newNode.features[0])\n\n      // add +1 to every link sequence afer link1\n      const seq = link1.properties.link_sequence\n      // everything after link1 except link2\n      state.editorLinks.features.filter(link => link.properties.link_sequence > seq).forEach(\n        link => link.properties.link_sequence += 1)\n      // add link2 sequence after.\n      link2.properties.link_sequence += 1\n    },\n\n    addNodeInline (state, payload) {\n      // payload contain selectedLink and event.lngLat (clicked point)\n      let linkGeom = state.editorLinks.features.filter((link) => link.properties.index === payload.selectedLink.index)\n      const nodeCopyId = linkGeom[0].properties.a\n      linkGeom = Linestring(linkGeom[0].geometry.coordinates)\n      const clickedPoint = Point(Object.values(payload.lngLat))\n      const snapped = nearestPointOnLine(linkGeom, clickedPoint, { units: 'kilometers' })\n      const dist = length(linkGeom, { units: 'kilometers' }) // dist\n      // for multiString, gives the index of the closest one, add +1 for the slice.\n      const sliceIndex = snapped.properties.index + 1\n      const offset = snapped.properties.location / dist\n      if (payload.nodes === 'editorNodes') {\n        this.commit('setNewNode', { coordinates: snapped.geometry.coordinates, nodeCopyId: nodeCopyId })\n        this.commit('splitLink', { selectedLink: payload.selectedLink, offset: offset, sliceIndex: sliceIndex })\n      // Anchor Nodes\n      } else {\n        this.commit('addAnchorNode', {\n          selectedLink: payload.selectedLink,\n          coordinates: snapped.geometry.coordinates,\n          sliceIndex: sliceIndex,\n        })\n      }\n\n      // this.commit('setNewNode', null) // init new node to null\n    },\n    addAnchorNode (state, payload) {\n      const linkIndex = payload.selectedLink.index\n      const featureIndex = state.editorLinks.features.findIndex(link => link.properties.index === linkIndex)\n      // changing link change editorLinks as it is an observer.\n      const link = state.editorLinks.features[featureIndex]\n      link.geometry.coordinates.splice(payload.sliceIndex, 0, payload.coordinates)\n    },\n    deleteAnchorNode (state, payload) {\n      const linkIndex = payload.selectedNode.linkIndex\n      const coordinatedIndex = payload.selectedNode.coordinatedIndex\n      const link = state.editorLinks.features.filter(feature => feature.properties.index === linkIndex)[0]\n      link.geometry.coordinates = [...link.geometry.coordinates.slice(0, coordinatedIndex),\n        ...link.geometry.coordinates.slice(coordinatedIndex + 1)]\n    },\n    moveAnchor (state, payload) {\n      const linkIndex = payload.selectedNode.properties.linkIndex\n      const coordinatedIndex = payload.selectedNode.properties.coordinatedIndex\n      const link = state.editorLinks.features.filter(feature => feature.properties.index === linkIndex)[0]\n      link.geometry.coordinates = [...link.geometry.coordinates.slice(0, coordinatedIndex),\n        payload.lngLat,\n        ...link.geometry.coordinates.slice(coordinatedIndex + 1)]\n\n      // update time and distance\n      const distance = length(link)\n      link.properties.length = Number((distance * 1000).toFixed(0)) // metres\n      const time = distance / state.linkSpeed * 3600 // 20kmh hard code speed. time in secs\n      link.properties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n    },\n\n    moveNode (state, payload) {\n      const nodeIndex = payload.selectedNode.properties.index\n      // remove node\n      const newNode = state.editorNodes.features.filter(node => node.properties.index === nodeIndex)[0]\n      newNode.geometry.coordinates = payload.lngLat\n\n      // changing links\n      const link1 = state.editorLinks.features.filter(link => link.properties.b === nodeIndex)[0]\n      const link2 = state.editorLinks.features.filter(link => link.properties.a === nodeIndex)[0]\n      // update links geometry. check if exist first (if we take the first|last node there is only 1 link)\n      if (link1) {\n        // note: props are unchanged. even tho the length change, the time and length are unchanged.\n        link1.geometry.coordinates = [...link1.geometry.coordinates.slice(0, -1), payload.lngLat]\n        // update time and distance\n        const distance = length(link1)\n        link1.properties.length = Number((distance * 1000).toFixed(0)) // metres\n        const time = distance / state.linkSpeed * 3600 // 20kmh hard code speed. time in secs\n        link1.properties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n      }\n      if (link2) {\n        link2.geometry.coordinates = [payload.lngLat, ...link2.geometry.coordinates.slice(1)]\n        // update time and distance\n        const distance = length(link2)\n        link2.properties.length = Number((distance * 1000).toFixed(0)) // metres\n        const time = distance / state.linkSpeed * 3600 // 20kmh hard code speed. time in secs\n        link2.properties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n      }\n    },\n\n    cutLineFromNode (state, payload) {\n      // Filter links from selected line\n      const nodeId = payload.selectedNode.index\n      state.editorLinks.features.sort((a, b) => a.properties.link_sequence - b.properties.link_sequence)\n\n      let toDelete = []\n      for (const [i, link] of state.editorLinks.features.entries()) {\n        if (link.properties.b === nodeId) {\n          toDelete = state.editorLinks.features.slice(i + 1)\n          break\n        }\n      }\n      // Delete links\n      state.editorLinks.features = state.editorLinks.features.filter(item => !toDelete.includes(item))\n      this.commit('getEditorNodes', { nodes: state.editorNodes })\n    },\n\n    cutLineAtNode (state, payload) {\n      // Filter links from selected line\n      const nodeId = payload.selectedNode.index\n      state.editorLinks.features.sort((a, b) => a.properties.link_sequence - b.properties.link_sequence)\n\n      let toDelete = []\n      for (const [i, link] of state.editorLinks.features.entries()) {\n        if (link.properties.a === nodeId) {\n          toDelete = state.editorLinks.features.slice(0, i)\n          break\n        }\n      }\n      // Delete links\n      state.editorLinks.features = state.editorLinks.features.filter(item => !toDelete.includes(item))\n      this.commit('getEditorNodes', { nodes: state.editorNodes })\n    },\n\n    editLineInfo (state, payload) {\n      state.editorLineInfo = payload\n      // get only keys that are not unmodified multipled Values (value=='' and placeholder==true)\n      const props = Object.keys(payload).filter(key =>\n        ((payload[key].value !== '') || !payload[key].placeholder) && (!payload[key].disabled))\n      // add new line info to each links of each trips.\n      state.editorLinks.features.forEach(\n        (features) => props.forEach((key) => features.properties[key] = payload[key].value))\n    },\n\n    editLinkInfo (state, payload) {\n      // get selected link in editorLinks and modify the changes attributes.\n      const { selectedLinkId, info } = payload\n      const props = Object.keys(info)\n      state.editorLinks.features.filter(\n        function (link) {\n          if (link.properties.index === selectedLinkId) {\n            props.forEach((key) => link.properties[key] = info[key].value)\n          }\n        },\n      )\n      this.commit('getEditorLineInfo')\n    },\n\n    editNodeInfo (state, payload) {\n      // get selected node in editorNodes and modify the changes attributes.\n      const { selectedNodeId, info } = payload\n      const props = Object.keys(info)\n      state.editorNodes.features.filter(\n        // eslint-disable-next-line array-callback-return\n        function (node) {\n          if (node.properties.index === selectedNodeId) {\n            props.forEach((key) => node.properties[key] = info[key].value)\n          }\n        },\n      )\n    },\n\n    editGroupInfo (state, payload) {\n      // edit line info on multiple trips at once.\n      const editorGroupInfo = payload.info\n      const groupTripIds = payload.groupTripIds\n      // get only keys that are not unmodified multipled Values (value=='' and placeholder==true)\n      const props = Object.keys(editorGroupInfo).filter(key =>\n        ((editorGroupInfo[key].value !== '') || !editorGroupInfo[key].placeholder))\n      // add new line info to each links of each trips.\n      const tempLinks = state.links.features.filter(link => groupTripIds.includes(link.properties.trip_id))\n      tempLinks.forEach(\n        (features) => props.forEach((key) => features.properties[key] = editorGroupInfo[key].value))\n      // get tripId list\n      this.commit('getTripId')\n    },\n    deleteUnusedNodes (state) {\n      // delete every every nodes not in links\n      const a = state.links.features.map(item => item.properties.a)\n      const b = state.links.features.map(item => item.properties.b)\n      const nodesInLinks = new Set([...a, ...b])\n      state.nodes.features = state.nodes.features.filter(node => nodesInLinks.has(node.properties.index))\n    },\n\n    confirmChanges (state) { // apply change to Links\n      const filtered = { ...state.links }\n\n      filtered.features = filtered.features.filter(link => link.properties.trip_id === state.editorTrip)\n      const toDelete = filtered.features.filter(item => !state.editorLinks.features.includes(item))\n      // find index of soon to be deleted links\n      if (state.tripId.includes(state.editorTrip)) {\n        // eslint-disable-next-line no-var\n        var index = state.links.features.findIndex(link => link.properties.trip_id === state.editorTrip)\n      } else {\n        // eslint-disable-next-line no-var, no-redeclare\n        var index = 0\n      }\n      // delete links that were edited.\n      state.links.features = state.links.features.filter(item => !toDelete.includes(item))\n      // add edited links to links.\n\n      state.links.features.splice(index, 0, ...state.editorLinks.features)\n      // all new nodes.\n      const nodesList = state.nodes.features.map(item => item.properties.index)\n      const newNodes = { ...state.editorNodes }\n      newNodes.features = newNodes.features.filter(node => !nodesList.includes(node.properties.index))\n      state.nodes.features.push(...newNodes.features)\n\n      // for each editor nodes, apply new properties.\n      state.nodes.features.filter(\n        function (node) {\n          state.editorNodes.features.forEach(\n            function (eNode) {\n              if (node.properties.index === eNode.properties.index) {\n                node.properties = eNode.properties\n                node.geometry = eNode.geometry\n              }\n            })\n        })\n\n      // delete every every nodes not in links\n      this.commit('deleteUnusedNodes')\n\n      // For every Links containing an editor Nodes. update Geometry.\n      // (this is necessary when we move a node that is share between multiplde lines)\n      // get a list of all links (excluding editorLinks) that contain the selected node\n      const editorNodesList = new Set(state.editorNodes.features.map(item => item.properties.index))\n      // get list of link with a node A modifieed\n      const linksA = state.links.features.filter(\n        link => link.properties.trip_id !== state.editorTrip).filter(\n        item => editorNodesList.has(item.properties.a))\n      // apply new node geometry\n      linksA.forEach(link => link.geometry.coordinates = [\n        state.editorNodes.features.filter(node => node.properties.index === link.properties.a)[0].geometry.coordinates,\n        ...link.geometry.coordinates.slice(1),\n      ])\n      // same for nodes b\n      const linksB = state.links.features.filter(\n        link => link.properties.trip_id !== state.editorTrip).filter(\n        item => editorNodesList.has(item.properties.b))\n      linksB.forEach(link => link.geometry.coordinates = [\n        ...link.geometry.coordinates.slice(0, -1),\n        state.editorNodes.features.filter(node => node.properties.index === link.properties.b)[0].geometry.coordinates,\n      ])\n\n      state.newLink = {}\n      state.newNode = {}\n\n      // get tripId list\n      this.commit('getTripId')\n      this.commit('getLinksProperties')\n    },\n\n    deleteTrip (state, payload) {\n      // payload = a single trip_id or a list or trips_id\n      // if its a list : delete all of them. else: delete single trip\n      if (typeof payload === 'object') {\n        state.links.features = state.links.features.filter(link => !payload.includes(link.properties.trip_id))\n      } else {\n        state.links.features = state.links.features.filter(link => link.properties.trip_id !== payload)\n      }\n      // delete every every nodes not in links\n      this.commit('deleteUnusedNodes')\n      // get tripId list\n      this.commit('getTripId')\n    },\n    applyPropertiesTypes (state) {\n      state.defaultAttributes.forEach(attr => {\n        if (attr.type === 'String') {\n          state.links.features.forEach(link => link.properties[attr.name] = String(link.properties[attr.name]))\n        } else if (attr.type === 'Number') {\n          state.links.features.forEach(link => link.properties[attr.name] = Number(link.properties[attr.name]))\n        }\n      })\n    },\n  },\n\n  getters: {\n    links: (state) => state.links,\n    nodes: (state) => state.nodes,\n    linkSpeed: (state) => state.linkSpeed,\n    linksIsEmpty: (state) => state.links.features.length === 0,\n    route_id: (state) => state.route_id,\n    editorTrip: (state) => state.editorTrip,\n    editorLinks: (state) => state.editorLinks,\n    editorNodes: (state) => state.editorNodes,\n    tripId: (state) => state.tripId,\n    selectedTrips: (state) => state.selectedTrips,\n    editorLineInfo: (state) => state.editorLineInfo,\n    newLink: (state) => state.newLink,\n    newNode: (state) => state.newNode,\n    firstNodeId: (state) => state.editorNodes.features.length > 1\n      ? state.editorLinks.features[0].properties.a\n      : state.editorNodes.features[0].properties.index,\n    lastNodeId: (state) => state.editorNodes.features.length > 1\n      ? state.editorLinks.features.slice(-1)[0].properties.b\n      : state.editorNodes.features[0].properties.index,\n    firstNode: (state, getters) => state.editorTrip\n      ? state.editorNodes.features.filter(\n        (node) => node.properties.index === getters.firstNodeId)[0]\n      : null,\n    lastNode: (state, getters) => state.editorTrip\n      ? state.editorNodes.features.filter(\n        (node) => node.properties.index === getters.lastNodeId)[0]\n      : null,\n    lineAttributes: (state) => state.lineAttributes.sort(),\n    nodeAttributes: (state) => state.nodeAttributes,\n    changeBounds: (state) => state.changeBounds,\n    nodesHeader: (state) => state.nodesHeader,\n    linksHeader: (state) => state.linksHeader,\n    anchorNodes: (state) => {\n      const nodes = structuredClone(state.nodesHeader)\n      state.editorLinks.features.filter(link => link.geometry.coordinates.length > 2).forEach(\n        feature => {\n          const linkIndex = feature.properties.index\n          feature.geometry.coordinates.slice(1, -1).forEach(\n            (point, idx) => nodes.features.push({\n              properties: { index: short.generate(), linkIndex: linkIndex, coordinatedIndex: idx + 1 },\n              geometry: { coordinates: point, type: 'Point' },\n            }),\n          )\n        },\n      )\n\n      return nodes\n    },\n    // this return the attribute type, of undefined.\n    attributeType: (state) => (name) => state.defaultAttributes.filter(attr => attr.name === name)[0]?.type,\n    defaultAttributesNames: (state) => state.defaultAttributes.map(attr => attr.name),\n  },\n}\n","/* eslint-disable no-case-declarations */\n/* eslint-disable array-callback-return */\n/* eslint-disable no-return-assign */\nimport length from '@turf/length'\nimport nearestPointOnLine from '@turf/nearest-point-on-line'\nimport Linestring from 'turf-linestring'\nimport Point from 'turf-point'\nimport bearing from '@turf/bearing'\n\nconst short = require('short-uuid')\n\nexport default {\n  state: {\n    rlinks: {},\n    rnodes: {},\n    rlinksHeader: {},\n    rnodesHeader: {},\n    selectedrFilter: '',\n    selectedrGroup: [],\n    filteredrCategory: [],\n    rlineAttributes: [],\n    rnodeAttributes: [],\n    newrNode: {},\n    visiblerLinks: {},\n    visiblerNodes: {},\n    connectedLinks: [],\n    defaultHighway: 'quenedi',\n    roadSpeed: 20,\n    rlinksDefaultColor: '2196F3',\n    cstAttributes: ['a', 'b', 'index', 'length', 'route_color', 'oneway', 'route_width', 'highway'],\n    rundeletable: ['index', 'a', 'b', 'length', 'route_color', 'oneway', 'time', 'speed', 'time_r', 'speed_r'],\n    reversedAttributes: [],\n  },\n\n  mutations: {\n    loadrLinks (state, payload) {\n      state.rlinks = structuredClone(payload)\n      if (['urn:ogc:def:crs:OGC:1.3:CRS84', 'EPSG:4326'].includes(state.rlinks.crs.properties.name)) {\n        const rlinksHeader = { ...state.rlinks }\n        rlinksHeader.features = []\n        state.rlinksHeader = rlinksHeader\n        state.visiblerLinks = structuredClone(rlinksHeader)\n        // limit geometry precision to 6 digit\n        state.rlinks.features.forEach(link => link.geometry.coordinates = link.geometry.coordinates.map(\n          points => points.map(coord => Math.round(Number(coord) * 1000000) / 1000000)))\n        this.commit('getrLinksProperties')\n        this.commit('splitOneway')\n        // set all trips visible\n      } else { alert('invalid CRS. use CRS84 / EPSG:4326') }\n    },\n\n    loadrNodes (state, payload) {\n      state.rnodes = JSON.parse(JSON.stringify(payload))\n      if (['urn:ogc:def:crs:OGC:1.3:CRS84', 'EPSG:4326'].includes(state.rnodes.crs.properties.name)) {\n        const rnodesHeader = { ...state.rnodes }\n        rnodesHeader.features = []\n        state.rnodesHeader = rnodesHeader\n        state.visiblerNodes = structuredClone(rnodesHeader)\n        // limit geometry precision to 6 digit\n        state.rnodes.features.forEach(node => node.geometry.coordinates = node.geometry.coordinates.map(\n          coord => Math.round(Number(coord) * 1000000) / 1000000))\n\n        this.commit('getrNodesProperties')\n      } else { alert('invalid CRS. use CRS84 / EPSG:4326') }\n    },\n\n    appendNewrLinks (state, payload) {\n      // append new links and node to the project (import page)\n      payload.rlinks.features.forEach(link => link.geometry.coordinates = link.geometry.coordinates.map(\n        points => points.map(coord => Math.round(Number(coord) * 1000000) / 1000000)))\n      payload.rnodes.features.forEach(node => node.geometry.coordinates = node.geometry.coordinates.map(\n        coord => Math.round(Number(coord) * 1000000) / 1000000))\n\n      // state.rlinks.features.push(...payload.rlinks.features) will crash with large array (stack size limit)\n      payload.rlinks.features.forEach(link => state.rlinks.features.push(link))\n      payload.rnodes.features.forEach(node => state.rnodes.features.push(node))\n      this.commit('getrLinksProperties')\n      this.commit('splitOneway')\n      this.commit('getrNodesProperties')\n      this.commit('getFilteredrCat')\n      // state.selectedrGroup = Array.from(new Set(state.rlinks.features.map(\n      //  item => item.properties[this.selectedrFilter])))\n      // state.visiblerLinks = state.rlinks\n      // state.visiblerNodes = state.rnodes\n    },\n    unloadrFiles (state) {\n      // when we reload files (some were already loaded.)\n      state.rlinks.features = []\n      state.rnodes.features = []\n      state.visiblerLinks.features = []\n      state.visiblerNodes.features = []\n      state.selectedrGroup = []\n    },\n    getrLinksProperties (state) {\n      let header = new Set([])\n      state.rlinks.features.forEach(element => {\n        Object.keys(element.properties).forEach(key => { if (!key.endsWith('_r')) header.add(key) })\n      })\n      // header.delete('index')\n      // add all default attributes\n      const defaultAttributes = [\n        'index', 'a', 'b', 'route_color']\n      defaultAttributes.forEach(att => header.add(att))\n      header = Array.from(header)\n      state.rlineAttributes = header\n      if (header.includes('highway')) {\n        state.selectedrFilter = 'highway'\n      } else {\n        state.selectedrFilter = header[0]\n      }\n    },\n    getrNodesProperties (state) {\n      let header = new Set([])\n      state.rnodes.features.forEach(element => {\n        Object.keys(element.properties).forEach(key => header.add(key))\n      })\n      // add all default attributes\n      const defaultAttributes = ['index']\n      defaultAttributes.forEach(att => header.add(att))\n      header = Array.from(header)\n      state.rnodeAttributes = header\n    },\n    addRoadPropertie (state, payload) {\n      // when a new line properties is added (in dataframe page)\n      if (payload.table === 'rlinks') {\n        state.rlinks.features.map(link => link.properties[payload.name] = null)\n        state.visiblerLinks.features.map(link => link.properties[payload.name] = null)\n        state.rlineAttributes.push(payload.name) // could put that at applied. so we can cancel\n        // add reverse attribute if its not one we dont want to duplicated (ex: route_width)\n        if (!state.cstAttributes.includes(payload.name)) {\n          state.reversedAttributes.push(payload.name + '_r')\n        }\n      } else {\n        state.rnodes.features.map(node => node.properties[payload.name] = null)\n        state.visiblerNodes.features.map(node => node.properties[payload.name] = null)\n      }\n    },\n    deleteRoadPropertie (state, payload) {\n      if (payload.table === 'rlinks') {\n        state.rlinks.features.filter(link => delete link.properties[payload.name])\n        state.rlinks.features.filter(link => delete link.properties[payload.name + '_r'])\n        state.visiblerLinks.features.filter(link => delete link.properties[payload.name])\n        state.visiblerLinks.features.filter(link => delete link.properties[payload.name + '_r'])\n\n        state.rlineAttributes = state.rlineAttributes.filter(item => item !== payload.name)\n        state.reversedAttributes = state.reversedAttributes.filter(item => item !== payload.name + '_r')\n      } else {\n        state.rnodes.features.filter(node => delete node.properties[payload.name])\n        state.visiblerNodes.features.filter(node => delete node.properties[payload.name])\n      }\n    },\n\n    changeSelectedrFilter (state, payload) {\n      state.selectedrFilter = payload\n      this.commit('getFilteredrCat')\n    },\n    getFilteredrCat (state) {\n      // for a given filter (key) get array of unique value\n      // e.g. get ['bus','subway'] for route_type\n      const val = Array.from(new Set(state.rlinks.features.map(\n        item => item.properties[state.selectedrFilter])))\n      state.filteredrCategory = val\n    },\n    splitOneway (state) {\n      if (state.rlineAttributes.includes('oneway')) {\n        state.rlinks.features.forEach(link => {\n          if ([true, 'true', '1', 1].includes(link.properties.oneway)) {\n            link.properties.oneway = '1'\n          } else {\n            link.properties.oneway = '0'\n          }\n        })\n        // const oneways = state.rlinks.features.filter(link => !link.properties.oneway)\n        state.reversedAttributes = state.rlineAttributes.filter(\n          attr => !state.cstAttributes.includes(attr)).map(\n          attr => attr + '_r')\n        state.rlinks.features.forEach(link => {\n          if (link.properties.oneway === '0') {\n            state.reversedAttributes.forEach(attr => {\n              if (!link.properties[attr]) link.properties[attr] = link.properties[attr.slice(0, -2)]\n            })\n          }\n        },\n        )\n      }\n    },\n\n    changeVisibleRoads (state, payload) {\n      // trips list of visible trip_id.\n      const method = payload.method\n      const data = payload.data\n      const cat = payload.category\n      state.selectedrFilter = cat\n      let tempLinks = null\n      switch (method) {\n        case 'showAll':\n          state.selectedrGroup = data\n          // need to slice. so it doest change if we append to rlinks.\n          state.visiblerLinks.features = state.rlinks.features.slice()\n          break\n        case 'hideAll':\n          state.selectedrGroup = data\n          state.visiblerLinks.features = []\n          break\n        case 'add':\n          if (!state.selectedrGroup.includes(data[0])) {\n            state.selectedrGroup.push(data[0])\n          }\n          tempLinks = state.rlinks.features.filter(\n            link => link.properties[cat] === data[0])\n          state.visiblerLinks.features.push(...tempLinks)\n          break\n        case 'remove':\n          state.selectedrGroup = state.selectedrGroup.filter(el => el !== data[0])\n          tempLinks = new Set(state.visiblerLinks.features.filter(\n            link => link.properties[cat] === data[0]))\n          state.visiblerLinks.features = state.visiblerLinks.features.filter(link => !tempLinks.has(link))\n          break\n      }\n      this.commit('getVisiblerNodes', { method: method })\n    },\n\n    refreshVisibleRoads (state) {\n      const group = new Set(state.selectedrGroup)\n      const cat = state.selectedrFilter\n      state.visiblerLinks.features = state.rlinks.features.filter(link => group.has(link.properties[cat]))\n      this.commit('getVisiblerNodes', { method: 'add' })\n      // when we rename a group (highway => test), are rename many group.\n      // remove nonexistant group in the selected group.\n      const possibleGroups = new Set(state.visiblerLinks.features.map(\n        item => item.properties[cat]))\n      state.selectedrGroup = [...possibleGroups].filter(x => group.has(x))\n    },\n    getVisiblerNodes (state, payload) {\n      // payload contain nodes. state.nodes or state.editorNodes\n      // find the nodes in the editor links\n      let a = []\n      let b = []\n      let rNodesList = []\n      switch (payload.method) {\n        case 'showAll':\n          state.visiblerNodes.features = state.rnodes.features\n          break\n        case 'hideAll':\n          state.visiblerNodes.features = []\n          break\n        case 'add':\n          // cannot simply remove the nodes from the deleted links. they can be used by others visibles links\n          a = state.visiblerLinks.features.map(item => item.properties.a)\n          b = state.visiblerLinks.features.map(item => item.properties.b)\n          rNodesList = new Set([...a, ...b])\n          // use rnodes as they are new to visiblerNodes\n          state.visiblerNodes.features = state.rnodes.features.filter(\n            node => rNodesList.has(node.properties.index))\n          break\n        case 'remove' :\n          // cannot simply remove the nodes from the deleted links. they can be used by others visibles links\n          a = state.visiblerLinks.features.map(item => item.properties.a)\n          b = state.visiblerLinks.features.map(item => item.properties.b)\n          rNodesList = new Set([...a, ...b])\n          // use visibleRnodes, as they are already inside of it.\n          state.visiblerNodes.features = state.visiblerNodes.features.filter(\n            node => rNodesList.has(node.properties.index))\n          break\n        // case 'refresh'\n      }\n    },\n\n    editrLinkInfo (state, payload) {\n      // get selected link in editorLinks and modify the changes attributes.\n      const { selectedLinkId, info } = payload\n      for (let i = 0; i < selectedLinkId.length; i++) {\n        const props = Object.keys(info[i])\n        const link = state.visiblerLinks.features.filter((link) => link.properties.index === selectedLinkId[i])[0]\n        // if we change a one way to a 2 way, copy one way properties to the reverse one.\n        if ((info[i].oneway?.value !== link.properties.oneway) && (info[i].oneway?.value === '0')) {\n          state.reversedAttributes.forEach(\n            (rkey) => link.properties[rkey] = info[i][rkey.slice(0, -2)].value)\n        } else if ((info[i].oneway?.value !== link.properties.oneway) && (info[i].oneway?.value === '1')) {\n          state.reversedAttributes.forEach(\n            (rkey) => delete link.properties[rkey])\n        }\n        // applied all properties.\n        props.forEach((key) => link.properties[key] = info[i][key].value)\n      }\n\n      this.commit('getEditorLineInfo')\n    },\n\n    editrNodeInfo (state, payload) {\n      // get selected node in editorNodes and modify the changes attributes.\n      const { selectedNodeId, info } = payload\n      const props = Object.keys(info)\n      state.rnodes.features.filter(\n        // eslint-disable-next-line array-callback-return\n        function (node) {\n          if (node.properties.index === selectedNodeId) {\n            props.forEach((key) => node.properties[key] = info[key].value)\n          }\n        },\n      )\n    },\n\n    createNewrNode (state, payload) {\n      const newNode = structuredClone(state.rnodesHeader)\n      const nodeProperties = {}\n      state.rnodeAttributes.forEach(key => {\n        nodeProperties[key] = null\n      })\n      nodeProperties.index = 'rnode_' + short.generate()\n      const nodeGeometry = {\n        coordinates: payload,\n        type: 'Point',\n      }\n      // Copy specified node\n      const nodeFeatures = { geometry: nodeGeometry, properties: nodeProperties, type: 'Feature' }\n      newNode.features = [nodeFeatures]\n      state.newrNode = newNode\n    },\n    splitrLink (state, payload) {\n      // changing link1 change editorLinks as it is an observer.\n      const link1 = payload.selectedFeature\n      const link2 = structuredClone(link1)\n      // distance du point (entre 0 et 1) sur le lien original\n      const ratio = payload.offset\n\n      link1.properties.b = state.newrNode.features[0].properties.index\n      link1.geometry.coordinates = [\n        ...link1.geometry.coordinates.slice(0, payload.sliceIndex),\n        state.newrNode.features[0].geometry.coordinates,\n      ]\n\n      link1.properties.index = 'link_' + short.generate() // link1.properties.index+ '-1'\n      link1.properties.length = link1.properties.length * ratio\n      link1.properties.time = link1.properties.time * ratio\n      if (link1.properties.length_r) link1.properties.length_r = link1.properties.length\n      if (link1.properties.time_r) link1.properties.time_r = link1.properties.time\n\n      link2.properties.a = state.newrNode.features[0].properties.index\n      link2.geometry.coordinates = [\n        state.newrNode.features[0].geometry.coordinates,\n        ...link2.geometry.coordinates.slice(payload.sliceIndex),\n      ]\n      link2.properties.index = 'rlink_' + short.generate() // link2.properties.index+ '-2'\n      link2.properties.length = link2.properties.length * (1 - ratio)\n      link2.properties.time = link2.properties.time * (1 - ratio)\n      if (link2.properties.length_r) link2.properties.length_r = link2.properties.length\n      if (link2.properties.time_r) link2.properties.time_r = link2.properties.time\n\n      state.visiblerLinks.features.push(link2)\n      // update actual rlinks and rnodes\n      state.rlinks.features.filter((link) => link.properties.index === link1.properties.index)[0] = link1\n      state.rlinks.features.push(link2)\n    },\n\n    addRoadNodeInline (state, payload) {\n      // selectedLink : list of links index\n      // lngLat : object wit click geometry\n      // nodes : str. name of node to add (rnode, anchorrNodeS)\n      const selectedFeatures = state.visiblerLinks.features\n        .filter((link) => payload.selectedIndex.includes(link.properties.index))\n      // for loop. for each selectedc links add the node and split.\n      for (let i = 0; i < selectedFeatures.length; i++) {\n        const linkGeom = Linestring(selectedFeatures[i].geometry.coordinates)\n        const clickedPoint = Point(Object.values(payload.lngLat))\n        const snapped = nearestPointOnLine(linkGeom, clickedPoint, { units: 'kilometers' })\n        const dist = length(linkGeom, { units: 'kilometers' }) // dist\n        // for multiString, gives the index of the closest one, add +1 for the slice.\n        const sliceIndex = snapped.properties.index + 1\n        const offset = snapped.properties.location / dist\n        if (payload.nodes === 'rnodes') {\n          // only add one node, takes the first one.\n          if (i === 0) {\n            this.commit('createNewrNode', snapped.geometry.coordinates)\n            state.visiblerNodes.features.push(state.newrNode.features[0])\n            state.rnodes.features.push(state.newrNode.features[0])\n          }\n          this.commit('splitrLink', { selectedFeature: selectedFeatures[i], offset: offset, sliceIndex: sliceIndex })\n\n        // Anchor Nodes\n        } else {\n          this.commit('addAnchorrNode', {\n            selectedLink: selectedFeatures[i],\n            coordinates: snapped.geometry.coordinates,\n            sliceIndex: sliceIndex,\n          })\n        }\n      }\n    },\n    addAnchorrNode (state, payload) {\n      const linkIndex = payload.selectedLink.properties.index\n      const featureIndex = state.visiblerLinks.features.findIndex(link => link.properties.index === linkIndex)\n      // changing link change visible rLinks as it is an observer.\n      const link = state.visiblerLinks.features[featureIndex]\n      link.geometry.coordinates.splice(payload.sliceIndex, 0, payload.coordinates)\n    },\n    createrLink (state, payload) {\n      // nodeIdA: node id, nodeIdB: node id, geom: array geom where we clicked, layerId: str. the layer id rnodes, rlinks\n      // 3 cases.\n      // 1) click on the map. create a node b then connect.\n      // 2) click on a node. create a link between node a and b\n      // 3) click on a link. create node inline b then create link a to b.\n      // create a node if we click on the map (case 1)\n      if (!payload.nodeIdB) {\n        this.commit('createNewrNode', payload.geom)\n        state.visiblerNodes.features.push(state.newrNode.features[0])\n        state.rnodes.features.push(state.newrNode.features[0])\n        payload.nodeIdB = state.newrNode.features[0].properties.index\n      } else if (payload.layerId === 'rlinks') {\n        // create a node inline and then the new link\n        this.commit('addRoadNodeInline', { selectedIndex: payload.nodeIdB, lngLat: payload.geom, nodes: 'rnodes' })\n        payload.nodeIdB = state.newrNode.features[0].properties.index\n      }\n      const rnodeA = state.visiblerNodes.features.filter(node => node.properties.index === payload.nodeIdA)[0]\n      const rnodeB = state.visiblerNodes.features.filter(node => node.properties.index === payload.nodeIdB)[0]\n\n      const linkGeometry = {\n        coordinates: [rnodeA.geometry.coordinates, rnodeB.geometry.coordinates],\n        type: 'LineString',\n      }\n\n      const linkProperties = {}\n      // set default links values\n      state.rlineAttributes.forEach((key) => linkProperties[key] = null)\n      linkProperties.index = 'rlink_' + short.generate()\n      linkProperties.a = payload.nodeIdA\n      linkProperties.b = payload.nodeIdB\n      linkProperties.highway = state.defaultHighway // quenedi\n      linkProperties.route_color = state.rlinksDefaultColor\n      // add length, speed, time now that we have a geometry.\n      const distance = length(linkGeometry)\n      const time = distance / state.roadSpeed * 3600 // 20kmh hard code speed. time in secs\n      linkProperties.length = Number((distance * 1000).toFixed(0)) // metres\n      linkProperties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n      linkProperties.speed = Number(state.roadSpeed) // rounded to 0 decimals\n      if (state.rlineAttributes.includes('oneway')) {\n        linkProperties.oneway = '0'\n        state.reversedAttributes.forEach(\n          (rkey) => linkProperties[rkey] = linkProperties[rkey.slice(0, -2)])\n      }\n\n      const linkFeature = { geometry: linkGeometry, properties: linkProperties, type: 'Feature' }\n      state.rlinks.features.push(linkFeature)\n\n      // add newly generated group (i.e. highway == quenedi), to visibles checked groups.\n      const newLinkGroup = linkProperties[state.selectedrFilter]\n      if (!state.filteredrCategory.includes(newLinkGroup)) {\n        state.filteredrCategory.push(newLinkGroup)\n      }\n      if (!state.selectedrGroup.includes(newLinkGroup)) {\n        // if its not already selected, push it.\n        state.selectedrGroup.push(newLinkGroup)\n      } else {\n        state.visiblerLinks.features.push(linkFeature)\n      }\n    },\n\n    getConnectedLinks (state, payload) {\n      const nodeIndex = payload.selectedNode.properties.index\n      // get links connected to the node\n      // use rLinks as we could moidified links that are not visible moving a node.\n      state.connectedLinks = {\n        b: state.rlinks.features.filter(link => link.properties.b === nodeIndex),\n        a: state.rlinks.features.filter(link => link.properties.a === nodeIndex),\n      }\n    },\n    moverNode (state, payload) {\n      const nodeIndex = payload.selectedNode.properties.index\n      // remove node\n      const newNode = state.visiblerNodes.features.filter(node => node.properties.index === nodeIndex)[0]\n      newNode.geometry.coordinates = payload.lngLat\n\n      // changing links\n\n      // update links geometry. check if exist first (if we take the first|last node there is only 1 link)\n      state.connectedLinks.b.forEach(link => {\n        // note: props are unchanged. even tho the length change, the time and length are unchanged.\n        link.geometry.coordinates = [...link.geometry.coordinates.slice(0, -1), payload.lngLat]\n        // update time and distance\n        const distance = length(link)\n        link.properties.length = Number((distance * 1000).toFixed(0)) // metres\n        // const time = distance / state.roadSpeed * 3600 // 20kmh hard code speed. time in secs\n        const time = distance / link.properties.speed * 3600\n        link.properties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n        // add reverse direction time and length if it exist on the link\n        if (link.properties.time_r) {\n          const rtime = distance / link.properties.speed_r * 3600\n          link.properties.time_r = Number(rtime.toFixed(0)) // rounded to 0 decimals\n        }\n        if (link.properties.length_r) link.properties.length_r = link.properties.length\n      })\n      state.connectedLinks.a.forEach(link => {\n        link.geometry.coordinates = [payload.lngLat, ...link.geometry.coordinates.slice(1)]\n        // update time and distance\n        const distance = length(link)\n        link.properties.length = Number((distance * 1000).toFixed(0)) // metres\n        // const time = distance / state.roadSpeed * 3600 // 20kmh hard code speed. time in secs\n        const time = distance / link.properties.speed * 3600\n        link.properties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n        // add reverse direction time and length if it exist on the link\n        if (link.properties.time_r) {\n          const rtime = distance / link.properties.speed_r * 3600\n          link.properties.time_r = Number(rtime.toFixed(0)) // rounded to 0 decimals\n        }\n        if (link.properties.length_r) link.properties.length_r = link.properties.length\n      })\n    },\n    moverAnchor (state, payload) {\n      const linkIndex = payload.selectedNode.properties.linkIndex\n      const coordinatedIndex = payload.selectedNode.properties.coordinatedIndex\n      const link = state.visiblerLinks.features.filter(feature => feature.properties.index === linkIndex)[0]\n      link.geometry.coordinates = [...link.geometry.coordinates.slice(0, coordinatedIndex),\n        payload.lngLat,\n        ...link.geometry.coordinates.slice(coordinatedIndex + 1)]\n\n      // update time and distance\n      const distance = length(link)\n      link.properties.length = Number((distance * 1000).toFixed(0)) // metres\n      const time = distance / state.roadSpeed * 3600 // 20kmh hard code speed. time in secs\n      link.properties.time = Number(time.toFixed(0)) // rounded to 0 decimals\n    },\n    deleteAnchorrNode (state, payload) {\n      const linkIndex = payload.selectedNode.linkIndex\n      const coordinatedIndex = payload.selectedNode.coordinatedIndex\n      const link = state.visiblerLinks.features.filter(feature => feature.properties.index === linkIndex)[0]\n      link.geometry.coordinates = [...link.geometry.coordinates.slice(0, coordinatedIndex),\n        ...link.geometry.coordinates.slice(coordinatedIndex + 1)]\n    },\n    deleterLink (state, payload) {\n      const linkArr = new Set(payload.selectedIndex)\n      state.rlinks.features = state.rlinks.features.filter(link => !linkArr.has(link.properties.index))\n      state.visiblerLinks.features = state.visiblerLinks.features.filter(link => !linkArr.has(link.properties.index))\n      this.commit('getVisiblerNodes', { method: 'remove' })\n      this.commit('deleteUnusedrNodes')\n      this.commit('getFilteredrCat')\n    },\n    deleterGroup (state, payload) {\n      const group = payload\n      const cat = state.selectedrFilter\n      state.rlinks.features = state.rlinks.features.filter(link => link.properties[cat] !== group)\n      this.commit('refreshVisibleRoads')\n      this.commit('deleteUnusedrNodes')\n      this.commit('getFilteredrCat')\n    },\n    deleteUnusedrNodes (state) {\n      // delete every every nodes not in links\n      const a = state.rlinks.features.map(item => item.properties.a)\n      const b = state.rlinks.features.map(item => item.properties.b)\n      const nodesInLinks = new Set([...a, ...b])\n      state.rnodes.features = state.rnodes.features.filter(node => nodesInLinks.has(node.properties.index))\n    },\n\n    editrGroupInfo (state, payload) {\n      // edit line info on multiple trips at once.\n      const groupInfo = payload.info\n      const selectedLinks = payload.selectedLinks // observer of state.links\n      // get only keys that are not unmodified multipled Values (value=='' and placeholder==true)\n      const props = Object.keys(groupInfo).filter(key =>\n        ((groupInfo[key].value !== '') || !groupInfo[key].placeholder))\n\n      // if we change everything to 2 way. init links thats were one way with thoses values (ex:speed_r = speed)\n      if (groupInfo.oneway?.value === '0') {\n        const linksToSplit = selectedLinks.filter(link => link.properties.oneway === '1')\n        linksToSplit.forEach(link => {\n          state.reversedAttributes.forEach(\n            (rkey) => link.properties[rkey] = link.properties[rkey.slice(0, -2)])\n        })\n        // delete reverse attribute for links going from 2 ways to one way\n      } else if (groupInfo.oneway?.value === '1') {\n        const linksToSplit = selectedLinks.filter(link => link.properties.oneway === '0')\n        linksToSplit.forEach(link => {\n          state.reversedAttributes.forEach(\n            (rkey) => delete link.properties[rkey])\n        })\n      }\n\n      // this is an oberver. modification will be applied to state.links.\n      selectedLinks.forEach(\n        (features) => props.forEach((key) => features.properties[key] = groupInfo[key].value))\n      //  apply the group modification to the reverse links too (ex: speed = 10 and speed_r = 10)\n      if (state.rlineAttributes.includes('oneway')) {\n        const reversedProps = state.reversedAttributes.filter(rkey => props.includes(rkey.slice(0, -2)))\n        selectedLinks.filter(link => link.properties.oneway === '0').forEach(\n          (features) => reversedProps.forEach((rkey) => features.properties[rkey] = groupInfo[rkey.slice(0, -2)].value),\n        )\n      }\n      this.commit('refreshVisibleRoads')\n      this.commit('getFilteredrCat')\n    },\n\n  },\n\n  getters: {\n    rlinks: (state) => state.rlinks,\n    rnodes: (state) => state.rnodes,\n    roadSpeed: (state) => state.roadSpeed,\n    rlinksHeader: (state) => state.rlinksHeader,\n    rnodesHeader: (state) => state.rnodesHeader,\n    rlineAttributes: (state) => state.rlineAttributes.sort(),\n    selectedrGroup: (state) => state.selectedrGroup,\n    selectedrFilter: (state) => state.selectedrFilter,\n    filteredrCategory: (state) => state.filteredrCategory,\n    visiblerLinks: (state) => state.visiblerLinks,\n    visiblerNodes: (state) => state.visiblerNodes,\n    defaultHighway: (state) => state.defaultHighway,\n    rlinksIsEmpty: (state) => state.rlinks.features.length === 0,\n    rcstAttributes: (state) => state.cstAttributes,\n    newrNode: (state) => state.newrNode,\n    rundeletable: (state) => state.rundeletable,\n\n    anchorrNodes: (state) => (renderedLinks) => {\n      const nodes = structuredClone(state.rnodesHeader)\n      renderedLinks.features.filter(link => link.geometry.coordinates.length > 2).forEach(\n        feature => {\n          const linkIndex = feature.properties.index\n          feature.geometry.coordinates.slice(1, -1).forEach(\n            (point, idx) => nodes.features.push(Point(\n              point,\n              { index: short.generate(), linkIndex: linkIndex, coordinatedIndex: idx + 1 },\n            ),\n            ),\n\n          )\n        },\n      )\n\n      return nodes\n    },\n    rlinkDirection: (state) => (indexList, reversed = false) => {\n      const links = state.rlinks.features.filter(link => indexList.includes(link.properties.index))\n      const res = []\n      links.forEach(link => {\n        const geom = link.geometry.coordinates\n        if (reversed) {\n          res.push(bearing(geom[geom.length - 1], geom[0]))\n        } else {\n          res.push(bearing(geom[0], geom[geom.length - 1]))\n        }\n      })\n      return res\n    },\n    grouprLinks: (state) => (category, group) => {\n      return state.rlinks.features.filter(link => group === link.properties[category])\n    },\n    onewayIndex: (state) => {\n      return new Set(state.rlinks.features.filter(\n        link => link.properties.oneway === '0').map(\n        link => link.properties.index))\n    },\n    rlinksForm: (state) => (linkIndex) => {\n      const uneditable = ['a', 'b', 'index']\n      const editorForm = state.visiblerLinks.features.filter(\n        (link) => link.properties.index === linkIndex)[0].properties\n\n      // filter properties to only the one that are editable.\n      const form = {}\n      state.rlineAttributes.forEach(key => {\n        form[key] = {\n          value: editorForm[key],\n          disabled: uneditable.includes(key),\n          placeholder: false,\n        }\n      })\n      return form\n    },\n    reversedrLinksForm: (state) => (linkIndex) => {\n      const uneditable = ['a', 'b', 'index']\n      const editorForm = state.visiblerLinks.features.filter(\n        (link) => link.properties.index === linkIndex)[0].properties\n\n      // filter properties to only the one that are editable.\n      const form = {}\n      state.reversedAttributes.forEach(key => {\n        form[key] = {\n          value: editorForm[key],\n          disabled: uneditable.includes(key),\n          placeholder: false,\n        }\n      })\n      return form\n    },\n  },\n}\n","/* eslint-disable array-callback-return */\n/* eslint-disable no-return-assign */\n\nimport chroma from 'chroma-js'\n\nfunction remap (val, minVal, maxVal, reverse, scale) {\n  let res = 0\n  if (reverse) {\n    res = (-val + maxVal) / (maxVal - minVal)\n  } else {\n    res = (val - minVal) / (maxVal - minVal)\n  }\n  if (scale === 'sqrt') {\n    res = Math.sqrt(res)\n  } else if (scale === 'log') {\n    res = res >= 0 ? Math.log10(10 * res) : 0\n  }\n  return res\n}\nexport default {\n  namespaced: true,\n  state: {\n    type: 'links',\n    links: {},\n    visibleLinks: {},\n    linksHeader: {},\n    lineAttributes: [],\n    selectedFilter: '',\n    selectedCategory: [],\n    displaySettings: {\n      selectedFeature: 'volume',\n      maxWidth: 10,\n      minWidth: 1,\n      numStep: 100,\n      scale: 'linear', // 'log', 'sqrt'\n      fixScale: false,\n      minVal: 0, // option to blocked them. so its an input and its not recompute\n      maxVal: 1,\n      cmap: 'OrRd',\n      opacity: 100,\n      offset: false,\n      showNaN: true,\n      reverseColor: false,\n    },\n\n  },\n\n  mutations: {\n    loadLinks (state, payload) {\n      state.links = payload.geojson\n      state.type = payload.type\n      if (['urn:ogc:def:crs:OGC:1.3:CRS84', 'EPSG:4326'].includes(state.links.crs.properties.name)) {\n        const linksHeader = { ...state.links }\n        linksHeader.features = []\n        state.linksHeader = linksHeader\n        state.visibleLinks = structuredClone(linksHeader)\n        // set all trips visible\n        // this.commit('results/changeSelectedTrips', state.tripId)\n        this.commit('results/getLinksProperties')\n\n        if (payload.selectedFeature) {\n          state.displaySettings.selectedFeature = payload.selectedFeature\n        }\n      } else { alert('invalid CRS. use CRS84 / EPSG:4326') }\n    },\n\n    updateLinks (state, payload) {\n      state.links = payload\n      this.commit('results/refreshVisibleLinks')\n      this.commit('results/updateSelectedFeature')\n    },\n    changeSelectedFilter (state, payload) {\n      state.selectedFilter = payload\n      this.commit('results/refreshVisibleLinks')\n    },\n    changeSelectedCategory (state, payload) {\n      state.selectedCategory = payload\n      this.commit('results/refreshVisibleLinks')\n    },\n\n    getLinksProperties (state) {\n      const header = new Set([])\n      state.links.features.forEach(element => {\n        Object.keys(element.properties).forEach(key => header.add(key))\n      })\n      state.lineAttributes = Array.from(header)\n      state.selectedFilter = header.has('route_type') ? 'route_type' : header.has('highway') ? 'highway' : state.lineAttributes[0]\n      state.selectedCategory = Array.from(new Set(state.links.features.map(\n        item => item.properties[state.selectedFilter])))\n    },\n    applySettings (state, payload) {\n      state.displaySettings.selectedFeature = payload.selectedFeature\n      state.displaySettings.maxWidth = payload.maxWidth\n      state.displaySettings.minWidth = payload.minWidth\n      state.displaySettings.numStep = payload.numStep\n      state.displaySettings.scale = payload.scale\n      state.displaySettings.cmap = payload.cmap\n      state.displaySettings.opacity = payload.opacity\n      state.displaySettings.showNaN = payload.showNaN\n      state.displaySettings.reverseColor = payload.reverseColor\n      state.displaySettings.minVal = payload.minVal\n      state.displaySettings.maxVal = payload.maxVal\n      state.displaySettings.fixScale = payload.fixScale\n      state.displaySettings.offset = payload.offset\n      this.commit('results/refreshVisibleLinks')\n\n      this.commit('results/updateSelectedFeature')\n    },\n\n    updateSelectedFeature (state) {\n      const key = state.displaySettings.selectedFeature\n      const maxWidth = state.displaySettings.maxWidth\n      const minWidth = state.displaySettings.minWidth\n      const scale = state.displaySettings.scale\n      const numStep = state.displaySettings.numStep\n      const cmap = state.displaySettings.cmap\n      const featureArr = state.visibleLinks.features.filter(\n        link => link.properties[key]).map(\n        link => link.properties[key])\n      if (!state.displaySettings.fixScale) {\n        const arrayMinMax = (arr) =>\n          arr.reduce(([min, max], val) => [Math.min(min, val), Math.max(max, val)], [\n            Number.POSITIVE_INFINITY,\n            Number.NEGATIVE_INFINITY,\n          ])\n\n        const [minV, maxV] = arrayMinMax(featureArr)\n        state.displaySettings.minVal = Math.round(minV * 100) / 100\n        state.displaySettings.maxVal = Math.round(maxV * 100) / 100\n      }\n      const minVal = state.displaySettings.minVal\n      const maxVal = state.displaySettings.maxVal\n\n      state.visibleLinks.features.forEach(\n        link => {\n          const val = link.properties[key]\n          if (val < minVal) {\n            link.properties.display_width = minWidth\n          } else if (val > maxVal) {\n            link.properties.display_width = maxWidth\n          } else {\n            link.properties.display_width =\n        ((maxWidth - minWidth) * ((val - minVal) /\n         (maxVal - minVal))) + minWidth\n          }\n        },\n      )\n\n      const colorScale = chroma.scale(cmap).padding([0.1, 0])\n        .domain([0, 1], scale).classes(numStep)\n      const reverse = state.displaySettings.reverseColor\n\n      state.visibleLinks.features.forEach(\n        link => link.properties.display_color = colorScale(\n          remap(link.properties[key], minVal, maxVal, reverse, scale)).hex(),\n      )\n    },\n    refreshVisibleLinks (state) {\n      const group = new Set(state.selectedCategory)\n      const cat = state.selectedFilter\n      state.visibleLinks.features = state.links.features.filter(link => group.has(link.properties[cat]))\n      if (!state.displaySettings.showNaN) {\n        const key = state.displaySettings.selectedFeature\n        state.visibleLinks.features = state.visibleLinks.features.filter(link => link.properties[key])\n      }\n    },\n  },\n\n  getters: {\n    type: (state) => state.type,\n    links: (state) => state.links,\n    visibleLinks: (state) => state.visibleLinks,\n    linksHeader: (state) => state.linksHeader,\n    selectedTrips: (state) => state.selectedTrips,\n    lineAttributes: (state) => state.lineAttributes.sort(),\n    selectedFilter: (state) => state.selectedFilter,\n    selectedCategory: (state) => state.selectedCategory,\n    displaySettings: (state) => state.displaySettings,\n    selectedFeature: (state) => state.displaySettings.selectedFeature,\n    maxWidth: (state) => state.displaySettings.maxWidth,\n    minWidth: (state) => state.displaySettings.minWidth,\n    numStep: (state) => state.displaySettings.numStep,\n    scale: (state) => state.displaySettings.scale,\n    opacity: (state) => state.displaySettings.opacity,\n    colorScale: (state) => {\n      const arr = []\n      const colorScale = chroma.scale(state.displaySettings.cmap).padding([0.1, 0])\n        .domain([0, 1]).classes(state.displaySettings.numStep)\n      for (let i = 0; i < 100; i++) {\n        arr.push(colorScale(remap(i, 0, 100, state.displaySettings.reverseColor, state.displaySettings.scale)))\n      }\n      return arr\n    },\n  },\n}\n","/* eslint-disable array-callback-return */\n/* eslint-disable no-return-assign */\n\nexport default {\n  namespaced: true,\n  state: () => ({\n    layer: {},\n    mat: {},\n    properties: [],\n    type: null,\n  }),\n\n  mutations: {\n    createLayer (state, payload) {\n      state.layer = structuredClone(payload.data)\n      state.type = state.layer.features[0].geometry.type\n      // change Multipolygon to polygon type. just as they the same for mapbox and the app.\n      state.type = state.type === 'MultiPolygon' ? 'Polygon' : state.type\n      Object.keys(payload.mat).forEach(\n        key => { state.mat[key + ' (OD)'] = payload.mat[key] })\n      state.properties = Object.keys(state.mat)\n      if (['urn:ogc:def:crs:OGC:1.3:CRS84', 'EPSG:4326'].includes(state.layer.crs.properties.name)) {\n        // if init with nothing, do nothing.\n        if (state.layer.features.length > 0) {\n          // for each properties in matrix, init the zones to null.\n          state.properties.forEach(\n            prop =>\n              state.layer.features.forEach(\n                zone => zone.properties[prop] = null,\n              ),\n          )\n        }\n      } else { alert('invalid CRS. use CRS84 / EPSG:4326') }\n    },\n\n    changeZone (state, payload) {\n      const selectedProperty = payload.selectedProperty\n\n      if (state.properties.includes(selectedProperty)) {\n        const index = payload.index\n        const row = state.mat[selectedProperty][index]\n        // apply new value to each zone. (zone_1 is selected, apply time to zone_1 to every zone)\n        // if there is no data, put null (ex: sparse matrix)\n        state.layer.features.forEach(\n          zone => zone.properties[selectedProperty] = row ? row[zone.properties.index] : null)\n      }\n    },\n\n  },\n\n  getters: {\n    layer: (state) => state.layer,\n    type: (state) => state.type,\n    properties: (state) => state.properties,\n    hasOD: (state) => state.properties.length > 0,\n    mat: (state) => {\n      // remove OD in matrix names.\n      // return null if there is no od.\n      const keys = Object.keys(state.mat)\n      if (keys.length > 0) {\n        const res = {}\n        keys.forEach(\n          key => { res[key.slice(0, -5)] = state.mat[key] })\n        return res\n      } else return null\n    },\n  },\n}\n","import { quetzalClient } from '@src/axiosClient.js'\nimport s3 from '@src/AWSClient'\nimport { classFile } from '@src/components/utils/utils.js'\nconst $gettext = s => s\n\nexport default {\n  namespaced: true,\n  state: {\n    stateMachineArnBase: 'arn:aws:states:ca-central-1:142023388927:stateMachine:',\n    steps: [{ name: 'Loading Steps...' }],\n    running: false,\n    executionArn: '',\n    currentStep: 0,\n    error: false,\n    synchronized: true,\n    parameters: [],\n  },\n  mutations: {\n    cleanRun (state) {\n      state.steps = [{ name: 'Loading Steps...' }]\n      state.running = false\n      state.executionArn = ''\n      state.currentStep = 0\n      state.error = false\n      state.synchronized = true\n      state.parameters = []\n    },\n    setSteps (state, payload) {\n      state.steps = payload\n      state.steps.splice(0, 0, { name: 'Saving Networks' })\n      state.steps.push({ name: 'Loading Results' })\n    },\n    startExecution (state) {\n      state.error = false\n      state.running = true\n      state.currentStep = 1\n    },\n    terminateExecution (state) {\n      state.running = false\n      state.error = true\n      state.executionArn = ''\n    },\n    changeRunning (state, payload) {\n      state.running = payload\n    },\n    succeedExecution (state) {\n      state.running = false\n      state.currentStep = state.steps.length + 1\n      state.executionArn = ''\n      this.commit('changeNotification',\n        { text: $gettext('simulation executed successfully!'), autoClose: false, color: 'success' })\n    },\n    updateCurrentStep (state, payload) {\n      const stepNames = state.steps.map(a => a.name)\n      state.currentStep = stepNames.indexOf(payload.name) + 1\n    },\n    getLocalParameters (state, payload) {\n      state.parameters = payload\n    },\n  },\n  actions: {\n    async getParameters ({ state, commit }, payload) {\n      try {\n        const params = await s3.readJson(payload.model, payload.path)\n        state.parameters = params\n      } catch (err) {\n        commit('changeAlert', err, { root: true })\n        state.parameters = []\n      }\n    },\n    async getOutputs (context) {\n      const model = context.rootState.user.model\n      const scenario = context.rootState.user.scenario + '/'\n      const path = scenario + 'outputs/'\n      const filesList = await s3.listFiles(model, path)\n      let filesNames = filesList.filter(name => name.endsWith('.json') || name.endsWith('.geojson'))\n      filesNames = filesNames.filter(name => name !== path)\n\n      const files = []\n      const otherFiles = []\n      for (const file of filesNames) {\n        const content = await s3.readJson(model, file)\n        const name = file.split('/').slice(1).join('/')\n        files.push(classFile(name, content))\n      }\n      filesNames = filesList.filter(name => !(name.endsWith('.json') || name.endsWith('.geojson')))\n      for (const file of filesNames) {\n        const name = file.slice(scenario.length) // remove scen name from file\n        otherFiles.push({ data: null, fileName: name, type: 'other' })\n      }\n      if (files.length > 0 || otherFiles.length > 0) {\n        // remove all results from the loadedFiles List\n        context.commit('removeResultsFiles', {}, { root: true })\n        // unload all results Layers\n        context.commit('unloadLayers', {}, { root: true })\n        // load new Results\n        context.commit('loadLayers', { files: files, name: 'db' }, { root: true })\n        // load others outputs files\n        context.commit('loadOtherFiles', { files: otherFiles, source: 'db' })\n      }\n    },\n    getSteps ({ state, commit, rootState }) {\n      let data = { stateMachineArn: state.stateMachineArnBase + rootState.user.model }\n      quetzalClient.client.post('/describe/model',\n        data = JSON.stringify(data),\n      ).then(\n        response => {\n          const def = JSON.parse(response.data.definition)\n          const steps = [{ name: def.StartAt }]\n          if (def.States[def.StartAt].Next !== undefined) {\n            let next = def.States[def.StartAt].Next\n            while (true) {\n              steps.push({ name: next })\n              if (def.States[next].Next === undefined) break\n              next = def.States[next].Next\n            }\n          }\n          commit('setSteps', steps)\n        }).catch(\n        err => {\n          commit('changeAlert', err, { root: true })\n        })\n    },\n    startExecution ({ state, commit, dispatch, rootState }, payload) {\n      const paramsDict = state.parameters.reduce((acc, { category, params }) => {\n        acc[category] = params.reduce((paramAcc, { text, value }) => {\n          paramAcc[text] = value\n          return paramAcc\n        }, {})\n        return acc\n      }, {})\n      let data = {\n        // eslint-disable-next-line no-useless-escape\n        input: JSON.stringify({\n          scenario_path_S3: payload.scenario + '/',\n          launcher_arg: {\n            scenario: 'base',\n            training_folder: '/tmp',\n            params: paramsDict,\n          },\n          metadata: {\n            user_email: rootState.user.cognitoInfo.email,\n          },\n        }),\n        stateMachineArn: state.stateMachineArnBase + rootState.user.model,\n      }\n      quetzalClient.client.post('',\n        data = JSON.stringify(data),\n      ).then(\n        response => {\n          state.executionArn = response.data.executionArn\n          dispatch('pollExecution')\n        }).catch(\n        err => {\n          commit('changeAlert', err, { root: true })\n        })\n    },\n    pollExecution ({ commit, state, dispatch }) {\n      const intervalId = setInterval(() => {\n        let data = { executionArn: state.executionArn }\n        quetzalClient.client.post('/describe',\n          data = JSON.stringify(data),\n        ).then(\n          response => {\n            this.status = response.data.status\n            if (this.status === 'SUCCEEDED') {\n              dispatch('getOutputs').then(\n                () => {\n                  commit('succeedExecution')\n                  clearInterval(intervalId)\n                },\n              ).catch(err => alert(err))\n            } else if (['FAILED', 'TIMED_OUT', 'ABORTED'].includes(this.status)) {\n              commit('terminateExecution')\n              clearInterval(intervalId)\n            }\n          }).catch(\n          err => {\n            commit('changeAlert', err, { root: true })\n          })\n        data = { executionArn: state.executionArn, includeExecutionData: false, reverseOrder: true }\n        quetzalClient.client.post('/history',\n          data = JSON.stringify(data),\n        ).then(\n          response => {\n            for (const e in response.data.events) {\n              const event = response.data.events[e]\n              if (event.type === 'TaskStateEntered') {\n                commit('updateCurrentStep', event.stateEnteredEventDetails)\n                break\n              }\n            }\n          }).catch(\n          err => {\n            console.log(err)\n          })\n      }, 5000)\n    },\n    stopExecution ({ state, commit }) {\n      let data = { executionArn: state.executionArn }\n      quetzalClient.client.post('/abort',\n        data = JSON.stringify(data),\n      ).then(\n        response => {\n          commit('terminateExecution', response.data)\n          // Maybe we sould wait for back to say that execution is terminated (but the wait is awkward)\n        }).catch(\n        err => {\n          console.log(err)\n        })\n    },\n  },\n  getters: {\n    steps: (state) => state.steps,\n    running: (state) => state.running,\n    currentStep: (state) => state.currentStep,\n    executionArn: (state) => state.executionArn,\n    error: (state) => state.error,\n    synchronized: (state) => state.synchronized,\n    parameters: (state) => state.parameters,\n    parametersIsEmpty: (state) => state.parameters.length === 0,\n  },\n}\n","import { quetzalClient } from '@src/axiosClient.js'\nimport s3 from '@src/AWSClient'\nimport { v4 as uuid } from 'uuid'\n\nconst $gettext = s => s\n\nexport default {\n  namespaced: true,\n  state: {\n    stateMachineArn: 'arn:aws:states:ca-central-1:142023388927:stateMachine:ML_MatrixRoadCaster',\n    bucket: 'matrixroadcaster',\n    callID: '',\n    status: '',\n    timer: 0,\n    running: false,\n    executionArn: '',\n    error: false,\n    errorMessage: '',\n    parameters: {\n      callID: 'test',\n      num_zones: 100,\n      train_size: 100,\n      date_time: '2022-12-13T08:00:21-04:00',\n      ff_time_col: 'time',\n      max_speed: 100,\n      num_cores: 1,\n      num_random_od: 1,\n      create_zone: true,\n      hereApiKey: '',\n    },\n  },\n  mutations: {\n    cleanRun (state) {\n      state.running = false\n      state.executionArn = ''\n      state.error = false\n    },\n    setCallID (state) { state.callID = uuid() },\n    setParameters (state, payload) { state.parameters = payload },\n    terminateExecution (state, payload) {\n      state.running = false\n      state.error = true\n      state.errorMessage = payload\n      state.executionArn = ''\n    },\n    changeRunning (state, payload) {\n      state.running = payload\n    },\n    getApproxTimer (state, payload) {\n      // payload is number of road links\n      const numZones = state.parameters.num_zones\n      const trainSize = state.parameters.train_size\n      const numPlotOD = state.parameters.num_random_od\n      // API call time (1.8sec per call), 15 iteration X number of links, loadning saving, plotting 15sec.\n      state.timer = Math.min(numZones, trainSize) * 1.8 + payload * 0.002 + 15\n      state.timer += 10 * numPlotOD // 10 sec per plots\n    },\n    succeedExecution (state) {\n      state.running = false\n      state.executionArn = ''\n      this.commit('changeNotification',\n        { text: $gettext('Matrix Road Caster executed successfully!'), autoClose: false, color: 'success' })\n    },\n\n  },\n  actions: {\n    async startExecution ({ state, commit, dispatch }, payload) {\n      commit('getApproxTimer', payload.rlinks.features.length)\n      commit('setParameters', payload.parameters)\n      console.log('exporting roads to s3')\n      state.error = false\n      state.running = true\n      try {\n        await s3.putObject(\n          state.bucket,\n          state.callID.concat('/road_links.geojson'),\n          JSON.stringify(payload.rlinks))\n        await s3.putObject(\n          state.bucket,\n          state.callID.concat('/road_nodes.geojson'),\n          JSON.stringify(payload.rnodes))\n      } catch (err) { commit('changeAlert', err, { root: true }) }\n      let data = {\n        input: JSON.stringify(state.parameters),\n        name: state.callID,\n        stateMachineArn: state.stateMachineArn,\n      }\n      quetzalClient.client.post('',\n        data = JSON.stringify(data),\n      ).then(\n        response => {\n          state.executionArn = response.data.executionArn\n          dispatch('pollExecution')\n        }).catch(err => {\n        commit('changeAlert', err, { root: true })\n        state.running = false\n        state.status = 'FAILED'\n      })\n    },\n    pollExecution ({ commit, state, dispatch }) {\n      const intervalId = setInterval(() => {\n        let data = { executionArn: state.executionArn }\n        state.timer = state.timer - 2\n        quetzalClient.client.post('/describe',\n          data = JSON.stringify(data),\n        ).then(\n          response => {\n            state.status = response.data.status\n            console.log(state.status)\n            if (state.status === 'SUCCEEDED') {\n              commit('succeedExecution')\n              clearInterval(intervalId)\n            } else if (['FAILED', 'TIMED_OUT', 'ABORTED'].includes(state.status)) {\n              commit('terminateExecution', JSON.parse(response.data.cause))\n              clearInterval(intervalId)\n            }\n          }).catch(err => { commit('changeAlert', err, { root: true }) })\n      }, 2000)\n    },\n    stopExecution ({ state, commit }) {\n      let data = { executionArn: state.executionArn }\n      quetzalClient.client.post('/abort',\n        data = JSON.stringify(data),\n      ).then(\n        response => {\n          commit('terminateExecution', response.data)\n          // Maybe we sould wait for back to say that execution is terminated (but the wait is awkward)\n        }).catch(\n        err => {\n          commit('changeAlert', err, { root: true })\n        })\n    },\n  },\n  getters: {\n    running: (state) => state.running,\n    status: (state) => state.status,\n    executionArn: (state) => state.executionArn,\n    error: (state) => state.error,\n    errorMessage: (state) => state.errorMessage,\n    callID: (state) => state.callID,\n    bucket: (state) => state.bucket,\n    timer: (state) => state.timer,\n    parameters: (state) => state.parameters,\n  },\n}\n","import { quetzalClient } from '@src/axiosClient.js'\nimport s3 from '@src/AWSClient'\nimport { v4 as uuid } from 'uuid'\nimport router from '../../router'\n\nconst $gettext = s => s\n\nexport default {\n  namespaced: true,\n  state: {\n    stateMachineArn: 'arn:aws:states:ca-central-1:142023388927:stateMachine:osm-api',\n    bucket: 'quenedi-osm',\n    callID: '',\n    status: '',\n    timer: 0,\n    running: false,\n    executionArn: '',\n    error: false,\n    errorMessage: '',\n    tags: ['highway', 'maxspeed', 'lanes', 'name', 'oneway', 'surface'],\n    highway: [\n      'motorway',\n      'motorway_link',\n      'trunk',\n      'trunk_link',\n      'primary',\n      'primary_link',\n    ],\n    colorDict: {\n      motorway: 'E892A2',\n      motorway_link: 'E892A2',\n      trunk: 'E892A2',\n      trunk_link: 'E892A2',\n      primary: 'FCD6A4',\n      primary_link: 'FCD6A4',\n      secondary: 'F7F9BE',\n      secondary_link: 'F7F9BE',\n      tertiary: '808080',\n      tertiary_link: '808080',\n      residential: '808080',\n      service: '808080',\n      unclassified: '808080',\n      cycleway: '1D8621',\n    },\n    widthDict: {\n      motorway: 4,\n      motorway_link: 4,\n      trunk: 4,\n      trunk_link: 4,\n      primary: 4,\n      primary_link: 4,\n      secondary: 3,\n      secondary_link: 3,\n      tertiary: 2,\n      tertiary_link: 2,\n      residential: 2,\n      service: 2,\n      unclassified: 2,\n      cycleway: 2,\n    },\n  },\n  mutations: {\n    cleanRun (state) {\n      state.running = false\n      state.executionArn = ''\n      state.error = false\n    },\n    setCallID (state) { state.callID = uuid() },\n\n    terminateExecution (state, payload) {\n      state.running = false\n      state.error = true\n      state.errorMessage = payload\n      state.executionArn = ''\n    },\n    changeRunning (state, payload) {\n      state.running = payload\n    },\n    changeHighway (state, payload) {\n      state.highway = payload\n    },\n    succeedExecution (state) {\n      state.running = false\n      state.executionArn = ''\n      this.commit('changeNotification',\n        { text: $gettext('OSM network imported successfully!'), autoClose: false, color: 'success' })\n    },\n\n  },\n  actions: {\n    startExecution ({ state, commit, dispatch }, payload) {\n      // commit('setParameters', payload.parameters)\n      state.running = true\n      state.error = false\n      let overpassQuery = `[out:json][timeout:180];\n      (\n      `\n      overpassQuery += state.highway.map(highway => `way[\"highway\"=\"${highway}\"](${payload.bbox});\\n`).join('')\n      overpassQuery += `);\n      out body;\n      >;\n      out skel qt;\n      `\n      let data = {\n        input: JSON.stringify({\n          overpassQuery: overpassQuery,\n          tags: state.tags,\n          callID: state.callID,\n        }),\n        name: state.callID,\n        stateMachineArn: state.stateMachineArn,\n      }\n      quetzalClient.client.post('',\n        data = JSON.stringify(data),\n      ).then(\n        response => {\n          state.executionArn = response.data.executionArn\n          dispatch('pollExecution')\n        }).catch(err => {\n        commit('changeAlert', err, { root: true })\n        state.running = false\n        state.status = 'FAILED'\n      })\n    },\n    async pollExecution ({ commit, state, dispatch }) {\n      const intervalId = setInterval(() => {\n        let data = { executionArn: state.executionArn }\n        state.timer = state.timer - 2\n        quetzalClient.client.post('/describe',\n          data = JSON.stringify(data),\n        ).then(\n          async response => {\n            state.status = response.data.status\n            console.log(state.status)\n            if (state.status === 'SUCCEEDED') {\n              await dispatch('downloadOSMFromS3')\n              commit('succeedExecution')\n              clearInterval(intervalId)\n            } else if (['FAILED', 'TIMED_OUT', 'ABORTED'].includes(state.status)) {\n              commit('terminateExecution', JSON.parse(response.data.cause))\n              clearInterval(intervalId)\n            }\n          }).catch(err => { commit('changeAlert', err, { root: true }) })\n      }, 2000)\n    },\n    stopExecution ({ state, commit }) {\n      let data = { executionArn: state.executionArn }\n      quetzalClient.client.post('/abort',\n        data = JSON.stringify(data),\n      ).then(\n        response => {\n          commit('terminateExecution', response.data)\n          // Maybe we sould wait for back to say that execution is terminated (but the wait is awkward)\n        }).catch(\n        err => {\n          commit('changeAlert', err, { root: true })\n        })\n    },\n    async downloadOSMFromS3 ({ state, commit }) {\n      function applyDict (links) {\n        // 00BCD4\n        Object.keys(state.colorDict).forEach(highway => {\n          links.features.filter(link => link.properties.highway === highway).forEach(\n            link => {\n              link.properties.route_width = state.widthDict[highway]\n              link.properties.route_color = state.colorDict[highway]\n            })\n        })\n        return links\n      }\n\n      let rlinks = await s3.readJson(state.bucket, state.callID.concat('/links.geojson'))\n      rlinks = applyDict(rlinks)\n      commit('loadrLinks', rlinks, { root: true })\n      const rnodes = await s3.readJson(state.bucket, state.callID.concat('/nodes.geojson'))\n      commit('loadrNodes', rnodes, { root: true })\n      await s3.deleteFolder(state.bucket, state.callID)\n      console.log('downloaded')\n      router.push('/Home').catch(() => {})\n    },\n  },\n  getters: {\n    running: (state) => state.running,\n    status: (state) => state.status,\n    executionArn: (state) => state.executionArn,\n    error: (state) => state.error,\n    errorMessage: (state) => state.errorMessage,\n    callID: (state) => state.callID,\n    bucket: (state) => state.bucket,\n    timer: (state) => state.timer,\n    highway: (state) => state.highway,\n    tags: (state) => state.tags,\n  },\n}\n","import s3 from '../AWSClient'\nexport default {\n  namespaced: false,\n  state: {\n    cognitoInfo: {},\n    cognitoGroup: '',\n    bucketList: [],\n    accesToken: '',\n    idToken: '',\n    loggedIn: false,\n    loadingState: true,\n    errorLoadingState: false,\n    scenariosList: [],\n    model: null,\n    scenario: null,\n    rasterLayers: [],\n    rasterFiles: [],\n  },\n  mutations: {\n    unloadProject (state) {\n      state.model = null\n      state.scenario = null\n      state.rasterLayers = []\n      state.rasterFiles = []\n    },\n    setLoggedIn (state) {\n      state.loggedIn = true\n    },\n    setLoggedOut (state) {\n      state.loggedIn = false\n      state.cognitoInfo = {}\n    },\n    setCognitoInfo (state, payload) {\n      state.cognitoInfo = payload\n    },\n    setCognitoGroup (state, payload) {\n      state.cognitoGroup = payload\n    },\n    setBucketList (state, payload) {\n      state.bucketList = payload\n    },\n    setAccessToken (state, payload) {\n      state.accesToken = payload\n    },\n    setIdToken (state, payload) {\n      state.idToken = payload\n    },\n    setScenariosList (state, payload) {\n      state.scenariosList = payload\n    },\n    setModel (state, payload) {\n      state.model = payload\n    },\n    setScenario (state, payload) {\n      state.scenario = payload\n    },\n    setRasterLayers (state, payload) {\n      state.rasterLayers = payload\n    },\n    setRasterFiles (state, payload) {\n      state.rasterFiles = payload\n    },\n  },\n\n  actions: {\n    async getScenario ({ commit, state, dispatch }, payload) {\n      const res = await s3.getScenario(payload.model)\n      commit('setScenariosList', res)\n    },\n\n  },\n\n  getters: {\n    loggedIn: (state) => state.loggedIn,\n    cognitoInfo: (state) => state.cognitoInfo,\n    cognitoGroup: (state) => state.cognitoGroup,\n    bucketList: (state) => state.bucketList ? state.bucketList : [],\n    accesToken: (state) => state.accesToken,\n    idToken: (state) => state.idToken,\n    scenariosList: (state) => state.scenariosList,\n    model: (state) => state.model,\n    scenario: (state) => state.scenario,\n    protected: (state) => ['base'],\n    rasterLayers: (state) => state.rasterLayers,\n    rasterFiles: (state) => state.rasterFiles,\n  },\n}\n","export default {type:'FeatureCollection',crs:{type:'name',properties:{name:'urn:ogc:def:crs:OGC:1.3:CRS84'}},features:[]}","export default {type:'FeatureCollection',crs:{type:'name',properties:{name:'urn:ogc:def:crs:OGC:1.3:CRS84'}},features:[]}","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport linksModule from './links.js'\nimport rlinksModule from './rlinks.js'\nimport resultsModule from './results.js'\nimport layerModule from './layer.js'\nimport runModule from './api/run.js'\nimport MatrixRoadCasterModule from './api/MatrixRoadCaster.js'\nimport OSMImporterModule from './api/OSMImporter.js'\nimport userModule from './user.js'\nimport JSZip from 'jszip'\nimport saveAs from 'file-saver'\nimport s3 from '../AWSClient'\nimport { serializer } from '../components/utils/serializer.js'\n\nimport linksBase from '@static/links_base.geojson'\nimport nodesBase from '@static/nodes_base.geojson'\nVue.use(Vuex)\n\nexport const store = new Vuex.Store({\n  modules: {\n    user: userModule,\n    links: linksModule,\n    rlinks: rlinksModule,\n    results: resultsModule,\n    run: runModule,\n    runMRC: MatrixRoadCasterModule,\n    runOSM: OSMImporterModule,\n  },\n\n  state: {\n    notification: {},\n    alert: {},\n    darkMode: false,\n    loading: false,\n    showLeftPanel: true,\n    windowHeight: 0,\n    anchorMode: false,\n    linksPopupContent: ['trip_id'],\n    roadsPopupContent: ['highway'],\n    outputName: 'output',\n    mapCenter: [-73.570337, 45.498310],\n    mapZoom: 11,\n    availableLayers: ['links', 'rlinks', 'nodes', 'rnodes'],\n    loadedFiles: [],\n    otherFiles: [],\n\n  },\n  mutations: {\n    changeNotification (state, payload) {\n      state.notification = payload\n    },\n    changeAlert (state, payload) {\n      /// payload {name,message}, or just alert\n      state.alert = payload\n    },\n    changeDarkMode (state, payload) {\n      state.darkMode = payload\n      state.rlinks.rlinksDefaultColor = state.darkMode ? '2196F3' : '7EBAAC' //  its the primary color.\n      state.links.linksDefaultColor = state.darkMode ? '2196F3' : 'B5E0D6' //  its the primary color.\n    },\n    changeLoading (state, payload) {\n      state.loading = payload\n    },\n    changeWindowHeight (state, payload) {\n      state.windowHeight = payload\n    },\n    changeLeftPanel (state) {\n      state.showLeftPanel = !state.showLeftPanel\n    },\n    saveMapPosition (state, payload) {\n      state.mapCenter = payload.mapCenter\n      state.mapZoom = payload.mapZoom\n    },\n    setAnchorMode (state, payload) {\n      state.anchorMode = payload\n    },\n    changeAnchorMode (state) {\n      state.anchorMode = !state.anchorMode\n    },\n    addFile (state, payload) {\n      // payload = { name: , source: source, type: }\n      state.loadedFiles.push(payload)\n    },\n    removeResultsFiles (state) {\n      state.loadedFiles = state.loadedFiles.filter(file => !file.name.startsWith('output'))\n    },\n    loadOtherFiles (state, payload) {\n      payload.files.forEach(file => {\n        state.otherFiles.push(file)\n        this.commit('addFile', { name: file.fileName, source: payload.source, type: 'other' })\n      })\n    },\n    applySettings (state, payload) {\n      state.links.linkSpeed = Number(payload.linkSpeed)\n      state.rlinks.roadSpeed = Number(payload.roadSpeed)\n      state.linksPopupContent = payload.linksPopupContent\n      state.roadsPopupContent = payload.roadsPopupContent\n      state.rlinks.defaultHighway = payload.defaultHighway\n      state.outputName = payload.outputName\n    },\n    loadLayers (state, payload) {\n      payload.files.filter(file => (file?.type === 'result')).forEach(\n        file => {\n          const fileName = file.fileName.slice(0, -8) // remove .geojson\n          let matData = payload.files.filter(json => json?.fileName.slice(0, -5) === fileName)[0]?.data\n          matData = matData || {}\n          const matDataExist = Object.keys(matData).length > 0\n\n          // if matDataExist does not exist, we want to ignore index as they are only needed for a OD mat.\n          file.data = serializer(file.data, file.fileName, null, !matDataExist)\n\n          this.commit('addFile', { name: file.fileName, source: payload.name, type: 'result' })\n          if (matDataExist) {\n            this.commit('addFile', { name: fileName + '.json', source: payload.name, type: 'result matrix' })\n          }\n\n          this.commit('createLayer', {\n            fileName: fileName,\n            data: file.data,\n            mat: matData,\n          })\n        })\n    },\n\n    createLayer (state, payload) {\n      const moduleName = payload.fileName\n      if (!Object.keys(this._modules.root._children).includes(moduleName)) {\n        this.registerModule(moduleName, layerModule)\n      }\n      this.commit(`${moduleName}/createLayer`, payload)\n      if (!state.availableLayers.includes(moduleName)) {\n        state.availableLayers.push(moduleName)\n      }\n    },\n    initNetworks (state) {\n      this.commit('loadLinks', linksBase)\n      this.commit('loadrLinks', linksBase)\n      this.commit('loadNodes', nodesBase)\n      this.commit('loadrNodes', nodesBase)\n      state.otherFiles = []\n      state.loadedFiles = []\n    },\n    unloadLayers (state) {\n      const moduleToDelete = Object.keys(this._modules.root._children).filter(\n        x => !['links', 'rlinks', 'results', 'run', 'user', 'runMRC', 'runOSM'].includes(x))\n      moduleToDelete.forEach(moduleName => this.unregisterModule(moduleName))\n      state.availableLayers = ['links', 'rlinks', 'nodes', 'rnodes']\n    },\n\n  },\n  actions: {\n    async exportFiles ({ state, commit }, payload = 'all') {\n      const zip = new JSZip()\n      let links = ''\n      let nodes = ''\n      let rlinks = ''\n      let rnodes = ''\n      // export only visible line (line selected)\n      commit('applyPropertiesTypes')\n      if (payload !== 'all') {\n        const tempLinks = structuredClone(state.links.links)\n        tempLinks.features = tempLinks.features.filter(\n          link => state.links.selectedTrips.includes(link.properties.trip_id))\n        links = JSON.stringify(tempLinks)\n        // delete every every nodes not in links\n        const a = tempLinks.features.map(item => item.properties.a)\n        const b = tempLinks.features.map(item => item.properties.b)\n        const nodesInLinks = Array.from(new Set([...a, ...b]))\n        const tempNodes = structuredClone(state.links.nodes)\n        tempNodes.features = tempNodes.features.filter(node => nodesInLinks.includes(node.properties.index))\n        nodes = JSON.stringify(tempNodes)\n\n        rlinks = JSON.stringify(state.rlinks.visiblerLinks)\n        rnodes = JSON.stringify(state.rlinks.visiblerNodes)\n      // export everything\n      } else {\n        links = JSON.stringify(state.links.links)\n        nodes = JSON.stringify(state.links.nodes)\n        rlinks = JSON.stringify(state.rlinks.rlinks)\n        rnodes = JSON.stringify(state.rlinks.rnodes)\n      }\n      // export only if not empty\n      if (JSON.parse(links).features.length > 0) {\n        let blob = new Blob([links], { type: 'application/json' })\n        // use folder.file if you want to add it to a folder\n        zip.file('inputs/pt/links.geojson', blob)\n        blob = new Blob([nodes], { type: 'application/json' })\n        // use folder.file if you want to add it to a folder\n        zip.file('inputs/pt/nodes.geojson', blob)\n      }\n      if (JSON.parse(rlinks).features.length > 0) {\n        let blob = new Blob([rlinks], { type: 'application/json' })\n        // use folder.file if you want to add it to a folder\n        zip.file('inputs/road/road_links.geojson', blob)\n        blob = new Blob([rnodes], { type: 'application/json' })\n        // use folder.file if you want to add it to a folder\n        zip.file('inputs/road/road_nodes.geojson', blob)\n      }\n      if (payload === 'all') {\n        if (!this.getters['run/parametersIsEmpty']) {\n          const blob = new Blob([JSON.stringify(this.getters['run/parameters'])], { type: 'application/json' })\n          zip.file('inputs/params.json', blob)\n        }\n        const staticLayers = Object.keys(this._modules.root._children).filter(\n          x => !['links', 'rlinks', 'results', 'run', 'user', 'runMRC', 'runOSM'].includes(x))\n        for (const layer of staticLayers) {\n          const blob = new Blob([JSON.stringify(this.getters[`${layer}/layer`])], { type: 'application/json' })\n          const name = layer + '.geojson'\n          // zip name = layer.replace('/', '_') + '.geojson'\n          zip.file(name, blob)\n          if (this.getters[`${layer}/mat`]) {\n            const blob = new Blob([JSON.stringify(this.getters[`${layer}/mat`])], { type: 'application/json' })\n            const name = layer + '.json'\n            zip.file(name, blob)\n          }\n        }\n\n        for (const file of state.otherFiles) {\n          // if others file loaded from S3 (they are not loaded yet. need to download them.)\n          if (file.data == null && state.user.model !== null) {\n            file.data = await s3.readBytes(state.user.model, state.user.scenario + '/' + file.fileName)\n          }\n          if (file.data instanceof Uint8Array) {\n            const blob = new Blob([file.data]) // { type: 'text/csv' }\n            zip.file(file.fileName, blob)\n          } else {\n            const blob = new Blob([JSON.stringify(file.data)], { type: 'application/json' })\n            zip.file(file.fileName, blob)\n          }\n        }\n      }\n      zip.generateAsync({ type: 'blob' })\n        .then(function (content) {\n          // see FileSaver.js\n          saveAs(content, state.outputName + '.zip')\n        })\n    },\n\n    async exportToS3 ({ state, commit }, payload) {\n      if (payload !== 'saveOnly') {\n        commit('run/changeRunning', true)\n      }\n      this.commit('applyPropertiesTypes')\n      const scen = state.user.scenario + '/'\n      const bucket = state.user.model\n      const inputFolder = scen + 'inputs/'\n      const ptFolder = inputFolder + 'pt/'\n      const roadFolder = inputFolder + 'road/'\n      const paths = {\n        links: ptFolder + 'links.geojson',\n        nodes: ptFolder + 'nodes.geojson',\n        rlinks: roadFolder + 'road_links.geojson',\n        rnodes: roadFolder + 'road_nodes.geojson',\n        params: scen + 'inputs/params.json',\n      }\n      // save params\n      if (state.run.parameters.length > 0) {\n        await s3.putObject(bucket, paths.params, JSON.stringify(state.run.parameters))\n      }\n      // save PT\n      if (state.links.links.features.length > 0) {\n        await s3.putObject(bucket, paths.links, JSON.stringify(state.links.links))\n        await s3.putObject(bucket, paths.nodes, JSON.stringify(state.links.nodes))\n      }\n      // save Roads\n      if (state.rlinks.rlinks.features.length > 0) {\n        await s3.putObject(bucket, paths.rlinks, JSON.stringify(state.rlinks.rlinks))\n        await s3.putObject(bucket, paths.rnodes, JSON.stringify(state.rlinks.rnodes))\n      }\n      // save Static Layers\n      const staticLayers = Object.keys(this._modules.root._children).filter(\n        x => !['links', 'rlinks', 'results', 'run', 'user', 'runMRC', 'runOSM'].includes(x))\n      for (const layer of staticLayers) {\n        const name = layer + '.geojson'\n        await s3.putObject(bucket, scen + name, JSON.stringify(this.getters[`${layer}/layer`]))\n        if (this.getters[`${layer}/mat`]) {\n          const name = layer + '.json'\n          await s3.putObject(bucket, scen + name, JSON.stringify(this.getters[`${layer}/mat`]))\n        }\n      }\n      // save others layers\n      for (const file of state.otherFiles) {\n        // if others file loaded from S3 (they are not loaded yet. need to download them.)\n        if (file.data == null) {\n          // pass\n        } else if (file.data instanceof Uint8Array) {\n          await s3.putObject(bucket, scen + file.fileName, file.data)\n        } else {\n          await s3.putObject(bucket, scen + file.fileName, JSON.stringify(file.data))\n        }\n      }\n      // console.log(res)\n      // commit('setScenariosList', res)\n    },\n  },\n  getters: {\n    notification: (state) => state.notification,\n    alert: (state) => state.alert,\n    loading: (state) => state.loading,\n    mapCenter: (state) => state.mapCenter,\n    mapZoom: (state) => state.mapZoom,\n    windowHeight: (state) => state.windowHeight,\n    anchorMode: (state) => state.anchorMode,\n    showLeftPanel: (state) => state.showLeftPanel,\n    linksPopupContent: (state) => state.linksPopupContent,\n    roadsPopupContent: (state) => state.roadsPopupContent,\n    outputName: (state) => state.outputName,\n    loadedFiles: (state) => state.loadedFiles,\n    otherFiles: (state) => state.otherFiles,\n    projectIsUndefined: (state) => Object.keys(state.links.links).length === 0,\n    projectIsEmpty: (state) => {\n      return (state.links.links.features.length === 0 &&\n              state.rlinks.rlinks.features.length === 0)\n    },\n    availableLayers: (state) => state.availableLayers,\n    mapStyle: (state) => {\n      if (state.darkMode) {\n        return 'mapbox://styles/mapbox/dark-v11?optimize=true'\n      } else {\n        return 'mapbox://styles/mapbox/light-v11?optimize=true'\n      }\n    },\n\n  },\n})\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".build.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/quetzal-network-editor-dev/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkquetzal_network_editor\"] = self[\"webpackChunkquetzal_network_editor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [100], () => (__webpack_require__(15081)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","___CSS_LOADER_EXPORT___","push","module","id","REGION","region","s3Client","apiVersion","signatureVersion","params","s3","async","credentials","IdentityPoolId","Logins","getters","idToken","config","this","getBucketList","getScenario","bucket","Bucket","moreToLoad","list","Contents","IsTruncated","NextContinuationToken","listObjectsV2","promise","ContinuationToken","err","scenarios","Array","from","Set","map","name","Key","split","filter","scen","scenList","maxDateObj","item","startsWith","reduce","prev","current","LastModified","maxDate","toLocaleDateString","toLocaleTimeString","userEmail","headObject","Metadata","user_email","commit","model","scenario","lastModified","readJson","key","ResponseCacheControl","response","getObject","JSON","parse","Body","toString","trim","readBytes","bucketList","cognitoGroup","listFiles","prefix","isArray","paths","forEach","Prefix","Content","copyFolder","newName","length","Error","file","newFile","join","copyParams","CopySource","copyObject","data","deleteFolder","arr","deleteParams","Delete","Objects","deleteObjects","createFolder","slice","upload","console","log","putObject","body","cognitoInfo","email","ContentType","putBytes","getImagesURL","getSignedUrl","Expires","downloadFolder","zip","fileName","generateAsync","type","then","content","IDENTITY_POOL_ID","auth","ClientId","AppWebDomain","TokenScopesArray","RedirectUriSignIn","RedirectUriSignOut","UserPoolId","userhandler","onSuccess","result","getIdToken","jwtToken","sessionIdInfo","accessToken","onFailure","alert","go","path","query","message","storage","getStorage","login","getSession","logout","isUserSignedIn","getCognitoStorageKey","removeItem","signOut","keyPrefix","getClientId","tokenUserName","signInUserSession","getAccessToken","getUsername","keys","s","quetzalClient","client","create","baseURL","withCredentials","headers","axiosClient","loginAll","$gettext","serializer","geojson","ignoreIndex","features","includes","crs","properties","currentType","geometry","Object","readFileAsText","Promise","resolve","reject","reader","FileReader","onload","event","target","onerror","error","readAsText","readFileAsBytes","fileBytes","Uint8Array","readAsArrayBuffer","classFile","ptFolder","roadFolder","outputFolder","endsWith","toLowerCase","extractZip","ZIP","loadAsync","filesNames","files","match","zipName","i","str","getGroupForm","lineAttributes","uneditable","form","val","link","value","size","disabled","placeholder","IndexAreDifferent","geojsonA","geojsonB","linksIndex","index","newLinksIndex","unzip","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","render","_vm","_c","_self","staticClass","_v","directives","rawName","onResize","expression","ref","attrs","loading","indeterminate","class","notification","timeout","autoClose","transition","color","scopedSlots","_u","fn","_b","small","text","on","click","closeSnackbar","_s","snackbar","callback","$$v","_withStripped","dense","src","contain","bottom","_g","icon","href","$vuetify","theme","dark","$set","$language","_l","available","language","lang","handleChangeLanguage","toUpperCase","loggedIn","initial","menu","given_name","family_name","group","persistent","keydown","$event","indexOf","_k","keyCode","applyDialog","apply","arguments","showDialog","components","props","events","action","computed","projectIsEmpty","$store","watch","methods","modelsList","deleteDialog","copyDialog","localModel","tab","scenariosList","modelScen","selectScenario","stopPropagation","selectedScenario","input","protectedScens","scenarioToDelete","cancelDialog","deleteScenario","createProject","cancel","cols","autofocus","label","style","textAlign","errorMessage","closeCopy","_e","localScen","sort","a","b","localeCompare","undefined","sensitivity","dispatch","mounted","loadProject","$router","s3Path","resp","catch","p","base","setTimeout","Profile","dialog","app","stateless","temporary","mini","drawer","getDisplayedRoutes","$route","marginTop","isProtected","handleClickMenuItem","nativeOn","running","runError","runSychronized","saving","width","proxy","title","marginLeft","fontSize","version","leftSidenav","menuItems","protected","created","routes","concat","o","getRouteTitle","route","tpl","$gettextInterpolate","sheet","prominent","close","Toolbar","NavigationDrawer","Alert","$refs","container","clientHeight","assert","languageMixin","$selectBestLanguage","browserLangs","supportedLangs","parts","normLang","bestLanguage","navigator","languages","darkMode","window","matchMedia","matches","use","autoAddKeyAttributes","availableLanguages","en","fr","es","de","pt","defaultLanguage","translations","silent","productionTip","devtools","performance","customProperties","themes","light","primary","primarydark","secondary","secondarydark","secondarydarkfix","secondarylight","background","lightgrey","white","black","mediumgrey","darkgrey","accent","linksprimary","linkssecondary","chart","lightgreen","darkgreen","lightblue","darkblue","purple","pink","orange","yellow","success","icons","iconfont","locales","mixin","$flatEdges","obj","recurse","flatObj","edges","edge","node","router","store","vuetify","h","App","template","$mount","staticStyle","display","accept","change","readZip","buttonHandle","left","filesAdded","vertical","networkLoaded","e","loadNetwork","links","nodes","parametersLoaded","loadParams","outputsLoaded","loadOutputs","inputsLoaded","loadOtherInputs","readFile","multiple","readOtherInputs","readOtherOutputs","linksIsEmpty","outlined","loadedType","localLinksLoaded","localNodesLoaded","rlinksIsEmpty","paramsIsEmpty","importButton","$emit","inputFiles","outputFiles","filesPanel","loadedFiles","FilesList","loadedLinks","loadedNodes","choice","localFilesAreLoaded","otherInputs","document","getElementById","otherOutputs","fileInput","fileList","FileLoader","loadFilesFromS3","zipInput","loadExample","newProject","rlinks","rnodes","source","zfiles","zipFiles","ptFiles","roadFiles","replace","inputFolder","rasterFolder","filesList","rasterFiles","otherFiles","filesToLoads","url","fetch","res","json","mat","blob","scrollable","numLinks","applyAction","cancelAction","editForm","n","idx","transform","linkDir","orderedForm","hint","showHint","hints","filled","attributeType","wheel","blur","showDeleteOption","attributeNonDeletable","deleteField","rules","newField","addField","fab","newFieldName","cloneName","ToggleDeleteOption","duplicate","cancelClone","cloneDialog","selectedTrips","selectedrGroup","updateSelectedTrips","confirmChanges","abortChanges","deleteButton","cloneButton","propertiesButton","actionClick","isRoadMode","clickFeature","showLeftPanel","showLeftPanelContent","grow","roadMode","height","windowHeight","showAll","tripList","tripId","items","filterChoices","vmodelSelectedFilter","classifiedTripId","String","showGroup","some","editorTrip","trip","Math","min","editButton","right","anchorMode","createNewLine","selectedFilter","arrayUniqueTripId","Map","trip_id","values","filteredCat","undefinedCat","c","newVal","oldVal","newTrip","dict","$nextTick","changeBounds","lingering","tripIds","generate","editVisible","selectedrGoup","rlineAttributes","filteredrCategory","changes","method","category","structuredClone","selectedrFilter","LinksSidePanel","RoadSidePanel","mapStyle","mapboxPublicKey","center","mapCenter","zoom","mapZoom","load","onMapLoaded","mousemove","draw","mouseout","resetDraw","addPoint","mouseup","rightClickMap","mapIsLoaded","choices","position","visible","rasterLayers","isEditorMode","onHover","onHoverRoad","offHover","rightClick","drawMode","drawLink","buffer","generateId","layer","minzoom","paint","currentTheme","connectedDrawLink","origin","show","shake","submit","linkSpeed","suffix","units","required","roadSpeed","linksPopupContent","top","offsetY","chips","roadsPopupContent","defaultHighway","zipRules","outputName","v","localShow","validate","payload","visibleLinks","promoteId","interactive","maxzoom","layout","mouseenter","enterLink","mouseleave","leaveLink","contextmenu","editLineProperties","visibleNodes","MglGeojsonLayer","selectedFeatures","selectedPopupContent","showedTrips","setHiddenFeatures","off","selectLine","linksHeader","nodesHeader","getCanvas","cursor","mapboxEvent","popup","isOpen","remove","htmlContent","prop","closeButton","setLngLat","lngLat","lng","lat","setHTML","addTo","showedTripsSet","has","ab","widthArr","Number","route_width","widthDict","add","totSet","x","newNodes","preventDefault","bbox","point","y","queryRenderedFeatures","layers","editorLinks","selectClick","mouseover","onCursor","offCursor","linkRightClick","editorNodes","mousedown","moveNode","contextMenuNode","anchorNodes","showed","popupEditor","coordinates","hoveredStateId","layerId","contextMenu","flat","actions","feature","MglPopup","MglImageLayer","selectedFeature","disablePopup","keepHovering","dragNode","querySourceFeatures","setFeatureState","hover","selectedId","selectedNode","firstNodeId","lastNodeId","originalEvent","button","onMove","stopMovingNode","loaded","renderedrLinks","minZoom","rendered","renderedrNodes","renderedAnchorrNodes","rnodesHeader","editorRnodes","visiblerNodes","visiblerLinks","anchorrNodes","getBounds","rlinksHeader","beforeDestroy","removeLayer","bounds","_sw","_ne","getZoom","rNodesList","uniqueArray","selectedIndex","parsePath","selectedLayers","default","selectedOpacity","opacity","splice","MglMap","MglNavigationControl","MglScaleControl","LayerSelector","StaticLayer","StaticLinks","EditorLinks","RoadLinks","Settings","Boolean","hoverId","hoverLayer","mapDiv","firstNode","lastNode","resize","saveMapPosition","extend","fitBounds","padding","getStyle","setLayoutProperty","getCenter","loadImage","arrow","image","addImage","sdf","dragRotate","disable","pointGeom","nodeIdA","nodeIdB","geom","roadref","nodeId","swatchStyle","mode","swatches","updateColor","pcolor","tempArr","SidePanel","ColorPicker","selectedLink","editorForm","cursorPosition","tripToDelete","tripToClone","groupTripIds","agency_id","direction_id","drop_off_type","headway","pickup_type","route_color","route_id","route_long_name","route_short_name","route_type","time","highway","speed","addEventListener","editorLineInfo","linkId","rlinksForm","rlinkDirection","onewayIndex","reversedrLinksForm","grouprLinks","selectedLinks","filtered","selectedLinkId","info","selectedNodeId","mapref","selection","el","rcstAttributes","table","field","substr","defaultAttributesNames","rundeletable","Microservices","ResultMap","Run","ResultPicture","linkExactActiveClass","Import","component","beforeEnter","to","next","Home","currUrl","location","parseCognitoWebResponse","beforeEach","projectIsUndefined","state","newLink","newNode","linksDefaultColor","nodeAttributes","defaultAttributes","mutations","loadLinks","points","coord","round","loadNodes","stringify","unloadFiles","appendNewLinks","getLinksProperties","header","element","attr","att","getNodesProperties","addPropertie","deletePropertie","changeSelectedTrips","setEditorTrip","cloneTrip","cloned","linkSequence","reverse","link_sequence","getEditorNodes","editorNodesList","getEditorLineInfo","defaultValue","getTripId","setNewLink","uncopiedPropeties","tempLink","linkProperties","linkFeature","assign","nodeCopyId","createNewNode","nodeProperties","nodeFeatures","setNewNode","tempNode","editNewLink","applyNewLink","distance","toFixed","deleteNode","nodeIndex","link1","link2","featureIndex","findIndex","splitLink","linkIndex","ratio","offset","sliceIndex","seq","addNodeInline","linkGeom","clickedPoint","snapped","dist","addAnchorNode","deleteAnchorNode","coordinatedIndex","moveAnchor","cutLineFromNode","toDelete","entries","cutLineAtNode","editLineInfo","editLinkInfo","editNodeInfo","editGroupInfo","editorGroupInfo","deleteUnusedNodes","nodesInLinks","nodesList","eNode","deleteTrip","applyPropertiesTypes","rnodeAttributes","newrNode","connectedLinks","rlinksDefaultColor","cstAttributes","reversedAttributes","loadrLinks","loadrNodes","appendNewrLinks","unloadrFiles","getrLinksProperties","getrNodesProperties","addRoadPropertie","deleteRoadPropertie","changeSelectedrFilter","getFilteredrCat","splitOneway","oneway","changeVisibleRoads","cat","tempLinks","refreshVisibleRoads","possibleGroups","getVisiblerNodes","editrLinkInfo","rkey","editrNodeInfo","createNewrNode","splitrLink","length_r","time_r","addRoadNodeInline","addAnchorrNode","createrLink","rnodeA","rnodeB","linkGeometry","newLinkGroup","getConnectedLinks","moverNode","rtime","speed_r","moverAnchor","deleteAnchorrNode","deleterLink","linkArr","deleterGroup","deleteUnusedrNodes","editrGroupInfo","groupInfo","reversedProps","renderedLinks","indexList","reversed","remap","minVal","maxVal","scale","sqrt","log10","namespaced","selectedCategory","displaySettings","maxWidth","minWidth","numStep","fixScale","cmap","showNaN","reverseColor","updateLinks","changeSelectedFilter","changeSelectedCategory","applySettings","updateSelectedFeature","featureArr","arrayMinMax","max","POSITIVE_INFINITY","NEGATIVE_INFINITY","minV","maxV","display_width","colorScale","domain","classes","display_color","hex","refreshVisibleLinks","createLayer","zone","changeZone","selectedProperty","row","hasOD","stateMachineArnBase","steps","executionArn","currentStep","synchronized","parameters","cleanRun","setSteps","startExecution","terminateExecution","changeRunning","succeedExecution","updateCurrentStep","stepNames","getLocalParameters","root","context","rootState","user","getSteps","stateMachineArn","post","def","definition","StartAt","States","Next","paramsDict","acc","paramAcc","scenario_path_S3","launcher_arg","training_folder","metadata","pollExecution","intervalId","setInterval","status","clearInterval","includeExecutionData","reverseOrder","stateEnteredEventDetails","stopExecution","parametersIsEmpty","callID","timer","num_zones","train_size","date_time","ff_time_col","max_speed","num_cores","num_random_od","create_zone","hereApiKey","setCallID","setParameters","getApproxTimer","numZones","trainSize","numPlotOD","cause","tags","colorDict","motorway","motorway_link","trunk","trunk_link","primary_link","secondary_link","tertiary","tertiary_link","residential","service","unclassified","cycleway","changeHighway","overpassQuery","applyDict","accesToken","loadingState","errorLoadingState","unloadProject","setLoggedIn","setLoggedOut","setCognitoInfo","setCognitoGroup","setBucketList","setAccessToken","setIdToken","setScenariosList","setModel","setScenario","setRasterLayers","setRasterFiles","modules","results","run","runMRC","MatrixRoadCaster","runOSM","OSMImporter","availableLayers","changeNotification","changeAlert","changeDarkMode","changeLoading","changeWindowHeight","changeLeftPanel","setAnchorMode","changeAnchorMode","addFile","removeResultsFiles","loadOtherFiles","loadLayers","matData","matDataExist","moduleName","_modules","_children","registerModule","initNetworks","unloadLayers","unregisterModule","tempNodes","Blob","staticLayers","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","call","m","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","r","getter","__esModule","d","getPrototypeOf","t","ns","getOwnPropertyNames","defineProperty","enumerable","get","f","chunkId","all","promises","u","miniCssF","g","globalThis","Function","prototype","hasOwnProperty","l","done","script","needAttach","scripts","getElementsByTagName","getAttribute","createElement","charset","nc","setAttribute","onScriptComplete","clearTimeout","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","nmd","children","baseURI","self","installedChunks","installedChunkData","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}