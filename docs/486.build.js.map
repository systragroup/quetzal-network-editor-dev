{"version":3,"file":"486.build.js","mappings":"oLAGIA,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,gzCAAizC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,iEAAiE,MAAQ,GAAG,SAAW,2lBAA2lB,eAAiB,CAAC,s7CAAw7C,WAAa,MAE9/G,S,sECJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,+PAAgQ,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,4DAA4D,MAAQ,GAAG,SAAW,iIAAiI,eAAiB,CAAC,4SAA8S,WAAa,MAEp2B,S,sECJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,2QAA4Q,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,2CAA2C,MAAQ,GAAG,SAAW,kIAAkI,eAAiB,CAAC,uVAAyV,WAAa,MAE34B,S,gDCPA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACRC,EAAKF,EAAIG,MAAMD,GACjB,OAAOA,EACL,UACA,CACEA,EACE,SACA,CACEE,MAAO,CAAEC,SAAU,IACnBC,MAAO,CACLC,MAAOP,EAAIQ,IACXC,SAAU,SAAUC,GAClBV,EAAIQ,IAAME,CACZ,EACAC,WAAY,QAGhB,CACET,EAAG,QAAS,CAACF,EAAIY,GAAG,kBACpBZ,EAAIY,GAAG,KACPV,EAAG,QAAS,CAACF,EAAIY,GAAG,yBAEtB,GAEFZ,EAAIY,GAAG,KACPV,EACE,MACA,CAAEW,YAAa,UACf,CACEX,EAAG,MAAO,CAAEW,YAAa,mBACzBb,EAAIY,GAAG,KACK,IAAZZ,EAAIQ,IACAN,EAAG,eACS,IAAZF,EAAIQ,IACJN,EAAG,oBACHF,EAAIc,MAEV,IAGJ,EAEJ,EAEAf,EAAOgB,eAAgB,EC7CvB,IAAI,EAAS,WACX,IAAIf,EAAMC,KACRC,EAAKF,EAAIG,MAAMD,GACjB,OAAOA,EACL,QACA,CAAEW,YAAa,wBACf,CACEX,EACE,QACA,CACEA,EACE,SACA,CAAEW,YAAa,QACf,CACEX,EAAG,eAAgB,CAAEW,YAAa,YAAc,CAC9Cb,EAAIY,GACF,aACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,0BACpB,cAGNjB,EAAIY,GAAG,KACPV,EAAG,IAAK,CACNF,EAAIY,GACF,IACEZ,EAAIgB,GACFhB,EAAIiB,SACF,uEAKVjB,EAAIY,GAAG,KACPV,EAAG,IAAK,CACNF,EAAIY,GACF,IACEZ,EAAIgB,GACFhB,EAAIiB,SACF,4EAKVjB,EAAIY,GAAG,KACPV,EAAG,IAAK,CACNF,EAAIY,GACF,IACEZ,EAAIgB,GACFhB,EAAIiB,SACF,gFAKVjB,EAAIY,GAAG,KACPV,EAAG,IAAK,CACNF,EAAIY,GACF,IACEZ,EAAIgB,GACFhB,EAAIiB,SACF,sHAKVjB,EAAIY,GAAG,KACPV,EACE,SACA,CACEgB,IAAK,OACLd,MAAO,CAAE,kBAAmB,IAC5BE,MAAO,CACLC,MAAOP,EAAImB,UACXV,SAAU,SAAUC,GAClBV,EAAImB,UAAYT,CAClB,EACAC,WAAY,cAGhBX,EAAIoB,GAAGpB,EAAIqB,YAAY,SAAUC,EAAMC,GACrC,OAAOrB,EACL,MACA,CAAEqB,IAAKA,GACP,MACwB,IAAfD,EAAKE,MACRtB,EAAG,eAAgB,CACjBE,MAAO,CACLqB,KAAMH,EAAKG,KACXC,MAAO1B,EAAIiB,SAASK,EAAKK,MACzBC,OAAQN,EAAKO,MACbC,KAAM9B,EAAI+B,SAAW/B,EAAIiB,SAASK,EAAKQ,MAAQ,GAC/C,kBAAmB9B,EAAI+B,SACvBC,MAAOV,EAAKU,MAAMC,KAAKC,GAASlC,EAAIgC,MAAME,KAC1CC,SAAU,IAEZC,GAAI,CAAEC,MAAO,QACb/B,MAAO,CACLC,MAAOe,EAAKf,MACZE,SAAU,SAAUC,GAClBV,EAAIsC,KAAKhB,EAAM,QAASZ,EAC1B,EACAC,WAAY,gBAGhBT,EAAG,WAAY,CACbE,MAAO,CACLqB,KAAMH,EAAKG,KACXD,MAAOF,EAAKE,MACZE,MAAO1B,EAAIiB,SAASK,EAAKK,MACzBC,OAAQN,EAAKO,MACbC,KAAM9B,EAAI+B,SAAW/B,EAAIiB,SAASK,EAAKQ,MAAQ,GAC/C,kBAAmB9B,EAAI+B,SACvBC,MAAOV,EAAKU,MAAMC,KAAKC,GAASlC,EAAIgC,MAAME,KAC1CC,SAAU,IAEZC,GAAI,CAAEC,MAAO,QACb/B,MAAO,CACLC,MAAOe,EAAKf,MACZE,SAAU,SAAUC,GAClBV,EAAIsC,KAAKhB,EAAM,QAASZ,EAC1B,EACAC,WAAY,iBAItB,EAEJ,IACA,GAEFX,EAAIY,GAAG,KACPV,EACE,iBACA,CACEA,EACE,QACA,CACEE,MAAO,CACLmC,MAAO,UACPC,QAASxC,EAAIyC,SAAgC,YAArBzC,EAAI0C,aAC5BC,SACE3C,EAAIyC,SACiB,YAArBzC,EAAI0C,eACH1C,EAAImB,WAETiB,GAAI,CACFQ,MAAO,SAAUC,GACf,OAAO7C,EAAI8C,KACb,IAGJ,CACE5C,EACE,SACA,CACE6C,YAAa,CAAE,eAAgB,QAC/B3C,MAAO,CAAE4C,MAAO,KAElB,CAAChD,EAAIY,GAAG,gDAEVZ,EAAIY,GACF,eACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,QACpB,eAGN,GAEFjB,EAAIY,GAAG,KACPV,EACE,QACA,CACE+C,WAAY,CACV,CACEC,KAAM,OACNC,QAAS,SACT5C,MAA2B,WAApBP,EAAI0C,aACX/B,WAAY,8BAGhBP,MAAO,CAAEmC,MAAO,OAAQZ,KAAM,IAC9BS,GAAI,CACFQ,MAAO,SAAUC,GACf,OAAO7C,EAAIoD,SACb,IAGJ,CACEpD,EAAIY,GACF,eACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,UACpB,gBAIRjB,EAAIY,GAAG,KACPV,EACE,cACA,CACE+C,WAAY,CACV,CACEC,KAAM,OACNC,QAAS,SACT5C,MAA2B,WAApBP,EAAI0C,aACX/B,WAAY,+BAIlB,CACEX,EAAIY,GACF,iBACEZ,EAAIgB,GACFhB,EAAIqD,MAAQ,EACRC,KAAKC,KAAKvD,EAAIqD,MAAQ,IACtBrD,EAAIiB,SAAS,gBAEnBjB,EAAIgB,GAAGhB,EAAIiB,SAAS,uBACpB,gBAIRjB,EAAIY,GAAG,KACPV,EAAG,YACHF,EAAIY,GAAG,KACPV,EACE,QACA,CACEE,MAAO,CAAEoD,KAAM,GAAIR,MAAO,IAC1BZ,GAAI,CACFQ,MAAO,SAAUC,GACf7C,EAAI+B,UAAY/B,EAAI+B,QACtB,IAGJ,CAAC7B,EAAG,SAAU,CAACF,EAAIY,GAAG,mCACtB,IAGJ,IAGJ,IAGJ,GAEFZ,EAAIY,GAAG,KACPV,EACE,QACA,CACEA,EACE,SACA,CAAEW,YAAa,SACf,CACEX,EAAG,eAAgB,CAAEW,YAAa,YAAc,CAC9Cb,EAAIY,GACF,aACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,wBACpB,cAGNjB,EAAIY,GAAG,KACPV,EACE,QACA,CACE+C,WAAY,CACV,CACEC,KAAM,OACNC,QAAS,SACT5C,MAAOP,EAAIyD,KAAKC,OAAS,EACzB/C,WAAY,kBAGhBP,MAAO,CAAEoC,QAASxC,EAAI2D,SAAUhB,SAAU3C,EAAI2D,UAC9CvB,GAAI,CAAEQ,MAAO5C,EAAI4D,eAEnB,CACE1D,EACE,SACA,CACE6C,YAAa,CAAE,eAAgB,QAC/B3C,MAAO,CAAE4C,MAAO,KAElB,CAAChD,EAAIY,GAAG,8CAEVZ,EAAIY,GACF,aACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,gCACpB,aAGN,GAEFjB,EAAIY,GAAG,KACPV,EACE,QACA,CACE+C,WAAY,CACV,CACEC,KAAM,OACNC,QAAS,SACT5C,MAAOP,EAAIyD,KAAKC,OAAS,EACzB/C,WAAY,kBAGhBP,MAAO,CAAEoC,QAASxC,EAAI6D,UAAWlB,SAAU3C,EAAI6D,WAC/CzB,GAAI,CAAEQ,MAAO5C,EAAI8D,WAEnB,CACE5D,EACE,SACA,CACE6C,YAAa,CAAE,eAAgB,QAC/B3C,MAAO,CAAE4C,MAAO,KAElB,CAAChD,EAAIY,GAAG,gDAEVZ,EAAIY,GACF,aAAeZ,EAAIgB,GAAGhB,EAAIiB,SAAS,aAAe,aAGtD,GAEFjB,EAAIY,GAAG,KACPZ,EAAI+D,MACA7D,EACE,UACA,CACEE,MAAO,CACL4D,MAAO,GACPC,SAAU,GACVtC,KAAM,GACNF,KAAM,UAGV,CACEzB,EAAIY,GACF,aACEZ,EAAIgB,GACFhB,EAAIiB,SACF,4HAIJ,cAEJjB,EAAIoB,GAAG8C,OAAOC,KAAKnE,EAAIoE,eAAe,SAAU7C,GAC9C,OAAOrB,EAAG,IAAK,CAAEqB,IAAKA,GAAO,CAC3BrB,EAAG,IAAK,CAACF,EAAIY,GAAGZ,EAAIgB,GAAGO,GAAO,QAC9BvB,EAAIY,GAAGZ,EAAIgB,GAAGhB,EAAIoE,aAAa7C,IAAQ,eAE3C,KAEF,GAEFvB,EAAIc,KACRd,EAAIY,GAAG,KACPZ,EAAIoB,GAAGpB,EAAIyD,MAAM,SAAUY,EAAK9C,GAC9B,OAAOrB,EACL,MACA,CAAEqB,IAAKA,EAAKV,YAAa,WACzB,CACEX,EAAG,QAAS,CACVE,MAAO,CAAEkE,IAAKD,EAAKE,IAAK,QAASC,QAAS,OAG9C,EAEJ,KAEF,IAGJ,IAGJ,EAEJ,EAEA,EAAOzD,eAAgB,E,eCzXvB,MCHuI,EDKvI,CACEmC,KAAM,mBACNuB,WAAY,CACZ,EAEAC,OACE,MAAO,CACLjB,KAAM,GACNI,WAAW,EACXF,UAAU,EACVxC,WAAW,EAEXE,WAAY,CAAC,CACX6B,KAAM,YACNvB,KAAM,kBACNpB,MAAO,KACPkB,KAAM,SACNI,MAAO,GACPC,KAAM,kEACNE,MAAO,CACL,WAAY,mBAGhB,CACEkB,KAAM,aACNvB,KAAM,0BACNpB,MAAO,KACPkB,KAAM,SACNI,MAAO,GACPC,KAAM,0EACNE,MAAO,CACL,WAAY,mBAGhB,CACEkB,KAAM,YACNvB,KAAM,YACNpB,MAAO,KACPkB,KAAM,SACNI,MAAO,GACPC,KAAM,kFACNE,MAAO,CACL,WAAY,iBAGhB,CACEkB,KAAM,cACNvB,KAAM,yBACNpB,MAAO,KACPiB,MAAOvB,KAAK0E,OAAOC,QAAQC,gBAC3BpD,KAAM,SACNI,MAAO,GACPC,KAAM,oHACNE,MAAO,CACL,aAGJ,CACEkB,KAAM,YACNvB,KAAM,oBACNpB,MAAO,KACPkB,KAAM,SACNI,MAAO,GACPC,KAAM,4HACNE,MAAO,CACL,WAAY,mBAGhB,CACEkB,KAAM,gBACNvB,KAAM,uBACNpB,MAAO,KACPkB,KAAM,SACNI,MAAO,GACPC,KAAM,iEACNE,MAAO,CACL,WAAY,mBAGhB,CACEkB,KAAM,aACNvB,KAAM,eACNpB,MAAO,KACPkB,KAAM,SACNI,MAAO,GACPC,KAAM,uCACNE,MAAO,CACL,cAKJD,UAAU,EAEV+C,GAAI,8RACJ9C,MAAO,CACLG,SAAU4C,KAAOA,GAAc,WAC/BC,eAAgBD,GAAKA,EAAI,GAAc,0BACvCE,YAAaF,GAAKA,GAAK,GAAc,iCACrCG,aAAcH,GAAK9E,KAAK6E,GAAGK,KAAKJ,IAAe,qBAIrD,EACAK,SAAU,CACRC,SAAY,OAAOpF,KAAK0E,OAAOC,QAAQ,gBAAiB,EACxDU,SAAY,OAAOrF,KAAK0E,OAAOC,QAAQ,gBAAiB,EACxDvB,QAAW,OAAOpD,KAAK0E,OAAOC,QAAQ,eAAgB,EACtDlC,eAAkB,OAAOzC,KAAK0E,OAAOC,QAAQ,gBAAiB,EAC9DnC,UAAa,OAAOxC,KAAK0E,OAAOC,QAAQ,iBAAkB,EAC1Db,QAAW,OAAO9D,KAAK0E,OAAOC,QAAQ,eAAgB,EACtDR,eAAkB,OAAOnE,KAAK0E,OAAOC,QAAQ,sBAAuB,GAGtEW,MAAO,CACL7C,aAAc8C,GACA,cAARA,GACFvF,KAAKwF,cAET,GAEFC,UAEE,MAAMC,EAAc1F,KAAK0E,OAAOC,QAAQ,qBAExC3E,KAAKoB,WAAWuE,SAAQC,GAASA,EAAMtF,MAAQoF,EAAYE,EAAM3C,QAG7DjD,KAAKqF,QACPrF,KAAKwF,cAET,EACAK,QAAS,CACPhD,MACE,IAAK7C,KAAK8F,MAAMC,KAAKC,WAAc,OACnChG,KAAK0E,OAAOuB,OAAO,oBACnB,MAAMC,EAAS,CAAEb,OAAQrF,KAAKqF,QAC9BrF,KAAKoB,WAAWuE,SAAQtE,IACtB6E,EAAO7E,EAAK4B,MAAQ5B,EAAKf,SAE3BN,KAAK0E,OAAOyB,SAAS,wBAAyB,CAC5CC,OAAQpG,KAAK0E,OAAOC,QAAQyB,OAC5BC,OAAQrG,KAAK0E,OAAOC,QAAQ0B,OAC5BjF,WAAY8E,GAEhB,EACA/C,UAAanD,KAAK0E,OAAOyB,SAAS,uBAAwB,EAE1DG,qBACEtG,KAAK0D,UAAW,EAChB,MAAM0C,QAAe,IAAGG,SAASvG,KAAKoF,OAAQpF,KAAKqF,OAAOmB,OAAO,wBACjExG,KAAK0E,OAAOuB,OAAO,aAAcG,GACjC,MAAMC,QAAe,IAAGE,SAASvG,KAAKoF,OAAQpF,KAAKqF,OAAOmB,OAAO,wBACjExG,KAAK0E,OAAOuB,OAAO,aAAcI,GACjCrG,KAAK0D,UAAW,EAChB1D,KAAK0E,OAAOuB,OAAO,qBACjB,CAAEvE,KAAe,sBAAwB+E,WAAW,EAAMnE,MAAO,WACrE,EACAgE,qBACE,MACMI,SADqB,IAAGC,UAAU3G,KAAKoF,OAAQpF,KAAKqF,OAAS,MACnCuB,QAAO3D,GAAQA,EAAK4D,SAAS,UAC7D,IAAK,MAAMC,KAAQJ,EAAY,CAC7B,MAAMK,QAAY,IAAGvB,aAAaxF,KAAKoF,OAAQ0B,GAC/C9G,KAAKwD,KAAK7D,KAAKoH,EACjB,CACF,EACAT,iBACEtG,KAAK4D,WAAY,QACX,IAAGoD,eAAehH,KAAKoF,OAAQpF,KAAKqF,OAAOmB,OAAO,MACxDxG,KAAK4D,WAAY,CACnB,I,qIEpKAqD,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,IAAQM,QAAS,IAAQA,O,eCP1D,SAXgB,OACd,EACA,EJiXoB,II/WpB,EACA,KACA,WACA,MAI8B,QCnBhC,IAAI,EAAS,WACX,IAAIxH,EAAMC,KACRC,EAAKF,EAAIG,MAAMD,GACjB,OAAOA,EACL,UACA,CACEA,EACE,SACA,CAAEW,YAAa,QACf,CACEX,EAAG,eAAgB,CACjBF,EAAIY,GACF,WACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,uCACpB,YAGNjB,EAAIY,GAAG,KACPV,EAAG,YACHF,EAAIY,GAAG,KACPV,EACE,kBACA,CACEF,EAAI+D,MACA7D,EACE,UACA,CACEE,MAAO,CACL4D,MAAO,GACPyD,MAAO,QACPxD,SAAU,GACVtC,KAAM,GACNF,KAAM,UAGV,CACEzB,EAAIY,GACF,aACEZ,EAAIgB,GACFhB,EAAIiB,SACF,wHAIJ,cAEJjB,EAAIoB,GAAG8C,OAAOC,KAAKnE,EAAIoE,eAAe,SAAU7C,GAC9C,OAAOrB,EAAG,IAAK,CAAEqB,IAAKA,GAAO,CAC3BrB,EAAG,IAAK,CAACF,EAAIY,GAAGZ,EAAIgB,GAAGO,GAAO,QAC9BvB,EAAIY,GAAGZ,EAAIgB,GAAGhB,EAAIoE,aAAa7C,IAAQ,eAE3C,KAEF,GAEFvB,EAAIc,MAEV,GAEFd,EAAIY,GAAG,KACPV,EACE,iBACA,CACEA,EACE,SACA,CACEqB,IAAKvB,EAAI0H,SACT7G,YAAa,MACbT,MAAO,CACL,WAAY,EACZ,eAAgBJ,EAAI2H,gBACpB,YAAa3H,EAAI0H,UAEnBtF,GAAI,CAAEwF,KAAM5H,EAAI6H,YAAajF,MAAO5C,EAAI8H,UAE1C,CACE5H,EAAG,kBAAmB,CACpBE,MAAO,CAAE2H,SAAU,kBAErB/H,EAAIY,GAAG,KACPV,EAAG,uBAAwB,CACzBE,MAAO,CAAE2H,SAAU,kBAErB/H,EAAIY,GAAG,KACP,CACEV,EACE,QACA,CACEW,YAAa,kBACbT,MAAO,CAAE4H,IAAK,GAAIhF,MAAO,IACzBZ,GAAI,CAAEQ,MAAO5C,EAAIiI,iBAEnB,CACE/H,EAAG,SAAU,CAAEE,MAAO,CAAEmC,MAAO,YAAe,CAC5CvC,EAAIY,GACF,mBACEZ,EAAIgB,GACFhB,EAAIkI,SACA,gBACA,wBAEN,qBAIR,IAGJlI,EAAIY,GAAG,KACPV,EAAG,kBAAmB,CACpBE,MAAO,CACL,YAAa,UACb+H,OAAQ,CACN1G,KAAM,UACNiD,KAAM1E,EAAIoI,KACVC,UAAW,SAEb,WAAY,OACZC,MAAO,CACLC,aAAa,EACb9G,KAAM,OACN+G,MAAO,CACL,aACExI,EAAIyI,SAASC,MAAMC,aAAaC,aAClC,eAAgB,MAItBxG,GAAI,CAAEyG,UAAW7I,EAAI8I,QAASC,WAAY/I,EAAIgJ,YAEhDhJ,EAAIY,GAAG,KACPV,EAAG,kBAAmB,CACpBE,MAAO,CACL,YAAa,UACbqB,KAAM,OACN0G,OAAQ,UACR,WAAY,SACZG,MAAO,CACL7G,KAAM,OACN+G,MAAO,CACL,aACExI,EAAIyI,SAASC,MAAMC,aAAaC,aAClC,aAAc,OAKtB5I,EAAIY,GAAG,KACPZ,EAAIiJ,YACA/I,EAAG,aAAc,CACfE,MAAO,CACL6B,IAAKjC,EAAIiC,IACTiH,MAAOlJ,EAAIkI,SAAWlI,EAAIkJ,MAAQlJ,EAAImJ,YACtCC,OAAQpJ,EAAIkI,UAEd9F,GAAI,CAAEiH,KAAMrJ,EAAIsJ,SAAUC,WAAYvJ,EAAIwJ,cAE5CxJ,EAAIc,MAEV,IAGJ,GAEFd,EAAIY,GAAG,KACPV,EAAG,aACHF,EAAIY,GAAG,KACPV,EACE,iBACA,CACEA,EAAG,YACHF,EAAIY,GAAG,KACPV,EAAG,WAAY,CACbE,MAAO,CACLoB,MAAOxB,EAAIyJ,YACXC,OAAQ,GACRC,MAAO,GACP,aAAc,CAAEC,KAAK,EAAMC,SAAS,GACpCnI,MAAO,qBACPoI,SAAU,IAEZC,YAAa/J,EAAIgK,GAAG,CAClB,CACEzI,IAAK,YACL0I,GAAI,UAAU,KAAE3I,EAAI,MAAE4I,IACpB,MAAO,CACLA,GAAS,EACLhK,EAAG,SAAU,CAACA,EAAG,OAAQ,CAACF,EAAIY,GAAGZ,EAAIgB,GAAGM,QACxCtB,EAAIc,KACRd,EAAIY,GAAG,KACG,IAAVsJ,EACIhK,EACE,OACA,CAAEW,YAAa,2BACf,CACEb,EAAIY,GACF,mBACEZ,EAAIgB,GACFhB,EAAImK,gBAAgBzG,OAClB,EACA,IACA1D,EAAIiB,SAAS,SAEjB,oBAIRjB,EAAIc,KAEZ,KAGJR,MAAO,CACLC,MAAOP,EAAImK,gBACX1J,SAAU,SAAUC,GAClBV,EAAImK,gBAAkBzJ,CACxB,EACAC,WAAY,qBAGhBX,EAAIY,GAAG,KACPV,EAAG,YACHF,EAAIY,GAAG,KACPV,EACE,QACA,CACEE,MAAO,CACLuB,KAAM,GACNsC,SAAU,GACV1B,MAAO,UACPC,QAASxC,EAAIyC,QACbE,SAAU3C,EAAIyC,SAEhBL,GAAI,CAAEQ,MAAO5C,EAAIoK,YAEnB,CACEpK,EAAIY,GACF,aAAeZ,EAAIgB,GAAGhB,EAAIiB,SAAS,aAAe,eAK1D,IAGJ,GAEFjB,EAAIY,GAAG,KACPV,EACE,WACA,CACEE,MAAO,CAAEiK,WAAY,GAAI,YAAa,OACtCjI,GAAI,CACFkI,QAAS,CACP,SAAUzH,GACR,OACGA,EAAOpB,KAAK8I,QAAQ,QACrBvK,EAAIwK,GAAG3H,EAAO4H,QAAS,QAAS,GAAI5H,EAAOtB,IAAK,SAEzC,KACFvB,EAAI0K,qBAAqBC,MAAM,KAAMC,UAC9C,EACA,SAAU/H,GACR,IACGA,EAAOpB,KAAK8I,QAAQ,QACrBvK,EAAIwK,GAAG3H,EAAO4H,QAAS,MAAO,GAAI5H,EAAOtB,IAAK,CAC5C,MACA,WAGF,OAAO,KACTvB,EAAI6K,qBAAsB,CAC5B,IAGJvK,MAAO,CACLC,MAAOP,EAAI6K,oBACXpK,SAAU,SAAUC,GAClBV,EAAI6K,oBAAsBnK,CAC5B,EACAC,WAAY,wBAGhB,CACET,EACE,SACA,CACEA,EAAG,eAAgB,CAAEW,YAAa,WAAa,CAC7Cb,EAAIY,GACF,aACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,qCACpB,cAGNjB,EAAIY,GAAG,KACPV,EACE,iBACA,CACEA,EAAG,YACHF,EAAIY,GAAG,KACPV,EACE,QACA,CACEE,MAAO,CAAEmC,MAAO,WAChBH,GAAI,CACFQ,MAAO,SAAUC,GACf7C,EAAI6K,qBAAuB7K,EAAI6K,mBACjC,IAGJ,CACE7K,EAAIY,GACF,eACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,OACpB,gBAIRjB,EAAIY,GAAG,KACPV,EACE,QACA,CACEE,MAAO,CAAEmC,MAAO,WAChBH,GAAI,CAAEQ,MAAO5C,EAAI0K,uBAEnB,CACE1K,EAAIY,GACF,eACEZ,EAAIgB,GAAGhB,EAAIiB,SAAS,QACpB,iBAKV,IAGJ,IAGJ,IAGJ,EAEJ,EAEA,EAAOF,eAAgB,E,cC3VnB,EAAS,WACX,IAAIf,EAAMC,KAEV,OAAOC,EADAF,EAAIG,MAAMD,IACP,kBAAmB,CAC3BE,MAAO,CACL,YAAa,QACb+H,OAAQ,CACN1G,KAAM,UACNiD,KAAM1E,EAAIkJ,MACV4B,OAAQ,EACRzC,UAAW,SAEb,WAAY,QACZC,MAAO,CACLC,aAAa,EACb9G,KAAM,SACN+G,MAAO,CACL,eAAgB,UAChB,iBAAkB,GAClB,gBAAiB,CACf,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,GACA,GAEF,cAAe,CACb,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,GACA,GAEF,sBAAuBxI,EAAIyI,SAASC,MAAMC,aAAaoC,SACvD,sBAAuB,KAI7B3I,GAAI,CACFyG,UAAW7I,EAAIgL,SACfjC,WAAY/I,EAAIiL,UAChBC,UAAWlL,EAAIsJ,SACf6B,YAAanL,EAAIuJ,aAGvB,EAEA,EAAOxI,eAAgB,EC1CvB,MCHiI,EDGjI,CACEmC,KAAM,aACNuB,WAAY,CAEV2G,gBAAe,MAEjBC,MAAO,CAAC,MAAO,QAAS,UACxBC,MAAO,CAAC,OAAQ,cAEhB5G,KAAK,KACI,CACL6G,eAAgB,KAChBC,cAAc,EACdC,UAAU,IAGdrG,SAAU,CAEV,EACAG,MAAO,CACP,EAEAG,UACA,EACAI,QAAS,CAEPkF,SAAUM,GACR,GAAIrL,KAAKmJ,QACqB,OAAxBnJ,KAAKsL,eAAyB,CAChCtL,KAAKgC,IAAIyJ,YAAYC,MAAMC,OAAS,UAEpC,MAAMC,EAAc,IAAI,IAAIC,IAAIR,EAAMS,YAAYC,SAAS/J,KAAIX,GAAQA,EAAKxB,OAC5EG,KAAKsL,eAAiB,CAAEU,QAASX,EAAMW,QAASnM,GAAI+L,GACpD5L,KAAKgC,IAAIiK,gBACP,CAAE/D,OAAQlI,KAAKsL,eAAeU,QAASnM,GAAIG,KAAKsL,eAAezL,GAAG,IAClE,CAAEqM,OAAO,GAEb,CAEJ,EACAlB,UAAWK,GACLrL,KAAKmJ,QAEqB,OAAxBnJ,KAAKsL,iBAGHtL,KAAKuL,aACPvL,KAAKwL,UAAW,GAGhBxL,KAAKgC,IAAIyJ,YAAYC,MAAMC,OAAS,GACpC3L,KAAKgC,IAAIiK,gBACP,CAAE/D,OAAQlI,KAAKsL,eAAeU,QAASnM,GAAIG,KAAKsL,eAAezL,GAAG,IAClE,CAAEqM,OAAO,IAEXlM,KAAKsL,eAAiB,MAK9B,EACAhC,WAAY+B,GACV,IAAKrL,KAAKwL,UAA6C,UAAjCxL,KAAKsL,gBAAgBU,QAAqB,CAC9D,MACMG,EADWnM,KAAKgC,IAAIoK,oBAAoBpM,KAAKsL,eAAeU,SACjCpF,QAAOvF,GAAQA,EAAKxB,KAAOG,KAAKsL,eAAezL,GAAG,KAAI,GACjF8C,EAAQ,CACZwJ,gBAAiBA,GAEfA,GACFnM,KAAKqM,MAAM,aAAc1J,EAE7B,CACF,EACA0G,SAAUgC,GACR,GAAIrL,KAAKmJ,QAA2C,UAAjCnJ,KAAKsL,gBAAgBU,SACS,IAA3CX,EAAMS,YAAYQ,cAAcC,OAAc,CAChDlB,EAAMS,YAAYU,iBAClBxM,KAAKgC,IAAIyJ,YAAYC,MAAMC,OAAS,OAEpC3L,KAAKuL,cAAe,EAEpB,MAAMQ,EAAW/L,KAAKgC,IAAIoK,oBAAoBpM,KAAKsL,eAAeU,SAClEhM,KAAKmM,gBAAkBJ,EAASnF,QAAOvF,GAAQA,EAAKxB,KAAOG,KAAKsL,eAAezL,GAAG,KAAI,GAElFG,KAAKmM,iBAAiBM,aACxBzM,KAAKgC,IAAIG,GAAG,YAAanC,KAAK0M,QAC9B1M,KAAKgC,IAAIG,GAAG,UAAWnC,KAAK2M,gBAEhC,CAEJ,EACAD,OAAQrB,GAGN,GAAIrL,KAAKwL,UAAYxL,KAAKmM,gBAAiB,CACzC,MAAMxJ,EAAQ,CACZwJ,gBAAiBnM,KAAKmM,gBACtBS,OAAQ3I,OAAO4I,OAAOxB,EAAMuB,SAE9B5M,KAAKqM,MAAM,OAAQ1J,EAIrB,CACF,EACAgK,eAAgBtB,GACVrL,KAAKmJ,QAAyC,IAA/BkC,EAAMiB,cAAcC,SAErCvM,KAAKgC,IAAIyJ,YAAYC,MAAMC,OAAS,UACpC3L,KAAKgC,IAAI8K,IAAI,YAAa9M,KAAK0M,QAG/B1M,KAAKuL,cAAe,EACpBvL,KAAKwL,UAAW,EAGhBxL,KAAKgC,IAAIyJ,YAAYC,MAAMC,OAAS,GAChC3L,KAAKsL,gBACPtL,KAAKgC,IAAIiK,gBACP,CAAE/D,OAAQlI,KAAKsL,eAAeU,QAASnM,GAAIG,KAAKsL,eAAezL,GAAG,IAClE,CAAEqM,OAAO,IAGblM,KAAKsL,eAAiB,KACtBtL,KAAKgC,IAAI8K,IAAI,UAAW9M,KAAK2M,gBAEjC,IE/GJ,GAXgB,OACd,EACA,EHmCoB,IGjCpB,EACA,KACA,WACA,MAI8B,Q,2GCPhC,MAAM,EAAQ,EAAQ,MCX4G,EDclI,CACE1J,KAAM,cACNuB,WAAY,CACVuI,OAAM,KACNC,qBAAoB,KACpBC,gBAAe,KACf9B,gBAAe,KACf+B,WAAU,GAGZzI,KAAK,KACI,CACLuE,aAAa,EACbtB,gBAAiB,4FACjBkD,qBAAqB,EACrBuC,KAAM,KACNhF,KAAM,KACNc,MAAO,CAAC,EACRhB,UAAU,EACViC,gBAAiB,KACjBV,YAAa4D,EAAA,KAGjBjI,SAAU,CACRsC,WAAc,OAAOzH,KAAK0E,OAAOC,QAAQ8C,QAAS,EAClD4F,gBAAmB,OAAOrN,KAAK0E,OAAOC,QAAQ0I,aAAc,EAC5DnE,cAAiB,OAAOlJ,KAAK0E,OAAOC,QAAQuE,WAAY,EACxDkE,UAAa,OAAOpN,KAAK0E,OAAOC,QAAQ,iBAAkB,EAC1DS,SAAY,OAAOpF,KAAK0E,OAAOC,QAAQ,gBAAiB,EACxDU,SAAY,OAAOrF,KAAK0E,OAAOC,QAAQ,gBAAiB,EACxDlC,eAAkB,OAAOzC,KAAK0E,OAAOC,QAAQ,gBAAiB,EAC9DnC,UAAa,OAAOxC,KAAK0E,OAAOC,QAAQ,iBAAkB,EAC1Db,QAAW,OAAO9D,KAAK0E,OAAOC,QAAQ,eAAgB,EACtDR,eAAkB,OAAOnE,KAAK0E,OAAOC,QAAQ,sBAAuB,GAEtEW,MAAO,CACLmC,WACE,IACEzH,KAAKgC,IAAIsL,YAAY,SACvB,CAAE,MAAOC,GAAM,CACjB,EACArD,gBAAiB3E,GAAOvF,KAAK0E,OAAOuB,OAAO,uBAAwBV,EAAK,GAG1EiI,gBAEE,IACExN,KAAKgC,IAAIsL,YAAY,SACvB,CAAE,MAAOC,GAAM,CACjB,EAEA9H,UACEzF,KAAKkK,gBAAkBlK,KAAKoN,OAC9B,EACAvH,QAAS,CACP+B,YAAayD,GACXA,EAAMrJ,IAAIyL,WAAWC,UACrB1N,KAAKgC,IAAMqJ,EAAMrJ,IACjBhC,KAAKgC,IAAIG,GAAG,UAAWnC,KAAK2N,WAC5B3N,KAAKgC,IAAIG,GAAG,UAAWnC,KAAK2N,WAC5B3N,KAAKiI,UAAW,EAChBjI,KAAK2N,YAEL3N,KAAKgJ,aAAc,CACrB,EACA2E,YACE3N,KAAKmN,KAAOnN,KAAKgC,IAAI2L,YACrB,MAAMR,GAAO,OAAY,CAACnN,KAAKmN,KAAKS,IAAIC,IAAK7N,KAAKmN,KAAKS,IAAIE,IAAK9N,KAAKmN,KAAKY,IAAIF,IAAK7N,KAAKmN,KAAKY,IAAID,MACjG9N,KAAKmI,MAAO,OAAOgF,GAAO,IAAOnN,KAAKmN,KAAKY,IAAID,IAAM9N,KAAKmN,KAAKS,IAAIE,KAAM,CAAElM,MAAO,YAClF5B,KAAKmI,KAAK6F,SAASC,YAAY,GAAKjO,KAAKmI,KAAK6F,SAASC,YAAY,GAAGC,SACxE,EACAlG,eAAgBzC,GACdvF,KAAKiI,UAAYjI,KAAKiI,SAClBjI,KAAKiI,UACPjI,KAAKgC,IAAI8K,IAAI,UAAW9M,KAAK2N,WAC7B3N,KAAKgC,IAAI8K,IAAI,UAAW9M,KAAK2N,WAC7B3N,KAAKmO,WACLnO,KAAK0E,OAAOuB,OAAO,qBACjB,CAAEvE,KAAe,6CAA+C+E,WAAW,MAE7EzG,KAAKgC,IAAIG,GAAG,UAAWnC,KAAK2N,WAC5B3N,KAAKgC,IAAIG,GAAG,UAAWnC,KAAK2N,WAC5B3N,KAAK2N,YACL3N,KAAK0E,OAAOuB,OAAO,qBACjB,CAAEvE,KAAM,GAAI+E,WAAW,IAE7B,EACAoC,UACM7I,KAAKiI,WACPjI,KAAKgC,IAAIyJ,YAAYC,MAAMC,OAAS,UAExC,EACA5C,WACM/I,KAAKiI,WACPjI,KAAKgC,IAAIyJ,YAAYC,MAAMC,OAAS,GAExC,EAEAwC,WACE,MAAMlF,EAAQmF,gBAAgBpO,KAAKkJ,aAC7Bf,EAAOnI,KAAKmI,KAAK6F,SAASC,YAAY,GAE5C9F,EAAKkG,MAAM,EAAGlG,EAAK1E,OAAS,GAAGkC,SAC7B,CAAC2I,EAAOC,IAAQtF,EAAM8C,SAASpM,KAAK,IAAM2O,EAAO,CAAErE,MAAO,EAAMuE,WAAYC,iBAAkBF,OAEhGvO,KAAKiJ,MAAQA,CACf,EACAI,SAAUgC,GACR,MAAMkD,EAAMlD,EAAMc,gBAAgBM,WAAWgC,iBACvCtG,EAAOnI,KAAKmI,KAAK6F,SAASC,YAAY,GAC5C9F,EAAKoG,GAAOlD,EAAMuB,OACN,IAAR2B,IAEFpG,EAAKA,EAAK1E,OAAS,GAAK4H,EAAMuB,QAEhC5M,KAAKmO,UACP,EACA5E,WAAY8B,GACV,MAAMkD,EAAMlD,EAAMc,gBAAgBM,WAAWgC,iBACvCtG,EAAOnI,KAAKmI,KAAK6F,SAASC,YAAY,GACxC9F,EAAK1E,QAAU,EACjBzD,KAAK0E,OAAOuB,OAAO,qBACjB,CAAEvE,KAAe,wBAA0B+E,WAAW,IACvC,IAAR8H,EACTvO,KAAK0E,OAAOuB,OAAO,qBACjB,CAAEvE,KAAe,uCAAyC+E,WAAW,KAEvEzG,KAAKmI,KAAK6F,SAASC,YAAY,GAAK,IAAI9F,EAAKkG,MAAM,EAAGE,MAASpG,EAAKkG,MAAME,EAAM,IAChFvO,KAAKmO,WAET,EACAtG,QAASwD,GACP,GAAIrL,KAAKiI,SAAU,CACjB,MAAME,EAAOnI,KAAKmI,KAAK6F,SAASC,YAAY,GACtCrB,EAASvB,EAAMS,YAAYc,OAC3B8B,EAAW,IAAWvG,GACtBwG,EAAe,IAAM1K,OAAO4I,OAAOD,IAGnCgC,GAFU,OAAmBF,EAAUC,EAAc,CAAE/M,MAAO,eAEzC6K,WAAWxC,MAAQ,EAC9C9B,EAAK0G,OAAOD,EAAY,EAAG3K,OAAO4I,OAAOD,IACzC5M,KAAKmO,UACP,CACF,EAEAhE,YACE,GAAInK,KAAKqN,cAEP,GADArN,KAAK0E,OAAOuB,OAAO,oBACfjG,KAAKiI,SAAU,CACjB,MAAME,EAAOnI,KAAKmI,KAAK6F,SAASC,YAAY,GAC5CjO,KAAK0E,OAAOyB,SAAS,wBAAyB,CAAE2I,OAAQ3G,EAAM4G,OAAQ,QACxE,KAAO,CACL,MAAM5B,EAAO,CAACnN,KAAKmN,KAAKS,IAAIE,IAAK9N,KAAKmN,KAAKS,IAAIC,IAAK7N,KAAKmN,KAAKY,IAAID,IAAK9N,KAAKmN,KAAKY,IAAIF,KACrF7N,KAAK0E,OAAOyB,SAAS,wBAAyB,CAAE2I,OAAQ3B,EAAM4B,OAAQ,QACxE,MAEA/O,KAAK4K,qBAAsB,CAE/B,EAEAH,uBACEzK,KAAK0E,OAAOuB,OAAO,aAAc,KACjCjG,KAAK0E,OAAOuB,OAAO,aAAc,KACjCjG,KAAK4K,qBAAsB,EAC3B5K,KAAKmK,WACP,I,eExKA,EAAU,CAAC,EAEf,EAAQjD,kBAAoB,IAC5B,EAAQC,cAAgB,IAElB,EAAQC,OAAS,SAAc,KAAM,QAE3C,EAAQC,OAAS,IACjB,EAAQC,mBAAqB,IAEhB,IAAI,IAAS,GAKJ,KAAW,IAAQC,QAAS,IAAQA,OCP1D,MCnBiI,ECIjI,CACEtE,KAAM,gBACNuB,WAAY,CACVwK,iBAAgB,EAChBC,aFAY,OACd,EACA,ERgVoB,IQ9UpB,EACA,KACA,WACA,MAI8B,SET9B7D,MAAO,CACL9K,MAAO,CACLkB,KAAM0N,MACNC,QAAS,IAAM,KAGnB1K,KAAK,KACI,CACLlE,IAAK,IAGT4E,SAAU,CACRkI,gBAAmB,OAAOrN,KAAK0E,OAAOC,QAAQ0I,aAAc,GAE9D/H,MAAO,CACL/E,IAAKgF,GAAO,GAEdM,QAAS,CAET,G,eClBE,EAAU,CAAC,EAEf,EAAQqB,kBAAoB,IAC5B,EAAQC,cAAgB,IAElB,EAAQC,OAAS,SAAc,KAAM,QAE3C,EAAQC,OAAS,IACjB,EAAQC,mBAAqB,IAEhB,IAAI,IAAS,GAKJ,KAAW,IAAQC,QAAS,IAAQA,OCP1D,SAXgB,OACd,EACAzH,ElBkCoB,IkBhCpB,EACA,KACA,WACA,MAI8B,O","sources":["webpack://quetzal-network-editor/./src/components/microservices/MatrixRoadCaster.vue?3ca5","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?3d7b","webpack://quetzal-network-editor/./src/pages/Microservices.vue?48b2","webpack://quetzal-network-editor/./src/pages/Microservices.vue?8fe4","webpack://quetzal-network-editor/./src/components/microservices/MatrixRoadCaster.vue?552c","webpack://quetzal-network-editor/src/components/microservices/MatrixRoadCaster.vue","webpack://quetzal-network-editor/./src/components/microservices/MatrixRoadCaster.vue?ca81","webpack://quetzal-network-editor/./src/components/microservices/MatrixRoadCaster.vue?2ae7","webpack://quetzal-network-editor/./src/components/microservices/MatrixRoadCaster.vue","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?3bba","webpack://quetzal-network-editor/./src/components/microservices/NodesLayer.vue?7839","webpack://quetzal-network-editor/src/components/microservices/NodesLayer.vue","webpack://quetzal-network-editor/./src/components/microservices/NodesLayer.vue?5555","webpack://quetzal-network-editor/./src/components/microservices/NodesLayer.vue","webpack://quetzal-network-editor/src/components/microservices/OSMImporter.vue","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?22ee","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?0294","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue","webpack://quetzal-network-editor/./src/pages/Microservices.vue?2709","webpack://quetzal-network-editor/src/pages/Microservices.vue","webpack://quetzal-network-editor/./src/pages/Microservices.vue?bf3e","webpack://quetzal-network-editor/./src/pages/Microservices.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.container[data-v-096c1da2]{width:100%;overflow:hidden;margin-left:0 auto;margin-right:0 auto;padding:0 0 0 0}.layout[data-v-096c1da2]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-096c1da2]{height:100%;width:100%;background-color:rgba(0,0,0,.5);position:absolute}.card[data-v-096c1da2]{height:100%;overflow-y:auto;padding:2.5rem}.card2[data-v-096c1da2]{height:100%;overflow-y:auto;padding:2.5rem;margin-right:3rem}.v-card__text[data-v-096c1da2]{max-height:80%;overflow-y:auto}.row[data-v-096c1da2]{height:calc(100% - 38px)}.col[data-v-096c1da2]{max-height:100%}.title[data-v-096c1da2]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:3.5em;color:#b5e0d6 !important;font-weight:bold}.subtitle[data-v-096c1da2]{font-size:2em;color:var(--v-secondary-dark);font-weight:bold;margin:10px;margin-left:0px}.card button[data-v-096c1da2]{margin-top:0px}.background[data-v-096c1da2]{background-color:var(--v-background-base)}div.gallery[data-v-096c1da2]{margin:5px;background-color:var(--v-white-base);border:1px solid var(--v-lightgrey-base);float:left;width:50rem}div.gallery[data-v-096c1da2]:hover{border:1px solid var(--v-darkgrey-base)}div.gallery img[data-v-096c1da2]{width:100%;height:auto}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/microservices/MatrixRoadCaster.vue\"],\"names\":[],\"mappings\":\"AAEA,4BACE,UAAA,CACA,eAAA,CACA,kBAAA,CACA,mBAAA,CACA,eAAA,CAEF,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,+BAAA,CACA,iBAAA,CAEF,uBACE,WAAA,CACA,eAAA,CACA,cAAA,CAEF,wBACE,WAAA,CACA,eAAA,CACA,cAAA,CACA,iBAAA,CAGF,+BACE,cAAA,CACA,eAAA,CAEF,sBACE,wBAAA,CAEF,sBACE,eAAA,CAEF,wBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,wBAAA,CACA,gBAAA,CAEF,2BACE,aAAA,CACA,6BAAA,CACA,gBAAA,CACA,WAAA,CACA,eAAA,CAEF,8BACE,cAAA,CAEF,6BACE,yCAAA,CAGF,6BACE,UAAA,CACA,oCAAA,CACA,wCAAA,CACA,UAAA,CACA,WAAA,CAGF,mCACE,uCAAA,CAGF,iCACE,UAAA,CACA,WAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.container {\\n  width: 100%;\\n  overflow: hidden;\\n  margin-left: 0 auto;\\n  margin-right: 0 auto;\\n  padding: 0 0 0 0;\\n}\\n.layout {\\n  position: absolute;\\n  width: calc(100%);\\n  height: calc(100% - 50px);\\n  display: flex;\\n  flex-flow: row;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.layout-overlay {\\n  height: 100%;\\n  width: 100%;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  position: absolute;\\n}\\n.card {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 2.5rem;\\n}\\n.card2 {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 2.5rem;\\n  margin-right: 3rem;\\n}\\n\\n.v-card__text {\\n  max-height: 80%;\\n  overflow-y: auto;\\n}\\n.row {\\n  height: calc(100% - 38px)\\n}\\n.col {\\n  max-height: 100%;\\n}\\n.title {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 3.5em;\\n  color: $primary !important;\\n  font-weight: bold;\\n}\\n.subtitle {\\n  font-size: 2em;\\n  color:var(--v-secondary-dark);\\n  font-weight: bold;\\n  margin: 10px;\\n  margin-left: 0px;\\n}\\n.card button {\\n  margin-top: 0px;\\n}\\n.background {\\n  background-color:var(--v-background-base);\\n}\\n\\ndiv.gallery {\\n  margin: 5px;\\n  background-color: var(--v-white-base);\\n  border: 1px solid var(--v-lightgrey-base);\\n  float: left;\\n  width: 50rem;\\n}\\n\\ndiv.gallery:hover {\\n  border: 1px solid var(--v-darkgrey-base);\\n}\\n\\ndiv.gallery img {\\n  width: 100%;\\n  height: auto;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.card[data-v-51b2b884]{height:100%;overflow-y:auto;padding:2.5rem}.map[data-v-51b2b884]{max-width:100rem;width:50rem;height:35rem}.v-card__text[data-v-51b2b884]{padding:0px 24px 0px}.freeform-button[data-v-51b2b884]{position:absolute;top:5px;right:5px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/microservices/OSMImporter.vue\"],\"names\":[],\"mappings\":\"AAGA,uBACE,WAAA,CACA,eAAA,CACA,cAAA,CAEF,sBACE,gBAAA,CACA,WAAA,CACA,YAAA,CAEF,+BACI,oBAAA,CAEJ,kCACE,iBAAA,CACA,OAAA,CACA,SAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n\\n.card {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 2.5rem;\\n}\\n.map {\\n  max-width: 100rem;\\n  width:50rem;\\n  height: 35rem;\\n}\\n.v-card__text {\\n    padding: 0px 24px 0px;\\n}\\n.freeform-button {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.layout[data-v-bd9695f2]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-bd9695f2]{height:100%;width:100%;background-color:var(--v-background-base);position:absolute}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/Microservices.vue\"],\"names\":[],\"mappings\":\"AAEA,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,yCAAA,CAEA,iBAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.layout {\\n  position: absolute;\\n  width: calc(100%);\\n  height: calc(100% - 50px);\\n  display: flex;\\n  flex-flow: row;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.layout-overlay {\\n  height: 100%;\\n  width: 100%;\\n  background-color:var(--v-background-base);\\n\\n  position: absolute;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"v-tabs\",\n        {\n          attrs: { centered: \"\" },\n          model: {\n            value: _vm.tab,\n            callback: function ($$v) {\n              _vm.tab = $$v\n            },\n            expression: \"tab\",\n          },\n        },\n        [\n          _c(\"v-tab\", [_vm._v(\"OSM importer\")]),\n          _vm._v(\" \"),\n          _c(\"v-tab\", [_vm._v(\"Matrix Road Caster\")]),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"layout\" },\n        [\n          _c(\"div\", { staticClass: \"layout-overlay\" }),\n          _vm._v(\" \"),\n          _vm.tab === 0\n            ? _c(\"OSMImporter\")\n            : _vm.tab === 1\n            ? _c(\"MatrixRoadCaster\")\n            : _vm._e(),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"v-row\",\n    { staticClass: \"ma-0 pa-2 background\" },\n    [\n      _c(\n        \"v-col\",\n        [\n          _c(\n            \"v-card\",\n            { staticClass: \"card\" },\n            [\n              _c(\"v-card-title\", { staticClass: \"subtitle\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"ML Matrix Road Caster\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\"p\", [\n                _vm._v(\n                  \" \" +\n                    _vm._s(\n                      _vm.$gettext(\n                        \"1) Find n zones centroids using a Kmean clustering on the nodes\"\n                      )\n                    )\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\"p\", [\n                _vm._v(\n                  \" \" +\n                    _vm._s(\n                      _vm.$gettext(\n                        \"2) Call the Here Matrix API on random OD ( around 1% is sufficient )\"\n                      )\n                    )\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\"p\", [\n                _vm._v(\n                  \" \" +\n                    _vm._s(\n                      _vm.$gettext(\n                        \"3) Interpolate every other OD time with an hybrid Machine learning model\"\n                      )\n                    )\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\"p\", [\n                _vm._v(\n                  \" \" +\n                    _vm._s(\n                      _vm.$gettext(\n                        \"4) ajust the speed on the road network to match the routing time with the OD time using an iterative algorithm\"\n                      )\n                    )\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-form\",\n                {\n                  ref: \"form\",\n                  attrs: { \"lazy-validation\": \"\" },\n                  model: {\n                    value: _vm.validForm,\n                    callback: function ($$v) {\n                      _vm.validForm = $$v\n                    },\n                    expression: \"validForm\",\n                  },\n                },\n                _vm._l(_vm.parameters, function (item, key) {\n                  return _c(\n                    \"div\",\n                    { key: key },\n                    [\n                      typeof item.items === \"undefined\"\n                        ? _c(\"v-text-field\", {\n                            attrs: {\n                              type: item.type,\n                              label: _vm.$gettext(item.text),\n                              suffix: item.units,\n                              hint: _vm.showHint ? _vm.$gettext(item.hint) : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              rules: item.rules.map((rule) => _vm.rules[rule]),\n                              required: \"\",\n                            },\n                            on: { wheel: () => {} },\n                            model: {\n                              value: item.value,\n                              callback: function ($$v) {\n                                _vm.$set(item, \"value\", $$v)\n                              },\n                              expression: \"item.value\",\n                            },\n                          })\n                        : _c(\"v-select\", {\n                            attrs: {\n                              type: item.type,\n                              items: item.items,\n                              label: _vm.$gettext(item.text),\n                              suffix: item.units,\n                              hint: _vm.showHint ? _vm.$gettext(item.hint) : \"\",\n                              \"persistent-hint\": _vm.showHint,\n                              rules: item.rules.map((rule) => _vm.rules[rule]),\n                              required: \"\",\n                            },\n                            on: { wheel: () => {} },\n                            model: {\n                              value: item.value,\n                              callback: function ($$v) {\n                                _vm.$set(item, \"value\", $$v)\n                              },\n                              expression: \"item.value\",\n                            },\n                          }),\n                    ],\n                    1\n                  )\n                }),\n                0\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: {\n                        color: \"success\",\n                        loading: _vm.running || _vm.importStatus === \"RUNNING\",\n                        disabled:\n                          _vm.running ||\n                          _vm.importStatus === \"RUNNING\" ||\n                          !_vm.validForm,\n                      },\n                      on: {\n                        click: function ($event) {\n                          return _vm.run()\n                        },\n                      },\n                    },\n                    [\n                      _c(\n                        \"v-icon\",\n                        {\n                          staticStyle: { \"margin-right\": \"10px\" },\n                          attrs: { small: \"\" },\n                        },\n                        [_vm._v(\"\\n            fa-solid fa-play\\n          \")]\n                      ),\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Run\")) +\n                          \"\\n        \"\n                      ),\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      directives: [\n                        {\n                          name: \"show\",\n                          rawName: \"v-show\",\n                          value: _vm.importStatus == \"RUNNING\",\n                          expression: \"importStatus == 'RUNNING'\",\n                        },\n                      ],\n                      attrs: { color: \"grey\", text: \"\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.stopRun()\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Abort\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-card-text\",\n                    {\n                      directives: [\n                        {\n                          name: \"show\",\n                          rawName: \"v-show\",\n                          value: _vm.importStatus == \"RUNNING\",\n                          expression: \"importStatus == 'RUNNING'\",\n                        },\n                      ],\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          ~ \" +\n                          _vm._s(\n                            _vm.timer > 0\n                              ? Math.ceil(_vm.timer / 60)\n                              : _vm.$gettext(\"less than 1\")\n                          ) +\n                          _vm._s(_vm.$gettext(\" minutes remaining\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { icon: \"\", small: \"\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.showHint = !_vm.showHint\n                        },\n                      },\n                    },\n                    [_c(\"v-icon\", [_vm._v(\"far fa-question-circle small\")])],\n                    1\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-col\",\n        [\n          _c(\n            \"v-card\",\n            { staticClass: \"card2\" },\n            [\n              _c(\"v-card-title\", { staticClass: \"subtitle\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Calibration Results\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  directives: [\n                    {\n                      name: \"show\",\n                      rawName: \"v-show\",\n                      value: _vm.imgs.length > 0,\n                      expression: \"imgs.length>0\",\n                    },\n                  ],\n                  attrs: { loading: _vm.applying, disabled: _vm.applying },\n                  on: { click: _vm.ApplyResults },\n                },\n                [\n                  _c(\n                    \"v-icon\",\n                    {\n                      staticStyle: { \"margin-right\": \"10px\" },\n                      attrs: { small: \"\" },\n                    },\n                    [_vm._v(\"\\n          fa-solid fa-upload\\n        \")]\n                  ),\n                  _vm._v(\n                    \"\\n        \" +\n                      _vm._s(_vm.$gettext(\"Apply Road links to project\")) +\n                      \"\\n      \"\n                  ),\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  directives: [\n                    {\n                      name: \"show\",\n                      rawName: \"v-show\",\n                      value: _vm.imgs.length > 0,\n                      expression: \"imgs.length>0\",\n                    },\n                  ],\n                  attrs: { loading: _vm.exporting, disabled: _vm.exporting },\n                  on: { click: _vm.download },\n                },\n                [\n                  _c(\n                    \"v-icon\",\n                    {\n                      staticStyle: { \"margin-right\": \"10px\" },\n                      attrs: { small: \"\" },\n                    },\n                    [_vm._v(\"\\n          fa-solid fa-download\\n        \")]\n                  ),\n                  _vm._v(\n                    \"\\n        \" + _vm._s(_vm.$gettext(\"Download\")) + \"\\n      \"\n                  ),\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _vm.error\n                ? _c(\n                    \"v-alert\",\n                    {\n                      attrs: {\n                        dense: \"\",\n                        outlined: \"\",\n                        text: \"\",\n                        type: \"error\",\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(\n                            _vm.$gettext(\n                              \"Service ended with an execution error or have been aborted. \\\n          Please retry. If the problem persist, contact us.\"\n                            )\n                          ) +\n                          \"\\n        \"\n                      ),\n                      _vm._l(Object.keys(_vm.errorMessage), function (key) {\n                        return _c(\"p\", { key: key }, [\n                          _c(\"b\", [_vm._v(_vm._s(key) + \": \")]),\n                          _vm._v(_vm._s(_vm.errorMessage[key]) + \"\\n        \"),\n                        ])\n                      }),\n                    ],\n                    2\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm._l(_vm.imgs, function (img, key) {\n                return _c(\n                  \"div\",\n                  { key: key, staticClass: \"gallery\" },\n                  [\n                    _c(\"v-img\", {\n                      attrs: { src: img, alt: \"image\", contain: \"\" },\n                    }),\n                  ],\n                  1\n                )\n              }),\n            ],\n            2\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport s3 from '@src/AWSClient'\n\nconst $gettext = s => s\n\nexport default {\n  name: 'MatrixRoadCaster',\n  components: {\n  },\n\n  data () {\n    return {\n      imgs: [],\n      exporting: false,\n      applying: false,\n      validForm: true,\n\n      parameters: [{\n        name: 'num_zones',\n        text: 'number of zones',\n        value: null,\n        type: 'Number',\n        units: '',\n        hint: 'number of zones. road nodes will be aggregate to form centroids',\n        rules: [\n          'required', 'largerThanZero',\n        ],\n      },\n      {\n        name: 'train_size',\n        text: 'number of OD (api call)',\n        value: null,\n        type: 'Number',\n        units: '',\n        hint: 'number of OD to get from the API, the rest will be interpolated with ML',\n        rules: [\n          'required', 'largerThanZero',\n        ],\n      },\n      {\n        name: 'date_time',\n        text: 'date Time',\n        value: null,\n        type: 'String',\n        units: '',\n        hint: 'DateTime in the past. (YYYY-MM-DDTHH:MM:SS(UTC-timezone) (-04:00 for montreal))',\n        rules: [\n          'required', 'dateTimeRule',\n        ],\n      },\n      {\n        name: 'ff_time_col',\n        text: 'freeflow time on roads',\n        value: null,\n        items: this.$store.getters.rlineAttributes,\n        type: 'String',\n        units: '',\n        hint: 'road links time (link length / speed) to use as a first approximation. this is the freeflow speed, or speed limit',\n        rules: [\n          'required',\n        ],\n      },\n      {\n        name: 'max_speed',\n        text: 'max speed on road',\n        value: null,\n        type: 'Number',\n        units: '',\n        hint: 'Maximum allowed speed on a road. applying an OD matrix on the road network could result il unrealistic speed if not used.',\n        rules: [\n          'required', 'largerThanZero',\n        ],\n      },\n      {\n        name: 'num_random_od',\n        text: 'number of OD to plot',\n        value: null,\n        type: 'Number',\n        units: '',\n        hint: 'number of OD calibration plot to produce. those are random OD.',\n        rules: [\n          'required', 'largerThanZero',\n        ],\n      },\n      {\n        name: 'hereApiKey',\n        text: 'HERE api key',\n        value: null,\n        type: 'String',\n        units: '',\n        hint: 'HERE api key to download a set of OD',\n        rules: [\n          'required',\n        ],\n      },\n      ],\n\n      showHint: false,\n      // eslint-disable-next-line max-len, no-useless-escape\n      re: /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/,\n      rules: {\n        required: v => !!v || $gettext('Required'),\n        largerThanZero: v => v > 0 || $gettext('should be larger than 0'),\n        nonNegative: v => v >= 0 || $gettext('should be larger or equal to 0'),\n        dateTimeRule: v => this.re.test(v) || $gettext('invalid date time'),\n      },\n\n    }\n  },\n  computed: {\n    bucket () { return this.$store.getters['runMRC/bucket'] },\n    callID () { return this.$store.getters['runMRC/callID'] },\n    timer () { return this.$store.getters['runMRC/timer'] },\n    importStatus () { return this.$store.getters['runMRC/status'] },\n    running () { return this.$store.getters['runMRC/running'] },\n    error () { return this.$store.getters['runMRC/error'] },\n    errorMessage () { return this.$store.getters['runMRC/errorMessage'] },\n\n  },\n  watch: {\n    importStatus (val) {\n      if (val === 'SUCCEEDED') {\n        this.getImagesURL()\n      }\n    },\n  },\n  created () {\n    // init params to the store ones.\n    const storeParams = this.$store.getters['runMRC/parameters']\n    // eslint-disable-next-line no-return-assign\n    this.parameters.forEach(param => param.value = storeParams[param.name])\n    // this.callID = '7617f433-b80e-4570-bacd-9b26dc1c1311'\n    // if null, we create a uuid. else we fetch the data on S3\n    if (this.callID) {\n      this.getImagesURL()\n    }\n  },\n  methods: {\n    run () {\n      if (!this.$refs.form.validate()) { return }\n      this.$store.commit('runMRC/setCallID')\n      const inputs = { callID: this.callID }\n      this.parameters.forEach(item => {\n        inputs[item.name] = item.value\n      })\n      this.$store.dispatch('runMRC/startExecution', {\n        rlinks: this.$store.getters.rlinks,\n        rnodes: this.$store.getters.rnodes,\n        parameters: inputs,\n      })\n    },\n    stopRun () { this.$store.dispatch('runMRC/stopExecution') },\n\n    async ApplyResults () {\n      this.applying = true\n      const rlinks = await s3.readJson(this.bucket, this.callID.concat('/road_links.geojson'))\n      this.$store.commit('loadrLinks', rlinks)\n      const rnodes = await s3.readJson(this.bucket, this.callID.concat('/road_nodes.geojson'))\n      this.$store.commit('loadrNodes', rnodes)\n      this.applying = false\n      this.$store.commit('changeNotification',\n        { text: $gettext('Road links applied!'), autoClose: true, color: 'success' })\n    },\n    async getImagesURL () {\n      const outputsFiles = await s3.listFiles(this.bucket, this.callID + '/')\n      const filesNames = outputsFiles.filter(name => name.endsWith('.png'))\n      for (const file of filesNames) {\n        const url = await s3.getImagesURL(this.bucket, file)\n        this.imgs.push(url)\n      }\n    },\n    async download () {\n      this.exporting = true\n      await s3.downloadFolder(this.bucket, this.callID.concat('/'))\n      this.exporting = false\n    },\n\n  },\n}\n</script>\n<template>\n  <v-row class=\"ma-0 pa-2 background\">\n    <v-col>\n      <v-card class=\"card\">\n        <v-card-title class=\"subtitle\">\n          {{ $gettext('ML Matrix Road Caster') }}\n        </v-card-title>\n        <p> {{ $gettext('1) Find n zones centroids using a Kmean clustering on the nodes') }}</p>\n        <p> {{ $gettext('2) Call the Here Matrix API on random OD ( around 1% is sufficient )') }}</p>\n        <p> {{ $gettext('3) Interpolate every other OD time with an hybrid Machine learning model') }}</p>\n        <p> {{ $gettext('4) ajust the speed on the road network to match the routing time with the OD time using an iterative algorithm') }}</p>\n\n        <v-form\n          ref=\"form\"\n          v-model=\"validForm\"\n          lazy-validation\n        >\n          <div\n            v-for=\"(item, key) in parameters\"\n            :key=\"key\"\n          >\n            <v-text-field\n              v-if=\"typeof item.items === 'undefined'\"\n              v-model=\"item.value\"\n              :type=\"item.type\"\n              :label=\"$gettext(item.text)\"\n              :suffix=\"item.units\"\n              :hint=\"showHint? $gettext(item.hint): ''\"\n              :persistent-hint=\"showHint\"\n              :rules=\"item.rules.map((rule) => rules[rule])\"\n              required\n              @wheel=\"()=>{}\"\n            />\n            <v-select\n              v-else\n              v-model=\"item.value\"\n              :type=\"item.type\"\n              :items=\"item.items\"\n              :label=\"$gettext(item.text)\"\n              :suffix=\"item.units\"\n              :hint=\"showHint? $gettext(item.hint): ''\"\n              :persistent-hint=\"showHint\"\n              :rules=\"item.rules.map((rule) => rules[rule])\"\n              required\n              @wheel=\"()=>{}\"\n            />\n          </div>\n        </v-form>\n        <v-card-actions>\n          <v-btn\n            color=\"success\"\n            :loading=\"running || importStatus === 'RUNNING'\"\n            :disabled=\"running || importStatus === 'RUNNING' || !validForm\"\n            @click=\"run()\"\n          >\n            <v-icon\n              small\n              style=\"margin-right: 10px;\"\n            >\n              fa-solid fa-play\n            </v-icon>\n            {{ $gettext(\"Run\") }}\n          </v-btn>\n          <v-btn\n            v-show=\"importStatus == 'RUNNING'\"\n            color=\"grey\"\n            text\n            @click=\"stopRun()\"\n          >\n            {{ $gettext(\"Abort\") }}\n          </v-btn>\n          <v-card-text v-show=\"importStatus == 'RUNNING'\">\n            ~ {{ timer>0? Math.ceil(timer/60): $gettext('less than 1') }}{{ $gettext(' minutes remaining') }}\n          </v-card-text>\n          <v-spacer />\n          <v-btn\n            icon\n            small\n            @click=\"showHint = !showHint\"\n          >\n            <v-icon>far fa-question-circle small</v-icon>\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card class=\"card2\">\n        <v-card-title class=\"subtitle\">\n          {{ $gettext('Calibration Results') }}\n        </v-card-title>\n        <v-btn\n          v-show=\"imgs.length>0\"\n          :loading=\"applying\"\n          :disabled=\"applying\"\n          @click=\"ApplyResults\"\n        >\n          <v-icon\n            small\n            style=\"margin-right: 10px;\"\n          >\n            fa-solid fa-upload\n          </v-icon>\n          {{ $gettext('Apply Road links to project') }}\n        </v-btn>\n        <v-btn\n          v-show=\"imgs.length>0\"\n          :loading=\"exporting\"\n          :disabled=\"exporting\"\n          @click=\"download\"\n        >\n          <v-icon\n            small\n            style=\"margin-right: 10px;\"\n          >\n            fa-solid fa-download\n          </v-icon>\n          {{ $gettext('Download') }}\n        </v-btn>\n        <v-alert\n          v-if=\"error\"\n          dense\n          outlined\n          text\n          type=\"error\"\n        >\n          {{ $gettext(\"Service ended with an execution error or have been aborted. \\\n            Please retry. If the problem persist, contact us.\") }}\n          <p\n            v-for=\"key in Object.keys(errorMessage)\"\n            :key=\"key\"\n          >\n            <b>{{ key }}: </b>{{ errorMessage[key] }}\n          </p>\n        </v-alert>\n        <div\n          v-for=\"(img,key) in imgs\"\n          :key=\"key\"\n          class=\"gallery\"\n        >\n          <v-img\n            :src=\"img\"\n            :alt=\"'image'\"\n            contain\n          />\n        </div>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n<style lang=\"scss\" scoped>\n.container {\n  width: 100%;\n  overflow: hidden;\n  margin-left: 0 auto;\n  margin-right: 0 auto;\n  padding: 0 0 0 0;\n}\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: absolute;\n}\n.card {\n  height: 100%;\n  overflow-y: auto;\n  padding: 2.5rem;\n}\n.card2 {\n  height: 100%;\n  overflow-y: auto;\n  padding: 2.5rem;\n  margin-right: 3rem;\n}\n\n.v-card__text {\n  max-height: 80%;\n  overflow-y: auto;\n}\n.row {\n  height: calc(100% - 38px)\n}\n.col {\n  max-height: 100%;\n}\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 3.5em;\n  color: $primary !important;\n  font-weight: bold;\n}\n.subtitle {\n  font-size: 2em;\n  color:var(--v-secondary-dark);\n  font-weight: bold;\n  margin: 10px;\n  margin-left: 0px;\n}\n.card button {\n  margin-top: 0px;\n}\n.background {\n  background-color:var(--v-background-base);\n}\n\ndiv.gallery {\n  margin: 5px;\n  background-color: var(--v-white-base);\n  border: 1px solid var(--v-lightgrey-base);\n  float: left;\n  width: 50rem;\n}\n\ndiv.gallery:hover {\n  border: 1px solid var(--v-darkgrey-base);\n}\n\ndiv.gallery img {\n  width: 100%;\n  height: auto;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatrixRoadCaster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatrixRoadCaster.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatrixRoadCaster.vue?vue&type=style&index=0&id=096c1da2&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatrixRoadCaster.vue?vue&type=style&index=0&id=096c1da2&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MatrixRoadCaster.vue?vue&type=template&id=096c1da2&scoped=true&\"\nimport script from \"./MatrixRoadCaster.vue?vue&type=script&lang=js&\"\nexport * from \"./MatrixRoadCaster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MatrixRoadCaster.vue?vue&type=style&index=0&id=096c1da2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"096c1da2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"v-card\",\n        { staticClass: \"card\" },\n        [\n          _c(\"v-card-title\", [\n            _vm._v(\n              \"\\n      \" +\n                _vm._s(_vm.$gettext(\"Import OSM network in bounding box\")) +\n                \"\\n    \"\n            ),\n          ]),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-subtitle\",\n            [\n              _vm.error\n                ? _c(\n                    \"v-alert\",\n                    {\n                      attrs: {\n                        dense: \"\",\n                        width: \"50rem\",\n                        outlined: \"\",\n                        text: \"\",\n                        type: \"error\",\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(\n                            _vm.$gettext(\n                              \"There as been an error while importing OSM network. \\\n          Please try again. If the problem persist, contact us.\"\n                            )\n                          ) +\n                          \"\\n        \"\n                      ),\n                      _vm._l(Object.keys(_vm.errorMessage), function (key) {\n                        return _c(\"p\", { key: key }, [\n                          _c(\"b\", [_vm._v(_vm._s(key) + \": \")]),\n                          _vm._v(_vm._s(_vm.errorMessage[key]) + \"\\n        \"),\n                        ])\n                      }),\n                    ],\n                    2\n                  )\n                : _vm._e(),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-actions\",\n            [\n              _c(\n                \"MglMap\",\n                {\n                  key: _vm.mapStyle,\n                  staticClass: \"map\",\n                  attrs: {\n                    \"min-zoom\": 3,\n                    \"access-token\": _vm.mapboxPublicKey,\n                    \"map-style\": _vm.mapStyle,\n                  },\n                  on: { load: _vm.onMapLoaded, click: _vm.addNode },\n                },\n                [\n                  _c(\"MglScaleControl\", {\n                    attrs: { position: \"bottom-right\" },\n                  }),\n                  _vm._v(\" \"),\n                  _c(\"MglNavigationControl\", {\n                    attrs: { position: \"bottom-right\" },\n                  }),\n                  _vm._v(\" \"),\n                  [\n                    _c(\n                      \"v-btn\",\n                      {\n                        staticClass: \"freeform-button\",\n                        attrs: { fab: \"\", small: \"\" },\n                        on: { click: _vm.toggleFreeForm },\n                      },\n                      [\n                        _c(\"v-icon\", { attrs: { color: \"regular\" } }, [\n                          _vm._v(\n                            \"\\n              \" +\n                              _vm._s(\n                                _vm.freeForm\n                                  ? \"far fa-square\"\n                                  : \"fas fa-vector-square\"\n                              ) +\n                              \"\\n            \"\n                          ),\n                        ]),\n                      ],\n                      1\n                    ),\n                  ],\n                  _vm._v(\" \"),\n                  _c(\"MglGeojsonLayer\", {\n                    attrs: {\n                      \"source-id\": \"polygon\",\n                      source: {\n                        type: \"geojson\",\n                        data: _vm.poly,\n                        promoteId: \"index\",\n                      },\n                      \"layer-id\": \"poly\",\n                      layer: {\n                        interactive: true,\n                        type: \"fill\",\n                        paint: {\n                          \"fill-color\":\n                            _vm.$vuetify.theme.currentTheme.linksprimary, // blue color fill\n                          \"fill-opacity\": 0.3,\n                        },\n                      },\n                    },\n                    on: { mouseover: _vm.onHover, mouseleave: _vm.offHover },\n                  }),\n                  _vm._v(\" \"),\n                  _c(\"MglGeojsonLayer\", {\n                    attrs: {\n                      \"source-id\": \"polygon\",\n                      type: \"line\",\n                      source: \"polygon\",\n                      \"layer-id\": \"stroke\",\n                      layer: {\n                        type: \"line\",\n                        paint: {\n                          \"line-color\":\n                            _vm.$vuetify.theme.currentTheme.linksprimary,\n                          \"line-width\": 3,\n                        },\n                      },\n                    },\n                  }),\n                  _vm._v(\" \"),\n                  _vm.mapIsLoaded\n                    ? _c(\"NodesLayer\", {\n                        attrs: {\n                          map: _vm.map,\n                          nodes: _vm.freeForm ? _vm.nodes : _vm.nodesHeader,\n                          active: _vm.freeForm,\n                        },\n                        on: { move: _vm.moveNode, rightClick: _vm.removeNode },\n                      })\n                    : _vm._e(),\n                ],\n                2\n              ),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"v-divider\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-actions\",\n            [\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\"v-select\", {\n                attrs: {\n                  items: _vm.highwayList,\n                  attach: \"\",\n                  chips: \"\",\n                  \"menu-props\": { top: true, offsetY: true },\n                  label: \"Highways to import\",\n                  multiple: \"\",\n                },\n                scopedSlots: _vm._u([\n                  {\n                    key: \"selection\",\n                    fn: function ({ item, index }) {\n                      return [\n                        index <= 0\n                          ? _c(\"v-chip\", [_c(\"span\", [_vm._v(_vm._s(item))])])\n                          : _vm._e(),\n                        _vm._v(\" \"),\n                        index === 1\n                          ? _c(\n                              \"span\",\n                              { staticClass: \"grey--text text-caption\" },\n                              [\n                                _vm._v(\n                                  \"\\n            (+\" +\n                                    _vm._s(\n                                      _vm.selectedHighway.length -\n                                        1 +\n                                        \" \" +\n                                        _vm.$gettext(\"more\")\n                                    ) +\n                                    \" )\\n          \"\n                                ),\n                              ]\n                            )\n                          : _vm._e(),\n                      ]\n                    },\n                  },\n                ]),\n                model: {\n                  value: _vm.selectedHighway,\n                  callback: function ($$v) {\n                    _vm.selectedHighway = $$v\n                  },\n                  expression: \"selectedHighway\",\n                },\n              }),\n              _vm._v(\" \"),\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  attrs: {\n                    text: \"\",\n                    outlined: \"\",\n                    color: \"success\",\n                    loading: _vm.running,\n                    disabled: _vm.running,\n                  },\n                  on: { click: _vm.importOSM },\n                },\n                [\n                  _vm._v(\n                    \"\\n        \" + _vm._s(_vm.$gettext(\"Download\")) + \"\\n      \"\n                  ),\n                ]\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: { persistent: \"\", \"max-width\": \"500\" },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                return _vm.applyOverwriteDialog.apply(null, arguments)\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                _vm.showOverwriteDialog = false\n              },\n            ],\n          },\n          model: {\n            value: _vm.showOverwriteDialog,\n            callback: function ($$v) {\n              _vm.showOverwriteDialog = $$v\n            },\n            expression: \"showOverwriteDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            [\n              _c(\"v-card-title\", { staticClass: \"text-h5\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Overwrite current road network ?\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.showOverwriteDialog = !_vm.showOverwriteDialog\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"No\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: { click: _vm.applyOverwriteDialog },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Yes\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\"MglGeojsonLayer\", {\n    attrs: {\n      \"source-id\": \"nodes\",\n      source: {\n        type: \"geojson\",\n        data: _vm.nodes,\n        buffer: 0,\n        promoteId: \"index\",\n      },\n      \"layer-id\": \"nodes\",\n      layer: {\n        interactive: true,\n        type: \"circle\",\n        paint: {\n          \"circle-color\": \"#ffffff\",\n          \"circle-opacity\": 0.5,\n          \"circle-radius\": [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            10,\n            5,\n          ],\n          \"circle-blur\": [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            0.3,\n            0,\n          ],\n          \"circle-stroke-color\": _vm.$vuetify.theme.currentTheme.darkgrey,\n          \"circle-stroke-width\": 2,\n        },\n      },\n    },\n    on: {\n      mouseover: _vm.onCursor,\n      mouseleave: _vm.offCursor,\n      mousedown: _vm.moveNode,\n      contextmenu: _vm.rightClick,\n    },\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport { MglGeojsonLayer } from 'vue-mapbox'\n\nexport default {\n  name: 'NodesLayer',\n  components: {\n\n    MglGeojsonLayer,\n  },\n  props: ['map', 'nodes', 'active'],\n  event: ['move', 'rightClick'],\n\n  data () {\n    return {\n      hoveredStateId: null,\n      keepHovering: false,\n      dragNode: false,\n    }\n  },\n  computed: {\n\n  },\n  watch: {\n  },\n\n  created () {\n  },\n  methods: {\n\n    onCursor (event) {\n      if (this.active) {\n        if (this.hoveredStateId === null) {\n          this.map.getCanvas().style.cursor = 'pointer'\n          // get a list of all overID. if there is multiple superposed link get all of them!\n          const uniqueArray = [...new Set(event.mapboxEvent.features.map(item => item.id))]\n          this.hoveredStateId = { layerId: event.layerId, id: uniqueArray }\n          this.map.setFeatureState(\n            { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n            { hover: true },\n          )\n        }\n      }\n    },\n    offCursor (event) {\n      if (this.active) {\n      // todo: error warning is throw sometime when we move a node over another node or anchor.\n        if (this.hoveredStateId !== null) {\n          // eslint-disable-next-line max-len\n          // when we drag a node, we want to start dragging when we leave the node, but we will stay in hovering mode.\n          if (this.keepHovering) {\n            this.dragNode = true\n            // normal behaviours, hovering is false\n          } else {\n            this.map.getCanvas().style.cursor = ''\n            this.map.setFeatureState(\n              { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n              { hover: false },\n            )\n            this.hoveredStateId = null\n            // this.$emit('offHover', event)\n          }\n        }\n      }\n    },\n    rightClick (event) {\n      if (!this.dragNode && this.hoveredStateId?.layerId === 'nodes') {\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        const selectedFeature = features.filter(item => item.id === this.hoveredStateId.id[0])[0]\n        const click = {\n          selectedFeature: selectedFeature,\n        }\n        if (selectedFeature) {\n          this.$emit('rightClick', click)\n        }\n      }\n    },\n    moveNode (event) {\n      if (this.active && this.hoveredStateId?.layerId === 'nodes') {\n        if (event.mapboxEvent.originalEvent.button === 0) {\n          event.mapboxEvent.preventDefault() // prevent map control\n          this.map.getCanvas().style.cursor = 'grab'\n          // disable mouseLeave so we stay in hover state.\n          this.keepHovering = true\n          // get selected node\n          const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n          this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id[0])[0]\n          // get position\n          if (this.selectedFeature?.properties) {\n            this.map.on('mousemove', this.onMove)\n            this.map.on('mouseup', this.stopMovingNode)\n          }\n        }\n      }\n    },\n    onMove (event) {\n      // get position and update node position\n      // only if dragmode is activated (we just leave the node hovering state.)\n      if (this.dragNode && this.selectedFeature) {\n        const click = {\n          selectedFeature: this.selectedFeature,\n          lngLat: Object.values(event.lngLat),\n        }\n        this.$emit('move', click)\n        // rerender the anchor as they are getter and are not directly modified by the moverAnchor mutation.\n        // this.renderedAnchorrNodes.features = this.anchorrNodes.features.filter(node =>\n        //  booleanContains(this.bbox, node))\n      }\n    },\n    stopMovingNode (event) {\n      if (this.active && event.originalEvent.button === 0) {\n        // stop tracking position (moving node.)\n        this.map.getCanvas().style.cursor = 'pointer'\n        this.map.off('mousemove', this.onMove)\n\n        // enable popup and hovering off back. disable Dragmode\n        this.keepHovering = false\n        this.dragNode = false\n        // if we drag too quickly, offcursor it will not be call and the node will stay in hovering mode.\n        // calling offscursor will break the sticky node drawlink behaviour, so we only make its state back to hover-false\n        this.map.getCanvas().style.cursor = ''\n        if (this.hoveredStateId) {\n          this.map.setFeatureState(\n            { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n            { hover: false },\n          )\n        }\n        this.hoveredStateId = null\n        this.map.off('mouseup', this.stopMovingNode)\n      }\n    },\n\n  },\n\n}\n</script>\n<template>\n  <MglGeojsonLayer\n    source-id=\"nodes\"\n    :source=\"{\n      type: 'geojson',\n      data: nodes,\n      buffer: 0,\n      promoteId: 'index',\n    }\"\n    layer-id=\"nodes\"\n    :layer=\"{\n      interactive: true,\n      type: 'circle',\n      paint: {\n        'circle-color': '#ffffff',\n        'circle-opacity':0.5,\n        'circle-radius': ['case', ['boolean', ['feature-state', 'hover'], false], 10, 5],\n        'circle-blur': ['case', ['boolean', ['feature-state', 'hover'], false], 0.3, 0],\n        'circle-stroke-color': $vuetify.theme.currentTheme.darkgrey,\n        'circle-stroke-width': 2,\n      },\n    }\"\n    @mouseover=\"onCursor\"\n    @mouseleave=\"offCursor\"\n    @mousedown=\"moveNode\"\n    @contextmenu=\"rightClick\"\n  />\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodesLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodesLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NodesLayer.vue?vue&type=template&id=512658b6&scoped=true&\"\nimport script from \"./NodesLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./NodesLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"512658b6\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { MglMap, MglNavigationControl, MglScaleControl, MglGeojsonLayer } from 'vue-mapbox'\nimport NodesLayer from './NodesLayer.vue'\nimport buffer from '@turf/buffer'\nimport bboxPolygon from '@turf/bbox-polygon'\nimport Point from 'turf-point'\nimport Linestring from 'turf-linestring'\nimport nearestPointOnLine from '@turf/nearest-point-on-line'\nimport { highwayList } from '@constants/highway.js'\nimport linksBase from '@static/links_base.geojson'\nimport nodesBase from '@static/nodes_base.geojson'\nconst short = require('short-uuid')\nconst $gettext = s => s\n\nexport default {\n  name: 'OSMImporter',\n  components: {\n    MglMap,\n    MglNavigationControl,\n    MglScaleControl,\n    MglGeojsonLayer,\n    NodesLayer,\n  },\n\n  data () {\n    return {\n      mapIsLoaded: false,\n      mapboxPublicKey: process.env.VUE_APP_MAPBOX_PUBLIC_KEY,\n      showOverwriteDialog: false,\n      bbox: null,\n      poly: null,\n      nodes: {},\n      freeForm: false,\n      selectedHighway: null,\n      highwayList: highwayList,\n    }\n  },\n  computed: {\n    mapStyle () { return this.$store.getters.mapStyle },\n    rlinksIsEmpty () { return this.$store.getters.rlinksIsEmpty },\n    nodesHeader () { return this.$store.getters.nodesHeader },\n    highway () { return this.$store.getters['runOSM/highway'] },\n    bucket () { return this.$store.getters['runOSM/bucket'] },\n    callID () { return this.$store.getters['runOSM/callID'] },\n    importStatus () { return this.$store.getters['runOSM/status'] },\n    running () { return this.$store.getters['runOSM/running'] },\n    error () { return this.$store.getters['runOSM/error'] },\n    errorMessage () { return this.$store.getters['runOSM/errorMessage'] },\n  },\n  watch: {\n    mapStyle () {\n      try {\n        this.map.removeLayer('stroke')\n      } catch (err) {}\n    },\n    selectedHighway (val) { this.$store.commit('runOSM/changeHighway', val) },\n  },\n\n  beforeDestroy () {\n    // remove stroke layer as it use the polygon layer data.\n    try {\n      this.map.removeLayer('stroke')\n    } catch (err) {}\n  },\n\n  created () {\n    this.selectedHighway = this.highway\n  },\n  methods: {\n    onMapLoaded (event) {\n      event.map.dragRotate.disable()\n      this.map = event.map\n      this.map.on('dragend', this.getBounds)\n      this.map.on('zoomend', this.getBounds)\n      this.freeForm = false\n      this.getBounds()\n\n      this.mapIsLoaded = true\n    },\n    getBounds () {\n      this.bbox = this.map.getBounds()\n      const bbox = bboxPolygon([this.bbox._sw.lng, this.bbox._sw.lat, this.bbox._ne.lng, this.bbox._ne.lat])\n      this.poly = buffer(bbox, -0.1 * (this.bbox._ne.lat - this.bbox._sw.lat), { units: 'degrees' })\n      this.poly.geometry.coordinates[0] = this.poly.geometry.coordinates[0].reverse()\n    },\n    toggleFreeForm (val) {\n      this.freeForm = !this.freeForm\n      if (this.freeForm) {\n        this.map.off('dragend', this.getBounds)\n        this.map.off('zoomend', this.getBounds)\n        this.getNodes()\n        this.$store.commit('changeNotification',\n          { text: $gettext('Click to add points. Right click de remove'), autoClose: false })\n      } else {\n        this.map.on('dragend', this.getBounds)\n        this.map.on('zoomend', this.getBounds)\n        this.getBounds()\n        this.$store.commit('changeNotification',\n          { text: '', autoClose: true })\n      }\n    },\n    onHover () {\n      if (this.freeForm) {\n        this.map.getCanvas().style.cursor = 'pointer'\n      }\n    },\n    offHover () {\n      if (this.freeForm) {\n        this.map.getCanvas().style.cursor = ''\n      }\n    },\n\n    getNodes () {\n      const nodes = structuredClone(this.nodesHeader)\n      const poly = this.poly.geometry.coordinates[0]\n      // create points from poly. skip last one which is duplicated of the first one (square is 5 points)\n      poly.slice(0, poly.length - 1).forEach(\n        (point, idx) => nodes.features.push(Point(point, { index: short.generate(), coordinatesIndex: idx })),\n      )\n      this.nodes = nodes\n    },\n    moveNode (event) {\n      const idx = event.selectedFeature.properties.coordinatesIndex\n      const poly = this.poly.geometry.coordinates[0]\n      poly[idx] = event.lngLat\n      if (idx === 0) {\n        // last point is duplicated to first one (square have 5 points)\n        poly[poly.length - 1] = event.lngLat\n      }\n      this.getNodes()\n    },\n    removeNode (event) {\n      const idx = event.selectedFeature.properties.coordinatesIndex\n      const poly = this.poly.geometry.coordinates[0]\n      if (poly.length <= 4) {\n        this.$store.commit('changeNotification',\n          { text: $gettext('Cannot delete anymore'), autoClose: true })\n      } else if (idx === 0) {\n        this.$store.commit('changeNotification',\n          { text: $gettext('cannot delete first point of polygon'), autoClose: true })\n      } else {\n        this.poly.geometry.coordinates[0] = [...poly.slice(0, idx), ...poly.slice(idx + 1)]\n        this.getNodes()\n      }\n    },\n    addNode (event) {\n      if (this.freeForm) {\n        const poly = this.poly.geometry.coordinates[0]\n        const lngLat = event.mapboxEvent.lngLat\n        const linkGeom = Linestring(poly)\n        const clickedPoint = Point(Object.values(lngLat))\n        const snapped = nearestPointOnLine(linkGeom, clickedPoint, { units: 'kilometers' })\n        // for multiString, gives the index of the closest one, add +1 for the slice.\n        const sliceIndex = snapped.properties.index + 1\n        poly.splice(sliceIndex, 0, Object.values(lngLat))\n        this.getNodes()\n      }\n    },\n\n    importOSM () {\n      if (this.rlinksIsEmpty) {\n        this.$store.commit('runOSM/setCallID')\n        if (this.freeForm) {\n          const poly = this.poly.geometry.coordinates[0]\n          this.$store.dispatch('runOSM/startExecution', { coords: poly, method: 'poly' })\n        } else {\n          const bbox = [this.bbox._sw.lat, this.bbox._sw.lng, this.bbox._ne.lat, this.bbox._ne.lng]\n          this.$store.dispatch('runOSM/startExecution', { coords: bbox, method: 'bbox' })\n        }\n      } else {\n        this.showOverwriteDialog = true\n      }\n    },\n\n    applyOverwriteDialog () {\n      this.$store.commit('loadrLinks', linksBase)\n      this.$store.commit('loadrNodes', nodesBase)\n      this.showOverwriteDialog = false\n      this.importOSM()\n    },\n  },\n\n}\n</script>\n<template>\n  <section>\n    <v-card\n      class=\"card\"\n    >\n      <v-card-title>\n        {{ $gettext(\"Import OSM network in bounding box\") }}\n      </v-card-title>\n      <v-spacer />\n      <v-card-subtitle>\n        <v-alert\n          v-if=\"error\"\n          dense\n          width=\"50rem\"\n          outlined\n          text\n          type=\"error\"\n        >\n          {{ $gettext(\"There as been an error while importing OSM network. \\\n            Please try again. If the problem persist, contact us.\") }}\n          <p\n            v-for=\"key in Object.keys(errorMessage)\"\n            :key=\"key\"\n          >\n            <b>{{ key }}: </b>{{ errorMessage[key] }}\n          </p>\n        </v-alert>\n      </v-card-subtitle>\n      <v-card-actions>\n        <MglMap\n          :key=\"mapStyle\"\n          class=\"map\"\n          :min-zoom=\"3\"\n          :access-token=\"mapboxPublicKey\"\n          :map-style=\"mapStyle\"\n          @load=\"onMapLoaded\"\n          @click=\"addNode\"\n        >\n          <MglScaleControl position=\"bottom-right\" />\n          <MglNavigationControl position=\"bottom-right\" />\n          <template>\n            <v-btn\n              class=\"freeform-button\"\n              fab\n              small\n              @click=\"toggleFreeForm\"\n            >\n              <v-icon\n                color=\"regular\"\n              >\n                {{ freeForm? 'far fa-square':'fas fa-vector-square' }}\n              </v-icon>\n            </v-btn>\n          </template>\n\n          <MglGeojsonLayer\n            source-id=\"polygon\"\n            :source=\"{\n              type: 'geojson',\n              data: poly,\n              promoteId: 'index',\n            }\"\n            layer-id=\"poly\"\n            :layer=\"{\n              interactive: true,\n              type: 'fill',\n              'paint': {\n                'fill-color': $vuetify.theme.currentTheme.linksprimary, // blue color fill\n                'fill-opacity': 0.3,\n\n              },\n            }\"\n            @mouseover=\"onHover\"\n            @mouseleave=\"offHover\"\n          />\n\n          <MglGeojsonLayer\n            source-id=\"polygon\"\n            type=\"line\"\n            source=\"polygon\"\n            layer-id=\"stroke\"\n            :layer=\"{\n              type: 'line',\n              paint: {\n                'line-color':$vuetify.theme.currentTheme.linksprimary,\n                'line-width':3\n              }\n            }\"\n          />\n          <NodesLayer\n            v-if=\"mapIsLoaded\"\n            :map=\"map\"\n            :nodes=\"freeForm? nodes: nodesHeader\"\n            :active=\"freeForm\"\n            @move=\"moveNode\"\n            @rightClick=\"removeNode\"\n          />\n        </MglMap>\n      </v-card-actions>\n      <v-divider />\n\n      <v-card-actions>\n        <v-spacer />\n        <v-select\n          v-model=\"selectedHighway\"\n          :items=\"highwayList\"\n          attach\n          chips\n          :menu-props=\"{ top: true, offsetY: true }\"\n          label=\"Highways to import\"\n          multiple\n        >\n          <template v-slot:selection=\"{ item, index }\">\n            <v-chip v-if=\"index <= 0\">\n              <span>{{ item }}</span>\n            </v-chip>\n            <span\n              v-if=\"index === 1\"\n              class=\"grey--text text-caption\"\n            >\n              (+{{ selectedHighway.length - 1 + ' ' + $gettext('more') }} )\n            </span>\n          </template>\n        </v-select>\n        <v-spacer />\n        <v-btn\n          text\n          outlined\n          color=\"success\"\n          :loading=\"running\"\n          :disabled=\"running\"\n          @click=\"importOSM\"\n        >\n          {{ $gettext(\"Download\") }}\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n    <v-dialog\n      v-model=\"showOverwriteDialog\"\n      persistent\n      max-width=\"500\"\n      @keydown.enter=\"applyOverwriteDialog\"\n      @keydown.esc=\"showOverwriteDialog=false\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          {{ $gettext(\"Overwrite current road network ?\") }}\n        </v-card-title>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"showOverwriteDialog = !showOverwriteDialog\"\n          >\n            {{ $gettext(\"No\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"primary\"\n            @click=\"applyOverwriteDialog\"\n          >\n            {{ $gettext(\"Yes\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n\n.card {\n  height: 100%;\n  overflow-y: auto;\n  padding: 2.5rem;\n}\n.map {\n  max-width: 100rem;\n  width:50rem;\n  height: 35rem;\n}\n.v-card__text {\n    padding: 0px 24px 0px;\n}\n.freeform-button {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=style&index=0&id=51b2b884&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=style&index=0&id=51b2b884&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./OSMImporter.vue?vue&type=template&id=51b2b884&scoped=true&\"\nimport script from \"./OSMImporter.vue?vue&type=script&lang=js&\"\nexport * from \"./OSMImporter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OSMImporter.vue?vue&type=style&index=0&id=51b2b884&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51b2b884\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=script&lang=js&\"","<script>\nimport MatrixRoadCaster from '@comp/microservices/MatrixRoadCaster.vue'\nimport OSMImporter from '@comp/microservices/OSMImporter.vue'\n\nexport default {\n  name: 'Microservices',\n  components: {\n    MatrixRoadCaster,\n    OSMImporter,\n  },\n  props: {\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data () {\n    return {\n      tab: 0,\n    }\n  },\n  computed: {\n    rlinksIsEmpty () { return this.$store.getters.rlinksIsEmpty },\n  },\n  watch: {\n    tab (val) { },\n  },\n  methods: {\n\n  },\n}\n</script>\n<template>\n  <section>\n    <v-tabs\n      v-model=\"tab\"\n      centered\n    >\n      <v-tab>OSM importer</v-tab>\n      <v-tab>Matrix Road Caster</v-tab>\n    </v-tabs>\n    <div class=\"layout\">\n      <div class=\"layout-overlay\" />\n      <OSMImporter v-if=\"tab===0 \" />\n\n      <MatrixRoadCaster v-else-if=\"tab===1\" />\n    </div>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color:var(--v-background-base);\n\n  position: absolute;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=style&index=0&id=bd9695f2&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=style&index=0&id=bd9695f2&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Microservices.vue?vue&type=template&id=bd9695f2&scoped=true&\"\nimport script from \"./Microservices.vue?vue&type=script&lang=js&\"\nexport * from \"./Microservices.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Microservices.vue?vue&type=style&index=0&id=bd9695f2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bd9695f2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","render","_vm","this","_c","_self","attrs","centered","model","value","tab","callback","$$v","expression","_v","staticClass","_e","_withStripped","_s","$gettext","ref","validForm","_l","parameters","item","key","items","type","label","text","suffix","units","hint","showHint","rules","map","rule","required","on","wheel","$set","color","loading","running","importStatus","disabled","click","$event","run","staticStyle","small","directives","name","rawName","stopRun","timer","Math","ceil","icon","imgs","length","applying","ApplyResults","exporting","download","error","dense","outlined","Object","keys","errorMessage","img","src","alt","contain","components","data","$store","getters","rlineAttributes","re","v","largerThanZero","nonNegative","dateTimeRule","test","computed","bucket","callID","watch","val","getImagesURL","created","storeParams","forEach","param","methods","$refs","form","validate","commit","inputs","dispatch","rlinks","rnodes","async","readJson","concat","autoClose","filesNames","listFiles","filter","endsWith","file","url","downloadFolder","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","width","mapStyle","mapboxPublicKey","load","onMapLoaded","addNode","position","fab","toggleFreeForm","freeForm","source","poly","promoteId","layer","interactive","paint","$vuetify","theme","currentTheme","linksprimary","mouseover","onHover","mouseleave","offHover","mapIsLoaded","nodes","nodesHeader","active","move","moveNode","rightClick","removeNode","highwayList","attach","chips","top","offsetY","multiple","scopedSlots","_u","fn","index","selectedHighway","importOSM","persistent","keydown","indexOf","_k","keyCode","applyOverwriteDialog","apply","arguments","showOverwriteDialog","buffer","darkgrey","onCursor","offCursor","mousedown","contextmenu","MglGeojsonLayer","props","event","hoveredStateId","keepHovering","dragNode","getCanvas","style","cursor","uniqueArray","Set","mapboxEvent","features","layerId","setFeatureState","hover","selectedFeature","querySourceFeatures","$emit","originalEvent","button","preventDefault","properties","onMove","stopMovingNode","lngLat","values","off","MglMap","MglNavigationControl","MglScaleControl","NodesLayer","bbox","highway","rlinksIsEmpty","removeLayer","err","beforeDestroy","dragRotate","disable","getBounds","_sw","lng","lat","_ne","geometry","coordinates","reverse","getNodes","structuredClone","slice","point","idx","generate","coordinatesIndex","linkGeom","clickedPoint","sliceIndex","splice","coords","method","MatrixRoadCaster","OSMImporter","Array","default"],"sourceRoot":""}