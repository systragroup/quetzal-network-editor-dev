"use strict";(self.webpackChunkquetzal_network_editor=self.webpackChunkquetzal_network_editor||[]).push([[926],{50769:(t,e,r)=>{r.d(e,{Z:()=>o});var n=r(87537),a=r.n(n),i=r(23645),s=r.n(i)()(a());s.push([t.id,".container[data-v-096c1da2]{width:100%;overflow:hidden;margin-left:0 auto;margin-right:0 auto;padding:0 0 0 0}.layout[data-v-096c1da2]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-096c1da2]{height:100%;width:100%;background-color:rgba(0,0,0,.5);position:absolute}.card[data-v-096c1da2]{height:100%;overflow-y:auto;padding:2.5rem}.card2[data-v-096c1da2]{height:100%;overflow-y:auto;padding:2.5rem;margin-right:3rem}.v-card__text[data-v-096c1da2]{max-height:80%;overflow-y:auto}.row[data-v-096c1da2]{height:calc(100% - 38px)}.col[data-v-096c1da2]{max-height:100%}.title[data-v-096c1da2]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:3.5em;color:#b5e0d6 !important;font-weight:bold}.subtitle[data-v-096c1da2]{font-size:2em;color:var(--v-secondary-dark);font-weight:bold;margin:10px;margin-left:0px}.card button[data-v-096c1da2]{margin-top:0px}.background[data-v-096c1da2]{background-color:var(--v-background-base)}div.gallery[data-v-096c1da2]{margin:5px;background-color:var(--v-white-base);border:1px solid var(--v-lightgrey-base);float:left;width:50rem}div.gallery[data-v-096c1da2]:hover{border:1px solid var(--v-darkgrey-base)}div.gallery img[data-v-096c1da2]{width:100%;height:auto}","",{version:3,sources:["webpack://./src/components/microservices/MatrixRoadCaster.vue"],names:[],mappings:"AAEA,4BACE,UAAA,CACA,eAAA,CACA,kBAAA,CACA,mBAAA,CACA,eAAA,CAEF,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,+BAAA,CACA,iBAAA,CAEF,uBACE,WAAA,CACA,eAAA,CACA,cAAA,CAEF,wBACE,WAAA,CACA,eAAA,CACA,cAAA,CACA,iBAAA,CAGF,+BACE,cAAA,CACA,eAAA,CAEF,sBACE,wBAAA,CAEF,sBACE,eAAA,CAEF,wBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,wBAAA,CACA,gBAAA,CAEF,2BACE,aAAA,CACA,6BAAA,CACA,gBAAA,CACA,WAAA,CACA,eAAA,CAEF,8BACE,cAAA,CAEF,6BACE,yCAAA,CAGF,6BACE,UAAA,CACA,oCAAA,CACA,wCAAA,CACA,UAAA,CACA,WAAA,CAGF,mCACE,uCAAA,CAGF,iCACE,UAAA,CACA,WAAA",sourcesContent:['@import "@scss/variables.scss";\n\n.container {\n  width: 100%;\n  overflow: hidden;\n  margin-left: 0 auto;\n  margin-right: 0 auto;\n  padding: 0 0 0 0;\n}\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: absolute;\n}\n.card {\n  height: 100%;\n  overflow-y: auto;\n  padding: 2.5rem;\n}\n.card2 {\n  height: 100%;\n  overflow-y: auto;\n  padding: 2.5rem;\n  margin-right: 3rem;\n}\n\n.v-card__text {\n  max-height: 80%;\n  overflow-y: auto;\n}\n.row {\n  height: calc(100% - 38px)\n}\n.col {\n  max-height: 100%;\n}\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 3.5em;\n  color: $primary !important;\n  font-weight: bold;\n}\n.subtitle {\n  font-size: 2em;\n  color:var(--v-secondary-dark);\n  font-weight: bold;\n  margin: 10px;\n  margin-left: 0px;\n}\n.card button {\n  margin-top: 0px;\n}\n.background {\n  background-color:var(--v-background-base);\n}\n\ndiv.gallery {\n  margin: 5px;\n  background-color: var(--v-white-base);\n  border: 1px solid var(--v-lightgrey-base);\n  float: left;\n  width: 50rem;\n}\n\ndiv.gallery:hover {\n  border: 1px solid var(--v-darkgrey-base);\n}\n\ndiv.gallery img {\n  width: 100%;\n  height: auto;\n}\n\n'],sourceRoot:""}]);const o=s},73147:(t,e,r)=>{r.d(e,{Z:()=>o});var n=r(87537),a=r.n(n),i=r(23645),s=r.n(i)()(a());s.push([t.id,".card[data-v-226fe358]{height:100%;overflow-y:auto;padding:2.5rem}.map[data-v-226fe358]{max-width:100rem;width:50rem;height:35rem}.v-card__text[data-v-226fe358]{padding:0px 24px 0px}","",{version:3,sources:["webpack://./src/components/microservices/OSMImporter.vue"],names:[],mappings:"AAGA,uBACE,WAAA,CACA,eAAA,CACA,cAAA,CAEF,sBACE,gBAAA,CACA,WAAA,CACA,YAAA,CAEF,+BACI,oBAAA",sourcesContent:['@import "@scss/variables.scss";\n\n\n.card {\n  height: 100%;\n  overflow-y: auto;\n  padding: 2.5rem;\n}\n.map {\n  max-width: 100rem;\n  width:50rem;\n  height: 35rem;\n}\n.v-card__text {\n    padding: 0px 24px 0px;\n}\n'],sourceRoot:""}]);const o=s},53045:(t,e,r)=>{r.d(e,{Z:()=>o});var n=r(87537),a=r.n(n),i=r(23645),s=r.n(i)()(a());s.push([t.id,".layout[data-v-bd9695f2]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-bd9695f2]{height:100%;width:100%;background-color:var(--v-background-base);position:absolute}","",{version:3,sources:["webpack://./src/pages/Microservices.vue"],names:[],mappings:"AAEA,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,yCAAA,CAEA,iBAAA",sourcesContent:['@import "@scss/variables.scss";\n\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color:var(--v-background-base);\n\n  position: absolute;\n}\n'],sourceRoot:""}]);const o=s},28926:(t,e,r)=>{r.r(e),r.d(e,{default:()=>R});var n=function(){var t=this,e=t._self._c;return e("section",[e("v-tabs",{attrs:{centered:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("v-tab",[t._v("OSM importer")]),t._v(" "),e("v-tab",[t._v("Matrix Road Caster")])],1),t._v(" "),e("div",{staticClass:"layout"},[e("div",{staticClass:"layout-overlay"}),t._v(" "),0===t.tab?e("OSMImporter"):1===t.tab?e("MatrixRoadCaster"):t._e()],1)],1)};n._withStripped=!0;var a=function(){var t=this,e=t._self._c;return e("v-row",{staticClass:"ma-0 pa-2 background"},[e("v-col",[e("v-card",{staticClass:"card"},[e("v-card-title",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.$gettext("ML Matrix Road Caster"))+"\n      ")]),t._v(" "),e("p",[t._v(" "+t._s(t.$gettext("1) Find n zones centroids using a Kmean clustering on the nodes")))]),t._v(" "),e("p",[t._v(" "+t._s(t.$gettext("2) Call the Here Matrix API on random OD ( around 1% is sufficient )")))]),t._v(" "),e("p",[t._v(" "+t._s(t.$gettext("3) Interpolate every other OD time with an hybrid Machine learning model")))]),t._v(" "),e("p",[t._v(" "+t._s(t.$gettext("4) ajust the speed on the road network to match the routing time with the OD time using an iterative algorithm")))]),t._v(" "),e("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},t._l(t.parameters,(function(r,n){return e("div",{key:n},[void 0===r.items?e("v-text-field",{attrs:{type:r.type,label:t.$gettext(r.text),suffix:r.units,hint:t.showHint?t.$gettext(r.hint):"","persistent-hint":t.showHint,rules:r.rules.map((e=>t.rules[e])),required:""},on:{wheel:()=>{}},model:{value:r.value,callback:function(e){t.$set(r,"value",e)},expression:"item.value"}}):e("v-select",{attrs:{type:r.type,items:r.items,label:t.$gettext(r.text),suffix:r.units,hint:t.showHint?t.$gettext(r.hint):"","persistent-hint":t.showHint,rules:r.rules.map((e=>t.rules[e])),required:""},on:{wheel:()=>{}},model:{value:r.value,callback:function(e){t.$set(r,"value",e)},expression:"item.value"}})],1)})),0),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"success",loading:t.running||"RUNNING"===t.importStatus,disabled:t.running||"RUNNING"===t.importStatus||!t.validForm},on:{click:function(e){return t.run()}}},[e("v-icon",{staticStyle:{"margin-right":"10px"},attrs:{small:""}},[t._v("\n            fa-solid fa-play\n          ")]),t._v("\n          "+t._s(t.$gettext("Run"))+"\n        ")],1),t._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:"RUNNING"==t.importStatus,expression:"importStatus == 'RUNNING'"}],attrs:{color:"grey",text:""},on:{click:function(e){return t.stopRun()}}},[t._v("\n          "+t._s(t.$gettext("Abort"))+"\n        ")]),t._v(" "),e("v-card-text",{directives:[{name:"show",rawName:"v-show",value:"RUNNING"==t.importStatus,expression:"importStatus == 'RUNNING'"}]},[t._v("\n          ~ "+t._s(t.timer>0?Math.ceil(t.timer/60):t.$gettext("less than 1"))+t._s(t.$gettext(" minutes remaining"))+"\n        ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.showHint=!t.showHint}}},[e("v-icon",[t._v("far fa-question-circle small")])],1)],1)],1)],1),t._v(" "),e("v-col",[e("v-card",{staticClass:"card2"},[e("v-card-title",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.$gettext("Calibration Results"))+"\n      ")]),t._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.imgs.length>0,expression:"imgs.length>0"}],attrs:{loading:t.applying,disabled:t.applying},on:{click:t.ApplyResults}},[e("v-icon",{staticStyle:{"margin-right":"10px"},attrs:{small:""}},[t._v("\n          fa-solid fa-upload\n        ")]),t._v("\n        "+t._s(t.$gettext("Apply Road links to project"))+"\n      ")],1),t._v(" "),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.imgs.length>0,expression:"imgs.length>0"}],attrs:{loading:t.exporting,disabled:t.exporting},on:{click:t.download}},[e("v-icon",{staticStyle:{"margin-right":"10px"},attrs:{small:""}},[t._v("\n          fa-solid fa-download\n        ")]),t._v("\n        "+t._s(t.$gettext("Download"))+"\n      ")],1),t._v(" "),t.error?e("v-alert",{attrs:{dense:"",outlined:"",text:"",type:"error"}},[t._v("\n        "+t._s(t.$gettext("Service ended with an execution error or have been aborted.           Please retry. If the problem persist, contact us."))+"\n        "),t._l(Object.keys(t.errorMessage),(function(r){return e("p",{key:r},[e("b",[t._v(t._s(r)+": ")]),t._v(t._s(t.errorMessage[r])+"\n        ")])}))],2):t._e(),t._v(" "),t._l(t.imgs,(function(t,r){return e("div",{key:r,staticClass:"gallery"},[e("v-img",{attrs:{src:t,alt:"image",contain:""}})],1)}))],2)],1)],1)};a._withStripped=!0;var i=r(60887);const s={name:"MatrixRoadCaster",components:{},data(){return{imgs:[],exporting:!1,applying:!1,validForm:!0,parameters:[{name:"num_zones",text:"number of zones",value:null,type:"Number",units:"",hint:"number of zones. road nodes will be aggregate to form centroids",rules:["required","largerThanZero"]},{name:"train_size",text:"number of OD (api call)",value:null,type:"Number",units:"",hint:"number of OD to get from the API, the rest will be interpolated with ML",rules:["required","largerThanZero"]},{name:"date_time",text:"date Time",value:null,type:"String",units:"",hint:"DateTime in the past. (YYYY-MM-DDTHH:MM:SS(UTC-timezone) (-04:00 for montreal))",rules:["required","dateTimeRule"]},{name:"ff_time_col",text:"freeflow time on roads",value:null,items:this.$store.getters.rlineAttributes,type:"String",units:"",hint:"road links time (link length / speed) to use as a first approximation. this is the freeflow speed, or speed limit",rules:["required"]},{name:"max_speed",text:"max speed on road",value:null,type:"Number",units:"",hint:"Maximum allowed speed on a road. applying an OD matrix on the road network could result il unrealistic speed if not used.",rules:["required","largerThanZero"]},{name:"num_random_od",text:"number of OD to plot",value:null,type:"Number",units:"",hint:"number of OD calibration plot to produce. those are random OD.",rules:["required","largerThanZero"]},{name:"hereApiKey",text:"HERE api key",value:null,type:"String",units:"",hint:"HERE api key to download a set of OD",rules:["required"]}],showHint:!1,re:/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,rules:{required:t=>!!t||"Required",largerThanZero:t=>t>0||"should be larger than 0",nonNegative:t=>t>=0||"should be larger or equal to 0",dateTimeRule:t=>this.re.test(t)||"invalid date time"}}},computed:{bucket(){return this.$store.getters["runMRC/bucket"]},callID(){return this.$store.getters["runMRC/callID"]},timer(){return this.$store.getters["runMRC/timer"]},importStatus(){return this.$store.getters["runMRC/status"]},running(){return this.$store.getters["runMRC/running"]},error(){return this.$store.getters["runMRC/error"]},errorMessage(){return this.$store.getters["runMRC/errorMessage"]}},watch:{importStatus(t){"SUCCEEDED"===t&&this.getImagesURL()}},created(){const t=this.$store.getters["runMRC/parameters"];this.parameters.forEach((e=>e.value=t[e.name])),this.callID&&this.getImagesURL()},methods:{run(){if(!this.$refs.form.validate())return;this.$store.commit("runMRC/setCallID");const t={callID:this.callID};this.parameters.forEach((e=>{t[e.name]=e.value})),this.$store.dispatch("runMRC/startExecution",{rlinks:this.$store.getters.rlinks,rnodes:this.$store.getters.rnodes,parameters:t})},stopRun(){this.$store.dispatch("runMRC/stopExecution")},async ApplyResults(){this.applying=!0;const t=await i.Z.readJson(this.bucket,this.callID.concat("/road_links.geojson"));this.$store.commit("loadrLinks",t);const e=await i.Z.readJson(this.bucket,this.callID.concat("/road_nodes.geojson"));this.$store.commit("loadrNodes",e),this.applying=!1,this.$store.commit("changeNotification",{text:"Road links applied!",autoClose:!0,color:"success"})},async getImagesURL(){const t=(await i.Z.listFiles(this.bucket,this.callID+"/")).filter((t=>t.endsWith(".png")));for(const e of t){const t=await i.Z.getImagesURL(this.bucket,e);this.imgs.push(t)}},async download(){this.exporting=!0,await i.Z.downloadFolder(this.bucket,this.callID.concat("/")),this.exporting=!1}}};var o=r(93379),l=r.n(o),c=r(7795),d=r.n(c),u=r(90569),A=r.n(u),h=r(3565),g=r.n(h),m=r(19216),p=r.n(m),v=r(44589),y=r.n(v),C=r(50769),b={};b.styleTagTransform=y(),b.setAttributes=g(),b.insert=A().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=p(),l()(C.Z,b),C.Z&&C.Z.locals&&C.Z.locals;var w=r(51900);const _=(0,w.Z)(s,a,[],!1,null,"096c1da2",null).exports;var x=function(){var t=this,e=t._self._c;return e("section",[e("v-card",{staticClass:"card"},[e("v-card-title",[t._v("\n      "+t._s(t.$gettext("Import OSM network in bounding box"))+"\n    ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-card-subtitle",[t.error?e("v-alert",{attrs:{dense:"",width:"50rem",outlined:"",text:"",type:"error"}},[t._v("\n        "+t._s(t.$gettext("There as been an error while importing OSM network.           Please try again. If the problem persist, contact us."))+"\n        "),t._l(Object.keys(t.errorMessage),(function(r){return e("p",{key:r},[e("b",[t._v(t._s(r)+": ")]),t._v(t._s(t.errorMessage[r])+"\n        ")])}))],2):t._e()],1),t._v(" "),e("v-card-actions",[e("MglMap",{key:t.mapStyle,staticClass:"map",attrs:{"access-token":t.mapboxPublicKey,"map-style":t.mapStyle},on:{load:t.onMapLoaded}},[e("MglScaleControl",{attrs:{position:"bottom-right"}}),t._v(" "),e("MglNavigationControl",{attrs:{position:"bottom-right"}}),t._v(" "),e("MglGeojsonLayer",{attrs:{"source-id":"polygon",source:{type:"geojson",data:t.poly,promoteId:"index"},"layer-id":"poly",layer:{interactive:!0,type:"fill",paint:{"fill-color":t.$vuetify.theme.currentTheme.linksprimary,"fill-opacity":.3}}}}),t._v(" "),e("MglGeojsonLayer",{attrs:{"source-id":"polygon",type:"line",source:"polygon","layer-id":"stroke",layer:{type:"line",paint:{"line-color":t.$vuetify.theme.currentTheme.linksprimary,"line-width":3}}}})],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-select",{attrs:{items:t.highwayList,attach:"",chips:"","menu-props":{top:!0,offsetY:!0},label:"Highways to import",multiple:""},scopedSlots:t._u([{key:"selection",fn:function({item:r,index:n}){return[n<=0?e("v-chip",[e("span",[t._v(t._s(r))])]):t._e(),t._v(" "),1===n?e("span",{staticClass:"grey--text text-caption"},[t._v("\n            (+"+t._s(t.selectedHighway.length-1+" "+t.$gettext("more"))+" )\n          ")]):t._e()]}}]),model:{value:t.selectedHighway,callback:function(e){t.selectedHighway=e},expression:"selectedHighway"}}),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",outlined:"",color:"success",loading:t.running,disabled:t.running},on:{click:t.importOSM}},[t._v("\n        "+t._s(t.$gettext("Download"))+"\n      ")])],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"500"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyOverwriteDialog.apply(null,arguments)},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.showOverwriteDialog=!1}]},model:{value:t.showOverwriteDialog,callback:function(e){t.showOverwriteDialog=e},expression:"showOverwriteDialog"}},[e("v-card",[e("v-card-title",{staticClass:"text-h5"},[t._v("\n        "+t._s(t.$gettext("Overwrite current road network ?"))+"\n      ")]),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"regular"},on:{click:function(e){t.showOverwriteDialog=!t.showOverwriteDialog}}},[t._v("\n          "+t._s(t.$gettext("No"))+"\n        ")]),t._v(" "),e("v-btn",{attrs:{color:"primary"},on:{click:t.applyOverwriteDialog}},[t._v("\n          "+t._s(t.$gettext("Yes"))+"\n        ")])],1)],1)],1)],1)};x._withStripped=!0;var f=r(1963),k=r(95637),M=r(95),E=r(36648);const $={name:"OSMImporter",components:{MglMap:f.Q3,MglNavigationControl:f.RV,MglScaleControl:f.RQ,MglGeojsonLayer:f.tf},data:()=>({mapboxPublicKey:"pk.eyJ1Ijoic2JvaXZpbiIsImEiOiJja3BlMm41cm4xa2QyMnZwZTBqdGx4bHI0In0.11oH2-B2g9J6LarDnoqQfQ",showOverwriteDialog:!1,bbox:null,poly:null,selectedHighway:null,highwayList:["motorway","motorway_link","trunk","trunk_link","primary","primary_link","secondary","secondary_link","tertiary","tertiary_link","residential","service","unclassified","cycleway"],isUserSignedIn:E.Z.auth.isUserSignedIn(),colorDict:{motorway:"E892A2",motorway_link:"E892A2",trunk:"E892A2",trunk_link:"E892A2",primary:"FCD6A4",primary_link:"FCD6A4",secondary:"F7F9BE",secondary_link:"F7F9BE",tertiary:"808080",tertiary_link:"808080",residential:"808080",service:"808080",unclassified:"808080",cycleway:"1D8621"},widthDict:{motorway:4,motorway_link:4,trunk:4,trunk_link:4,primary:4,primary_link:4,secondary:3,secondary_link:3,tertiary:2,tertiary_link:2,residential:2,service:2,unclassified:2,cycleway:2}}),computed:{mapStyle(){return this.$store.getters.mapStyle},rlinksIsEmpty(){return this.$store.getters.rlinksIsEmpty},highway(){return this.$store.getters["runOSM/highway"]},bucket(){return this.$store.getters["runOSM/bucket"]},callID(){return this.$store.getters["runOSM/callID"]},importStatus(){return this.$store.getters["runOSM/status"]},running(){return this.$store.getters["runOSM/running"]},error(){return this.$store.getters["runOSM/error"]},errorMessage(){return this.$store.getters["runOSM/errorMessage"]}},watch:{selectedHighway(t){this.$store.commit("runOSM/changeHighway",t)}},beforeDestroy(){try{this.map.removeLayer("stroke")}catch(t){}},created(){this.selectedHighway=this.highway},methods:{onMapLoaded(t){t.map.dragRotate.disable(),this.map=t.map,this.map.on("dragend",this.getBounds),this.map.on("zoomend",this.getBounds),this.getBounds()},getBounds(){this.bbox=this.map.getBounds();const t=(0,M.Z)([this.bbox._sw.lng,this.bbox._sw.lat,this.bbox._ne.lng,this.bbox._ne.lat]);this.poly=(0,k.Z)(t,-.1*(this.bbox._ne.lat-this.bbox._sw.lat),{units:"degrees"}),this.poly.geometry.coordinates[0]=this.poly.geometry.coordinates[0].reverse()},importOSM(){if(this.rlinksIsEmpty){this.$store.commit("runOSM/setCallID");const t=[this.bbox._sw.lat,this.bbox._sw.lng,this.bbox._ne.lat,this.bbox._ne.lng];this.$store.dispatch("runOSM/startExecution",{bbox:t})}else this.showOverwriteDialog=!0},applyOverwriteDialog(){this.$store.commit("unloadrFiles"),this.showOverwriteDialog=!1,this.importOSM()}}};var S=r(73147),B={};B.styleTagTransform=y(),B.setAttributes=g(),B.insert=A().bind(null,"head"),B.domAPI=d(),B.insertStyleElement=p(),l()(S.Z,B),S.Z&&S.Z.locals&&S.Z.locals;const I={name:"Microservices",components:{MatrixRoadCaster:_,OSMImporter:(0,w.Z)($,x,[],!1,null,"226fe358",null).exports},props:{value:{type:Array,default:()=>[]}},data:()=>({tab:0}),computed:{rlinksIsEmpty(){return this.$store.getters.rlinksIsEmpty}},watch:{tab(t){}},methods:{}};var D=r(53045),O={};O.styleTagTransform=y(),O.setAttributes=g(),O.insert=A().bind(null,"head"),O.domAPI=d(),O.insertStyleElement=p(),l()(D.Z,O),D.Z&&D.Z.locals&&D.Z.locals;const R=(0,w.Z)(I,n,[],!1,null,"bd9695f2",null).exports}}]);
//# sourceMappingURL=926.build.js.map