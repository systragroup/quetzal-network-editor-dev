{"version":3,"file":"643.build.js","mappings":"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","sources":["webpack://quetzal-network-editor/./src/components/microservices/MapSelector.vue?a7d1","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?4aed","webpack://quetzal-network-editor/./src/pages/Microservices.vue?86bf","webpack://quetzal-network-editor/./src/components/microservices/MapSelector.vue?ac0c","webpack://quetzal-network-editor/./src/components/microservices/NodesLayer.vue?7839","webpack://quetzal-network-editor/src/components/microservices/NodesLayer.vue","webpack://quetzal-network-editor/./src/components/microservices/NodesLayer.vue?5555","webpack://quetzal-network-editor/./src/components/microservices/NodesLayer.vue","webpack://quetzal-network-editor/src/components/microservices/MapSelector.vue","webpack://quetzal-network-editor/./src/components/microservices/MapSelector.vue?4f0c","webpack://quetzal-network-editor/./src/components/microservices/MapSelector.vue?e5c4","webpack://quetzal-network-editor/./src/components/microservices/MapSelector.vue","webpack://quetzal-network-editor/./src/pages/Microservices.vue?1afc","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?2abf","webpack://quetzal-network-editor/src/components/microservices/OSMImporter.vue","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?22ee","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue?c447","webpack://quetzal-network-editor/./src/components/microservices/OSMImporter.vue","webpack://quetzal-network-editor/./src/pages/Microservices.vue?2709","webpack://quetzal-network-editor/src/pages/Microservices.vue","webpack://quetzal-network-editor/./src/pages/Microservices.vue?4bdf","webpack://quetzal-network-editor/./src/pages/Microservices.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.map[data-v-5fa2bcf2]{max-width:100rem;width:50rem;height:45rem}.freeform-button[data-v-5fa2bcf2]{position:absolute;top:5px;right:5px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/microservices/MapSelector.vue\"],\"names\":[],\"mappings\":\"AAGA,sBACE,gBAAA,CACA,WAAA,CACA,YAAA,CAEF,kCACE,iBAAA,CACA,OAAA,CACA,SAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n\\n.map {\\n  max-width: 100rem;\\n  width:50rem;\\n  height: 45rem;\\n}\\n.freeform-button {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.card[data-v-49dba066]{height:100%;overflow-y:auto;padding:2.5rem}.map[data-v-49dba066]{max-width:100rem;width:50rem;height:35rem}.v-card__text[data-v-49dba066]{padding:0px 24px 0px}.freeform-button[data-v-49dba066]{position:absolute;top:5px;right:5px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/microservices/OSMImporter.vue\"],\"names\":[],\"mappings\":\"AAGA,uBACE,WAAA,CACA,eAAA,CACA,cAAA,CAEF,sBACE,gBAAA,CACA,WAAA,CACA,YAAA,CAEF,+BACI,oBAAA,CAEJ,kCACE,iBAAA,CACA,OAAA,CACA,SAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n\\n.card {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 2.5rem;\\n}\\n.map {\\n  max-width: 100rem;\\n  width:50rem;\\n  height: 35rem;\\n}\\n.v-card__text {\\n    padding: 0px 24px 0px;\\n}\\n.freeform-button {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.layout[data-v-3e11cc5a]{position:absolute;width:100%;height:calc(100% - 50px);display:flex;flex-flow:row;justify-content:center;align-items:center}.layout-overlay[data-v-3e11cc5a]{height:100%;width:100%;background-color:var(--v-background-base);position:absolute}.subtabs[data-v-3e11cc5a]{border-top:1px solid var(--v-background-lighten3)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/Microservices.vue\"],\"names\":[],\"mappings\":\"AAEA,yBACE,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA,CACA,sBAAA,CACA,kBAAA,CAEF,iCACE,WAAA,CACA,UAAA,CACA,yCAAA,CAEA,iBAAA,CAEF,0BACE,iDAAA\",\"sourcesContent\":[\"@import \\\"@scss/variables.scss\\\";\\n\\n.layout {\\n  position: absolute;\\n  width: calc(100%);\\n  height: calc(100% - 50px);\\n  display: flex;\\n  flex-flow: row;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.layout-overlay {\\n  height: 100%;\\n  width: 100%;\\n  background-color:var(--v-background-base);\\n\\n  position: absolute;\\n}\\n.subtabs{\\n  border-top: 1px solid var(--v-background-lighten3)\\n\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"MglMap\",\n    {\n      key: _vm.mapStyle,\n      staticClass: \"map\",\n      attrs: {\n        center: _vm.$store.getters.mapCenter,\n        zoom: _vm.$store.getters.mapZoom,\n        \"min-zoom\": 3,\n        \"access-token\": _vm.mapboxPublicKey,\n        \"map-style\": _vm.mapStyle,\n      },\n      on: { load: _vm.onMapLoaded, click: _vm.addNode },\n    },\n    [\n      _c(\"MglScaleControl\", { attrs: { position: \"bottom-right\" } }),\n      _vm._v(\" \"),\n      _c(\"MglNavigationControl\", { attrs: { position: \"bottom-right\" } }),\n      _vm._v(\" \"),\n      [\n        _c(\n          \"v-btn\",\n          {\n            staticClass: \"freeform-button\",\n            attrs: { fab: \"\", small: \"\" },\n            on: { click: _vm.toggleFreeForm },\n          },\n          [\n            _c(\"v-icon\", { attrs: { color: \"regular\" } }, [\n              _vm._v(\n                \"\\n        \" +\n                  _vm._s(\n                    _vm.freeForm ? \"far fa-square\" : \"fas fa-vector-square\"\n                  ) +\n                  \"\\n      \"\n              ),\n            ]),\n          ],\n          1\n        ),\n      ],\n      _vm._v(\" \"),\n      _c(\"MglGeojsonLayer\", {\n        attrs: {\n          \"source-id\": \"polygon\",\n          source: {\n            type: \"geojson\",\n            data: _vm.poly,\n            promoteId: \"index\",\n          },\n          \"layer-id\": \"poly\",\n          layer: {\n            interactive: true,\n            type: \"fill\",\n            paint: {\n              \"fill-color\": _vm.$vuetify.theme.currentTheme.linksprimary, // blue color fill\n              \"fill-opacity\": 0.3,\n            },\n          },\n        },\n        on: { mouseover: _vm.onHover, mouseleave: _vm.offHover },\n      }),\n      _vm._v(\" \"),\n      _c(\"MglGeojsonLayer\", {\n        attrs: {\n          \"source-id\": \"polygon\",\n          type: \"line\",\n          source: \"polygon\",\n          \"layer-id\": \"stroke\",\n          layer: {\n            type: \"line\",\n            paint: {\n              \"line-color\": _vm.$vuetify.theme.currentTheme.linksprimary,\n              \"line-width\": 3,\n            },\n          },\n        },\n      }),\n      _vm._v(\" \"),\n      _vm.mapIsLoaded\n        ? _c(\"NodesLayer\", {\n            attrs: {\n              map: _vm.map,\n              nodes: _vm.freeForm ? _vm.nodes : _vm.nodesHeader,\n              active: _vm.freeForm,\n            },\n            on: { move: _vm.moveNode, rightClick: _vm.removeNode },\n          })\n        : _vm._e(),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\"MglGeojsonLayer\", {\n    attrs: {\n      \"source-id\": \"nodes\",\n      source: {\n        type: \"geojson\",\n        data: _vm.nodes,\n        buffer: 0,\n        promoteId: \"index\",\n      },\n      \"layer-id\": \"nodes\",\n      layer: {\n        interactive: true,\n        type: \"circle\",\n        paint: {\n          \"circle-color\": \"#ffffff\",\n          \"circle-opacity\": 0.5,\n          \"circle-radius\": [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            10,\n            5,\n          ],\n          \"circle-blur\": [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            0.3,\n            0,\n          ],\n          \"circle-stroke-color\": _vm.$vuetify.theme.currentTheme.darkgrey,\n          \"circle-stroke-width\": 2,\n        },\n      },\n    },\n    on: {\n      mouseover: _vm.onCursor,\n      mouseleave: _vm.offCursor,\n      mousedown: _vm.moveNode,\n      contextmenu: _vm.rightClick,\n    },\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport { MglGeojsonLayer } from 'vue-mapbox'\n\nexport default {\n  name: 'NodesLayer',\n  components: {\n\n    MglGeojsonLayer,\n  },\n  props: ['map', 'nodes', 'active'],\n  event: ['move', 'rightClick'],\n\n  data () {\n    return {\n      hoveredStateId: null,\n      keepHovering: false,\n      dragNode: false,\n    }\n  },\n  computed: {\n\n  },\n  watch: {\n  },\n\n  created () {\n  },\n  methods: {\n\n    onCursor (event) {\n      if (this.active) {\n        if (this.hoveredStateId === null) {\n          this.map.getCanvas().style.cursor = 'pointer'\n          // get a list of all overID. if there is multiple superposed link get all of them!\n          const uniqueArray = [...new Set(event.mapboxEvent.features.map(item => item.id))]\n          this.hoveredStateId = { layerId: event.layerId, id: uniqueArray }\n          this.map.setFeatureState(\n            { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n            { hover: true },\n          )\n        }\n      }\n    },\n    offCursor (event) {\n      if (this.active) {\n      // todo: error warning is throw sometime when we move a node over another node or anchor.\n        if (this.hoveredStateId !== null) {\n          // eslint-disable-next-line max-len\n          // when we drag a node, we want to start dragging when we leave the node, but we will stay in hovering mode.\n          if (this.keepHovering) {\n            this.dragNode = true\n            // normal behaviours, hovering is false\n          } else {\n            this.map.getCanvas().style.cursor = ''\n            this.map.setFeatureState(\n              { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n              { hover: false },\n            )\n            this.hoveredStateId = null\n            // this.$emit('offHover', event)\n          }\n        }\n      }\n    },\n    rightClick (event) {\n      if (!this.dragNode && this.hoveredStateId?.layerId === 'nodes') {\n        const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n        const selectedFeature = features.filter(item => item.id === this.hoveredStateId.id[0])[0]\n        const click = {\n          selectedFeature: selectedFeature,\n        }\n        if (selectedFeature) {\n          this.$emit('rightClick', click)\n        }\n      }\n    },\n    moveNode (event) {\n      if (this.active && this.hoveredStateId?.layerId === 'nodes') {\n        if (event.mapboxEvent.originalEvent.button === 0) {\n          event.mapboxEvent.preventDefault() // prevent map control\n          this.map.getCanvas().style.cursor = 'grab'\n          // disable mouseLeave so we stay in hover state.\n          this.keepHovering = true\n          // get selected node\n          const features = this.map.querySourceFeatures(this.hoveredStateId.layerId)\n          this.selectedFeature = features.filter(item => item.id === this.hoveredStateId.id[0])[0]\n          // get position\n          if (this.selectedFeature?.properties) {\n            this.map.on('mousemove', this.onMove)\n            this.map.on('mouseup', this.stopMovingNode)\n          }\n        }\n      }\n    },\n    onMove (event) {\n      // get position and update node position\n      // only if dragmode is activated (we just leave the node hovering state.)\n      if (this.dragNode && this.selectedFeature) {\n        const click = {\n          selectedFeature: this.selectedFeature,\n          lngLat: Object.values(event.lngLat),\n        }\n        this.$emit('move', click)\n        // rerender the anchor as they are getter and are not directly modified by the moverAnchor mutation.\n        // this.renderedAnchorrNodes.features = this.anchorrNodes.features.filter(node =>\n        //  booleanContains(this.bbox, node))\n      }\n    },\n    stopMovingNode (event) {\n      if (this.active && event.originalEvent.button === 0) {\n        // stop tracking position (moving node.)\n        this.map.getCanvas().style.cursor = 'pointer'\n        this.map.off('mousemove', this.onMove)\n\n        // enable popup and hovering off back. disable Dragmode\n        this.keepHovering = false\n        this.dragNode = false\n        // if we drag too quickly, offcursor it will not be call and the node will stay in hovering mode.\n        // calling offscursor will break the sticky node drawlink behaviour, so we only make its state back to hover-false\n        this.map.getCanvas().style.cursor = ''\n        if (this.hoveredStateId) {\n          this.map.setFeatureState(\n            { source: this.hoveredStateId.layerId, id: this.hoveredStateId.id[0] },\n            { hover: false },\n          )\n        }\n        this.hoveredStateId = null\n        this.map.off('mouseup', this.stopMovingNode)\n      }\n    },\n\n  },\n\n}\n</script>\n<template>\n  <MglGeojsonLayer\n    source-id=\"nodes\"\n    :source=\"{\n      type: 'geojson',\n      data: nodes,\n      buffer: 0,\n      promoteId: 'index',\n    }\"\n    layer-id=\"nodes\"\n    :layer=\"{\n      interactive: true,\n      type: 'circle',\n      paint: {\n        'circle-color': '#ffffff',\n        'circle-opacity':0.5,\n        'circle-radius': ['case', ['boolean', ['feature-state', 'hover'], false], 10, 5],\n        'circle-blur': ['case', ['boolean', ['feature-state', 'hover'], false], 0.3, 0],\n        'circle-stroke-color': $vuetify.theme.currentTheme.darkgrey,\n        'circle-stroke-width': 2,\n      },\n    }\"\n    @mouseover=\"onCursor\"\n    @mouseleave=\"offCursor\"\n    @mousedown=\"moveNode\"\n    @contextmenu=\"rightClick\"\n  />\n</template>\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodesLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodesLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NodesLayer.vue?vue&type=template&id=512658b6&scoped=true&\"\nimport script from \"./NodesLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./NodesLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"512658b6\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { MglMap, MglNavigationControl, MglScaleControl, MglGeojsonLayer } from 'vue-mapbox'\nimport NodesLayer from './NodesLayer.vue'\nimport buffer from '@turf/buffer'\nimport bboxPolygon from '@turf/bbox-polygon'\nimport Point from 'turf-point'\nimport Linestring from 'turf-linestring'\nimport nearestPointOnLine from '@turf/nearest-point-on-line'\nconst short = require('short-uuid')\nconst $gettext = s => s\n\nexport default {\n  name: 'MapSelector',\n  events: ['change'],\n  components: {\n    MglMap,\n    MglNavigationControl,\n    MglScaleControl,\n    MglGeojsonLayer,\n    NodesLayer,\n  },\n\n  data () {\n    return {\n      mapIsLoaded: false,\n      mapboxPublicKey: process.env.VUE_APP_MAPBOX_PUBLIC_KEY,\n      poly: null,\n      nodes: {},\n      freeForm: false,\n    }\n  },\n  computed: {\n    mapStyle () { return this.$store.getters.mapStyle },\n    rlinksIsEmpty () { return this.$store.getters.rlinksIsEmpty },\n    nodesHeader () { return this.$store.getters.nodesHeader },\n  },\n  watch: {\n    mapStyle () {\n      try {\n        this.map.removeLayer('stroke')\n      } catch (err) {}\n    },\n  },\n\n  beforeDestroy () {\n    // remove stroke layer as it use the polygon layer data.\n    const center = this.map.getCenter()\n    this.$store.commit('saveMapPosition', {\n      mapCenter: [center.lng, center.lat],\n      mapZoom: this.map.getZoom(),\n    })\n\n    this.$store.commit('saveImportPoly', { freeForm: this.freeForm, poly: this.poly })\n    try {\n      this.map.removeLayer('stroke')\n    } catch (err) {}\n  },\n\n  async created () {},\n\n  methods: {\n\n    onMapLoaded (event) {\n      event.map.dragRotate.disable()\n      this.map = event.map\n      this.map.on('dragend', this.getBounds)\n      this.map.on('zoomend', this.getBounds)\n      this.freeForm = false\n      if (this.$store.getters.importPoly?.freeForm) {\n        this.poly = this.$store.getters.importPoly.poly\n        this.toggleFreeForm()\n        console.log(this.$store.getters.importPoly)\n      } else {\n        this.getBounds()\n      }\n\n      this.mapIsLoaded = true\n    },\n    getBounds () {\n      const mapbbox = this.map.getBounds()\n      const bbox = bboxPolygon([mapbbox._sw.lng, mapbbox._sw.lat, mapbbox._ne.lng, mapbbox._ne.lat])\n      this.poly = buffer(bbox, -0.1 * (mapbbox._ne.lat - mapbbox._sw.lat), { units: 'degrees' })\n      this.poly.geometry.coordinates[0] = this.poly.geometry.coordinates[0].reverse()\n      const geom = [mapbbox._sw.lat, mapbbox._sw.lng, mapbbox._ne.lat, mapbbox._ne.lng]\n      this.$emit('change', { style: 'bbox', geometry: geom })\n    },\n    toggleFreeForm (val) {\n      this.freeForm = !this.freeForm\n      if (this.freeForm) {\n        this.map.off('dragend', this.getBounds)\n        this.map.off('zoomend', this.getBounds)\n        this.getNodes()\n        this.$store.commit('changeNotification',\n          { text: $gettext('Click to add points. Right click de remove'), autoClose: false })\n      } else {\n        this.map.on('dragend', this.getBounds)\n        this.map.on('zoomend', this.getBounds)\n        this.getBounds()\n        this.$store.commit('changeNotification',\n          { text: '', autoClose: true })\n      }\n    },\n    onHover () {\n      if (this.freeForm) {\n        this.map.getCanvas().style.cursor = 'pointer'\n      }\n    },\n    offHover () {\n      if (this.freeForm) {\n        this.map.getCanvas().style.cursor = ''\n      }\n    },\n\n    getNodes () {\n      const nodes = structuredClone(this.nodesHeader)\n      const poly = this.poly.geometry.coordinates[0]\n      // create points from poly. skip last one which is duplicated of the first one (square is 5 points)\n      poly.slice(0, poly.length - 1).forEach(\n        (point, idx) => nodes.features.push(Point(point, { index: short.generate(), coordinatesIndex: idx })),\n      )\n      this.nodes = nodes\n      this.$emit('change', { style: 'poly', geometry: this.poly.geometry.coordinates[0] })\n    },\n    moveNode (event) {\n      const idx = event.selectedFeature.properties.coordinatesIndex\n      const poly = this.poly.geometry.coordinates[0]\n      poly[idx] = event.lngLat\n      if (idx === 0) {\n        // last point is duplicated to first one (square have 5 points)\n        poly[poly.length - 1] = event.lngLat\n      }\n      this.getNodes()\n    },\n    removeNode (event) {\n      const idx = event.selectedFeature.properties.coordinatesIndex\n      const poly = this.poly.geometry.coordinates[0]\n      if (poly.length <= 4) {\n        this.$store.commit('changeNotification',\n          { text: $gettext('Cannot delete anymore'), autoClose: true })\n      } else if (idx === 0) {\n        this.$store.commit('changeNotification',\n          { text: $gettext('cannot delete first point of polygon'), autoClose: true })\n      } else {\n        this.poly.geometry.coordinates[0] = [...poly.slice(0, idx), ...poly.slice(idx + 1)]\n        this.getNodes()\n      }\n    },\n    addNode (event) {\n      if (this.freeForm) {\n        const poly = this.poly.geometry.coordinates[0]\n        const lngLat = event.mapboxEvent.lngLat\n        const linkGeom = Linestring(poly)\n        const clickedPoint = Point(Object.values(lngLat))\n        const snapped = nearestPointOnLine(linkGeom, clickedPoint, { units: 'kilometers' })\n        // for multiString, gives the index of the closest one, add +1 for the slice.\n        const sliceIndex = snapped.properties.index + 1\n        poly.splice(sliceIndex, 0, Object.values(lngLat))\n        this.getNodes()\n      }\n    },\n  },\n\n}\n</script>\n<template>\n  <MglMap\n    :key=\"mapStyle\"\n    class=\"map\"\n    :center=\"$store.getters.mapCenter\"\n    :zoom=\"$store.getters.mapZoom\"\n    :min-zoom=\"3\"\n    :access-token=\"mapboxPublicKey\"\n    :map-style=\"mapStyle\"\n    @load=\"onMapLoaded\"\n    @click=\"addNode\"\n  >\n    <MglScaleControl position=\"bottom-right\" />\n    <MglNavigationControl position=\"bottom-right\" />\n    <template>\n      <v-btn\n        class=\"freeform-button\"\n        fab\n        small\n        @click=\"toggleFreeForm\"\n      >\n        <v-icon\n          color=\"regular\"\n        >\n          {{ freeForm? 'far fa-square':'fas fa-vector-square' }}\n        </v-icon>\n      </v-btn>\n    </template>\n\n    <MglGeojsonLayer\n      source-id=\"polygon\"\n      :source=\"{\n        type: 'geojson',\n        data: poly,\n        promoteId: 'index',\n      }\"\n      layer-id=\"poly\"\n      :layer=\"{\n        interactive: true,\n        type: 'fill',\n        'paint': {\n          'fill-color': $vuetify.theme.currentTheme.linksprimary, // blue color fill\n          'fill-opacity': 0.3,\n\n        },\n      }\"\n      @mouseover=\"onHover\"\n      @mouseleave=\"offHover\"\n    />\n\n    <MglGeojsonLayer\n      source-id=\"polygon\"\n      type=\"line\"\n      source=\"polygon\"\n      layer-id=\"stroke\"\n      :layer=\"{\n        type: 'line',\n        paint: {\n          'line-color':$vuetify.theme.currentTheme.linksprimary,\n          'line-width':3\n        }\n      }\"\n    />\n    <NodesLayer\n      v-if=\"mapIsLoaded\"\n      :map=\"map\"\n      :nodes=\"freeForm? nodes: nodesHeader\"\n      :active=\"freeForm\"\n      @move=\"moveNode\"\n      @rightClick=\"removeNode\"\n    />\n  </MglMap>\n</template>\n<style lang=\"scss\" scoped>\n\n.map {\n  max-width: 100rem;\n  width:50rem;\n  height: 45rem;\n}\n.freeform-button {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSelector.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSelector.vue?vue&type=style&index=0&id=5fa2bcf2&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSelector.vue?vue&type=style&index=0&id=5fa2bcf2&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MapSelector.vue?vue&type=template&id=5fa2bcf2&scoped=true&\"\nimport script from \"./MapSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./MapSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapSelector.vue?vue&type=style&index=0&id=5fa2bcf2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fa2bcf2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"v-tabs\",\n        {\n          attrs: { centered: \"\" },\n          model: {\n            value: _vm.tab,\n            callback: function ($$v) {\n              _vm.tab = $$v\n            },\n            expression: \"tab\",\n          },\n        },\n        [\n          _c(\"v-tab\", [_vm._v(\"OSM importer\")]),\n          _vm._v(\" \"),\n          _c(\"v-tab\", [_vm._v(\"GTFS importer\")]),\n          _vm._v(\" \"),\n          _c(\"v-tab\", [_vm._v(\"Matrix Road Caster\")]),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _vm.tab === 1\n        ? _c(\n            \"v-tabs\",\n            {\n              staticClass: \"subtabs\",\n              attrs: { centered: \"\" },\n              model: {\n                value: _vm.subtab,\n                callback: function ($$v) {\n                  _vm.subtab = $$v\n                },\n                expression: \"subtab\",\n              },\n            },\n            [\n              _c(\"v-tab\", [_vm._v(\"Zip importer\")]),\n              _vm._v(\" \"),\n              _c(\"v-tab\", [_vm._v(\"Web importer\")]),\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"layout\" },\n        [\n          _c(\"div\", { staticClass: \"layout-overlay\" }),\n          _vm._v(\" \"),\n          _vm.tab === 0\n            ? _c(\"OSMImporter\")\n            : _vm.tab === 1 && _vm.subtab === 0\n            ? _c(\"GTFSZipImporter\")\n            : _vm.tab === 1 && _vm.subtab === 1\n            ? _c(\"GTFSWebImporter\")\n            : _vm.tab === 2\n            ? _c(\"MatrixRoadCaster\")\n            : _vm._e(),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"section\",\n    [\n      _c(\n        \"v-card\",\n        { staticClass: \"card\" },\n        [\n          _c(\"v-card-title\", [\n            _vm._v(\n              \"\\n      \" +\n                _vm._s(_vm.$gettext(\"Import OSM network in bounding box\")) +\n                \"\\n    \"\n            ),\n          ]),\n          _vm._v(\" \"),\n          _c(\"v-spacer\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-subtitle\",\n            [\n              _vm.error\n                ? _c(\n                    \"v-alert\",\n                    {\n                      attrs: {\n                        dense: \"\",\n                        width: \"50rem\",\n                        outlined: \"\",\n                        text: \"\",\n                        type: \"error\",\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(\n                            _vm.$gettext(\n                              \"There as been an error while importing OSM network. \\\n          Please try again. If the problem persist, contact us.\"\n                            )\n                          ) +\n                          \"\\n        \"\n                      ),\n                      _vm._l(Object.keys(_vm.errorMessage), function (key) {\n                        return _c(\"p\", { key: key }, [\n                          _c(\"b\", [_vm._v(_vm._s(key) + \": \")]),\n                          _vm._v(_vm._s(_vm.errorMessage[key]) + \"\\n        \"),\n                        ])\n                      }),\n                    ],\n                    2\n                  )\n                : _vm._e(),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-actions\",\n            [_c(\"MapSelector\", { on: { change: _vm.getBBOX } })],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"v-divider\"),\n          _vm._v(\" \"),\n          _c(\n            \"v-card-actions\",\n            [\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\"v-select\", {\n                attrs: {\n                  items: _vm.highwayList,\n                  attach: \"\",\n                  chips: \"\",\n                  \"menu-props\": { top: true, offsetY: true },\n                  label: \"Highways to import\",\n                  multiple: \"\",\n                },\n                scopedSlots: _vm._u([\n                  {\n                    key: \"selection\",\n                    fn: function ({ item, index }) {\n                      return [\n                        index <= 0\n                          ? _c(\"v-chip\", [_c(\"span\", [_vm._v(_vm._s(item))])])\n                          : _vm._e(),\n                        _vm._v(\" \"),\n                        index === 1\n                          ? _c(\n                              \"span\",\n                              { staticClass: \"grey--text text-caption\" },\n                              [\n                                _vm._v(\n                                  \"\\n            (+\" +\n                                    _vm._s(\n                                      _vm.selectedHighway.length -\n                                        1 +\n                                        \" \" +\n                                        _vm.$gettext(\"more\")\n                                    ) +\n                                    \" )\\n          \"\n                                ),\n                              ]\n                            )\n                          : _vm._e(),\n                      ]\n                    },\n                  },\n                ]),\n                model: {\n                  value: _vm.selectedHighway,\n                  callback: function ($$v) {\n                    _vm.selectedHighway = $$v\n                  },\n                  expression: \"selectedHighway\",\n                },\n              }),\n              _vm._v(\" \"),\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  attrs: {\n                    text: \"\",\n                    outlined: \"\",\n                    color: \"success\",\n                    loading: _vm.running,\n                    disabled: _vm.running,\n                  },\n                  on: { click: _vm.importOSM },\n                },\n                [\n                  _vm._v(\n                    \"\\n        \" + _vm._s(_vm.$gettext(\"Download\")) + \"\\n      \"\n                  ),\n                ]\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: { persistent: \"\", \"max-width\": \"500\" },\n          on: {\n            keydown: [\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                )\n                  return null\n                return _vm.applyOverwriteDialog.apply(null, arguments)\n              },\n              function ($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                    \"Esc\",\n                    \"Escape\",\n                  ])\n                )\n                  return null\n                _vm.showOverwriteDialog = false\n              },\n            ],\n          },\n          model: {\n            value: _vm.showOverwriteDialog,\n            callback: function ($$v) {\n              _vm.showOverwriteDialog = $$v\n            },\n            expression: \"showOverwriteDialog\",\n          },\n        },\n        [\n          _c(\n            \"v-card\",\n            [\n              _c(\"v-card-title\", { staticClass: \"text-h5\" }, [\n                _vm._v(\n                  \"\\n        \" +\n                    _vm._s(_vm.$gettext(\"Overwrite current road network ?\")) +\n                    \"\\n      \"\n                ),\n              ]),\n              _vm._v(\" \"),\n              _c(\n                \"v-card-actions\",\n                [\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"regular\" },\n                      on: {\n                        click: function ($event) {\n                          _vm.showOverwriteDialog = !_vm.showOverwriteDialog\n                        },\n                      },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"No\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: { click: _vm.applyOverwriteDialog },\n                    },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(_vm.$gettext(\"Yes\")) +\n                          \"\\n        \"\n                      ),\n                    ]\n                  ),\n                ],\n                1\n              ),\n            ],\n            1\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport { highwayList } from '@constants/highway.js'\nimport linksBase from '@static/links_base.geojson'\nimport nodesBase from '@static/nodes_base.geojson'\nimport MapSelector from './MapSelector.vue'\n\nexport default {\n  name: 'OSMImporter',\n  components: {\n    MapSelector,\n  },\n\n  data () {\n    return {\n      showOverwriteDialog: false,\n      poly: null,\n      nodes: {},\n      selectedHighway: null,\n      highwayList: highwayList,\n    }\n  },\n  computed: {\n    rlinksIsEmpty () { return this.$store.getters.rlinksIsEmpty },\n    highway () { return this.$store.getters['runOSM/highway'] },\n    callID () { return this.$store.getters['runOSM/callID'] },\n    running () { return this.$store.getters['runOSM/running'] },\n    error () { return this.$store.getters['runOSM/error'] },\n    errorMessage () { return this.$store.getters['runOSM/errorMessage'] },\n  },\n  watch: {\n    selectedHighway (val) { this.$store.commit('runOSM/changeHighway', val) },\n  },\n\n  created () {\n    this.selectedHighway = this.highway\n  },\n  methods: {\n    getBBOX (val) {\n      this.poly = val\n    },\n    importOSM () {\n      if (this.rlinksIsEmpty) {\n        this.$store.commit('runOSM/setCallID')\n        this.$store.dispatch('runOSM/startExecution', { coords: this.poly.geometry, method: this.poly.style })\n      } else {\n        this.showOverwriteDialog = true\n      }\n    },\n\n    applyOverwriteDialog () {\n      this.$store.commit('loadrLinks', linksBase)\n      this.$store.commit('loadrNodes', nodesBase)\n      this.showOverwriteDialog = false\n      this.importOSM()\n    },\n  },\n\n}\n</script>\n<template>\n  <section>\n    <v-card\n      class=\"card\"\n    >\n      <v-card-title>\n        {{ $gettext(\"Import OSM network in bounding box\") }}\n      </v-card-title>\n      <v-spacer />\n      <v-card-subtitle>\n        <v-alert\n          v-if=\"error\"\n          dense\n          width=\"50rem\"\n          outlined\n          text\n          type=\"error\"\n        >\n          {{ $gettext(\"There as been an error while importing OSM network. \\\n            Please try again. If the problem persist, contact us.\") }}\n          <p\n            v-for=\"key in Object.keys(errorMessage)\"\n            :key=\"key\"\n          >\n            <b>{{ key }}: </b>{{ errorMessage[key] }}\n          </p>\n        </v-alert>\n      </v-card-subtitle>\n      <v-card-actions>\n        <MapSelector @change=\"getBBOX\" />\n      </v-card-actions>\n      <v-divider />\n\n      <v-card-actions>\n        <v-spacer />\n        <v-select\n          v-model=\"selectedHighway\"\n          :items=\"highwayList\"\n          attach\n          chips\n          :menu-props=\"{ top: true, offsetY: true }\"\n          label=\"Highways to import\"\n          multiple\n        >\n          <template v-slot:selection=\"{ item, index }\">\n            <v-chip v-if=\"index <= 0\">\n              <span>{{ item }}</span>\n            </v-chip>\n            <span\n              v-if=\"index === 1\"\n              class=\"grey--text text-caption\"\n            >\n              (+{{ selectedHighway.length - 1 + ' ' + $gettext('more') }} )\n            </span>\n          </template>\n        </v-select>\n        <v-spacer />\n        <v-btn\n          text\n          outlined\n          color=\"success\"\n          :loading=\"running\"\n          :disabled=\"running\"\n          @click=\"importOSM\"\n        >\n          {{ $gettext(\"Download\") }}\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n    <v-dialog\n      v-model=\"showOverwriteDialog\"\n      persistent\n      max-width=\"500\"\n      @keydown.enter=\"applyOverwriteDialog\"\n      @keydown.esc=\"showOverwriteDialog=false\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          {{ $gettext(\"Overwrite current road network ?\") }}\n        </v-card-title>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"regular\"\n            @click=\"showOverwriteDialog = !showOverwriteDialog\"\n          >\n            {{ $gettext(\"No\") }}\n          </v-btn>\n\n          <v-btn\n            color=\"primary\"\n            @click=\"applyOverwriteDialog\"\n          >\n            {{ $gettext(\"Yes\") }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n\n.card {\n  height: 100%;\n  overflow-y: auto;\n  padding: 2.5rem;\n}\n.map {\n  max-width: 100rem;\n  width:50rem;\n  height: 35rem;\n}\n.v-card__text {\n    padding: 0px 24px 0px;\n}\n.freeform-button {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=style&index=0&id=49dba066&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OSMImporter.vue?vue&type=style&index=0&id=49dba066&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./OSMImporter.vue?vue&type=template&id=49dba066&scoped=true&\"\nimport script from \"./OSMImporter.vue?vue&type=script&lang=js&\"\nexport * from \"./OSMImporter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OSMImporter.vue?vue&type=style&index=0&id=49dba066&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49dba066\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=script&lang=js&\"","<script>\nimport OSMImporter from '@comp/microservices/OSMImporter.vue'\nconst GTFSWebImporter = () => import('@comp/microservices/GTFSWebImporter.vue')\nconst GTFSZipImporter = () => import('@comp/microservices/GTFSZipImporter.vue')\nconst MatrixRoadCaster = () => import('@comp/microservices/MatrixRoadCaster.vue')\n\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Microservices',\n  components: {\n    MatrixRoadCaster,\n    OSMImporter,\n    GTFSWebImporter,\n    GTFSZipImporter,\n  },\n  props: {\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data () {\n    return {\n      tab: 0,\n      subtab: 0,\n    }\n  },\n}\n</script>\n<template>\n  <section>\n    <v-tabs\n      v-model=\"tab\"\n      centered\n    >\n      <v-tab>OSM importer</v-tab>\n      <v-tab>GTFS importer</v-tab>\n      <v-tab>Matrix Road Caster</v-tab>\n    </v-tabs>\n    <v-tabs\n      v-if=\"tab===1\"\n      v-model=\"subtab\"\n      class=\"subtabs\"\n      centered\n    >\n      <v-tab>Zip importer</v-tab>\n      <v-tab>Web importer</v-tab>\n    </v-tabs>\n    <div class=\"layout\">\n      <div class=\"layout-overlay\" />\n      <OSMImporter v-if=\"tab===0 \" />\n\n      <GTFSZipImporter v-else-if=\"tab===1 && subtab===0\" />\n\n      <GTFSWebImporter v-else-if=\"tab===1 && subtab===1\" />\n\n      <MatrixRoadCaster v-else-if=\"tab===2\" />\n    </div>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n.layout {\n  position: absolute;\n  width: calc(100%);\n  height: calc(100% - 50px);\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  align-items: center;\n}\n.layout-overlay {\n  height: 100%;\n  width: 100%;\n  background-color:var(--v-background-base);\n\n  position: absolute;\n}\n.subtabs{\n  border-top: 1px solid var(--v-background-lighten3)\n\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=style&index=0&id=3e11cc5a&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-1.use[2]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Microservices.vue?vue&type=style&index=0&id=3e11cc5a&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Microservices.vue?vue&type=template&id=3e11cc5a&scoped=true&\"\nimport script from \"./Microservices.vue?vue&type=script&lang=js&\"\nexport * from \"./Microservices.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Microservices.vue?vue&type=style&index=0&id=3e11cc5a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e11cc5a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","render","_vm","this","_c","_self","key","mapStyle","staticClass","attrs","center","$store","getters","mapCenter","zoom","mapZoom","mapboxPublicKey","on","load","onMapLoaded","click","addNode","position","_v","fab","small","toggleFreeForm","color","_s","freeForm","source","type","data","poly","promoteId","layer","interactive","paint","$vuetify","theme","currentTheme","linksprimary","mouseover","onHover","mouseleave","offHover","mapIsLoaded","map","nodes","nodesHeader","active","move","moveNode","rightClick","removeNode","_e","_withStripped","buffer","darkgrey","onCursor","offCursor","mousedown","contextmenu","name","components","MglGeojsonLayer","props","event","hoveredStateId","keepHovering","dragNode","computed","watch","created","methods","getCanvas","style","cursor","uniqueArray","Set","mapboxEvent","features","item","layerId","setFeatureState","hover","selectedFeature","querySourceFeatures","filter","$emit","originalEvent","button","preventDefault","properties","onMove","stopMovingNode","lngLat","Object","values","off","events","MglMap","MglNavigationControl","MglScaleControl","NodesLayer","rlinksIsEmpty","removeLayer","err","beforeDestroy","getCenter","commit","lng","lat","getZoom","async","dragRotate","disable","getBounds","importPoly","console","log","mapbbox","bbox","_sw","_ne","units","geometry","coordinates","reverse","geom","val","getNodes","text","autoClose","structuredClone","slice","length","forEach","point","idx","index","generate","coordinatesIndex","linkGeom","clickedPoint","sliceIndex","splice","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","centered","model","value","tab","callback","$$v","expression","subtab","$gettext","error","dense","width","outlined","_l","keys","errorMessage","change","getBBOX","items","highwayList","attach","chips","top","offsetY","label","multiple","scopedSlots","_u","fn","selectedHighway","loading","running","disabled","importOSM","persistent","keydown","$event","indexOf","_k","keyCode","applyOverwriteDialog","apply","arguments","showOverwriteDialog","MapSelector","highway","callID","dispatch","coords","method","MatrixRoadCaster","OSMImporter","GTFSWebImporter","GTFSZipImporter","Array","default"],"sourceRoot":""}